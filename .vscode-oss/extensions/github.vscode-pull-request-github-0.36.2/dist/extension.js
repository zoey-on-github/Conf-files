(()=>{var qp={9669:(c,ne,q)=>{c.exports=q(1609)},7970:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(6026),ie=q(4097),U=q(5327),M=q(8605),L=q(7211),I=q(938).http,P=q(938).https,$=q(8835),G=q(8761),z=q(696),O=q(5061),V=q(481),B=/https:?/;function j(ce,te,Se){if(ce.hostname=te.host,ce.host=te.host,ce.port=te.port,ce.path=Se,te.auth){var me=Buffer.from(te.auth.username+":"+te.auth.password,"utf8").toString("base64");ce.headers["Proxy-Authorization"]="Basic "+me}ce.beforeRedirect=function(pe){pe.headers.host=pe.host,j(pe,te,pe.href)}}c.exports=function(te){return new Promise(function(me,De){var pe=function(wt){me(wt)},oe=function(wt){De(wt)},ee=te.data,J=te.headers;if("User-Agent"in J||"user-agent"in J?!J["User-Agent"]&&!J["user-agent"]&&(delete J["User-Agent"],delete J["user-agent"]):J["User-Agent"]="axios/"+z.version,ee&&!W.isStream(ee)){if(!Buffer.isBuffer(ee))if(W.isArrayBuffer(ee))ee=Buffer.from(new Uint8Array(ee));else if(W.isString(ee))ee=Buffer.from(ee,"utf-8");else return oe(O("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",te));J["Content-Length"]=ee.length}var X=void 0;if(te.auth){var he=te.auth.username||"",be=te.auth.password||"";X=he+":"+be}var Ee=ie(te.baseURL,te.url),Pe=$.parse(Ee),ke=Pe.protocol||"http:";if(!X&&Pe.auth){var ze=Pe.auth.split(":"),je=ze[0]||"",ct=ze[1]||"";X=je+":"+ct}X&&delete J.Authorization;var pt=B.test(ke),$t=pt?te.httpsAgent:te.httpAgent,Xt={path:U(Pe.path,te.params,te.paramsSerializer).replace(/^\?/,""),method:te.method.toUpperCase(),headers:J,agent:$t,agents:{http:te.httpAgent,https:te.httpsAgent},auth:X};te.socketPath?Xt.socketPath=te.socketPath:(Xt.hostname=Pe.hostname,Xt.port=Pe.port);var nr=te.proxy;if(!nr&&nr!==!1){var Jt=ke.slice(0,-1)+"_proxy",Or=process.env[Jt]||process.env[Jt.toUpperCase()];if(Or){var Ur=$.parse(Or),Sn=process.env.no_proxy||process.env.NO_PROXY,Rs=!0;if(Sn){var ui=Sn.split(",").map(function(wt){return wt.trim()});Rs=!ui.some(function(wt){return wt?wt==="*"||wt[0]==="."&&Pe.hostname.substr(Pe.hostname.length-wt.length)===wt?!0:Pe.hostname===wt:!1})}if(Rs&&(nr={host:Ur.hostname,port:Ur.port,protocol:Ur.protocol},Ur.auth)){var ts=Ur.auth.split(":");nr.auth={username:ts[0],password:ts[1]}}}}nr&&(Xt.headers.host=Pe.hostname+(Pe.port?":"+Pe.port:""),j(Xt,nr,ke+"//"+Pe.hostname+(Pe.port?":"+Pe.port:"")+Xt.path));var li,$n=pt&&(nr?B.test(nr.protocol):!0);te.transport?li=te.transport:te.maxRedirects===0?li=$n?L:M:(te.maxRedirects&&(Xt.maxRedirects=te.maxRedirects),li=$n?P:I),te.maxBodyLength>-1&&(Xt.maxBodyLength=te.maxBodyLength);var Gt=li.request(Xt,function(wt){if(!Gt.aborted){var fr=wt,Gn=wt.req||Gt;if(wt.statusCode!==204&&Gn.method!=="HEAD"&&te.decompress!==!1)switch(wt.headers["content-encoding"]){case"gzip":case"compress":case"deflate":fr=fr.pipe(G.createUnzip()),delete wt.headers["content-encoding"];break}var di={status:wt.statusCode,statusText:wt.statusMessage,headers:wt.headers,config:te,request:Gn};if(te.responseType==="stream")di.data=fr,Z(pe,oe,di);else{var hi=[],rs=0;fr.on("data",function(sr){hi.push(sr),rs+=sr.length,te.maxContentLength>-1&&rs>te.maxContentLength&&(fr.destroy(),oe(O("maxContentLength size of "+te.maxContentLength+" exceeded",te,null,Gn)))}),fr.on("error",function(sr){Gt.aborted||oe(V(sr,te,null,Gn))}),fr.on("end",function(){var sr=Buffer.concat(hi);te.responseType!=="arraybuffer"&&(sr=sr.toString(te.responseEncoding),(!te.responseEncoding||te.responseEncoding==="utf8")&&(sr=W.stripBOM(sr))),di.data=sr,Z(pe,oe,di)})}}});if(Gt.on("error",function(wt){Gt.aborted&&wt.code!=="ERR_FR_TOO_MANY_REDIRECTS"||oe(V(wt,te,null,Gt))}),te.timeout){var ci=parseInt(te.timeout,10);if(isNaN(ci)){oe(O("error trying to parse `config.timeout` to int",te,"ERR_PARSE_TIMEOUT",Gt));return}Gt.setTimeout(ci,function(){Gt.abort(),oe(O("timeout of "+ci+"ms exceeded",te,te.transitional&&te.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Gt))})}te.cancelToken&&te.cancelToken.promise.then(function(wt){Gt.aborted||(Gt.abort(),oe(wt))}),W.isStream(ee)?ee.on("error",function(wt){oe(V(wt,te,null,Gt))}).pipe(Gt):Gt.end(ee)})}},5448:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(6026),ie=q(4372),U=q(5327),M=q(4097),L=q(4109),I=q(7985),P=q(5061);c.exports=function(G){return new Promise(function(O,V){var B=G.data,j=G.headers,ce=G.responseType;W.isFormData(B)&&delete j["Content-Type"];var te=new XMLHttpRequest;if(G.auth){var Se=G.auth.username||"",me=G.auth.password?unescape(encodeURIComponent(G.auth.password)):"";j.Authorization="Basic "+btoa(Se+":"+me)}var De=M(G.baseURL,G.url);te.open(G.method.toUpperCase(),U(De,G.params,G.paramsSerializer),!0),te.timeout=G.timeout;function pe(){if(!!te){var ee="getAllResponseHeaders"in te?L(te.getAllResponseHeaders()):null,J=!ce||ce==="text"||ce==="json"?te.responseText:te.response,X={data:J,status:te.status,statusText:te.statusText,headers:ee,config:G,request:te};Z(O,V,X),te=null}}if("onloadend"in te?te.onloadend=pe:te.onreadystatechange=function(){!te||te.readyState!==4||te.status===0&&!(te.responseURL&&te.responseURL.indexOf("file:")===0)||setTimeout(pe)},te.onabort=function(){!te||(V(P("Request aborted",G,"ECONNABORTED",te)),te=null)},te.onerror=function(){V(P("Network Error",G,null,te)),te=null},te.ontimeout=function(){var J="timeout of "+G.timeout+"ms exceeded";G.timeoutErrorMessage&&(J=G.timeoutErrorMessage),V(P(J,G,G.transitional&&G.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",te)),te=null},W.isStandardBrowserEnv()){var oe=(G.withCredentials||I(De))&&G.xsrfCookieName?ie.read(G.xsrfCookieName):void 0;oe&&(j[G.xsrfHeaderName]=oe)}"setRequestHeader"in te&&W.forEach(j,function(J,X){typeof B=="undefined"&&X.toLowerCase()==="content-type"?delete j[X]:te.setRequestHeader(X,J)}),W.isUndefined(G.withCredentials)||(te.withCredentials=!!G.withCredentials),ce&&ce!=="json"&&(te.responseType=G.responseType),typeof G.onDownloadProgress=="function"&&te.addEventListener("progress",G.onDownloadProgress),typeof G.onUploadProgress=="function"&&te.upload&&te.upload.addEventListener("progress",G.onUploadProgress),G.cancelToken&&G.cancelToken.promise.then(function(J){!te||(te.abort(),V(J),te=null)}),B||(B=null),te.send(B)})}},1609:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(1849),ie=q(321),U=q(7185),M=q(5655);function L(P){var $=new ie(P),G=Z(ie.prototype.request,$);return W.extend(G,ie.prototype,$),W.extend(G,$),G}var I=L(M);I.Axios=ie,I.create=function($){return L(U(I.defaults,$))},I.Cancel=q(5263),I.CancelToken=q(4972),I.isCancel=q(6502),I.all=function($){return Promise.all($)},I.spread=q(8713),I.isAxiosError=q(6268),c.exports=I,c.exports.default=I},5263:c=>{"use strict";function ne(q){this.message=q}ne.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ne.prototype.__CANCEL__=!0,c.exports=ne},4972:(c,ne,q)=>{"use strict";var W=q(5263);function Z(ie){if(typeof ie!="function")throw new TypeError("executor must be a function.");var U;this.promise=new Promise(function(I){U=I});var M=this;ie(function(I){M.reason||(M.reason=new W(I),U(M.reason))})}Z.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Z.source=function(){var U,M=new Z(function(I){U=I});return{token:M,cancel:U}},c.exports=Z},6502:c=>{"use strict";c.exports=function(q){return!!(q&&q.__CANCEL__)}},321:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(5327),ie=q(782),U=q(3572),M=q(7185),L=q(4875),I=L.validators;function P($){this.defaults=$,this.interceptors={request:new ie,response:new ie}}P.prototype.request=function(G){typeof G=="string"?(G=arguments[1]||{},G.url=arguments[0]):G=G||{},G=M(this.defaults,G),G.method?G.method=G.method.toLowerCase():this.defaults.method?G.method=this.defaults.method.toLowerCase():G.method="get";var z=G.transitional;z!==void 0&&L.assertOptions(z,{silentJSONParsing:I.transitional(I.boolean,"1.0.0"),forcedJSONParsing:I.transitional(I.boolean,"1.0.0"),clarifyTimeoutError:I.transitional(I.boolean,"1.0.0")},!1);var O=[],V=!0;this.interceptors.request.forEach(function(pe){typeof pe.runWhen=="function"&&pe.runWhen(G)===!1||(V=V&&pe.synchronous,O.unshift(pe.fulfilled,pe.rejected))});var B=[];this.interceptors.response.forEach(function(pe){B.push(pe.fulfilled,pe.rejected)});var j;if(!V){var ce=[U,void 0];for(Array.prototype.unshift.apply(ce,O),ce=ce.concat(B),j=Promise.resolve(G);ce.length;)j=j.then(ce.shift(),ce.shift());return j}for(var te=G;O.length;){var Se=O.shift(),me=O.shift();try{te=Se(te)}catch(De){me(De);break}}try{j=U(te)}catch(De){return Promise.reject(De)}for(;B.length;)j=j.then(B.shift(),B.shift());return j},P.prototype.getUri=function(G){return G=M(this.defaults,G),Z(G.url,G.params,G.paramsSerializer).replace(/^\?/,"")},W.forEach(["delete","get","head","options"],function(G){P.prototype[G]=function(z,O){return this.request(M(O||{},{method:G,url:z,data:(O||{}).data}))}}),W.forEach(["post","put","patch"],function(G){P.prototype[G]=function(z,O,V){return this.request(M(V||{},{method:G,url:z,data:O}))}}),c.exports=P},782:(c,ne,q)=>{"use strict";var W=q(4867);function Z(){this.handlers=[]}Z.prototype.use=function(U,M,L){return this.handlers.push({fulfilled:U,rejected:M,synchronous:L?L.synchronous:!1,runWhen:L?L.runWhen:null}),this.handlers.length-1},Z.prototype.eject=function(U){this.handlers[U]&&(this.handlers[U]=null)},Z.prototype.forEach=function(U){W.forEach(this.handlers,function(L){L!==null&&U(L)})},c.exports=Z},4097:(c,ne,q)=>{"use strict";var W=q(1793),Z=q(9002);c.exports=function(U,M){return U&&!W(M)?Z(U,M):M}},5061:(c,ne,q)=>{"use strict";var W=q(481);c.exports=function(ie,U,M,L,I){var P=new Error(ie);return W(P,U,M,L,I)}},3572:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(8527),ie=q(6502),U=q(5655);function M(L){L.cancelToken&&L.cancelToken.throwIfRequested()}c.exports=function(I){M(I),I.headers=I.headers||{},I.data=Z.call(I,I.data,I.headers,I.transformRequest),I.headers=W.merge(I.headers.common||{},I.headers[I.method]||{},I.headers),W.forEach(["delete","get","head","post","put","patch","common"],function(G){delete I.headers[G]});var P=I.adapter||U.adapter;return P(I).then(function(G){return M(I),G.data=Z.call(I,G.data,G.headers,I.transformResponse),G},function(G){return ie(G)||(M(I),G&&G.response&&(G.response.data=Z.call(I,G.response.data,G.response.headers,I.transformResponse))),Promise.reject(G)})}},481:c=>{"use strict";c.exports=function(q,W,Z,ie,U){return q.config=W,Z&&(q.code=Z),q.request=ie,q.response=U,q.isAxiosError=!0,q.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},q}},7185:(c,ne,q)=>{"use strict";var W=q(4867);c.exports=function(ie,U){U=U||{};var M={},L=["url","method","data"],I=["headers","auth","proxy","params"],P=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],$=["validateStatus"];function G(B,j){return W.isPlainObject(B)&&W.isPlainObject(j)?W.merge(B,j):W.isPlainObject(j)?W.merge({},j):W.isArray(j)?j.slice():j}function z(B){W.isUndefined(U[B])?W.isUndefined(ie[B])||(M[B]=G(void 0,ie[B])):M[B]=G(ie[B],U[B])}W.forEach(L,function(j){W.isUndefined(U[j])||(M[j]=G(void 0,U[j]))}),W.forEach(I,z),W.forEach(P,function(j){W.isUndefined(U[j])?W.isUndefined(ie[j])||(M[j]=G(void 0,ie[j])):M[j]=G(void 0,U[j])}),W.forEach($,function(j){j in U?M[j]=G(ie[j],U[j]):j in ie&&(M[j]=G(void 0,ie[j]))});var O=L.concat(I).concat(P).concat($),V=Object.keys(ie).concat(Object.keys(U)).filter(function(j){return O.indexOf(j)===-1});return W.forEach(V,z),M}},6026:(c,ne,q)=>{"use strict";var W=q(5061);c.exports=function(ie,U,M){var L=M.config.validateStatus;!M.status||!L||L(M.status)?ie(M):U(W("Request failed with status code "+M.status,M.config,null,M.request,M))}},8527:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(5655);c.exports=function(U,M,L){var I=this||Z;return W.forEach(L,function($){U=$.call(I,U,M)}),U}},5655:(c,ne,q)=>{"use strict";var W=q(4867),Z=q(6016),ie=q(481),U={"Content-Type":"application/x-www-form-urlencoded"};function M($,G){!W.isUndefined($)&&W.isUndefined($["Content-Type"])&&($["Content-Type"]=G)}function L(){var $;return typeof XMLHttpRequest!="undefined"?$=q(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&($=q(7970)),$}function I($,G,z){if(W.isString($))try{return(G||JSON.parse)($),W.trim($)}catch(O){if(O.name!=="SyntaxError")throw O}return(z||JSON.stringify)($)}var P={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:L(),transformRequest:[function(G,z){return Z(z,"Accept"),Z(z,"Content-Type"),W.isFormData(G)||W.isArrayBuffer(G)||W.isBuffer(G)||W.isStream(G)||W.isFile(G)||W.isBlob(G)?G:W.isArrayBufferView(G)?G.buffer:W.isURLSearchParams(G)?(M(z,"application/x-www-form-urlencoded;charset=utf-8"),G.toString()):W.isObject(G)||z&&z["Content-Type"]==="application/json"?(M(z,"application/json"),I(G)):G}],transformResponse:[function(G){var z=this.transitional,O=z&&z.silentJSONParsing,V=z&&z.forcedJSONParsing,B=!O&&this.responseType==="json";if(B||V&&W.isString(G)&&G.length)try{return JSON.parse(G)}catch(j){if(B)throw j.name==="SyntaxError"?ie(j,this,"E_JSON_PARSE"):j}return G}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(G){return G>=200&&G<300}};P.headers={common:{Accept:"application/json, text/plain, */*"}},W.forEach(["delete","get","head"],function(G){P.headers[G]={}}),W.forEach(["post","put","patch"],function(G){P.headers[G]=W.merge(U)}),c.exports=P},1849:c=>{"use strict";c.exports=function(q,W){return function(){for(var ie=new Array(arguments.length),U=0;U<ie.length;U++)ie[U]=arguments[U];return q.apply(W,ie)}}},5327:(c,ne,q)=>{"use strict";var W=q(4867);function Z(ie){return encodeURIComponent(ie).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}c.exports=function(U,M,L){if(!M)return U;var I;if(L)I=L(M);else if(W.isURLSearchParams(M))I=M.toString();else{var P=[];W.forEach(M,function(z,O){z===null||typeof z=="undefined"||(W.isArray(z)?O=O+"[]":z=[z],W.forEach(z,function(B){W.isDate(B)?B=B.toISOString():W.isObject(B)&&(B=JSON.stringify(B)),P.push(Z(O)+"="+Z(B))}))}),I=P.join("&")}if(I){var $=U.indexOf("#");$!==-1&&(U=U.slice(0,$)),U+=(U.indexOf("?")===-1?"?":"&")+I}return U}},9002:c=>{"use strict";c.exports=function(q,W){return W?q.replace(/\/+$/,"")+"/"+W.replace(/^\/+/,""):q}},4372:(c,ne,q)=>{"use strict";var W=q(4867);c.exports=W.isStandardBrowserEnv()?function(){return{write:function(U,M,L,I,P,$){var G=[];G.push(U+"="+encodeURIComponent(M)),W.isNumber(L)&&G.push("expires="+new Date(L).toGMTString()),W.isString(I)&&G.push("path="+I),W.isString(P)&&G.push("domain="+P),$===!0&&G.push("secure"),document.cookie=G.join("; ")},read:function(U){var M=document.cookie.match(new RegExp("(^|;\\s*)("+U+")=([^;]*)"));return M?decodeURIComponent(M[3]):null},remove:function(U){this.write(U,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:c=>{"use strict";c.exports=function(q){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(q)}},6268:c=>{"use strict";c.exports=function(q){return typeof q=="object"&&q.isAxiosError===!0}},7985:(c,ne,q)=>{"use strict";var W=q(4867);c.exports=W.isStandardBrowserEnv()?function(){var ie=/(msie|trident)/i.test(navigator.userAgent),U=document.createElement("a"),M;function L(I){var P=I;return ie&&(U.setAttribute("href",P),P=U.href),U.setAttribute("href",P),{href:U.href,protocol:U.protocol?U.protocol.replace(/:$/,""):"",host:U.host,search:U.search?U.search.replace(/^\?/,""):"",hash:U.hash?U.hash.replace(/^#/,""):"",hostname:U.hostname,port:U.port,pathname:U.pathname.charAt(0)==="/"?U.pathname:"/"+U.pathname}}return M=L(window.location.href),function(P){var $=W.isString(P)?L(P):P;return $.protocol===M.protocol&&$.host===M.host}}():function(){return function(){return!0}}()},6016:(c,ne,q)=>{"use strict";var W=q(4867);c.exports=function(ie,U){W.forEach(ie,function(L,I){I!==U&&I.toUpperCase()===U.toUpperCase()&&(ie[U]=L,delete ie[I])})}},4109:(c,ne,q)=>{"use strict";var W=q(4867),Z=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];c.exports=function(U){var M={},L,I,P;return U&&W.forEach(U.split(`
`),function(G){if(P=G.indexOf(":"),L=W.trim(G.substr(0,P)).toLowerCase(),I=W.trim(G.substr(P+1)),L){if(M[L]&&Z.indexOf(L)>=0)return;L==="set-cookie"?M[L]=(M[L]?M[L]:[]).concat([I]):M[L]=M[L]?M[L]+", "+I:I}}),M}},8713:c=>{"use strict";c.exports=function(q){return function(Z){return q.apply(null,Z)}}},4875:(c,ne,q)=>{"use strict";var W=q(696),Z={};["object","boolean","number","function","string","symbol"].forEach(function(I,P){Z[I]=function(G){return typeof G===I||"a"+(P<1?"n ":" ")+I}});var ie={},U=W.version.split(".");function M(I,P){for(var $=P?P.split("."):U,G=I.split("."),z=0;z<3;z++){if($[z]>G[z])return!0;if($[z]<G[z])return!1}return!1}Z.transitional=function(P,$,G){var z=$&&M($);function O(V,B){return"[Axios v"+W.version+"] Transitional option '"+V+"'"+B+(G?". "+G:"")}return function(V,B,j){if(P===!1)throw new Error(O(B," has been removed in "+$));return z&&!ie[B]&&(ie[B]=!0,console.warn(O(B," has been deprecated since v"+$+" and will be removed in the near future"))),P?P(V,B,j):!0}};function L(I,P,$){if(typeof I!="object")throw new TypeError("options must be an object");for(var G=Object.keys(I),z=G.length;z-- >0;){var O=G[z],V=P[O];if(V){var B=I[O],j=B===void 0||V(B,O,I);if(j!==!0)throw new TypeError("option "+O+" must be "+j);continue}if($!==!0)throw Error("Unknown option "+O)}}c.exports={isOlderVersion:M,assertOptions:L,validators:Z}},4867:(c,ne,q)=>{"use strict";var W=q(1849),Z=Object.prototype.toString;function ie(X){return Z.call(X)==="[object Array]"}function U(X){return typeof X=="undefined"}function M(X){return X!==null&&!U(X)&&X.constructor!==null&&!U(X.constructor)&&typeof X.constructor.isBuffer=="function"&&X.constructor.isBuffer(X)}function L(X){return Z.call(X)==="[object ArrayBuffer]"}function I(X){return typeof FormData!="undefined"&&X instanceof FormData}function P(X){var he;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?he=ArrayBuffer.isView(X):he=X&&X.buffer&&X.buffer instanceof ArrayBuffer,he}function $(X){return typeof X=="string"}function G(X){return typeof X=="number"}function z(X){return X!==null&&typeof X=="object"}function O(X){if(Z.call(X)!=="[object Object]")return!1;var he=Object.getPrototypeOf(X);return he===null||he===Object.prototype}function V(X){return Z.call(X)==="[object Date]"}function B(X){return Z.call(X)==="[object File]"}function j(X){return Z.call(X)==="[object Blob]"}function ce(X){return Z.call(X)==="[object Function]"}function te(X){return z(X)&&ce(X.pipe)}function Se(X){return typeof URLSearchParams!="undefined"&&X instanceof URLSearchParams}function me(X){return X.trim?X.trim():X.replace(/^\s+|\s+$/g,"")}function De(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function pe(X,he){if(!(X===null||typeof X=="undefined"))if(typeof X!="object"&&(X=[X]),ie(X))for(var be=0,Ee=X.length;be<Ee;be++)he.call(null,X[be],be,X);else for(var Pe in X)Object.prototype.hasOwnProperty.call(X,Pe)&&he.call(null,X[Pe],Pe,X)}function oe(){var X={};function he(Pe,ke){O(X[ke])&&O(Pe)?X[ke]=oe(X[ke],Pe):O(Pe)?X[ke]=oe({},Pe):ie(Pe)?X[ke]=Pe.slice():X[ke]=Pe}for(var be=0,Ee=arguments.length;be<Ee;be++)pe(arguments[be],he);return X}function ee(X,he,be){return pe(he,function(Pe,ke){be&&typeof Pe=="function"?X[ke]=W(Pe,be):X[ke]=Pe}),X}function J(X){return X.charCodeAt(0)===65279&&(X=X.slice(1)),X}c.exports={isArray:ie,isArrayBuffer:L,isBuffer:M,isFormData:I,isArrayBufferView:P,isString:$,isNumber:G,isObject:z,isPlainObject:O,isUndefined:U,isDate:V,isFile:B,isBlob:j,isFunction:ce,isStream:te,isURLSearchParams:Se,isStandardBrowserEnv:De,forEach:pe,merge:oe,extend:ee,trim:me,stripBOM:J}},696:c=>{"use strict";c.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(c,ne,q)=>{var W=q(3698),Z=q(2505),ie=q(5382),U=Function.bind,M=U.bind(U);function L(z,O,V){var B=M(ie,null).apply(null,V?[O,V]:[O]);z.api={remove:B},z.remove=B,["before","error","after","wrap"].forEach(function(j){var ce=V?[O,j,V]:[O,j];z[j]=z.api[j]=M(Z,null).apply(null,ce)})}function I(){var z="h",O={registry:{}},V=W.bind(null,O,z);return L(V,O,z),V}function P(){var z={registry:{}},O=W.bind(null,z);return L(O,z),O}var $=!1;function G(){return $||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),$=!0),P()}G.Singular=I.bind(),G.Collection=P.bind(),c.exports=G,c.exports.Hook=G,c.exports.Singular=G.Singular,c.exports.Collection=G.Collection},2505:c=>{c.exports=ne;function ne(q,W,Z,ie){var U=ie;q.registry[Z]||(q.registry[Z]=[]),W==="before"&&(ie=function(M,L){return Promise.resolve().then(U.bind(null,L)).then(M.bind(null,L))}),W==="after"&&(ie=function(M,L){var I;return Promise.resolve().then(M.bind(null,L)).then(function(P){return I=P,U(I,L)}).then(function(){return I})}),W==="error"&&(ie=function(M,L){return Promise.resolve().then(M.bind(null,L)).catch(function(I){return U(I,L)})}),q.registry[Z].push({hook:ie,orig:U})}},3698:c=>{c.exports=ne;function ne(q,W,Z,ie){if(typeof Z!="function")throw new Error("method for before hook must be a function");return ie||(ie={}),Array.isArray(W)?W.reverse().reduce(function(U,M){return ne.bind(null,q,M,U,ie)},Z)():Promise.resolve().then(function(){return q.registry[W]?q.registry[W].reduce(function(U,M){return M.hook.bind(null,U,ie)},Z)():Z(ie)})}},5382:c=>{c.exports=ne;function ne(q,W,Z){if(!!q.registry[W]){var ie=q.registry[W].map(function(U){return U.orig}).indexOf(Z);ie!==-1&&q.registry[W].splice(ie,1)}}},5175:c=>{"use strict";function ne(q){if(!/^data:/i.test(q))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');q=q.replace(/\r?\n/g,"");const W=q.indexOf(",");if(W===-1||W<=4)throw new TypeError("malformed data: URI");const Z=q.substring(5,W).split(";");let ie="",U=!1;const M=Z[0]||"text/plain";let L=M;for(let G=1;G<Z.length;G++)Z[G]==="base64"?U=!0:(L+=`;${Z[G]}`,Z[G].indexOf("charset=")===0&&(ie=Z[G].substring(8)));!Z[0]&&!ie.length&&(L+=";charset=US-ASCII",ie="US-ASCII");const I=U?"base64":"ascii",P=unescape(q.substring(W+1)),$=Buffer.from(P,I);return $.type=M,$.typeFull=L,$.charset=ie,$}c.exports=ne},7484:function(c){(function(ne,q){c.exports=q()})(this,function(){"use strict";var ne="millisecond",q="second",W="minute",Z="hour",ie="day",U="week",M="month",L="quarter",I="year",P="date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},O=function(oe,ee,J){var X=String(oe);return!X||X.length>=ee?oe:""+Array(ee+1-X.length).join(J)+oe},V={s:O,z:function(oe){var ee=-oe.utcOffset(),J=Math.abs(ee),X=Math.floor(J/60),he=J%60;return(ee<=0?"+":"-")+O(X,2,"0")+":"+O(he,2,"0")},m:function oe(ee,J){if(ee.date()<J.date())return-oe(J,ee);var X=12*(J.year()-ee.year())+(J.month()-ee.month()),he=ee.clone().add(X,M),be=J-he<0,Ee=ee.clone().add(X+(be?-1:1),M);return+(-(X+(J-he)/(be?he-Ee:Ee-he))||0)},a:function(oe){return oe<0?Math.ceil(oe)||0:Math.floor(oe)},p:function(oe){return{M,y:I,w:U,d:ie,D:P,h:Z,m:W,s:q,ms:ne,Q:L}[oe]||String(oe||"").toLowerCase().replace(/s$/,"")},u:function(oe){return oe===void 0}},B="en",j={};j[B]=z;var ce=function(oe){return oe instanceof De},te=function(oe,ee,J){var X;if(!oe)return B;if(typeof oe=="string")j[oe]&&(X=oe),ee&&(j[oe]=ee,X=oe);else{var he=oe.name;j[he]=oe,X=he}return!J&&X&&(B=X),X||!J&&B},Se=function(oe,ee){if(ce(oe))return oe.clone();var J=typeof ee=="object"?ee:{};return J.date=oe,J.args=arguments,new De(J)},me=V;me.l=te,me.i=ce,me.w=function(oe,ee){return Se(oe,{locale:ee.$L,utc:ee.$u,x:ee.$x,$offset:ee.$offset})};var De=function(){function oe(J){this.$L=te(J.locale,null,!0),this.parse(J)}var ee=oe.prototype;return ee.parse=function(J){this.$d=function(X){var he=X.date,be=X.utc;if(he===null)return new Date(NaN);if(me.u(he))return new Date;if(he instanceof Date)return new Date(he);if(typeof he=="string"&&!/Z$/i.test(he)){var Ee=he.match($);if(Ee){var Pe=Ee[2]-1||0,ke=(Ee[7]||"0").substring(0,3);return be?new Date(Date.UTC(Ee[1],Pe,Ee[3]||1,Ee[4]||0,Ee[5]||0,Ee[6]||0,ke)):new Date(Ee[1],Pe,Ee[3]||1,Ee[4]||0,Ee[5]||0,Ee[6]||0,ke)}}return new Date(he)}(J),this.$x=J.x||{},this.init()},ee.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},ee.$utils=function(){return me},ee.isValid=function(){return this.$d.toString()!=="Invalid Date"},ee.isSame=function(J,X){var he=Se(J);return this.startOf(X)<=he&&he<=this.endOf(X)},ee.isAfter=function(J,X){return Se(J)<this.startOf(X)},ee.isBefore=function(J,X){return this.endOf(X)<Se(J)},ee.$g=function(J,X,he){return me.u(J)?this[X]:this.set(he,J)},ee.unix=function(){return Math.floor(this.valueOf()/1e3)},ee.valueOf=function(){return this.$d.getTime()},ee.startOf=function(J,X){var he=this,be=!!me.u(X)||X,Ee=me.p(J),Pe=function(nr,Jt){var Or=me.w(he.$u?Date.UTC(he.$y,Jt,nr):new Date(he.$y,Jt,nr),he);return be?Or:Or.endOf(ie)},ke=function(nr,Jt){return me.w(he.toDate()[nr].apply(he.toDate("s"),(be?[0,0,0,0]:[23,59,59,999]).slice(Jt)),he)},ze=this.$W,je=this.$M,ct=this.$D,pt="set"+(this.$u?"UTC":"");switch(Ee){case I:return be?Pe(1,0):Pe(31,11);case M:return be?Pe(1,je):Pe(0,je+1);case U:var $t=this.$locale().weekStart||0,Xt=(ze<$t?ze+7:ze)-$t;return Pe(be?ct-Xt:ct+(6-Xt),je);case ie:case P:return ke(pt+"Hours",0);case Z:return ke(pt+"Minutes",1);case W:return ke(pt+"Seconds",2);case q:return ke(pt+"Milliseconds",3);default:return this.clone()}},ee.endOf=function(J){return this.startOf(J,!1)},ee.$set=function(J,X){var he,be=me.p(J),Ee="set"+(this.$u?"UTC":""),Pe=(he={},he[ie]=Ee+"Date",he[P]=Ee+"Date",he[M]=Ee+"Month",he[I]=Ee+"FullYear",he[Z]=Ee+"Hours",he[W]=Ee+"Minutes",he[q]=Ee+"Seconds",he[ne]=Ee+"Milliseconds",he)[be],ke=be===ie?this.$D+(X-this.$W):X;if(be===M||be===I){var ze=this.clone().set(P,1);ze.$d[Pe](ke),ze.init(),this.$d=ze.set(P,Math.min(this.$D,ze.daysInMonth())).$d}else Pe&&this.$d[Pe](ke);return this.init(),this},ee.set=function(J,X){return this.clone().$set(J,X)},ee.get=function(J){return this[me.p(J)]()},ee.add=function(J,X){var he,be=this;J=Number(J);var Ee=me.p(X),Pe=function(je){var ct=Se(be);return me.w(ct.date(ct.date()+Math.round(je*J)),be)};if(Ee===M)return this.set(M,this.$M+J);if(Ee===I)return this.set(I,this.$y+J);if(Ee===ie)return Pe(1);if(Ee===U)return Pe(7);var ke=(he={},he[W]=6e4,he[Z]=36e5,he[q]=1e3,he)[Ee]||1,ze=this.$d.getTime()+J*ke;return me.w(ze,this)},ee.subtract=function(J,X){return this.add(-1*J,X)},ee.format=function(J){var X=this;if(!this.isValid())return"Invalid Date";var he=J||"YYYY-MM-DDTHH:mm:ssZ",be=me.z(this),Ee=this.$locale(),Pe=this.$H,ke=this.$m,ze=this.$M,je=Ee.weekdays,ct=Ee.months,pt=function(Jt,Or,Ur,Sn){return Jt&&(Jt[Or]||Jt(X,he))||Ur[Or].substr(0,Sn)},$t=function(Jt){return me.s(Pe%12||12,Jt,"0")},Xt=Ee.meridiem||function(Jt,Or,Ur){var Sn=Jt<12?"AM":"PM";return Ur?Sn.toLowerCase():Sn},nr={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ze+1,MM:me.s(ze+1,2,"0"),MMM:pt(Ee.monthsShort,ze,ct,3),MMMM:pt(ct,ze),D:this.$D,DD:me.s(this.$D,2,"0"),d:String(this.$W),dd:pt(Ee.weekdaysMin,this.$W,je,2),ddd:pt(Ee.weekdaysShort,this.$W,je,3),dddd:je[this.$W],H:String(Pe),HH:me.s(Pe,2,"0"),h:$t(1),hh:$t(2),a:Xt(Pe,ke,!0),A:Xt(Pe,ke,!1),m:String(ke),mm:me.s(ke,2,"0"),s:String(this.$s),ss:me.s(this.$s,2,"0"),SSS:me.s(this.$ms,3,"0"),Z:be};return he.replace(G,function(Jt,Or){return Or||nr[Jt]||be.replace(":","")})},ee.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ee.diff=function(J,X,he){var be,Ee=me.p(X),Pe=Se(J),ke=6e4*(Pe.utcOffset()-this.utcOffset()),ze=this-Pe,je=me.m(this,Pe);return je=(be={},be[I]=je/12,be[M]=je,be[L]=je/3,be[U]=(ze-ke)/6048e5,be[ie]=(ze-ke)/864e5,be[Z]=ze/36e5,be[W]=ze/6e4,be[q]=ze/1e3,be)[Ee]||ze,he?je:me.a(je)},ee.daysInMonth=function(){return this.endOf(M).$D},ee.$locale=function(){return j[this.$L]},ee.locale=function(J,X){if(!J)return this.$L;var he=this.clone(),be=te(J,X,!0);return be&&(he.$L=be),he},ee.clone=function(){return me.w(this.$d,this)},ee.toDate=function(){return new Date(this.valueOf())},ee.toJSON=function(){return this.isValid()?this.toISOString():null},ee.toISOString=function(){return this.$d.toISOString()},ee.toString=function(){return this.$d.toUTCString()},oe}(),pe=De.prototype;return Se.prototype=pe,[["$ms",ne],["$s",q],["$m",W],["$H",Z],["$W",ie],["$M",M],["$y",I],["$D",P]].forEach(function(oe){pe[oe[1]]=function(ee){return this.$g(ee,oe[0],oe[1])}}),Se.extend=function(oe,ee){return oe.$i||(oe(ee,De,Se),oe.$i=!0),Se},Se.locale=te,Se.isDayjs=ce,Se.unix=function(oe){return Se(1e3*oe)},Se.en=j[B],Se.Ls=j,Se.p={},Se})},4110:function(c){(function(ne,q){c.exports=q()})(this,function(){"use strict";return function(ne,q,W){ne=ne||{};var Z=q.prototype,ie={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function U(L,I,P,$){return Z.fromToBase(L,I,P,$)}W.en.relativeTime=ie,Z.fromToBase=function(L,I,P,$,G){for(var z,O,V,B=P.$locale().relativeTime||ie,j=ne.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ce=j.length,te=0;te<ce;te+=1){var Se=j[te];Se.d&&(z=$?W(L).diff(P,Se.d,!0):P.diff(L,Se.d,!0));var me=(ne.rounding||Math.round)(Math.abs(z));if(V=z>0,me<=Se.r||!Se.r){me<=1&&te>0&&(Se=j[te-1]);var De=B[Se.l];G&&(me=G(""+me)),O=typeof De=="string"?De.replace("%d",me):De(me,I,Se.l,V);break}}if(I)return O;var pe=V?B.future:B.past;return typeof pe=="function"?pe(O):pe.replace("%s",O)},Z.to=function(L,I){return U(L,I,this,!0)},Z.from=function(L,I){return U(L,I,this)};var M=function(L){return L.$u?W.utc():W()};Z.toNow=function(L){return this.to(M(this),L)},Z.fromNow=function(L){return this.from(M(this),L)}}})},660:function(c){(function(ne,q){c.exports=q()})(this,function(){"use strict";return function(ne,q,W){W.updateLocale=function(Z,ie){var U=W.Ls[Z];if(U)return(ie?Object.keys(ie):[]).forEach(function(M){U[M]=ie[M]}),U}}})},1227:(c,ne,q)=>{ne.formatArgs=Z,ne.save=ie,ne.load=U,ne.useColors=W,ne.storage=M(),ne.destroy=(()=>{let I=!1;return()=>{I||(I=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),ne.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function W(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Z(I){if(I[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+I[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;const P="color: "+this.color;I.splice(1,0,P,"color: inherit");let $=0,G=0;I[0].replace(/%[a-zA-Z%]/g,z=>{z!=="%%"&&($++,z==="%c"&&(G=$))}),I.splice(G,0,P)}ne.log=console.debug||console.log||(()=>{});function ie(I){try{I?ne.storage.setItem("debug",I):ne.storage.removeItem("debug")}catch(P){}}function U(){let I;try{I=ne.storage.getItem("debug")}catch(P){}return!I&&typeof process!="undefined"&&"env"in process&&(I=process.env.DEBUG),I}function M(){try{return localStorage}catch(I){}}c.exports=q(2447)(ne);const{formatters:L}=c.exports;L.j=function(I){try{return JSON.stringify(I)}catch(P){return"[UnexpectedJSONParseError]: "+P.message}}},2447:(c,ne,q)=>{function W(Z){U.debug=U,U.default=U,U.coerce=G,U.disable=I,U.enable=L,U.enabled=P,U.humanize=q(7824),U.destroy=z,Object.keys(Z).forEach(O=>{U[O]=Z[O]}),U.names=[],U.skips=[],U.formatters={};function ie(O){let V=0;for(let B=0;B<O.length;B++)V=(V<<5)-V+O.charCodeAt(B),V|=0;return U.colors[Math.abs(V)%U.colors.length]}U.selectColor=ie;function U(O){let V,B=null;function j(...ce){if(!j.enabled)return;const te=j,Se=Number(new Date),me=Se-(V||Se);te.diff=me,te.prev=V,te.curr=Se,V=Se,ce[0]=U.coerce(ce[0]),typeof ce[0]!="string"&&ce.unshift("%O");let De=0;ce[0]=ce[0].replace(/%([a-zA-Z%])/g,(oe,ee)=>{if(oe==="%%")return"%";De++;const J=U.formatters[ee];if(typeof J=="function"){const X=ce[De];oe=J.call(te,X),ce.splice(De,1),De--}return oe}),U.formatArgs.call(te,ce),(te.log||U.log).apply(te,ce)}return j.namespace=O,j.useColors=U.useColors(),j.color=U.selectColor(O),j.extend=M,j.destroy=U.destroy,Object.defineProperty(j,"enabled",{enumerable:!0,configurable:!1,get:()=>B===null?U.enabled(O):B,set:ce=>{B=ce}}),typeof U.init=="function"&&U.init(j),j}function M(O,V){const B=U(this.namespace+(typeof V=="undefined"?":":V)+O);return B.log=this.log,B}function L(O){U.save(O),U.names=[],U.skips=[];let V;const B=(typeof O=="string"?O:"").split(/[\s,]+/),j=B.length;for(V=0;V<j;V++)!B[V]||(O=B[V].replace(/\*/g,".*?"),O[0]==="-"?U.skips.push(new RegExp("^"+O.substr(1)+"$")):U.names.push(new RegExp("^"+O+"$")))}function I(){const O=[...U.names.map($),...U.skips.map($).map(V=>"-"+V)].join(",");return U.enable(""),O}function P(O){if(O[O.length-1]==="*")return!0;let V,B;for(V=0,B=U.skips.length;V<B;V++)if(U.skips[V].test(O))return!1;for(V=0,B=U.names.length;V<B;V++)if(U.names[V].test(O))return!0;return!1}function $(O){return O.toString().substring(2,O.toString().length-2).replace(/\.\*\?$/,"*")}function G(O){return O instanceof Error?O.stack||O.message:O}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return U.enable(U.load()),U}c.exports=W},5158:(c,ne,q)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?c.exports=q(1227):c.exports=q(39)},39:(c,ne,q)=>{const W=q(3867),Z=q(1669);ne.init=$,ne.log=L,ne.formatArgs=U,ne.save=I,ne.load=P,ne.useColors=ie,ne.destroy=Z.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),ne.colors=[6,2,3,4,5,1];try{const z=q(2130);z&&(z.stderr||z).level>=2&&(ne.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(z){}ne.inspectOpts=Object.keys(process.env).filter(z=>/^debug_/i.test(z)).reduce((z,O)=>{const V=O.substring(6).toLowerCase().replace(/_([a-z])/g,(j,ce)=>ce.toUpperCase());let B=process.env[O];return/^(yes|on|true|enabled)$/i.test(B)?B=!0:/^(no|off|false|disabled)$/i.test(B)?B=!1:B==="null"?B=null:B=Number(B),z[V]=B,z},{});function ie(){return"colors"in ne.inspectOpts?Boolean(ne.inspectOpts.colors):W.isatty(process.stderr.fd)}function U(z){const{namespace:O,useColors:V}=this;if(V){const B=this.color,j="[3"+(B<8?B:"8;5;"+B),ce=`  ${j};1m${O} [0m`;z[0]=ce+z[0].split(`
`).join(`
`+ce),z.push(j+"m+"+c.exports.humanize(this.diff)+"[0m")}else z[0]=M()+O+" "+z[0]}function M(){return ne.inspectOpts.hideDate?"":new Date().toISOString()+" "}function L(...z){return process.stderr.write(Z.format(...z)+`
`)}function I(z){z?process.env.DEBUG=z:delete process.env.DEBUG}function P(){return process.env.DEBUG}function $(z){z.inspectOpts={};const O=Object.keys(ne.inspectOpts);for(let V=0;V<O.length;V++)z.inspectOpts[O[V]]=ne.inspectOpts[O[V]]}c.exports=q(2447)(ne);const{formatters:G}=c.exports;G.o=function(z){return this.inspectOpts.colors=this.useColors,Z.inspect(z,this.inspectOpts).split(`
`).map(O=>O.trim()).join(" ")},G.O=function(z){return this.inspectOpts.colors=this.useColors,Z.inspect(z,this.inspectOpts)}},4063:c=>{"use strict";c.exports=function ne(q,W){if(q===W)return!0;if(q&&W&&typeof q=="object"&&typeof W=="object"){if(q.constructor!==W.constructor)return!1;var Z,ie,U;if(Array.isArray(q)){if(Z=q.length,Z!=W.length)return!1;for(ie=Z;ie--!=0;)if(!ne(q[ie],W[ie]))return!1;return!0}if(q.constructor===RegExp)return q.source===W.source&&q.flags===W.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===W.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===W.toString();if(U=Object.keys(q),Z=U.length,Z!==Object.keys(W).length)return!1;for(ie=Z;ie--!=0;)if(!Object.prototype.hasOwnProperty.call(W,U[ie]))return!1;for(ie=Z;ie--!=0;){var M=U[ie];if(!ne(q[M],W[M]))return!1}return!0}return q!==q&&W!==W}},5035:c=>{"use strict";c.exports=function(ne,q){q||(q={}),typeof q=="function"&&(q={cmp:q});var W=typeof q.cycles=="boolean"?q.cycles:!1,Z=q.cmp&&function(U){return function(M){return function(L,I){var P={key:L,value:M[L]},$={key:I,value:M[I]};return U(P,$)}}}(q.cmp),ie=[];return function U(M){if(M&&M.toJSON&&typeof M.toJSON=="function"&&(M=M.toJSON()),M!==void 0){if(typeof M=="number")return isFinite(M)?""+M:"null";if(typeof M!="object")return JSON.stringify(M);var L,I;if(Array.isArray(M)){for(I="[",L=0;L<M.length;L++)L&&(I+=","),I+=U(M[L])||"null";return I+"]"}if(M===null)return"null";if(ie.indexOf(M)!==-1){if(W)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var P=ie.push(M)-1,$=Object.keys(M).sort(Z&&Z(M));for(I="",L=0;L<$.length;L++){var G=$[L],z=U(M[G]);!z||(I&&(I+=","),I+=JSON.stringify(G)+":"+z)}return ie.splice(P,1),"{"+I+"}"}}(ne)}},6030:(c,ne,q)=>{const{Readable:W}=q(2413),Z=new WeakMap;async function*ie(M){for(const L of M)"stream"in L?yield*L.stream():yield L}class U{constructor(L=[],I={type:""}){let P=0;const $=L.map(z=>{let O;return z instanceof Buffer?O=z:ArrayBuffer.isView(z)?O=Buffer.from(z.buffer,z.byteOffset,z.byteLength):z instanceof ArrayBuffer?O=Buffer.from(z):z instanceof U?O=z:O=Buffer.from(typeof z=="string"?z:String(z)),P+=O.length||O.size||0,O}),G=I.type===void 0?"":String(I.type).toLowerCase();Z.set(this,{type:/[^\u0020-\u007E]/.test(G)?"":G,size:P,parts:$})}get size(){return Z.get(this).size}get type(){return Z.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const L=new Uint8Array(this.size);let I=0;for await(const P of this.stream())L.set(P,I),I+=P.length;return L.buffer}stream(){return W.from(ie(Z.get(this).parts))}slice(L=0,I=this.size,P=""){const{size:$}=this;let G=L<0?Math.max($+L,0):Math.min(L,$),z=I<0?Math.max($+I,0):Math.min(I,$);const O=Math.max(z-G,0),V=Z.get(this).parts.values(),B=[];let j=0;for(const te of V){const Se=ArrayBuffer.isView(te)?te.byteLength:te.size;if(G&&Se<=G)G-=Se,z-=Se;else{const me=te.slice(G,Math.min(Se,z));if(B.push(me),j+=ArrayBuffer.isView(me)?me.byteLength:me.size,G=0,j>=O)break}}const ce=new U([],{type:P});return Object.assign(Z.get(ce),{size:O,parts:B}),ce}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](L){return typeof L=="object"&&typeof L.stream=="function"&&L.stream.length===0&&typeof L.constructor=="function"&&/^(Blob|File)$/.test(L[Symbol.toStringTag])}}Object.defineProperties(U.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),c.exports=U},2261:(c,ne,q)=>{var W;c.exports=function(){if(!W){try{W=q(5158)("follow-redirects")}catch(Z){}typeof W!="function"&&(W=function(){})}W.apply(null,arguments)}},938:(c,ne,q)=>{var W=q(8835),Z=W.URL,ie=q(8605),U=q(7211),M=q(2413).Writable,L=q(2357),I=q(2261),P=["abort","aborted","connect","error","socket","timeout"],$=Object.create(null);P.forEach(function(oe){$[oe]=function(ee,J,X){this._redirectable.emit(oe,ee,J,X)}});var G=me("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),z=me("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),O=me("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),V=me("ERR_STREAM_WRITE_AFTER_END","write after end");function B(oe,ee){M.call(this),this._sanitizeOptions(oe),this._options=oe,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],ee&&this.on("response",ee);var J=this;this._onNativeResponse=function(X){J._processResponse(X)},this._performRequest()}B.prototype=Object.create(M.prototype),B.prototype.abort=function(){De(this._currentRequest),this.emit("abort")},B.prototype.write=function(oe,ee,J){if(this._ending)throw new V;if(!(typeof oe=="string"||typeof oe=="object"&&"length"in oe))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof ee=="function"&&(J=ee,ee=null),oe.length===0){J&&J();return}this._requestBodyLength+oe.length<=this._options.maxBodyLength?(this._requestBodyLength+=oe.length,this._requestBodyBuffers.push({data:oe,encoding:ee}),this._currentRequest.write(oe,ee,J)):(this.emit("error",new O),this.abort())},B.prototype.end=function(oe,ee,J){if(typeof oe=="function"?(J=oe,oe=ee=null):typeof ee=="function"&&(J=ee,ee=null),!oe)this._ended=this._ending=!0,this._currentRequest.end(null,null,J);else{var X=this,he=this._currentRequest;this.write(oe,ee,function(){X._ended=!0,he.end(null,null,J)}),this._ending=!0}},B.prototype.setHeader=function(oe,ee){this._options.headers[oe]=ee,this._currentRequest.setHeader(oe,ee)},B.prototype.removeHeader=function(oe){delete this._options.headers[oe],this._currentRequest.removeHeader(oe)},B.prototype.setTimeout=function(oe,ee){var J=this;function X(Ee){Ee.setTimeout(oe),Ee.removeListener("timeout",Ee.destroy),Ee.addListener("timeout",Ee.destroy)}function he(Ee){J._timeout&&clearTimeout(J._timeout),J._timeout=setTimeout(function(){J.emit("timeout"),be()},oe),X(Ee)}function be(){J._timeout&&(clearTimeout(J._timeout),J._timeout=null),J.removeListener("abort",be),J.removeListener("error",be),J.removeListener("response",be),ee&&J.removeListener("timeout",ee),J.socket||J._currentRequest.removeListener("socket",he)}return ee&&this.on("timeout",ee),this.socket?he(this.socket):this._currentRequest.once("socket",he),this.on("socket",X),this.on("abort",be),this.on("error",be),this.on("response",be),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(oe){B.prototype[oe]=function(ee,J){return this._currentRequest[oe](ee,J)}}),["aborted","connection","socket"].forEach(function(oe){Object.defineProperty(B.prototype,oe,{get:function(){return this._currentRequest[oe]}})}),B.prototype._sanitizeOptions=function(oe){if(oe.headers||(oe.headers={}),oe.host&&(oe.hostname||(oe.hostname=oe.host),delete oe.host),!oe.pathname&&oe.path){var ee=oe.path.indexOf("?");ee<0?oe.pathname=oe.path:(oe.pathname=oe.path.substring(0,ee),oe.search=oe.path.substring(ee))}},B.prototype._performRequest=function(){var oe=this._options.protocol,ee=this._options.nativeProtocols[oe];if(!ee){this.emit("error",new TypeError("Unsupported protocol "+oe));return}if(this._options.agents){var J=oe.substr(0,oe.length-1);this._options.agent=this._options.agents[J]}var X=this._currentRequest=ee.request(this._options,this._onNativeResponse);this._currentUrl=W.format(this._options),X._redirectable=this;for(var he=0;he<P.length;he++)X.on(P[he],$[P[he]]);if(this._isRedirect){var be=0,Ee=this,Pe=this._requestBodyBuffers;(function ke(ze){if(X===Ee._currentRequest)if(ze)Ee.emit("error",ze);else if(be<Pe.length){var je=Pe[be++];X.finished||X.write(je.data,je.encoding,ke)}else Ee._ended&&X.end()})()}},B.prototype._processResponse=function(oe){var ee=oe.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:oe.headers,statusCode:ee});var J=oe.headers.location;if(J&&this._options.followRedirects!==!1&&ee>=300&&ee<400){if(De(this._currentRequest),oe.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new z);return}((ee===301||ee===302)&&this._options.method==="POST"||ee===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Se(/^content-/i,this._options.headers));var X=Se(/^host$/i,this._options.headers),he=W.parse(this._currentUrl),be=X||he.host,Ee=/^\w+:/.test(J)?this._currentUrl:W.format(Object.assign(he,{host:be})),Pe;try{Pe=W.resolve(Ee,J)}catch(je){this.emit("error",new G(je));return}I("redirecting to",Pe),this._isRedirect=!0;var ke=W.parse(Pe);if(Object.assign(this._options,ke),ke.host===be||pe(ke.host,be)||Se(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var ze={headers:oe.headers};try{this._options.beforeRedirect.call(null,this._options,ze)}catch(je){this.emit("error",je);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(je){this.emit("error",new G(je))}}else oe.responseUrl=this._currentUrl,oe.redirects=this._redirects,this.emit("response",oe),this._requestBodyBuffers=[]};function j(oe){var ee={maxRedirects:21,maxBodyLength:10*1024*1024},J={};return Object.keys(oe).forEach(function(X){var he=X+":",be=J[he]=oe[X],Ee=ee[X]=Object.create(be);function Pe(ze,je,ct){if(typeof ze=="string"){var pt=ze;try{ze=te(new Z(pt))}catch($t){ze=W.parse(pt)}}else Z&&ze instanceof Z?ze=te(ze):(ct=je,je=ze,ze={protocol:he});return typeof je=="function"&&(ct=je,je=null),je=Object.assign({maxRedirects:ee.maxRedirects,maxBodyLength:ee.maxBodyLength},ze,je),je.nativeProtocols=J,L.equal(je.protocol,he,"protocol mismatch"),I("options",je),new B(je,ct)}function ke(ze,je,ct){var pt=Ee.request(ze,je,ct);return pt.end(),pt}Object.defineProperties(Ee,{request:{value:Pe,configurable:!0,enumerable:!0,writable:!0},get:{value:ke,configurable:!0,enumerable:!0,writable:!0}})}),ee}function ce(){}function te(oe){var ee={protocol:oe.protocol,hostname:oe.hostname.startsWith("[")?oe.hostname.slice(1,-1):oe.hostname,hash:oe.hash,search:oe.search,pathname:oe.pathname,path:oe.pathname+oe.search,href:oe.href};return oe.port!==""&&(ee.port=Number(oe.port)),ee}function Se(oe,ee){var J;for(var X in ee)oe.test(X)&&(J=ee[X],delete ee[X]);return J===null||typeof J=="undefined"?void 0:String(J).trim()}function me(oe,ee){function J(X){Error.captureStackTrace(this,this.constructor),X?(this.message=ee+": "+X.message,this.cause=X):this.message=ee}return J.prototype=new Error,J.prototype.constructor=J,J.prototype.name="Error ["+oe+"]",J.prototype.code=oe,J}function De(oe){for(var ee=0;ee<P.length;ee++)oe.removeListener(P[ee],$[P[ee]]);oe.on("error",ce),oe.abort()}function pe(oe,ee){const J=oe.length-ee.length-1;return J>0&&oe[J]==="."&&oe.endsWith(ee)}c.exports=j({http:ie,https:U}),c.exports.wrap=j},9967:c=>{var ne={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewThread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerViewedState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ResolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnresolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnresolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unresolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmarkFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:14578}};ne.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
				email
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

fragment ReviewThread on PullRequestReviewThread {
	id
	isResolved
	viewerCanResolve
	viewerCanUnresolve
	path
	diffSide
	line
	originalLine
	isOutdated
	comments(first: 100) {
		nodes {
			...ReviewComment
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					id
					isResolved
					viewerCanResolve
					viewerCanUnresolve
					path
					diffSide
					line
					originalLine
					isOutdated
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			headRefName
			headRefOid
			headRepository {
				owner {
					login
				}
				url
			}
			baseRef {
				...Ref
			}
			baseRefName
			baseRefOid
			baseRepository {
				owner {
					login
				}
				url
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestFiles($owner: String!, $name: String!, $number: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			files(first: 100, after: $after) {
				nodes {
					path
					viewerViewedState
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation AddReviewThread($input: AddPullRequestReviewThreadInput!) {
	addPullRequestReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
								email
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
							... on User {
								email
							}
							... on Organization {
								email
							}
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										avatarUrl
										email
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
									... on User {
										email
									}
									... on Organization {
										email
									}
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							avatarUrl
							email
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner {
				login
			}
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

mutation ResolveReviewThread($input: ResolveReviewThreadInput!) {
	resolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation UnresolveReviewThread($input: UnresolveReviewThreadInput!) {
	unresolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation MarkFileAsViewed($input: MarkFileAsViewedInput!) {
	markFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}

mutation UnmarkFileAsViewed($input: UnmarkFileAsViewedInput!) {
	unmarkFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};var q={};function W(L){return L.filter(function(I){if(I.kind!=="FragmentDefinition")return!0;var P=I.name.value;return q[P]?!1:(q[P]=!0,!0)})}function Z(L,I){if(L.kind==="FragmentSpread")I.add(L.name.value);else if(L.kind==="VariableDefinition"){var P=L.type;P.kind==="NamedType"&&I.add(P.name.value)}L.selectionSet&&L.selectionSet.selections.forEach(function($){Z($,I)}),L.variableDefinitions&&L.variableDefinitions.forEach(function($){Z($,I)}),L.definitions&&L.definitions.forEach(function($){Z($,I)})}var ie={};(function(){ne.definitions.forEach(function(I){if(I.name){var P=new Set;Z(I,P),ie[I.name.value]=P}})})();function U(L,I){for(var P=0;P<L.definitions.length;P++){var $=L.definitions[P];if($.name&&$.name.value==I)return $}}function M(L,I){var P={kind:L.kind,definitions:[U(L,I)]};L.hasOwnProperty("loc")&&(P.loc=L.loc);var $=ie[I]||new Set,G=new Set,z=new Set;for($.forEach(function(V){z.add(V)});z.size>0;){var O=z;z=new Set,O.forEach(function(V){if(!G.has(V)){G.add(V);var B=ie[V]||new Set;B.forEach(function(j){z.add(j)})}})}return G.forEach(function(V){var B=U(L,V);B&&P.definitions.push(B)}),P}c.exports=ne,c.exports.TimelineEvents=M(ne,"TimelineEvents"),c.exports.IssueTimelineEvents=M(ne,"IssueTimelineEvents"),c.exports.GetPendingReviewId=M(ne,"GetPendingReviewId"),c.exports.PullRequestComments=M(ne,"PullRequestComments"),c.exports.PullRequest=M(ne,"PullRequest"),c.exports.PullRequestFiles=M(ne,"PullRequestFiles"),c.exports.Issue=M(ne,"Issue"),c.exports.IssueWithComments=M(ne,"IssueWithComments"),c.exports.GetUser=M(ne,"GetUser"),c.exports.PullRequestMergeability=M(ne,"PullRequestMergeability"),c.exports.PullRequestState=M(ne,"PullRequestState"),c.exports.AddComment=M(ne,"AddComment"),c.exports.AddReviewThread=M(ne,"AddReviewThread"),c.exports.EditComment=M(ne,"EditComment"),c.exports.ReadyForReview=M(ne,"ReadyForReview"),c.exports.StartReview=M(ne,"StartReview"),c.exports.SubmitReview=M(ne,"SubmitReview"),c.exports.DeleteReview=M(ne,"DeleteReview"),c.exports.AddReaction=M(ne,"AddReaction"),c.exports.DeleteReaction=M(ne,"DeleteReaction"),c.exports.UpdatePullRequest=M(ne,"UpdatePullRequest"),c.exports.AddIssueComment=M(ne,"AddIssueComment"),c.exports.EditIssueComment=M(ne,"EditIssueComment"),c.exports.GetMentionableUsers=M(ne,"GetMentionableUsers"),c.exports.GetAssignableUsers=M(ne,"GetAssignableUsers"),c.exports.IssuesWithoutMilestone=M(ne,"IssuesWithoutMilestone"),c.exports.MaxIssue=M(ne,"MaxIssue"),c.exports.GetMilestones=M(ne,"GetMilestones"),c.exports.Issues=M(ne,"Issues"),c.exports.GetViewerPermission=M(ne,"GetViewerPermission"),c.exports.GetRepositoryForkDetails=M(ne,"GetRepositoryForkDetails"),c.exports.GetChecks=M(ne,"GetChecks"),c.exports.ResolveReviewThread=M(ne,"ResolveReviewThread"),c.exports.UnresolveReviewThread=M(ne,"UnresolveReviewThread"),c.exports.MarkFileAsViewed=M(ne,"MarkFileAsViewed"),c.exports.UnmarkFileAsViewed=M(ne,"UnmarkFileAsViewed")},972:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=U;var W=ie(q(7706)),Z=ie(q(8554));function ie(M){return M&&M.__esModule?M:{default:M}}function U(M){var L=M.prototype.toJSON;typeof L=="function"||(0,W.default)(0),M.prototype.inspect=L,Z.default&&(M.prototype[Z.default]=L)}},8002:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=L;var W=Z(q(8554));function Z(V){return V&&V.__esModule?V:{default:V}}function ie(V){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ie=function(j){return typeof j}:ie=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},ie(V)}var U=10,M=2;function L(V){return I(V,[])}function I(V,B){switch(ie(V)){case"string":return JSON.stringify(V);case"function":return V.name?"[function ".concat(V.name,"]"):"[function]";case"object":return V===null?"null":P(V,B);default:return String(V)}}function P(V,B){if(B.indexOf(V)!==-1)return"[Circular]";var j=[].concat(B,[V]),ce=z(V);if(ce!==void 0){var te=ce.call(V);if(te!==V)return typeof te=="string"?te:I(te,j)}else if(Array.isArray(V))return G(V,j);return $(V,j)}function $(V,B){var j=Object.keys(V);if(j.length===0)return"{}";if(B.length>M)return"["+O(V)+"]";var ce=j.map(function(te){var Se=I(V[te],B);return te+": "+Se});return"{ "+ce.join(", ")+" }"}function G(V,B){if(V.length===0)return"[]";if(B.length>M)return"[Array]";for(var j=Math.min(U,V.length),ce=V.length-j,te=[],Se=0;Se<j;++Se)te.push(I(V[Se],B));return ce===1?te.push("... 1 more item"):ce>1&&te.push("... ".concat(ce," more items")),"["+te.join(", ")+"]"}function z(V){var B=V[String(W.default)];if(typeof B=="function")return B;if(typeof V.inspect=="function")return V.inspect}function O(V){var B=Object.prototype.toString.call(V).replace(/^\[object /,"").replace(/]$/,"");if(B==="Object"&&typeof V.constructor=="function"){var j=V.constructor.name;if(typeof j=="string"&&j!=="")return j}return B}},7706:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=q;function q(W,Z){var ie=Boolean(W);if(!ie)throw new Error(Z!=null?Z:"Unexpected invariant triggered.")}},8554:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var q=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,W=q;ne.default=W},1807:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.isNode=M,ne.Token=ne.Location=void 0;var W=Z(q(972));function Z(L){return L&&L.__esModule?L:{default:L}}var ie=function(){function L(P,$,G){this.start=P.start,this.end=$.end,this.startToken=P,this.endToken=$,this.source=G}var I=L.prototype;return I.toJSON=function(){return{start:this.start,end:this.end}},L}();ne.Location=ie,(0,W.default)(ie);var U=function(){function L(P,$,G,z,O,V,B){this.kind=P,this.start=$,this.end=G,this.line=z,this.column=O,this.value=B,this.prev=V,this.next=null}var I=L.prototype;return I.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},L}();ne.Token=U,(0,W.default)(U);function M(L){return L!=null&&typeof L.kind=="string"}},849:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.dedentBlockStringValue=q,ne.getBlockStringIndentation=Z,ne.printBlockString=ie;function q(U){var M=U.split(/\r\n|[\n\r]/g),L=Z(U);if(L!==0)for(var I=1;I<M.length;I++)M[I]=M[I].slice(L);for(var P=0;P<M.length&&W(M[P]);)++P;for(var $=M.length;$>P&&W(M[$-1]);)--$;return M.slice(P,$).join(`
`)}function W(U){for(var M=0;M<U.length;++M)if(U[M]!==" "&&U[M]!=="	")return!1;return!0}function Z(U){for(var M,L=!0,I=!0,P=0,$=null,G=0;G<U.length;++G)switch(U.charCodeAt(G)){case 13:U.charCodeAt(G+1)===10&&++G;case 10:L=!1,I=!0,P=0;break;case 9:case 32:++P;break;default:I&&!L&&($===null||P<$)&&($=P),I=!1}return(M=$)!==null&&M!==void 0?M:0}function ie(U){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,I=U.indexOf(`
`)===-1,P=U[0]===" "||U[0]==="	",$=U[U.length-1]==='"',G=U[U.length-1]==="\\",z=!I||$||G||L,O="";return z&&!(I&&P)&&(O+=`
`+M),O+=M?U.replace(/\n/g,`
`+M):U,z&&(O+=`
`),'"""'+O.replace(/"""/g,'\\"""')+'"""'}},3033:(c,ne,q)=>{"use strict";var W;W={value:!0},ne.S=U;var Z=q(285),ie=q(849);function U(B){return(0,Z.visit)(B,{leave:L})}var M=80,L={Name:function(j){return j.value},Variable:function(j){return"$"+j.name},Document:function(j){return P(j.definitions,`

`)+`
`},OperationDefinition:function(j){var ce=j.operation,te=j.name,Se=G("(",P(j.variableDefinitions,", "),")"),me=P(j.directives," "),De=j.selectionSet;return!te&&!me&&!Se&&ce==="query"?De:P([ce,P([te,Se]),me,De]," ")},VariableDefinition:function(j){var ce=j.variable,te=j.type,Se=j.defaultValue,me=j.directives;return ce+": "+te+G(" = ",Se)+G(" ",P(me," "))},SelectionSet:function(j){var ce=j.selections;return $(ce)},Field:function(j){var ce=j.alias,te=j.name,Se=j.arguments,me=j.directives,De=j.selectionSet,pe=G("",ce,": ")+te,oe=pe+G("(",P(Se,", "),")");return oe.length>M&&(oe=pe+G(`(
`,z(P(Se,`
`)),`
)`)),P([oe,P(me," "),De]," ")},Argument:function(j){var ce=j.name,te=j.value;return ce+": "+te},FragmentSpread:function(j){var ce=j.name,te=j.directives;return"..."+ce+G(" ",P(te," "))},InlineFragment:function(j){var ce=j.typeCondition,te=j.directives,Se=j.selectionSet;return P(["...",G("on ",ce),P(te," "),Se]," ")},FragmentDefinition:function(j){var ce=j.name,te=j.typeCondition,Se=j.variableDefinitions,me=j.directives,De=j.selectionSet;return"fragment ".concat(ce).concat(G("(",P(Se,", "),")")," ")+"on ".concat(te," ").concat(G("",P(me," ")," "))+De},IntValue:function(j){var ce=j.value;return ce},FloatValue:function(j){var ce=j.value;return ce},StringValue:function(j,ce){var te=j.value,Se=j.block;return Se?(0,ie.printBlockString)(te,ce==="description"?"":"  "):JSON.stringify(te)},BooleanValue:function(j){var ce=j.value;return ce?"true":"false"},NullValue:function(){return"null"},EnumValue:function(j){var ce=j.value;return ce},ListValue:function(j){var ce=j.values;return"["+P(ce,", ")+"]"},ObjectValue:function(j){var ce=j.fields;return"{"+P(ce,", ")+"}"},ObjectField:function(j){var ce=j.name,te=j.value;return ce+": "+te},Directive:function(j){var ce=j.name,te=j.arguments;return"@"+ce+G("(",P(te,", "),")")},NamedType:function(j){var ce=j.name;return ce},ListType:function(j){var ce=j.type;return"["+ce+"]"},NonNullType:function(j){var ce=j.type;return ce+"!"},SchemaDefinition:I(function(B){var j=B.directives,ce=B.operationTypes;return P(["schema",P(j," "),$(ce)]," ")}),OperationTypeDefinition:function(j){var ce=j.operation,te=j.type;return ce+": "+te},ScalarTypeDefinition:I(function(B){var j=B.name,ce=B.directives;return P(["scalar",j,P(ce," ")]," ")}),ObjectTypeDefinition:I(function(B){var j=B.name,ce=B.interfaces,te=B.directives,Se=B.fields;return P(["type",j,G("implements ",P(ce," & ")),P(te," "),$(Se)]," ")}),FieldDefinition:I(function(B){var j=B.name,ce=B.arguments,te=B.type,Se=B.directives;return j+(V(ce)?G(`(
`,z(P(ce,`
`)),`
)`):G("(",P(ce,", "),")"))+": "+te+G(" ",P(Se," "))}),InputValueDefinition:I(function(B){var j=B.name,ce=B.type,te=B.defaultValue,Se=B.directives;return P([j+": "+ce,G("= ",te),P(Se," ")]," ")}),InterfaceTypeDefinition:I(function(B){var j=B.name,ce=B.interfaces,te=B.directives,Se=B.fields;return P(["interface",j,G("implements ",P(ce," & ")),P(te," "),$(Se)]," ")}),UnionTypeDefinition:I(function(B){var j=B.name,ce=B.directives,te=B.types;return P(["union",j,P(ce," "),te&&te.length!==0?"= "+P(te," | "):""]," ")}),EnumTypeDefinition:I(function(B){var j=B.name,ce=B.directives,te=B.values;return P(["enum",j,P(ce," "),$(te)]," ")}),EnumValueDefinition:I(function(B){var j=B.name,ce=B.directives;return P([j,P(ce," ")]," ")}),InputObjectTypeDefinition:I(function(B){var j=B.name,ce=B.directives,te=B.fields;return P(["input",j,P(ce," "),$(te)]," ")}),DirectiveDefinition:I(function(B){var j=B.name,ce=B.arguments,te=B.repeatable,Se=B.locations;return"directive @"+j+(V(ce)?G(`(
`,z(P(ce,`
`)),`
)`):G("(",P(ce,", "),")"))+(te?" repeatable":"")+" on "+P(Se," | ")}),SchemaExtension:function(j){var ce=j.directives,te=j.operationTypes;return P(["extend schema",P(ce," "),$(te)]," ")},ScalarTypeExtension:function(j){var ce=j.name,te=j.directives;return P(["extend scalar",ce,P(te," ")]," ")},ObjectTypeExtension:function(j){var ce=j.name,te=j.interfaces,Se=j.directives,me=j.fields;return P(["extend type",ce,G("implements ",P(te," & ")),P(Se," "),$(me)]," ")},InterfaceTypeExtension:function(j){var ce=j.name,te=j.interfaces,Se=j.directives,me=j.fields;return P(["extend interface",ce,G("implements ",P(te," & ")),P(Se," "),$(me)]," ")},UnionTypeExtension:function(j){var ce=j.name,te=j.directives,Se=j.types;return P(["extend union",ce,P(te," "),Se&&Se.length!==0?"= "+P(Se," | "):""]," ")},EnumTypeExtension:function(j){var ce=j.name,te=j.directives,Se=j.values;return P(["extend enum",ce,P(te," "),$(Se)]," ")},InputObjectTypeExtension:function(j){var ce=j.name,te=j.directives,Se=j.fields;return P(["extend input",ce,P(te," "),$(Se)]," ")}};function I(B){return function(j){return P([j.description,B(j)],`
`)}}function P(B){var j,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(j=B==null?void 0:B.filter(function(te){return te}).join(ce))!==null&&j!==void 0?j:""}function $(B){return G(`{
`,z(P(B,`
`)),`
}`)}function G(B,j){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return j!=null&&j!==""?B+j+ce:""}function z(B){return G("  ",B.replace(/\n/g,`
  `))}function O(B){return B.indexOf(`
`)!==-1}function V(B){return B!=null&&B.some(O)}},285:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.visit=L,ne.visitInParallel=I,ne.getVisitFn=P,ne.BREAK=ne.QueryDocumentKeys=void 0;var W=ie(q(8002)),Z=q(1807);function ie($){return $&&$.__esModule?$:{default:$}}var U={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};ne.QueryDocumentKeys=U;var M=Object.freeze({});ne.BREAK=M;function L($,G){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U,O=void 0,V=Array.isArray($),B=[$],j=-1,ce=[],te=void 0,Se=void 0,me=void 0,De=[],pe=[],oe=$;do{j++;var ee=j===B.length,J=ee&&ce.length!==0;if(ee){if(Se=pe.length===0?void 0:De[De.length-1],te=me,me=pe.pop(),J){if(V)te=te.slice();else{for(var X={},he=0,be=Object.keys(te);he<be.length;he++){var Ee=be[he];X[Ee]=te[Ee]}te=X}for(var Pe=0,ke=0;ke<ce.length;ke++){var ze=ce[ke][0],je=ce[ke][1];V&&(ze-=Pe),V&&je===null?(te.splice(ze,1),Pe++):te[ze]=je}}j=O.index,B=O.keys,ce=O.edits,V=O.inArray,O=O.prev}else{if(Se=me?V?j:B[j]:void 0,te=me?me[Se]:oe,te==null)continue;me&&De.push(Se)}var ct=void 0;if(!Array.isArray(te)){if(!(0,Z.isNode)(te))throw new Error("Invalid AST Node: ".concat((0,W.default)(te),"."));var pt=P(G,te.kind,ee);if(pt){if(ct=pt.call(G,te,Se,me,De,pe),ct===M)break;if(ct===!1){if(!ee){De.pop();continue}}else if(ct!==void 0&&(ce.push([Se,ct]),!ee))if((0,Z.isNode)(ct))te=ct;else{De.pop();continue}}}if(ct===void 0&&J&&ce.push([Se,te]),ee)De.pop();else{var $t;O={inArray:V,index:j,keys:B,edits:ce,prev:O},V=Array.isArray(te),B=V?te:($t=z[te.kind])!==null&&$t!==void 0?$t:[],j=-1,ce=[],me&&pe.push(me),me=te}}while(O!==void 0);return ce.length!==0&&(oe=ce[ce.length-1][1]),oe}function I($){var G=new Array($.length);return{enter:function(O){for(var V=0;V<$.length;V++)if(G[V]==null){var B=P($[V],O.kind,!1);if(B){var j=B.apply($[V],arguments);if(j===!1)G[V]=O;else if(j===M)G[V]=M;else if(j!==void 0)return j}}},leave:function(O){for(var V=0;V<$.length;V++)if(G[V]==null){var B=P($[V],O.kind,!0);if(B){var j=B.apply($[V],arguments);if(j===M)G[V]=M;else if(j!==void 0&&j!==!1)return j}}else G[V]===O&&(G[V]=null)}}}function P($,G,z){var O=$[G];if(O){if(!z&&typeof O=="function")return O;var V=z?O.leave:O.enter;if(typeof V=="function")return V}else{var B=z?$.leave:$.enter;if(B){if(typeof B=="function")return B;var j=B[G];if(typeof j=="function")return j}}}},6560:c=>{"use strict";c.exports=(ne,q=process.argv)=>{const W=ne.startsWith("-")?"":ne.length===1?"-":"--",Z=q.indexOf(W+ne),ie=q.indexOf("--");return Z!==-1&&(ie===-1||Z<ie)}},9593:(c,ne,q)=>{"use strict";const W=q(4411),Z=Symbol("max"),ie=Symbol("length"),U=Symbol("lengthCalculator"),M=Symbol("allowStale"),L=Symbol("maxAge"),I=Symbol("dispose"),P=Symbol("noDisposeOnSet"),$=Symbol("lruList"),G=Symbol("cache"),z=Symbol("updateAgeOnGet"),O=()=>1;class V{constructor(pe){if(typeof pe=="number"&&(pe={max:pe}),pe||(pe={}),pe.max&&(typeof pe.max!="number"||pe.max<0))throw new TypeError("max must be a non-negative number");const oe=this[Z]=pe.max||Infinity,ee=pe.length||O;if(this[U]=typeof ee!="function"?O:ee,this[M]=pe.stale||!1,pe.maxAge&&typeof pe.maxAge!="number")throw new TypeError("maxAge must be a number");this[L]=pe.maxAge||0,this[I]=pe.dispose,this[P]=pe.noDisposeOnSet||!1,this[z]=pe.updateAgeOnGet||!1,this.reset()}set max(pe){if(typeof pe!="number"||pe<0)throw new TypeError("max must be a non-negative number");this[Z]=pe||Infinity,ce(this)}get max(){return this[Z]}set allowStale(pe){this[M]=!!pe}get allowStale(){return this[M]}set maxAge(pe){if(typeof pe!="number")throw new TypeError("maxAge must be a non-negative number");this[L]=pe,ce(this)}get maxAge(){return this[L]}set lengthCalculator(pe){typeof pe!="function"&&(pe=O),pe!==this[U]&&(this[U]=pe,this[ie]=0,this[$].forEach(oe=>{oe.length=this[U](oe.value,oe.key),this[ie]+=oe.length})),ce(this)}get lengthCalculator(){return this[U]}get length(){return this[ie]}get itemCount(){return this[$].length}rforEach(pe,oe){oe=oe||this;for(let ee=this[$].tail;ee!==null;){const J=ee.prev;me(this,pe,ee,oe),ee=J}}forEach(pe,oe){oe=oe||this;for(let ee=this[$].head;ee!==null;){const J=ee.next;me(this,pe,ee,oe),ee=J}}keys(){return this[$].toArray().map(pe=>pe.key)}values(){return this[$].toArray().map(pe=>pe.value)}reset(){this[I]&&this[$]&&this[$].length&&this[$].forEach(pe=>this[I](pe.key,pe.value)),this[G]=new Map,this[$]=new W,this[ie]=0}dump(){return this[$].map(pe=>j(this,pe)?!1:{k:pe.key,v:pe.value,e:pe.now+(pe.maxAge||0)}).toArray().filter(pe=>pe)}dumpLru(){return this[$]}set(pe,oe,ee){if(ee=ee||this[L],ee&&typeof ee!="number")throw new TypeError("maxAge must be a number");const J=ee?Date.now():0,X=this[U](oe,pe);if(this[G].has(pe)){if(X>this[Z])return te(this,this[G].get(pe)),!1;const Ee=this[G].get(pe).value;return this[I]&&(this[P]||this[I](pe,Ee.value)),Ee.now=J,Ee.maxAge=ee,Ee.value=oe,this[ie]+=X-Ee.length,Ee.length=X,this.get(pe),ce(this),!0}const he=new Se(pe,oe,X,J,ee);return he.length>this[Z]?(this[I]&&this[I](pe,oe),!1):(this[ie]+=he.length,this[$].unshift(he),this[G].set(pe,this[$].head),ce(this),!0)}has(pe){if(!this[G].has(pe))return!1;const oe=this[G].get(pe).value;return!j(this,oe)}get(pe){return B(this,pe,!0)}peek(pe){return B(this,pe,!1)}pop(){const pe=this[$].tail;return pe?(te(this,pe),pe.value):null}del(pe){te(this,this[G].get(pe))}load(pe){this.reset();const oe=Date.now();for(let ee=pe.length-1;ee>=0;ee--){const J=pe[ee],X=J.e||0;if(X===0)this.set(J.k,J.v);else{const he=X-oe;he>0&&this.set(J.k,J.v,he)}}}prune(){this[G].forEach((pe,oe)=>B(this,oe,!1))}}const B=(De,pe,oe)=>{const ee=De[G].get(pe);if(ee){const J=ee.value;if(j(De,J)){if(te(De,ee),!De[M])return}else oe&&(De[z]&&(ee.value.now=Date.now()),De[$].unshiftNode(ee));return J.value}},j=(De,pe)=>{if(!pe||!pe.maxAge&&!De[L])return!1;const oe=Date.now()-pe.now;return pe.maxAge?oe>pe.maxAge:De[L]&&oe>De[L]},ce=De=>{if(De[ie]>De[Z])for(let pe=De[$].tail;De[ie]>De[Z]&&pe!==null;){const oe=pe.prev;te(De,pe),pe=oe}},te=(De,pe)=>{if(pe){const oe=pe.value;De[I]&&De[I](oe.key,oe.value),De[ie]-=oe.length,De[G].delete(oe.key),De[$].removeNode(pe)}};class Se{constructor(pe,oe,ee,J,X){this.key=pe,this.value=oe,this.length=ee,this.now=J,this.maxAge=X||0}}const me=(De,pe,oe,ee)=>{let J=oe.value;j(De,J)&&(te(De,oe),De[M]||(J=void 0)),J&&pe.call(ee,J.value,J.key,De)};c.exports=V},7468:(c,ne,q)=>{const W=q(9930),{defaults:Z}=q(8644),{inline:ie}=q(9709),{findClosingBracket:U,escape:M}=q(621);c.exports=class oo{constructor(I,P){if(this.options=P||Z,this.links=I,this.rules=ie.normal,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=ie.pedantic:this.options.gfm&&(this.options.breaks?this.rules=ie.breaks:this.rules=ie.gfm)}static get rules(){return ie}static output(I,P,$){return new oo(P,$).output(I)}output(I){let P="",$,G,z,O,V,B;for(;I;){if(V=this.rules.escape.exec(I)){I=I.substring(V[0].length),P+=M(V[1]);continue}if(V=this.rules.tag.exec(I)){!this.inLink&&/^<a /i.test(V[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(V[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(V[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(V[0])&&(this.inRawBlock=!1),I=I.substring(V[0].length),P+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):M(V[0]):V[0]);continue}if(V=this.rules.link.exec(I)){const j=U(V[2],"()");if(j>-1){const te=(V[0].indexOf("!")===0?5:4)+V[1].length+j;V[2]=V[2].substring(0,j),V[0]=V[0].substring(0,te).trim(),V[3]=""}I=I.substring(V[0].length),this.inLink=!0,z=V[2],this.options.pedantic?($=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(z),$?(z=$[1],O=$[3]):O=""):O=V[3]?V[3].slice(1,-1):"",z=z.trim().replace(/^<([\s\S]*)>$/,"$1"),P+=this.outputLink(V,{href:oo.escapes(z),title:oo.escapes(O)}),this.inLink=!1;continue}if((V=this.rules.reflink.exec(I))||(V=this.rules.nolink.exec(I))){if(I=I.substring(V[0].length),$=(V[2]||V[1]).replace(/\s+/g," "),$=this.links[$.toLowerCase()],!$||!$.href){P+=V[0].charAt(0),I=V[0].substring(1)+I;continue}this.inLink=!0,P+=this.outputLink(V,$),this.inLink=!1;continue}if(V=this.rules.strong.exec(I)){I=I.substring(V[0].length),P+=this.renderer.strong(this.output(V[4]||V[3]||V[2]||V[1]));continue}if(V=this.rules.em.exec(I)){I=I.substring(V[0].length),P+=this.renderer.em(this.output(V[6]||V[5]||V[4]||V[3]||V[2]||V[1]));continue}if(V=this.rules.code.exec(I)){I=I.substring(V[0].length),P+=this.renderer.codespan(M(V[2].trim(),!0));continue}if(V=this.rules.br.exec(I)){I=I.substring(V[0].length),P+=this.renderer.br();continue}if(V=this.rules.del.exec(I)){I=I.substring(V[0].length),P+=this.renderer.del(this.output(V[1]));continue}if(V=this.rules.autolink.exec(I)){I=I.substring(V[0].length),V[2]==="@"?(G=M(this.mangle(V[1])),z="mailto:"+G):(G=M(V[1]),z=G),P+=this.renderer.link(z,null,G);continue}if(!this.inLink&&(V=this.rules.url.exec(I))){if(V[2]==="@")G=M(V[0]),z="mailto:"+G;else{do B=V[0],V[0]=this.rules._backpedal.exec(V[0])[0];while(B!==V[0]);G=M(V[0]),V[1]==="www."?z="http://"+G:z=G}I=I.substring(V[0].length),P+=this.renderer.link(z,null,G);continue}if(V=this.rules.text.exec(I)){I=I.substring(V[0].length),this.inRawBlock?P+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):M(V[0]):V[0]):P+=this.renderer.text(M(this.smartypants(V[0])));continue}if(I)throw new Error("Infinite loop on byte: "+I.charCodeAt(0))}return P}static escapes(I){return I&&I.replace(oo.rules._escapes,"$1")}outputLink(I,P){const $=P.href,G=P.title?M(P.title):null;return I[0].charAt(0)!=="!"?this.renderer.link($,G,this.output(I[1])):this.renderer.image($,G,M(I[1]))}smartypants(I){return this.options.smartypants?I.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):I}mangle(I){if(!this.options.mangle)return I;const P=I.length;let $="",G=0,z;for(;G<P;G++)z=I.charCodeAt(G),Math.random()>.5&&(z="x"+z.toString(16)),$+="&#"+z+";";return $}}},1092:(c,ne,q)=>{const{defaults:W}=q(8644),{block:Z}=q(9709),{rtrim:ie,splitCells:U,escape:M}=q(621);c.exports=class Fp{constructor(I){this.tokens=[],this.tokens.links=Object.create(null),this.options=I||W,this.rules=Z.normal,this.options.pedantic?this.rules=Z.pedantic:this.options.gfm&&(this.rules=Z.gfm)}static get rules(){return Z}static lex(I,P){return new Fp(P).lex(I)}lex(I){return I=I.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(I,!0)}token(I,P){I=I.replace(/^ +$/gm,"");let $,G,z,O,V,B,j,ce,te,Se,me,De,pe,oe,ee,J;for(;I;){if((z=this.rules.newline.exec(I))&&(I=I.substring(z[0].length),z[0].length>1&&this.tokens.push({type:"space"})),z=this.rules.code.exec(I)){const X=this.tokens[this.tokens.length-1];I=I.substring(z[0].length),X&&X.type==="paragraph"?X.text+=`
`+z[0].trimRight():(z=z[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?z:ie(z,`
`)}));continue}if(z=this.rules.fences.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"code",lang:z[2]?z[2].trim():z[2],text:z[3]||""});continue}if(z=this.rules.heading.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"heading",depth:z[1].length,text:z[2]});continue}if((z=this.rules.nptable.exec(I))&&(B={type:"table",header:U(z[1].replace(/^ *| *\| *$/g,"")),align:z[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:z[3]?z[3].replace(/\n$/,"").split(`
`):[]},B.header.length===B.align.length)){for(I=I.substring(z[0].length),me=0;me<B.align.length;me++)/^ *-+: *$/.test(B.align[me])?B.align[me]="right":/^ *:-+: *$/.test(B.align[me])?B.align[me]="center":/^ *:-+ *$/.test(B.align[me])?B.align[me]="left":B.align[me]=null;for(me=0;me<B.cells.length;me++)B.cells[me]=U(B.cells[me],B.header.length);this.tokens.push(B);continue}if(z=this.rules.hr.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"hr"});continue}if(z=this.rules.blockquote.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"blockquote_start"}),z=z[0].replace(/^ *> ?/gm,""),this.token(z,P),this.tokens.push({type:"blockquote_end"});continue}if(z=this.rules.list.exec(I)){for(I=I.substring(z[0].length),O=z[2],oe=O.length>1,j={type:"list_start",ordered:oe,start:oe?+O:"",loose:!1},this.tokens.push(j),z=z[0].match(this.rules.item),ce=[],$=!1,pe=z.length,me=0;me<pe;me++)B=z[me],Se=B.length,B=B.replace(/^ *([*+-]|\d+\.) */,""),~B.indexOf(`
 `)&&(Se-=B.length,B=this.options.pedantic?B.replace(/^ {1,4}/gm,""):B.replace(new RegExp("^ {1,"+Se+"}","gm"),"")),me!==pe-1&&(V=Z.bullet.exec(z[me+1])[0],(O.length>1?V.length===1:V.length>1||this.options.smartLists&&V!==O)&&(I=z.slice(me+1).join(`
`)+I,me=pe-1)),G=$||/\n\n(?!\s*$)/.test(B),me!==pe-1&&($=B.charAt(B.length-1)===`
`,G||(G=$)),G&&(j.loose=!0),ee=/^\[[ xX]\] /.test(B),J=void 0,ee&&(J=B[1]!==" ",B=B.replace(/^\[[ xX]\] +/,"")),te={type:"list_item_start",task:ee,checked:J,loose:G},ce.push(te),this.tokens.push(te),this.token(B,!1),this.tokens.push({type:"list_item_end"});if(j.loose)for(pe=ce.length,me=0;me<pe;me++)ce[me].loose=!0;this.tokens.push({type:"list_end"});continue}if(z=this.rules.html.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(z[1]==="pre"||z[1]==="script"||z[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(z[0]):M(z[0]):z[0]});continue}if(P&&(z=this.rules.def.exec(I))){I=I.substring(z[0].length),z[3]&&(z[3]=z[3].substring(1,z[3].length-1)),De=z[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[De]||(this.tokens.links[De]={href:z[2],title:z[3]});continue}if((z=this.rules.table.exec(I))&&(B={type:"table",header:U(z[1].replace(/^ *| *\| *$/g,"")),align:z[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:z[3]?z[3].replace(/\n$/,"").split(`
`):[]},B.header.length===B.align.length)){for(I=I.substring(z[0].length),me=0;me<B.align.length;me++)/^ *-+: *$/.test(B.align[me])?B.align[me]="right":/^ *:-+: *$/.test(B.align[me])?B.align[me]="center":/^ *:-+ *$/.test(B.align[me])?B.align[me]="left":B.align[me]=null;for(me=0;me<B.cells.length;me++)B.cells[me]=U(B.cells[me].replace(/^ *\| *| *\| *$/g,""),B.header.length);this.tokens.push(B);continue}if(z=this.rules.lheading.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"heading",depth:z[2].charAt(0)==="="?1:2,text:z[1]});continue}if(P&&(z=this.rules.paragraph.exec(I))){I=I.substring(z[0].length),this.tokens.push({type:"paragraph",text:z[1].charAt(z[1].length-1)===`
`?z[1].slice(0,-1):z[1]});continue}if(z=this.rules.text.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"text",text:z[0]});continue}if(I)throw new Error("Infinite loop on byte: "+I.charCodeAt(0))}return this.tokens}}},9170:(c,ne,q)=>{const W=q(9930),Z=q(1846),ie=q(7468),U=q(1477),{defaults:M}=q(8644),{merge:L,unescape:I}=q(621);c.exports=class Lp{constructor($){this.tokens=[],this.token=null,this.options=$||M,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new Z}static parse($,G){return new Lp(G).parse($)}parse($){this.inline=new ie($.links,this.options),this.inlineText=new ie($.links,L({},this.options,{renderer:new U})),this.tokens=$.reverse();let G="";for(;this.next();)G+=this.tok();return G}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let $=this.token.text;for(;this.peek().type==="text";)$+=`
`+this.next().text;return this.inline.output($)}tok(){let $="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,I(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let G="",z,O,V,B;for(V="",z=0;z<this.token.header.length;z++)V+=this.renderer.tablecell(this.inline.output(this.token.header[z]),{header:!0,align:this.token.align[z]});for(G+=this.renderer.tablerow(V),z=0;z<this.token.cells.length;z++){for(O=this.token.cells[z],V="",B=0;B<O.length;B++)V+=this.renderer.tablecell(this.inline.output(O[B]),{header:!1,align:this.token.align[B]});$+=this.renderer.tablerow(V)}return this.renderer.table(G,$)}case"blockquote_start":{for($="";this.next().type!=="blockquote_end";)$+=this.tok();return this.renderer.blockquote($)}case"list_start":{$="";const G=this.token.ordered,z=this.token.start;for(;this.next().type!=="list_end";)$+=this.tok();return this.renderer.list($,G,z)}case"list_item_start":{$="";const G=this.token.loose,z=this.token.checked,O=this.token.task;if(this.token.task)if(G)if(this.peek().type==="text"){const V=this.peek();V.text=this.renderer.checkbox(z)+" "+V.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(z)});else $+=this.renderer.checkbox(z);for(;this.next().type!=="list_item_end";)$+=!G&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem($,O,z)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const G='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(G);else throw new Error(G)}}}}},9930:(c,ne,q)=>{const{defaults:W}=q(8644),{cleanUrl:Z,escape:ie}=q(621);c.exports=class{constructor(M){this.options=M||W}code(M,L,I){const P=(L||"").match(/\S*/)[0];if(this.options.highlight){const $=this.options.highlight(M,P);$!=null&&$!==M&&(I=!0,M=$)}return P?'<pre><code class="'+this.options.langPrefix+ie(P,!0)+'">'+(I?M:ie(M,!0))+`</code></pre>
`:"<pre><code>"+(I?M:ie(M,!0))+"</code></pre>"}blockquote(M){return`<blockquote>
`+M+`</blockquote>
`}html(M){return M}heading(M,L,I,P){return this.options.headerIds?"<h"+L+' id="'+this.options.headerPrefix+P.slug(I)+'">'+M+"</h"+L+`>
`:"<h"+L+">"+M+"</h"+L+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(M,L,I){const P=L?"ol":"ul",$=L&&I!==1?' start="'+I+'"':"";return"<"+P+$+`>
`+M+"</"+P+`>
`}listitem(M){return"<li>"+M+`</li>
`}checkbox(M){return"<input "+(M?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(M){return"<p>"+M+`</p>
`}table(M,L){return L&&(L="<tbody>"+L+"</tbody>"),`<table>
<thead>
`+M+`</thead>
`+L+`</table>
`}tablerow(M){return`<tr>
`+M+`</tr>
`}tablecell(M,L){const I=L.header?"th":"td";return(L.align?"<"+I+' align="'+L.align+'">':"<"+I+">")+M+"</"+I+`>
`}strong(M){return"<strong>"+M+"</strong>"}em(M){return"<em>"+M+"</em>"}codespan(M){return"<code>"+M+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(M){return"<del>"+M+"</del>"}link(M,L,I){if(M=Z(this.options.sanitize,this.options.baseUrl,M),M===null)return I;let P='<a href="'+ie(M)+'"';return L&&(P+=' title="'+L+'"'),P+=">"+I+"</a>",P}image(M,L,I){if(M=Z(this.options.sanitize,this.options.baseUrl,M),M===null)return I;let P='<img src="'+M+'" alt="'+I+'"';return L&&(P+=' title="'+L+'"'),P+=this.options.xhtml?"/>":">",P}text(M){return M}}},1846:c=>{c.exports=class{constructor(){this.seen={}}slug(q){let W=q.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(W)){const Z=W;do this.seen[Z]++,W=Z+"-"+this.seen[Z];while(this.seen.hasOwnProperty(W))}return this.seen[W]=0,W}}},1477:c=>{c.exports=class{strong(q){return q}em(q){return q}codespan(q){return q}del(q){return q}html(q){return q}text(q){return q}link(q,W,Z){return""+Z}image(q,W,Z){return""+Z}br(){return""}}},8644:c=>{function ne(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function q(W){c.exports.defaults=W}c.exports={defaults:ne(),getDefaults:ne,changeDefaults:q}},621:c=>{const ne=/[&<>"']/,q=/[&<>"']/g,W=/[<>"']|&(?!#?\w+;)/,Z=/[<>"']|&(?!#?\w+;)/g,ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},U=J=>ie[J];function M(J,X){if(X){if(ne.test(J))return J.replace(q,U)}else if(W.test(J))return J.replace(Z,U);return J}const L=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function I(J){return J.replace(L,(X,he)=>(he=he.toLowerCase(),he==="colon"?":":he.charAt(0)==="#"?he.charAt(1)==="x"?String.fromCharCode(parseInt(he.substring(2),16)):String.fromCharCode(+he.substring(1)):""))}const P=/(^|[^\[])\^/g;function $(J,X){J=J.source||J,X=X||"";const he={replace:(be,Ee)=>(Ee=Ee.source||Ee,Ee=Ee.replace(P,"$1"),J=J.replace(be,Ee),he),getRegex:()=>new RegExp(J,X)};return he}const G=/[^\w:]/g,z=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function O(J,X,he){if(J){let be;try{be=decodeURIComponent(I(he)).replace(G,"").toLowerCase()}catch(Ee){return null}if(be.indexOf("javascript:")===0||be.indexOf("vbscript:")===0||be.indexOf("data:")===0)return null}X&&!z.test(he)&&(he=te(X,he));try{he=encodeURI(he).replace(/%25/g,"%")}catch(be){return null}return he}const V={},B=/^[^:]+:\/*[^/]*$/,j=/^([^:]+:)[\s\S]*$/,ce=/^([^:]+:\/*[^/]*)[\s\S]*$/;function te(J,X){V[" "+J]||(B.test(J)?V[" "+J]=J+"/":V[" "+J]=pe(J,"/",!0)),J=V[" "+J];const he=J.indexOf(":")===-1;return X.substring(0,2)==="//"?he?X:J.replace(j,"$1")+X:X.charAt(0)==="/"?he?X:J.replace(ce,"$1")+X:J+X}const Se={exec:function(){}};function me(J){let X=1,he,be;for(;X<arguments.length;X++){he=arguments[X];for(be in he)Object.prototype.hasOwnProperty.call(he,be)&&(J[be]=he[be])}return J}function De(J,X){const he=J.replace(/\|/g,(Pe,ke,ze)=>{let je=!1,ct=ke;for(;--ct>=0&&ze[ct]==="\\";)je=!je;return je?"|":" |"}),be=he.split(/ \|/);let Ee=0;if(be.length>X)be.splice(X);else for(;be.length<X;)be.push("");for(;Ee<be.length;Ee++)be[Ee]=be[Ee].trim().replace(/\\\|/g,"|");return be}function pe(J,X,he){const be=J.length;if(be===0)return"";let Ee=0;for(;Ee<be;){const Pe=J.charAt(be-Ee-1);if(Pe===X&&!he)Ee++;else if(Pe!==X&&he)Ee++;else break}return J.substr(0,be-Ee)}function oe(J,X){if(J.indexOf(X[1])===-1)return-1;const he=J.length;let be=0,Ee=0;for(;Ee<he;Ee++)if(J[Ee]==="\\")Ee++;else if(J[Ee]===X[0])be++;else if(J[Ee]===X[1]&&(be--,be<0))return Ee;return-1}function ee(J){J&&J.sanitize&&!J.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}c.exports={escape:M,unescape:I,edit:$,cleanUrl:O,resolveUrl:te,noopTest:Se,merge:me,splitCells:De,rtrim:pe,findClosingBracket:oe,checkSanitizeDeprecation:ee}},7228:(c,ne,q)=>{const W=q(1092),Z=q(9170),ie=q(9930),U=q(1477),M=q(7468),L=q(1846),{merge:I,checkSanitizeDeprecation:P,escape:$}=q(621),{getDefaults:G,changeDefaults:z,defaults:O}=q(8644);function V(B,j,ce){if(typeof B=="undefined"||B===null)throw new Error("marked(): input parameter is undefined or null");if(typeof B!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(B)+", string expected");if(ce||typeof j=="function"){ce||(ce=j,j=null),j=I({},V.defaults,j||{}),P(j);const te=j.highlight;let Se,me,De=0;try{Se=W.lex(B,j)}catch(oe){return ce(oe)}me=Se.length;const pe=function(oe){if(oe)return j.highlight=te,ce(oe);let ee;try{ee=Z.parse(Se,j)}catch(J){oe=J}return j.highlight=te,oe?ce(oe):ce(null,ee)};if(!te||te.length<3||(delete j.highlight,!me))return pe();for(;De<Se.length;De++)(function(oe){return oe.type!=="code"?--me||pe():te(oe.text,oe.lang,function(ee,J){if(ee)return pe(ee);if(J==null||J===oe.text)return--me||pe();oe.text=J,oe.escaped=!0,--me||pe()})})(Se[De]);return}try{return j=I({},V.defaults,j||{}),P(j),Z.parse(W.lex(B,j),j)}catch(te){if(te.message+=`
Please report this to https://github.com/markedjs/marked.`,(j||V.defaults).silent)return"<p>An error occurred:</p><pre>"+$(te.message+"",!0)+"</pre>";throw te}}V.options=V.setOptions=function(B){return I(V.defaults,B),z(V.defaults),V},V.getDefaults=G,V.defaults=O,V.Parser=Z,V.parser=Z.parse,V.Renderer=ie,V.TextRenderer=U,V.Lexer=W,V.lexer=W.lex,V.InlineLexer=M,V.inlineLexer=M.output,V.Slugger=L,V.parse=V,c.exports=V},9709:(c,ne,q)=>{const{noopTest:W,edit:Z,merge:ie}=q(621),U={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:W,table:W,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};U._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,U._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,U.def=Z(U.def).replace("label",U._label).replace("title",U._title).getRegex(),U.bullet=/(?:[*+-]|\d{1,9}\.)/,U.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,U.item=Z(U.item,"gm").replace(/bull/g,U.bullet).getRegex(),U.list=Z(U.list).replace(/bull/g,U.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+U.def.source+")").getRegex(),U._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U._comment=/<!--(?!-?>)[\s\S]*?-->/,U.html=Z(U.html,"i").replace("comment",U._comment).replace("tag",U._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),U.paragraph=Z(U._paragraph).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.blockquote=Z(U.blockquote).replace("paragraph",U.paragraph).getRegex(),U.normal=ie({},U),U.gfm=ie({},U.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),U.gfm.nptable=Z(U.gfm.nptable).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.gfm.table=Z(U.gfm.table).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.pedantic=ie({},U.normal,{html:Z(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",U._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:W,paragraph:Z(U.normal._paragraph).replace("hr",U.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",U.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const M={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:W,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:W,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};M._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,M.em=Z(M.em).replace(/punctuation/g,M._punctuation).getRegex(),M._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,M._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,M._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,M.autolink=Z(M.autolink).replace("scheme",M._scheme).replace("email",M._email).getRegex(),M._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,M.tag=Z(M.tag).replace("comment",U._comment).replace("attribute",M._attribute).getRegex(),M._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,M._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,M._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,M.link=Z(M.link).replace("label",M._label).replace("href",M._href).replace("title",M._title).getRegex(),M.reflink=Z(M.reflink).replace("label",M._label).getRegex(),M.normal=ie({},M),M.pedantic=ie({},M.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:Z(/^!?\[(label)\]\((.*?)\)/).replace("label",M._label).getRegex(),reflink:Z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",M._label).getRegex()}),M.gfm=ie({},M.normal,{escape:Z(M.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),M.gfm.url=Z(M.gfm.url,"i").replace("email",M.gfm._extended_email).getRegex(),M.breaks=ie({},M.gfm,{br:Z(M.br).replace("{2,}","*").getRegex(),text:Z(M.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),c.exports={block:U,inline:M}},7824:c=>{var ne=1e3,q=ne*60,W=q*60,Z=W*24,ie=Z*7,U=Z*365.25;c.exports=function($,G){G=G||{};var z=typeof $;if(z==="string"&&$.length>0)return M($);if(z==="number"&&isFinite($))return G.long?I($):L($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function M($){if($=String($),!($.length>100)){var G=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!!G){var z=parseFloat(G[1]),O=(G[2]||"ms").toLowerCase();switch(O){case"years":case"year":case"yrs":case"yr":case"y":return z*U;case"weeks":case"week":case"w":return z*ie;case"days":case"day":case"d":return z*Z;case"hours":case"hour":case"hrs":case"hr":case"h":return z*W;case"minutes":case"minute":case"mins":case"min":case"m":return z*q;case"seconds":case"second":case"secs":case"sec":case"s":return z*ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return z;default:return}}}}function L($){var G=Math.abs($);return G>=Z?Math.round($/Z)+"d":G>=W?Math.round($/W)+"h":G>=q?Math.round($/q)+"m":G>=ne?Math.round($/ne)+"s":$+"ms"}function I($){var G=Math.abs($);return G>=Z?P($,G,Z,"day"):G>=W?P($,G,W,"hour"):G>=q?P($,G,q,"minute"):G>=ne?P($,G,ne,"second"):$+" ms"}function P($,G,z,O){var V=G>=z*1.5;return Math.round($/z)+" "+O+(V?"s":"")}},778:(c,ne,q)=>{var W=q(2479);c.exports=W(Z),c.exports.strict=W(ie),Z.proto=Z(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Z(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ie(this)},configurable:!0})});function Z(U){var M=function(){return M.called?M.value:(M.called=!0,M.value=U.apply(this,arguments))};return M.called=!1,M}function ie(U){var M=function(){if(M.called)throw new Error(M.onceError);return M.called=!0,M.value=U.apply(this,arguments)},L=U.name||"Function wrapped with `once`";return M.onceError=L+" shouldn't be called more than once",M.called=!1,M}},6200:(c,ne,q)=>{"use strict";const W=q(1669),Z=q(1003),ie=/\s/,U=/\r|\n/,M=/^(Host|Match)$/i,L=1,I=2;function P(G,z){return z.hasOwnProperty(G.param)&&z[G.param]===G.value}class $ extends Array{compute(z){const O={},V=(B,j)=>{B==="IdentityFile"?(O[B]||(O[B]=[])).push(j):O[B]==null&&(O[B]=j)};for(const B of this)B.type===L&&(B.param==="Host"?Z(B.value,z)&&(V(B.param,B.value),B.config.filter(j=>j.type===L).forEach(j=>V(j.param,j.value))):B.param==="Match"||V(B.param,B.value));return O}find(z={}){if(typeof z=="function")return super.find(z);if(!(z&&("Host"in z||"Match"in z)))throw new Error("Can only find by Host or Match");return super.find(O=>P(O,z))}remove(z={}){if(!(z&&("Host"in z||"Match"in z)))throw new Error("Can only remove by Host or Match");const O=typeof z=="function"?super.findIndex(z):super.findIndex(V=>P(V,z));if(O>=0)return this.splice(O,1)}toString(){return this.constructor.stringify(this)}append(z){let O="  ";e:for(const j of this)if(M.test(j.param)){for(const ce of j.config)if(ce.before){O=ce.before;break e}}if(this.length>0){let j=this[this.length-1];j.config&&(j=j.config[j.config.length-1]),j.after=`
`}let V=this,B=this;for(const j in z){const ce={type:L,param:j,separator:" ",value:z[j],before:"",after:`
`};M.test(j)?(V=B,V.push(ce),V=ce.config=new $):(ce.before=V===B?"":O,V.push(ce))}return B}static stringify(z){let O="";const V=(j,ce)=>Array.isArray(j)?j.map(te=>V(te,ie.test(te))).join(" "):ce?`"${j}"`:j,B=j=>{if(O+=j.before,j.type===I)O+=j.content;else if(j.type===L){const ce=j.quoted||/IdentityFile/i.test(j.param)&&ie.test(j.value),te=V(j.value,ce);O+=`${j.param}${j.separator}${te}`}O+=j.after,j.config&&j.config.forEach(B)};return z.forEach(B),O}static get DIRECTIVE(){return L}static get COMMENT(){return I}static parse(z){let O=0,V=ce(),B=new $,j=B;function ce(){return z[O++]}function te(){let he="";for(;ie.test(V);)he+=V,V=ce();return he}function Se(){let he="";for(;U.test(V);)he+=V,V=ce();return he}function me(){let he="";for(;V&&/[^ \t=]/.test(V);)he+=V,V=ce();return he}function De(){let he=te();return V==="="&&(he+=V,V=ce()),he+te()}function pe(){let he="",be=!1,Ee=!1;for(;V&&!U.test(V);)Ee?(he+=V==='"'?V:`\\${V}`,Ee=!1):V==='"'&&(!he||be)?be=!be:V==="\\"?Ee=!0:he+=V,V=ce();if(be||Ee)throw new Error(`Unexpected line break at ${he}`);return he.trim()}function oe(){const he=I;let be="";for(;V&&!U.test(V);)be+=V,V=ce();return{type:he,content:be}}function ee(){const he=[];let be="",Ee=!1,Pe=!1;for(;V&&!U.test(V);)Pe?(be+=V==='"'?V:`\\${V}`,Pe=!1):V==='"'?Ee=!Ee:V==="\\"?Pe=!0:Ee?be+=V:/[ \t]/.test(V)?be&&(he.push(be),be=""):be+=V,V=ce();if(Ee||Pe)throw new Error(`Unexpected line break at ${he.concat(be).join(" ")}`);return he.push(be),he.length>1?he:he[0]}function J(){const he=L,be=me(),Ee=be.toLowerCase()=="host",Pe={type:he,param:be,separator:De(),quoted:!Ee&&V==='"',value:Ee?ee():pe()};return Pe.quoted||delete Pe.quoted,Pe}function X(){const he=te(),be=V==="#"?oe():J(),Ee=Se();return be.before=he,be.after=Ee,be}for(;V;){let he=X();he.type===L&&M.test(he.param)?(B=j,B.push(he),B=he.config=new $):B.push(he)}return j}}$.find=W.deprecate((G,z)=>{const O=G.find(z);return O?[O,G.indexOf(O)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),c.exports=$},1003:c=>{"use strict";function ne(W,Z){return W=W.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+W+")$").test(Z)}function q(W,Z){const ie=Array.isArray(W)?W:W.split(/,/);let U=!1;for(const M of ie){if(M[0]=="!"&&ne(M.slice(1),Z))return!1;ne(M,Z)&&(U=!0)}return U}c.exports=q},2130:(c,ne,q)=>{"use strict";const W=q(2087),Z=q(3867),ie=q(6560),{env:U}=process;let M;ie("no-color")||ie("no-colors")||ie("color=false")||ie("color=never")?M=0:(ie("color")||ie("colors")||ie("color=true")||ie("color=always"))&&(M=1),"FORCE_COLOR"in U&&(U.FORCE_COLOR==="true"?M=1:U.FORCE_COLOR==="false"?M=0:M=U.FORCE_COLOR.length===0?1:Math.min(parseInt(U.FORCE_COLOR,10),3));function L($){return $===0?!1:{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function I($,G){if(M===0)return 0;if(ie("color=16m")||ie("color=full")||ie("color=truecolor"))return 3;if(ie("color=256"))return 2;if($&&!G&&M===void 0)return 0;const z=M||0;if(U.TERM==="dumb")return z;if(process.platform==="win32"){const O=W.release().split(".");return Number(O[0])>=10&&Number(O[2])>=10586?Number(O[2])>=14931?3:2:1}if("CI"in U)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(O=>O in U)||U.CI_NAME==="codeship"?1:z;if("TEAMCITY_VERSION"in U)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(U.TEAMCITY_VERSION)?1:0;if(U.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in U){const O=parseInt((U.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(U.TERM_PROGRAM){case"iTerm.app":return O>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(U.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(U.TERM)||"COLORTERM"in U?1:z}function P($){const G=I($,$&&$.isTTY);return L(G)}c.exports={supportsColor:P,stdout:L(I(!0,Z.isatty(1))),stderr:L(I(!0,Z.isatty(2)))}},7121:(c,ne,q)=>{"use strict";q.d(ne,{Z:()=>U});function W(M){var L,I=M.Symbol;return typeof I=="function"?I.observable?L=I.observable:(L=I("observable"),I.observable=L):L="@@observable",L}c=q.hmd(c);var Z;typeof self!="undefined"?Z=self:typeof window!="undefined"?Z=window:typeof global!="undefined"?Z=global:Z=c;var ie=W(Z);const U=ie},4802:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var W=q(6363);ne.ExperimentationService=W.ExperimentationService},6363:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(4067),Z=q(4234),ie=q(5975);class U extends ie.ExperimentationServiceAutoPolling{constructor(L){super(L.telemetry,L.filterProviders||[],L.refetchInterval!=null?L.refetchInterval:0,L.featuresTelemetryPropertyName,L.assignmentContextTelemetryPropertyName,L.telemetryEventName,L.storageKey,L.keyValueStorage);this.options=L,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new W.TasApiFeatureProvider(new Z.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}ne.ExperimentationService=U,U.REFRESH_RATE_IN_MINUTES=30},5975:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(3663),Z=q(3334);class ie extends W.ExperimentationServiceBase{constructor(M,L,I,P,$,G,z,O){super(M,P,$,G,z,O);if(this.telemetry=M,this.filterProviders=L,this.refreshRateMs=I,this.featuresTelemetryPropertyName=P,this.assignmentContextTelemetryPropertyName=$,this.telemetryEventName=G,this.storageKey=z,this.storage=O,I<1e3&&I!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");I>0&&(this.pollingService=new Z.PollingService(I),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(M=!1){if(this.pollingService){this.pollingService.StopPolling();let L=await super.getFeaturesAsync(M);return this.pollingService.StartPolling(),L}else return await super.getFeaturesAsync(M)}}ne.ExperimentationServiceAutoPolling=ie},3663:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(7002);class Z{constructor(U,M,L,I,P,$){this.telemetry=U,this.featuresTelemetryPropertyName=M,this.assignmentContextTelemetryPropertyName=L,this.telemetryEventName=I,this.storageKey=P,this.storage=$,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||($=new W.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(U){this._features=U,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(U=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async L=>await L.getFeatures()));let M=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(M,U),this.features}updateFeatures(U,M=!1){let L={features:[],assignmentContext:"",configs:[]};for(let I of U){for(let P of I.features)L.features.includes(P)||L.features.push(P);for(let P of I.configs){const $=L.configs.find(G=>G.Id===P.Id);$?$.Parameters=Object.assign(Object.assign({},$.Parameters),P.Parameters):L.configs.push(P)}L.assignmentContext+=I.assignmentContext}(M||!this.featuresConsumed)&&(this.features=L),this.storage&&this.storage.setValue(this.storageKey,L)}async loadCachedFeatureData(){let U;this.storage&&(U=await this.storage.getValue(this.storageKey),U!==void 0&&U.configs===void 0&&(U.configs=[])),this.features.features.length===0&&(this.features=U||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(U){return this.featuresConsumed=!0,this.PostEventToTelemetry(U),this.features.features.includes(U)}async isCachedFlightEnabled(U){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(U),this.features.features.includes(U)}async isFlightEnabledAsync(U){const M=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(U),M.features.includes(U)}getTreatmentVariable(U,M){var L;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${U}.${M}`),(L=this.features.configs.find(P=>P.Id===U))===null||L===void 0?void 0:L.Parameters[M]}async getTreatmentVariableAsync(U,M){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(U,M)}PostEventToTelemetry(U){this.cachedTelemetryEvents.includes(U)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",U]])),this.cachedTelemetryEvents.push(U))}invokeInit(){this.init()}addFeatureProvider(...U){if(!(U==null||this.featureProviders==null))for(let M of U)this.featureProviders.push(M)}}ne.ExperimentationServiceBase=Z},69:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(Z){this.telemetry=Z,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let Z=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,Z}}ne.BaseFeatureProvider=q},4e3:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(69);class Z extends W.BaseFeatureProvider{constructor(U,M){super(U);this.telemetry=U,this.filterProviders=M,this.cachedTelemetryEvents=[]}getFilters(){let U=new Map;for(let M of this.filterProviders){let L=M.getFilters();for(let I of L.keys()){let P=L.get(I);U.set(I,P)}}return U}PostEventToTelemetry(U){if(this.cachedTelemetryEvents.includes(U))return;const M=JSON.stringify(U);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",M]])),this.cachedTelemetryEvents.push(U)}}ne.FilteredFeatureProvider=Z},4067:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(4e3);class Z extends W.FilteredFeatureProvider{constructor(U,M,L){super(M,L);this.httpClient=U,this.telemetry=M,this.filterProviders=L}async fetch(){let U=this.getFilters(),M={};for(let G of U.keys()){const z=U.get(G);M[G]=z}let L=await this.httpClient.get({headers:M});U.keys.length>0&&this.PostEventToTelemetry(M);let I=L.data,P=I.Configs,$=[];for(let G of P)if(!!G.Parameters)for(let z of Object.keys(G.Parameters)){const O=z+(G.Parameters[z]?"":"cf");$.includes(O)||$.push(O)}return{features:$,assignmentContext:I.AssignmentContext,configs:P}}}ne.TasApiFeatureProvider=Z},4234:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(9669);class Z{constructor(U){this.endpoint=U}get(U){return W.default.get(this.endpoint,Object.assign(Object.assign({},U),{proxy:!1}))}}ne.AxiosHttpClient=Z},7002:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(){this.storage=new Map}async getValue(Z,ie){return this.storage.has(Z)?await Promise.resolve(this.storage.get(Z)):await Promise.resolve(ie||void 0)}setValue(Z,ie){this.storage.set(Z,ie)}}ne.MemoryKeyValueStorage=q},3334:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(Z){this.fetchInterval=Z}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(Z){this.onTick=Z}StartPolling(Z=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(Z&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}ne.PollingService=q},6149:(c,ne,q)=>{c.exports=q(5468)},5468:(c,ne,q)=>{"use strict";var W,Z=q(1631),ie=q(4016),U=q(8605),M=q(7211),L=q(8614),I=q(2357),P=q(1669);W=$,ne.httpsOverHttp=G,W=z,W=O;function $(Se){var me=new V(Se);return me.request=U.request,me}function G(Se){var me=new V(Se);return me.request=U.request,me.createSocket=B,me.defaultPort=443,me}function z(Se){var me=new V(Se);return me.request=M.request,me}function O(Se){var me=new V(Se);return me.request=M.request,me.createSocket=B,me.defaultPort=443,me}function V(Se){var me=this;me.options=Se||{},me.proxyOptions=me.options.proxy||{},me.maxSockets=me.options.maxSockets||U.Agent.defaultMaxSockets,me.requests=[],me.sockets=[],me.on("free",function(pe,oe,ee,J){for(var X=j(oe,ee,J),he=0,be=me.requests.length;he<be;++he){var Ee=me.requests[he];if(Ee.host===X.host&&Ee.port===X.port){me.requests.splice(he,1),Ee.request.onSocket(pe);return}}pe.destroy(),me.removeSocket(pe)})}P.inherits(V,L.EventEmitter),V.prototype.addRequest=function(me,De,pe,oe){var ee=this,J=ce({request:me},ee.options,j(De,pe,oe));if(ee.sockets.length>=this.maxSockets){ee.requests.push(J);return}ee.createSocket(J,function(X){X.on("free",he),X.on("close",be),X.on("agentRemove",be),me.onSocket(X);function he(){ee.emit("free",X,J)}function be(Ee){ee.removeSocket(X),X.removeListener("free",he),X.removeListener("close",be),X.removeListener("agentRemove",be)}})},V.prototype.createSocket=function(me,De){var pe=this,oe={};pe.sockets.push(oe);var ee=ce({},pe.proxyOptions,{method:"CONNECT",path:me.host+":"+me.port,agent:!1,headers:{host:me.host+":"+me.port}});me.localAddress&&(ee.localAddress=me.localAddress),ee.proxyAuth&&(ee.headers=ee.headers||{},ee.headers["Proxy-Authorization"]="Basic "+new Buffer(ee.proxyAuth).toString("base64")),te("making CONNECT request");var J=pe.request(ee);J.useChunkedEncodingByDefault=!1,J.once("response",X),J.once("upgrade",he),J.once("connect",be),J.once("error",Ee),J.end();function X(Pe){Pe.upgrade=!0}function he(Pe,ke,ze){process.nextTick(function(){be(Pe,ke,ze)})}function be(Pe,ke,ze){if(J.removeAllListeners(),ke.removeAllListeners(),Pe.statusCode!==200){te("tunneling socket could not be established, statusCode=%d",Pe.statusCode),ke.destroy();var je=new Error("tunneling socket could not be established, statusCode="+Pe.statusCode);je.code="ECONNRESET",me.request.emit("error",je),pe.removeSocket(oe);return}if(ze.length>0){te("got illegal response body from proxy"),ke.destroy();var je=new Error("got illegal response body from proxy");je.code="ECONNRESET",me.request.emit("error",je),pe.removeSocket(oe);return}return te("tunneling connection has established"),pe.sockets[pe.sockets.indexOf(oe)]=ke,De(ke)}function Ee(Pe){J.removeAllListeners(),te(`tunneling socket could not be established, cause=%s
`,Pe.message,Pe.stack);var ke=new Error("tunneling socket could not be established, cause="+Pe.message);ke.code="ECONNRESET",me.request.emit("error",ke),pe.removeSocket(oe)}},V.prototype.removeSocket=function(me){var De=this.sockets.indexOf(me);if(De!==-1){this.sockets.splice(De,1);var pe=this.requests.shift();pe&&this.createSocket(pe,function(oe){pe.request.onSocket(oe)})}};function B(Se,me){var De=this;V.prototype.createSocket.call(De,Se,function(pe){var oe=Se.request.getHeader("host"),ee=ce({},De.options,{socket:pe,servername:oe?oe.replace(/:.*$/,""):Se.host}),J=ie.connect(0,ee);De.sockets[De.sockets.indexOf(pe)]=J,me(J)})}function j(Se,me,De){return typeof Se=="string"?{host:Se,port:me,localAddress:De}:Se}function ce(Se){for(var me=1,De=arguments.length;me<De;++me){var pe=arguments[me];if(typeof pe=="object")for(var oe=Object.keys(pe),ee=0,J=oe.length;ee<J;++ee){var X=oe[ee];pe[X]!==void 0&&(Se[X]=pe[X])}}return Se}var te;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?te=function(){var Se=Array.prototype.slice.call(arguments);typeof Se[0]=="string"?Se[0]="TUNNEL: "+Se[0]:Se.unshift("TUNNEL:"),console.error.apply(console,Se)}:te=function(){},W=te},8361:(c,ne,q)=>{var W=Object.create,Z=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,$=(s,k,d)=>k in s?Z(s,k,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[k]=d,G=(s,k)=>{for(var d in k||(k={}))I.call(k,d)&&$(s,d,k[d]);if(M)for(var d of M(k))P.call(k,d)&&$(s,d,k[d]);return s},z=s=>Z(s,"__esModule",{value:!0}),O=(s,k)=>()=>(k||s((k={exports:{}}).exports,k),k.exports),V=(s,k)=>{z(s);for(var d in k)Z(s,d,{get:k[d],enumerable:!0})},B=(s,k,d)=>{if(k&&typeof k=="object"||typeof k=="function")for(let v of U(k))!I.call(s,v)&&v!=="default"&&Z(s,v,{get:()=>k[v],enumerable:!(d=ie(k,v))||d.enumerable});return s},j=s=>B(z(Z(s!=null?W(L(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),ce=O((s,k)=>{"use strict";var d=function(){function v(){}return v.info=function(_){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];v.enableDebug&&console.info(v.TAG+_,p)},v.warn=function(_){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];v.disableWarnings||console.warn(v.TAG+_,p)},v.enableDebug=!1,v.disableWarnings=!1,v.disableErrors=!1,v.TAG="ApplicationInsights:",v}();k.exports=d}),te=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(p){for(var l,u=1,h=arguments.length;u<h;u++){l=arguments[u];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(p[g]=l[g])}return p},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AsyncScopeManager=s.OpenTelemetryScopeManagerWrapper=void 0;var d=ji(),v=q(8614),_=function(){function p(){}return p.prototype.active=function(){var l=this,u=d.CorrelationContextManager.getCurrentContext();return k(k({},u),{getValue:function(h){return l._activeSymbol?h===l._activeSymbol?u:!1:(l._activeSymbol=h,u)},setValue:function(){}})},p.prototype.with=function(l,u){var h=l.parentSpanId,g=l.name,y=p._spanToContext(l,h,g);return d.CorrelationContextManager.runWithContext(y,u)()},p.prototype.bind=function(l){return typeof l=="function"?d.CorrelationContextManager.wrapCallback(l):(l instanceof v.EventEmitter&&d.CorrelationContextManager.wrapEmitter(l),l)},p.prototype.enable=function(){return d.CorrelationContextManager.enable(),this},p.prototype.disable=function(){return d.CorrelationContextManager.disable(),this},p._spanToContext=function(l,u,h){var g=u?"|"+l.spanContext().traceId+"."+u+".":l.spanContext().traceId,y=k(k({},l.spanContext()),{traceFlags:l.spanContext().traceFlags}),m=d.CorrelationContextManager.spanToContextObject(y,g,h);return m},p}();s.OpenTelemetryScopeManagerWrapper=_,s.AsyncScopeManager=new _}),Se=O((s,k)=>{s=k.exports=Ie;var d;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?d=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:d=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,l=s.re=[],u=s.src=[],h=0,g=h++;u[g]="0|[1-9]\\d*";var y=h++;u[y]="[0-9]+";var m=h++;u[m]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var w=h++;u[w]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var E=h++;u[E]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var R=h++;u[R]="(?:"+u[g]+"|"+u[m]+")";var C=h++;u[C]="(?:"+u[y]+"|"+u[m]+")";var D=h++;u[D]="(?:-("+u[R]+"(?:\\."+u[R]+")*))";var x=h++;u[x]="(?:-?("+u[C]+"(?:\\."+u[C]+")*))";var Q=h++;u[Q]="[0-9A-Za-z-]+";var re=h++;u[re]="(?:\\+("+u[Q]+"(?:\\."+u[Q]+")*))";var Y=h++,ue="v?"+u[w]+u[D]+"?"+u[re]+"?";u[Y]="^"+ue+"$";var _e="[v=\\s]*"+u[E]+u[x]+"?"+u[re]+"?",Te=h++;u[Te]="^"+_e+"$";var Re=h++;u[Re]="((?:<|>)?=?)";var xe=h++;u[xe]=u[y]+"|x|X|\\*";var qe=h++;u[qe]=u[g]+"|x|X|\\*";var He=h++;u[He]="[v=\\s]*("+u[qe]+")(?:\\.("+u[qe]+")(?:\\.("+u[qe]+")(?:"+u[D]+")?"+u[re]+"?)?)?";var Qe=h++;u[Qe]="[v=\\s]*("+u[xe]+")(?:\\.("+u[xe]+")(?:\\.("+u[xe]+")(?:"+u[x]+")?"+u[re]+"?)?)?";var ut=h++;u[ut]="^"+u[Re]+"\\s*"+u[He]+"$";var at=h++;u[at]="^"+u[Re]+"\\s*"+u[Qe]+"$";var Pt=h++;u[Pt]="(?:^|[^\\d])(\\d{1,"+p+"})(?:\\.(\\d{1,"+p+"}))?(?:\\.(\\d{1,"+p+"}))?(?:$|[^\\d])";var tt=h++;u[tt]="(?:~>?)";var Fe=h++;u[Fe]="(\\s*)"+u[tt]+"\\s+",l[Fe]=new RegExp(u[Fe],"g");var Be="$1~",Ve=h++;u[Ve]="^"+u[tt]+u[He]+"$";var Xe=h++;u[Xe]="^"+u[tt]+u[Qe]+"$";var rt=h++;u[rt]="(?:\\^)";var lt=h++;u[lt]="(\\s*)"+u[rt]+"\\s+",l[lt]=new RegExp(u[lt],"g");var Je="$1^",kt=h++;u[kt]="^"+u[rt]+u[He]+"$";var qt=h++;u[qt]="^"+u[rt]+u[Qe]+"$";var At=h++;u[At]="^"+u[Re]+"\\s*("+_e+")$|^$";var Tt=h++;u[Tt]="^"+u[Re]+"\\s*("+ue+")$|^$";var vt=h++;u[vt]="(\\s*)"+u[Re]+"\\s*("+_e+"|"+u[He]+")",l[vt]=new RegExp(u[vt],"g");var er="$1$2$3",or=h++;u[or]="^\\s*("+u[He]+")\\s+-\\s+("+u[He]+")\\s*$";var et=h++;u[et]="^\\s*("+u[Qe]+")\\s+-\\s+("+u[Qe]+")\\s*$";var Ze=h++;for(u[Ze]="(<|>)?=?\\s*\\*",ot=0;ot<h;ot++)d(ot,u[ot]),l[ot]||(l[ot]=new RegExp(u[ot]));var ot;s.parse=Et;function Et(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie)return b;if(typeof b!="string"||b.length>v)return null;var F=N.loose?l[Te]:l[Y];if(!F.test(b))return null;try{return new Ie(b,N)}catch(ae){return null}}s.valid=In;function In(b,N){var F=Et(b,N);return F?F.version:null}s.clean=en;function en(b,N){var F=Et(b.trim().replace(/^[=v]+/,""),N);return F?F.version:null}s.SemVer=Ie;function Ie(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie){if(b.loose===N.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof Ie))return new Ie(b,N);d("SemVer",b,N),this.options=N,this.loose=!!N.loose;var F=b.trim().match(N.loose?l[Te]:l[Y]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(ae){if(/^[0-9]+$/.test(ae)){var le=+ae;if(le>=0&&le<_)return le}return ae}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}Ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ie.prototype.toString=function(){return this.version},Ie.prototype.compare=function(b){return d("SemVer.compare",this.version,this.options,b),b instanceof Ie||(b=new Ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},Ie.prototype.compareMain=function(b){return b instanceof Ie||(b=new Ie(b,this.options)),Bt(this.major,b.major)||Bt(this.minor,b.minor)||Bt(this.patch,b.patch)},Ie.prototype.comparePre=function(b){if(b instanceof Ie||(b=new Ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var N=0;do{var F=this.prerelease[N],ae=b.prerelease[N];if(d("prerelease compare",N,F,ae),F===void 0&&ae===void 0)return 0;if(ae===void 0)return 1;if(F===void 0)return-1;if(F!==ae)return Bt(F,ae)}while(++N)},Ie.prototype.inc=function(b,N){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},s.inc=hn;function hn(b,N,F,ae){typeof F=="string"&&(ae=F,F=void 0);try{return new Ie(b,F).inc(N,ae).version}catch(le){return null}}s.diff=pn;function pn(b,N){if(Vr(b,N))return null;var F=Et(b),ae=Et(N),le="";if(F.prerelease.length||ae.prerelease.length){le="pre";var ge="prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==ae[ye])return le+ye;return ge}s.compareIdentifiers=Bt;var wr=/^[0-9]+$/;function Bt(b,N){var F=wr.test(b),ae=wr.test(N);return F&&ae&&(b=+b,N=+N),b===N?0:F&&!ae?-1:ae&&!F?1:b<N?-1:1}s.rcompareIdentifiers=mn;function mn(b,N){return Bt(N,b)}s.major=_r;function _r(b,N){return new Ie(b,N).major}s.minor=Yn;function Yn(b,N){return new Ie(b,N).minor}s.patch=fn;function fn(b,N){return new Ie(b,N).patch}s.compare=Rt;function Rt(b,N,F){return new Ie(b,F).compare(new Ie(N,F))}s.compareLoose=gn;function gn(b,N){return Rt(b,N,!0)}s.rcompare=vn;function vn(b,N,F){return Rt(N,b,F)}s.sort=Xn;function Xn(b,N){return b.sort(function(F,ae){return s.compare(F,ae,N)})}s.rsort=Jn;function Jn(b,N){return b.sort(function(F,ae){return s.rcompare(F,ae,N)})}s.gt=tr;function tr(b,N,F){return Rt(b,N,F)>0}s.lt=ur;function ur(b,N,F){return Rt(b,N,F)<0}s.eq=Vr;function Vr(b,N,F){return Rt(b,N,F)===0}s.neq=Er;function Er(b,N,F){return Rt(b,N,F)!==0}s.gte=hr;function hr(b,N,F){return Rt(b,N,F)>=0}s.lte=pr;function pr(b,N,F){return Rt(b,N,F)<=0}s.cmp=rr;function rr(b,N,F,ae){switch(N){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Vr(b,F,ae);case"!=":return Er(b,F,ae);case">":return tr(b,F,ae);case">=":return hr(b,F,ae);case"<":return ur(b,F,ae);case"<=":return pr(b,F,ae);default:throw new TypeError("Invalid operator: "+N)}}s.Comparator=dt;function dt(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof dt){if(b.loose===!!N.loose)return b;b=b.value}if(!(this instanceof dt))return new dt(b,N);d("comparator",b,N),this.options=N,this.loose=!!N.loose,this.parse(b),this.semver===ir?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}var ir={};dt.prototype.parse=function(b){var N=this.options.loose?l[At]:l[Tt],F=b.match(N);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new Ie(F[2],this.options.loose):this.semver=ir},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(b){return d("Comparator.test",b,this.options.loose),this.semver===ir?!0:(typeof b=="string"&&(b=new Ie(b,this.options)),rr(b,this.operator,this.semver,this.options))},dt.prototype.intersects=function(b,N){if(!(b instanceof dt))throw new TypeError("a Comparator is required");(!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1});var F;if(this.operator==="")return F=new We(b.value,N),kr(this.value,F,N);if(b.operator==="")return F=new We(this.value,N),kr(b.semver,F,N);var ae=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),le=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),ge=this.semver.version===b.semver.version,ye=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),Me=rr(this.semver,"<",b.semver,N)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),Oe=rr(this.semver,">",b.semver,N)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return ae||le||ge&&ye||Me||Oe},s.Range=We;function We(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof We)return b.loose===!!N.loose&&b.includePrerelease===!!N.includePrerelease?b:new We(b.raw,N);if(b instanceof dt)return new We(b.value,N);if(!(this instanceof We))return new We(b,N);if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}We.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},We.prototype.toString=function(){return this.range},We.prototype.parseRange=function(b){var N=this.options.loose;b=b.trim();var F=N?l[et]:l[or];b=b.replace(F,wi),d("hyphen replace",b),b=b.replace(l[vt],er),d("comparator trim",b,l[vt]),b=b.replace(l[Fe],Be),b=b.replace(l[lt],Je),b=b.split(/\s+/).join(" ");var ae=N?l[At]:l[Tt],le=b.split(" ").map(function(ge){return xr(ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(le=le.filter(function(ge){return!!ge.match(ae)})),le=le.map(function(ge){return new dt(ge,this.options)},this),le},We.prototype.intersects=function(b,N){if(!(b instanceof We))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(ae){return b.set.some(function(le){return le.every(function(ge){return ae.intersects(ge,N)})})})})},s.toComparators=yn;function yn(b,N){return new We(b,N).set.map(function(F){return F.map(function(ae){return ae.value}).join(" ").trim().split(" ")})}function xr(b,N){return d("comp",b,N),b=bi(b,N),d("caret",b),b=Wr(b,N),d("tildes",b),b=bn(b,N),d("xrange",b),b=Sr(b,N),d("stars",b),b}function st(b){return!b||b.toLowerCase()==="x"||b==="*"}function Wr(b,N){return b.trim().split(/\s+/).map(function(F){return Zn(F,N)}).join(" ")}function Zn(b,N){var F=N.loose?l[Xe]:l[Ve];return b.replace(F,function(ae,le,ge,ye,Me){d("tilde",b,ae,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Me?(d("replaceTilde pr",Me),Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0"):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0",d("tilde return",Oe),Oe})}function bi(b,N){return b.trim().split(/\s+/).map(function(F){return ei(F,N)}).join(" ")}function ei(b,N){d("caret",b,N);var F=N.loose?l[qt]:l[kt];return b.replace(F,function(ae,le,ge,ye,Me){d("caret",b,ae,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?le==="0"?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+".0 <"+(+le+1)+".0.0":Me?(d("replaceCaret pr",Me),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+(+le+1)+".0.0"):(d("no pr"),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+" <"+(+le+1)+".0.0"),d("caret return",Oe),Oe})}function bn(b,N){return d("replaceXRanges",b,N),b.split(/\s+/).map(function(F){return Dn(F,N)}).join(" ")}function Dn(b,N){b=b.trim();var F=N.loose?l[at]:l[ut];return b.replace(F,function(ae,le,ge,ye,Me,Oe){d("xRange",b,ae,le,ge,ye,Me,Oe);var mt=st(ge),yt=mt||st(ye),ft=yt||st(Me),ht=ft;return le==="="&&ht&&(le=""),mt?le===">"||le==="<"?ae="<0.0.0":ae="*":le&&ht?(yt&&(ye=0),Me=0,le===">"?(le=">=",yt?(ge=+ge+1,ye=0,Me=0):(ye=+ye+1,Me=0)):le==="<="&&(le="<",yt?ge=+ge+1:ye=+ye+1),ae=le+ge+"."+ye+"."+Me):yt?ae=">="+ge+".0.0 <"+(+ge+1)+".0.0":ft&&(ae=">="+ge+"."+ye+".0 <"+ge+"."+(+ye+1)+".0"),d("xRange return",ae),ae})}function Sr(b,N){return d("replaceStars",b,N),b.trim().replace(l[Ze],"")}function wi(b,N,F,ae,le,ge,ye,Me,Oe,mt,yt,ft,ht){return st(F)?N="":st(ae)?N=">="+F+".0.0":st(le)?N=">="+F+"."+ae+".0":N=">="+N,st(Oe)?Me="":st(mt)?Me="<"+(+Oe+1)+".0.0":st(yt)?Me="<"+Oe+"."+(+mt+1)+".0":ft?Me="<="+Oe+"."+mt+"."+yt+"-"+ft:Me="<="+Me,(N+" "+Me).trim()}We.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new Ie(b,this.options));for(var N=0;N<this.set.length;N++)if(_i(this.set[N],b,this.options))return!0;return!1};function _i(b,N,F){for(var ae=0;ae<b.length;ae++)if(!b[ae].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(ae=0;ae<b.length;ae++)if(d(b[ae].semver),b[ae].semver!==ir&&b[ae].semver.prerelease.length>0){var le=b[ae].semver;if(le.major===N.major&&le.minor===N.minor&&le.patch===N.patch)return!0}return!1}return!0}s.satisfies=kr;function kr(b,N,F){try{N=new We(N,F)}catch(ae){return!1}return N.test(b)}s.maxSatisfying=ti;function ti(b,N,F){var ae=null,le=null;try{var ge=new We(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!ae||le.compare(ye)===-1)&&(ae=ye,le=new Ie(ae,F))}),ae}s.minSatisfying=ri;function ri(b,N,F){var ae=null,le=null;try{var ge=new We(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!ae||le.compare(ye)===1)&&(ae=ye,le=new Ie(ae,F))}),ae}s.minVersion=tn;function tn(b,N){b=new We(b,N);var F=new Ie("0.0.0");if(b.test(F)||(F=new Ie("0.0.0-0"),b.test(F)))return F;F=null;for(var ae=0;ae<b.set.length;++ae){var le=b.set[ae];le.forEach(function(ge){var ye=new Ie(ge.semver.version);switch(ge.operator){case">":ye.prerelease.length===0?ye.patch++:ye.prerelease.push(0),ye.raw=ye.format();case"":case">=":(!F||tr(F,ye))&&(F=ye);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ge.operator)}})}return F&&b.test(F)?F:null}s.validRange=Ei;function Ei(b,N){try{return new We(b,N).range||"*"}catch(F){return null}}s.ltr=Si;function Si(b,N,F){return Mr(b,N,"<",F)}s.gtr=ki;function ki(b,N,F){return Mr(b,N,">",F)}s.outside=Mr;function Mr(b,N,F,ae){b=new Ie(b,ae),N=new We(N,ae);var le,ge,ye,Me,Oe;switch(F){case">":le=tr,ge=pr,ye=ur,Me=">",Oe=">=";break;case"<":le=ur,ge=hr,ye=tr,Me="<",Oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kr(b,N,ae))return!1;for(var mt=0;mt<N.set.length;++mt){var yt=N.set[mt],ft=null,ht=null;if(yt.forEach(function(It){It.semver===ir&&(It=new dt(">=0.0.0")),ft=ft||It,ht=ht||It,le(It.semver,ft.semver,ae)?ft=It:ye(It.semver,ht.semver,ae)&&(ht=It)}),ft.operator===Me||ft.operator===Oe||(!ht.operator||ht.operator===Me)&&ge(b,ht.semver)||ht.operator===Oe&&ye(b,ht.semver))return!1}return!0}s.prerelease=Ti;function Ti(b,N){var F=Et(b,N);return F&&F.prerelease.length?F.prerelease:null}s.intersects=Kr;function Kr(b,N,F){return b=new We(b,F),N=new We(N,F),b.intersects(N)}s.coerce=On;function On(b){if(b instanceof Ie)return b;if(typeof b!="string")return null;var N=b.match(l[Pt]);return N==null?null:Et(N[1]+"."+(N[2]||"0")+"."+(N[3]||"0"))}}),me=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.makePatchingRequire=void 0;var k=q(5622),d=Se(),v=q(2282),_=Object.keys(process.binding("natives")),p=v.prototype.require;function l(u){var h={};return function(g){var y=p.apply(this,arguments);if(u[g]){var m=v._resolveFilename(g,this);if(h.hasOwnProperty(m))return h[m];var w=void 0;if(_.indexOf(g)<0)try{w=p.call(this,k.join(g,"package.json")).version}catch(Q){return y}else w=process.version.substring(1);var E=w.indexOf("-");E>=0&&(w=w.substring(0,E));for(var R=y,C=0,D=u[g];C<D.length;C++){var x=D[C];d.satisfies(w,x.versionSpecifier)&&(R=x.patch(R,m))}return h[m]=R}return y}}s.makePatchingRequire=l}),De=O((s,k)=>{k.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),pe=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.channel=s.makePatchingRequire=void 0;var k=me(),d=me();Object.defineProperty(s,"makePatchingRequire",{enumerable:!0,get:function(){return d.makePatchingRequire}});var v=function(l){return!0},_=function(){function l(){this.version=De().version,this.subscribers={},this.contextPreservationFunction=function(u){return u},this.knownPatches={},this.currentlyPublishing=!1}return l.prototype.shouldPublish=function(u){var h=this.subscribers[u];return h?h.some(function(g){var y=g.filter;return!y||y(!1)}):!1},l.prototype.publish=function(u,h){if(!this.currentlyPublishing){var g=this.subscribers[u];if(g){var y={timestamp:Date.now(),data:h};this.currentlyPublishing=!0,g.forEach(function(m){var w=m.listener,E=m.filter;try{E&&E(!0)&&w(y)}catch(R){}}),this.currentlyPublishing=!1}}},l.prototype.subscribe=function(u,h,g){g===void 0&&(g=v),this.subscribers[u]||(this.subscribers[u]=[]),this.subscribers[u].push({listener:h,filter:g})},l.prototype.unsubscribe=function(u,h,g){g===void 0&&(g=v);var y=this.subscribers[u];if(y){for(var m=0;m<y.length;++m)if(y[m].listener===h&&y[m].filter===g)return y.splice(m,1),!0}return!1},l.prototype.reset=function(){var u=this;this.subscribers={},this.contextPreservationFunction=function(h){return h},Object.getOwnPropertyNames(this.knownPatches).forEach(function(h){return delete u.knownPatches[h]})},l.prototype.bindToContext=function(u){return this.contextPreservationFunction(u)},l.prototype.addContextPreservation=function(u){var h=this.contextPreservationFunction;this.contextPreservationFunction=function(g){return u(h(g))}},l.prototype.registerMonkeyPatch=function(u,h){this.knownPatches[u]||(this.knownPatches[u]=[]),this.knownPatches[u].push(h)},l.prototype.getPatchesObject=function(){return this.knownPatches},l}();global.diagnosticsSource||(global.diagnosticsSource=new _,p=q(2282),p.prototype.require=k.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var p;s.channel=global.diagnosticsSource}),oe=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ee=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s._globalThis=void 0,s._globalThis=typeof globalThis=="object"?globalThis:global}),J=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(ee(),s)}),X=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(J(),s)}),he=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="1.0.3"}),be=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isCompatible=s._makeCompatibilityCheck=void 0;var k=he(),d=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function v(_){var p=new Set([_]),l=new Set,u=_.match(d);if(!u)return function(){return!1};var h={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};if(h.prerelease!=null)return function(m){return m===_};function g(m){return l.add(m),!1}function y(m){return p.add(m),!0}return function(m){if(p.has(m))return!0;if(l.has(m))return!1;var w=m.match(d);if(!w)return g(m);var E={major:+w[1],minor:+w[2],patch:+w[3],prerelease:w[4]};return E.prerelease!=null||h.major!==E.major?g(m):h.major===0?h.minor===E.minor&&h.patch<=E.patch?y(m):g(m):h.minor<=E.minor?y(m):g(m)}}s._makeCompatibilityCheck=v,s.isCompatible=v(k.VERSION)}),Ee=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unregisterGlobal=s.getGlobal=s.registerGlobal=void 0;var k=X(),d=he(),v=be(),_=d.VERSION.split(".")[0],p=Symbol.for("opentelemetry.js.api."+_),l=k._globalThis;function u(y,m,w,E){var R;E===void 0&&(E=!1);var C=l[p]=(R=l[p])!==null&&R!==void 0?R:{version:d.VERSION};if(!E&&C[y]){var D=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+y);return w.error(D.stack||D.message),!1}if(C.version!==d.VERSION){var D=new Error("@opentelemetry/api: All API registration versions must match");return w.error(D.stack||D.message),!1}return C[y]=m,w.debug("@opentelemetry/api: Registered a global for "+y+" v"+d.VERSION+"."),!0}s.registerGlobal=u;function h(y){var m,w,E=(m=l[p])===null||m===void 0?void 0:m.version;if(!(!E||!v.isCompatible(E)))return(w=l[p])===null||w===void 0?void 0:w[y]}s.getGlobal=h;function g(y,m){m.debug("@opentelemetry/api: Unregistering a global for "+y+" v"+d.VERSION+".");var w=l[p];w&&delete w[y]}s.unregisterGlobal=g}),Pe=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagComponentLogger=void 0;var k=Ee(),d=function(){function _(p){this._namespace=p.namespace||"DiagComponentLogger"}return _.prototype.debug=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("debug",this._namespace,p)},_.prototype.error=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("error",this._namespace,p)},_.prototype.info=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("info",this._namespace,p)},_.prototype.warn=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("warn",this._namespace,p)},_.prototype.verbose=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("verbose",this._namespace,p)},_}();s.DiagComponentLogger=d;function v(_,p,l){var u=k.getGlobal("diag");if(u)return l.unshift(p),u[_].apply(u,l)}}),ke=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagLogLevel=void 0;var k;(function(d){d[d.NONE=0]="NONE",d[d.ERROR=30]="ERROR",d[d.WARN=50]="WARN",d[d.INFO=60]="INFO",d[d.DEBUG=70]="DEBUG",d[d.VERBOSE=80]="VERBOSE",d[d.ALL=9999]="ALL"})(k=s.DiagLogLevel||(s.DiagLogLevel={}))}),ze=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.createLogLevelDiagLogger=void 0;var k=ke();function d(v,_){v<k.DiagLogLevel.NONE?v=k.DiagLogLevel.NONE:v>k.DiagLogLevel.ALL&&(v=k.DiagLogLevel.ALL),_=_||{};function p(l,u){var h=_[l];return typeof h=="function"&&v>=u?h.bind(_):function(){}}return{error:p("error",k.DiagLogLevel.ERROR),warn:p("warn",k.DiagLogLevel.WARN),info:p("info",k.DiagLogLevel.INFO),debug:p("debug",k.DiagLogLevel.DEBUG),verbose:p("verbose",k.DiagLogLevel.VERBOSE)}}s.createLogLevelDiagLogger=d}),je=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagAPI=void 0;var k=Pe(),d=ze(),v=ke(),_=Ee(),p="diag",l=function(){function u(){function h(y){return function(){var m=_.getGlobal("diag");if(m)return m[y].apply(m,arguments)}}var g=this;g.setLogger=function(y,m){var w,E;if(m===void 0&&(m=v.DiagLogLevel.INFO),y===g){var R=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return g.error((w=R.stack)!==null&&w!==void 0?w:R.message),!1}var C=_.getGlobal("diag"),D=d.createLogLevelDiagLogger(m,y);if(C){var x=(E=new Error().stack)!==null&&E!==void 0?E:"<failed to generate stacktrace>";C.warn("Current logger will be overwritten from "+x),D.warn("Current logger will overwrite one already registered from "+x)}return _.registerGlobal("diag",D,g,!0)},g.disable=function(){_.unregisterGlobal(p,g)},g.createComponentLogger=function(y){return new k.DiagComponentLogger(y)},g.verbose=h("verbose"),g.debug=h("debug"),g.info=h("info"),g.warn=h("warn"),g.error=h("error")}return u.instance=function(){return this._instance||(this._instance=new u),this._instance},u}();s.DiagAPI=l}),ct=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BaggageImpl=void 0;var k=function(){function d(v){this._entries=v?new Map(v):new Map}return d.prototype.getEntry=function(v){var _=this._entries.get(v);if(_)return Object.assign({},_)},d.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(v){var _=v[0],p=v[1];return[_,p]})},d.prototype.setEntry=function(v,_){var p=new d(this._entries);return p._entries.set(v,_),p},d.prototype.removeEntry=function(v){var _=new d(this._entries);return _._entries.delete(v),_},d.prototype.removeEntries=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];for(var p=new d(this._entries),l=0,u=v;l<u.length;l++){var h=u[l];p._entries.delete(h)}return p},d.prototype.clear=function(){return new d},d}();s.BaggageImpl=k}),pt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataSymbol=void 0,s.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),$t=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataFromString=s.createBaggage=void 0;var k=je(),d=ct(),v=pt(),_=k.DiagAPI.instance();function p(u){return u===void 0&&(u={}),new d.BaggageImpl(new Map(Object.entries(u)))}s.createBaggage=p;function l(u){return typeof u!="string"&&(_.error("Cannot create baggage metadata from unknown type: "+typeof u),u=""),{__TYPE__:v.baggageEntryMetadataSymbol,toString:function(){return u}}}s.baggageEntryMetadataFromString=l}),Xt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),nr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Jt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagConsoleLogger=void 0;var k=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],d=function(){function v(){function _(l){return function(){var u=arguments;if(console){var h=console[l];if(typeof h!="function"&&(h=console.log),typeof h=="function")return h.apply(console,u)}}}for(var p=0;p<k.length;p++)this[k[p].n]=_(k[p].c)}return v}();s.DiagConsoleLogger=d}),Or=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Jt(),s),d(ke(),s)}),Ur=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultTextMapSetter=s.defaultTextMapGetter=void 0,s.defaultTextMapGetter={get:function(k,d){if(k!=null)return k[d]},keys:function(k){return k==null?[]:Object.keys(k)}},s.defaultTextMapSetter={set:function(k,d,v){k!=null&&(k[d]=v)}}}),Sn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Rs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ui=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ROOT_CONTEXT=s.createContextKey=void 0;function k(v){return Symbol.for(v)}s.createContextKey=k;var d=function(){function v(_){var p=this;p._currentContext=_?new Map(_):new Map,p.getValue=function(l){return p._currentContext.get(l)},p.setValue=function(l,u){var h=new v(p._currentContext);return h._currentContext.set(l,u),h},p.deleteValue=function(l){var u=new v(p._currentContext);return u._currentContext.delete(l),u}}return v}();s.ROOT_CONTEXT=new d}),ts=O(s=>{"use strict";var k=s&&s.__spreadArray||function(_,p){for(var l=0,u=p.length,h=_.length;l<u;l++,h++)_[h]=p[l];return _};Object.defineProperty(s,"__esModule",{value:!0}),s.NoopContextManager=void 0;var d=ui(),v=function(){function _(){}return _.prototype.active=function(){return d.ROOT_CONTEXT},_.prototype.with=function(p,l,u){for(var h=[],g=3;g<arguments.length;g++)h[g-3]=arguments[g];return l.call.apply(l,k([u],h))},_.prototype.bind=function(p,l){return l},_.prototype.enable=function(){return this},_.prototype.disable=function(){return this},_}();s.NoopContextManager=v}),li=O(s=>{"use strict";var k=s&&s.__spreadArray||function(h,g){for(var y=0,m=g.length,w=h.length;y<m;y++,w++)h[w]=g[y];return h};Object.defineProperty(s,"__esModule",{value:!0}),s.ContextAPI=void 0;var d=ts(),v=Ee(),_=je(),p="context",l=new d.NoopContextManager,u=function(){function h(){}return h.getInstance=function(){return this._instance||(this._instance=new h),this._instance},h.prototype.setGlobalContextManager=function(g){return v.registerGlobal(p,g,_.DiagAPI.instance())},h.prototype.active=function(){return this._getContextManager().active()},h.prototype.with=function(g,y,m){for(var w,E=[],R=3;R<arguments.length;R++)E[R-3]=arguments[R];return(w=this._getContextManager()).with.apply(w,k([g,y,m],E))},h.prototype.bind=function(g,y){return this._getContextManager().bind(g,y)},h.prototype._getContextManager=function(){return v.getGlobal(p)||l},h.prototype.disable=function(){this._getContextManager().disable(),v.unregisterGlobal(p,_.DiagAPI.instance())},h}();s.ContextAPI=u}),$n=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceFlags=void 0;var k;(function(d){d[d.NONE=0]="NONE",d[d.SAMPLED=1]="SAMPLED"})(k=s.TraceFlags||(s.TraceFlags={}))}),Gt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=void 0;var k=$n();s.INVALID_SPANID="0000000000000000",s.INVALID_TRACEID="00000000000000000000000000000000",s.INVALID_SPAN_CONTEXT={traceId:s.INVALID_TRACEID,spanId:s.INVALID_SPANID,traceFlags:k.TraceFlags.NONE}}),ci=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NonRecordingSpan=void 0;var k=Gt(),d=function(){function v(_){_===void 0&&(_=k.INVALID_SPAN_CONTEXT),this._spanContext=_}return v.prototype.spanContext=function(){return this._spanContext},v.prototype.setAttribute=function(_,p){return this},v.prototype.setAttributes=function(_){return this},v.prototype.addEvent=function(_,p){return this},v.prototype.setStatus=function(_){return this},v.prototype.updateName=function(_){return this},v.prototype.end=function(_){},v.prototype.isRecording=function(){return!1},v.prototype.recordException=function(_,p){},v}();s.NonRecordingSpan=d}),Zt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSpanContext=s.setSpanContext=s.deleteSpan=s.setSpan=s.getSpan=void 0;var k=ui(),d=ci(),v=k.createContextKey("OpenTelemetry Context Key SPAN");function _(g){return g.getValue(v)||void 0}s.getSpan=_;function p(g,y){return g.setValue(v,y)}s.setSpan=p;function l(g){return g.deleteValue(v)}s.deleteSpan=l;function u(g,y){return p(g,new d.NonRecordingSpan(y))}s.setSpanContext=u;function h(g){var y;return(y=_(g))===null||y===void 0?void 0:y.spanContext()}s.getSpanContext=h}),wt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.wrapSpanContext=s.isSpanContextValid=s.isValidSpanId=s.isValidTraceId=void 0;var k=Gt(),d=ci(),v=/^([0-9a-f]{32})$/i,_=/^[0-9a-f]{16}$/i;function p(g){return v.test(g)&&g!==k.INVALID_TRACEID}s.isValidTraceId=p;function l(g){return _.test(g)&&g!==k.INVALID_SPANID}s.isValidSpanId=l;function u(g){return p(g.traceId)&&l(g.spanId)}s.isSpanContextValid=u;function h(g){return new d.NonRecordingSpan(g)}s.wrapSpanContext=h}),fr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracer=void 0;var k=li(),d=Zt(),v=ci(),_=wt(),p=k.ContextAPI.getInstance(),l=function(){function h(){}return h.prototype.startSpan=function(g,y,m){var w=Boolean(y==null?void 0:y.root);if(w)return new v.NonRecordingSpan;var E=m&&d.getSpanContext(m);return u(E)&&_.isSpanContextValid(E)?new v.NonRecordingSpan(E):new v.NonRecordingSpan},h.prototype.startActiveSpan=function(g,y,m,w){var E,R,C;if(!(arguments.length<2)){arguments.length===2?C=y:arguments.length===3?(E=y,C=m):(E=y,R=m,C=w);var D=R!=null?R:p.active(),x=this.startSpan(g,E,D),Q=d.setSpan(D,x);return p.with(Q,C,void 0,x)}},h}();s.NoopTracer=l;function u(h){return typeof h=="object"&&typeof h.spanId=="string"&&typeof h.traceId=="string"&&typeof h.traceFlags=="number"}}),Gn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracer=void 0;var k=fr(),d=new k.NoopTracer,v=function(){function _(p,l,u){this._provider=p,this.name=l,this.version=u}return _.prototype.startSpan=function(p,l,u){return this._getTracer().startSpan(p,l,u)},_.prototype.startActiveSpan=function(p,l,u,h){var g=this._getTracer();return Reflect.apply(g.startActiveSpan,g,arguments)},_.prototype._getTracer=function(){if(this._delegate)return this._delegate;var p=this._provider.getDelegateTracer(this.name,this.version);return p?(this._delegate=p,this._delegate):d},_}();s.ProxyTracer=v}),di=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracerProvider=void 0;var k=fr(),d=function(){function v(){}return v.prototype.getTracer=function(_,p){return new k.NoopTracer},v}();s.NoopTracerProvider=d}),hi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracerProvider=void 0;var k=Gn(),d=di(),v=new d.NoopTracerProvider,_=function(){function p(){}return p.prototype.getTracer=function(l,u){var h;return(h=this.getDelegateTracer(l,u))!==null&&h!==void 0?h:new k.ProxyTracer(this,l,u)},p.prototype.getDelegate=function(){var l;return(l=this._delegate)!==null&&l!==void 0?l:v},p.prototype.setDelegate=function(l){this._delegate=l},p.prototype.getDelegateTracer=function(l,u){var h;return(h=this._delegate)===null||h===void 0?void 0:h.getTracer(l,u)},p}();s.ProxyTracerProvider=_}),rs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ns=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SamplingDecision=void 0;var k;(function(d){d[d.NOT_RECORD=0]="NOT_RECORD",d[d.RECORD=1]="RECORD",d[d.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(k=s.SamplingDecision||(s.SamplingDecision={}))}),sr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),zu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanKind=void 0;var k;(function(d){d[d.INTERNAL=0]="INTERNAL",d[d.SERVER=1]="SERVER",d[d.CLIENT=2]="CLIENT",d[d.PRODUCER=3]="PRODUCER",d[d.CONSUMER=4]="CONSUMER"})(k=s.SpanKind||(s.SpanKind={}))}),uo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Hn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Cs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanStatusCode=void 0;var k;(function(d){d[d.UNSET=0]="UNSET",d[d.OK=1]="OK",d[d.ERROR=2]="ERROR"})(k=s.SpanStatusCode||(s.SpanStatusCode={}))}),Fi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Cr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Qu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Wu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),lo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceAPI=void 0;var k=Ee(),d=hi(),v=wt(),_=Zt(),p=je(),l="trace",u=function(){function h(){this._proxyTracerProvider=new d.ProxyTracerProvider,this.wrapSpanContext=v.wrapSpanContext,this.isSpanContextValid=v.isSpanContextValid,this.deleteSpan=_.deleteSpan,this.getSpan=_.getSpan,this.getSpanContext=_.getSpanContext,this.setSpan=_.setSpan,this.setSpanContext=_.setSpanContext}return h.getInstance=function(){return this._instance||(this._instance=new h),this._instance},h.prototype.setGlobalTracerProvider=function(g){var y=k.registerGlobal(l,this._proxyTracerProvider,p.DiagAPI.instance());return y&&this._proxyTracerProvider.setDelegate(g),y},h.prototype.getTracerProvider=function(){return k.getGlobal(l)||this._proxyTracerProvider},h.prototype.getTracer=function(g,y){return this.getTracerProvider().getTracer(g,y)},h.prototype.disable=function(){k.unregisterGlobal(l,p.DiagAPI.instance()),this._proxyTracerProvider=new d.ProxyTracerProvider},h}();s.TraceAPI=u}),pa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTextMapPropagator=void 0;var k=function(){function d(){}return d.prototype.inject=function(v,_){},d.prototype.extract=function(v,_){return v},d.prototype.fields=function(){return[]},d}();s.NoopTextMapPropagator=k}),cn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.deleteBaggage=s.setBaggage=s.getBaggage=void 0;var k=ui(),d=k.createContextKey("OpenTelemetry Baggage Key");function v(l){return l.getValue(d)||void 0}s.getBaggage=v;function _(l,u){return l.setValue(d,u)}s.setBaggage=_;function p(l){return l.deleteValue(d)}s.deleteBaggage=p}),co=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropagationAPI=void 0;var k=Ee(),d=pa(),v=Ur(),_=cn(),p=$t(),l=je(),u="propagation",h=new d.NoopTextMapPropagator,g=function(){function y(){this.createBaggage=p.createBaggage,this.getBaggage=_.getBaggage,this.setBaggage=_.setBaggage,this.deleteBaggage=_.deleteBaggage}return y.getInstance=function(){return this._instance||(this._instance=new y),this._instance},y.prototype.setGlobalPropagator=function(m){return k.registerGlobal(u,m,l.DiagAPI.instance())},y.prototype.inject=function(m,w,E){return E===void 0&&(E=v.defaultTextMapSetter),this._getGlobalPropagator().inject(m,w,E)},y.prototype.extract=function(m,w,E){return E===void 0&&(E=v.defaultTextMapGetter),this._getGlobalPropagator().extract(m,w,E)},y.prototype.fields=function(){return this._getGlobalPropagator().fields()},y.prototype.disable=function(){k.unregisterGlobal(u,l.DiagAPI.instance())},y.prototype._getGlobalPropagator=function(){return k.getGlobal(u)||h},y}();s.PropagationAPI=g}),Ft=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(y,m,w,E){E===void 0&&(E=w),Object.defineProperty(y,E,{enumerable:!0,get:function(){return m[w]}})}:function(y,m,w,E){E===void 0&&(E=w),y[E]=m[w]}),d=s&&s.__exportStar||function(y,m){for(var w in y)w!=="default"&&!Object.prototype.hasOwnProperty.call(m,w)&&k(m,y,w)};Object.defineProperty(s,"__esModule",{value:!0}),s.diag=s.propagation=s.trace=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.baggageEntryMetadataFromString=void 0,d(oe(),s);var v=$t();Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return v.baggageEntryMetadataFromString}}),d(Xt(),s),d(nr(),s),d(Or(),s),d(Ur(),s),d(Sn(),s),d(Rs(),s),d(Gn(),s),d(hi(),s),d(rs(),s),d(ns(),s),d(sr(),s),d(zu(),s),d(uo(),s),d(Hn(),s),d(Cs(),s),d($n(),s),d(Fi(),s),d(Cr(),s),d(Qu(),s);var _=wt();Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}});var p=Gt();Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return p.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return p.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return p.INVALID_SPAN_CONTEXT}}),d(ui(),s),d(Wu(),s);var l=li();s.context=l.ContextAPI.getInstance();var u=lo();s.trace=u.TraceAPI.getInstance();var h=co();s.propagation=h.PropagationAPI.getInstance();var g=je();s.diag=g.DiagAPI.instance(),s.default={trace:s.trace,context:s.context,propagation:s.propagation,diag:s.diag}}),Vn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTracingSuppressed=s.unsuppressTracing=s.suppressTracing=void 0;var k=Ft(),d=k.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function v(l){return l.setValue(d,!0)}s.suppressTracing=v;function _(l){return l.deleteValue(d)}s.unsuppressTracing=_;function p(l){return l.getValue(d)===!0}s.isTracingSuppressed=p}),Ps=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BAGGAGE_MAX_TOTAL_LENGTH=s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=s.BAGGAGE_MAX_NAME_VALUE_PAIRS=s.BAGGAGE_HEADER=s.BAGGAGE_ITEMS_SEPARATOR=s.BAGGAGE_PROPERTIES_SEPARATOR=s.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,s.BAGGAGE_KEY_PAIR_SEPARATOR="=",s.BAGGAGE_PROPERTIES_SEPARATOR=";",s.BAGGAGE_ITEMS_SEPARATOR=",",s.BAGGAGE_HEADER="baggage",s.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,s.BAGGAGE_MAX_TOTAL_LENGTH=8192}),Bn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseKeyPairsIntoRecord=s.parsePairKeyValue=s.getKeyPairs=s.serializeKeyPairs=void 0;var k=Ft(),d=Ps(),v=u=>u.reduce((h,g)=>{let y=`${h}${h!==""?d.BAGGAGE_ITEMS_SEPARATOR:""}${g}`;return y.length>d.BAGGAGE_MAX_TOTAL_LENGTH?h:y},"");s.serializeKeyPairs=v;var _=u=>u.getAllEntries().map(([h,g])=>`${encodeURIComponent(h)}=${encodeURIComponent(g.value)}`);s.getKeyPairs=_;var p=u=>{let h=u.split(d.BAGGAGE_PROPERTIES_SEPARATOR);if(h.length<=0)return;let g=h.shift();if(!g)return;let y=g.split(d.BAGGAGE_KEY_PAIR_SEPARATOR);if(y.length!==2)return;let m=decodeURIComponent(y[0].trim()),w=decodeURIComponent(y[1].trim()),E;return h.length>0&&(E=k.baggageEntryMetadataFromString(h.join(d.BAGGAGE_PROPERTIES_SEPARATOR))),{key:m,value:w,metadata:E}};s.parsePairKeyValue=p;var l=u=>typeof u!="string"||u.length===0?{}:u.split(d.BAGGAGE_ITEMS_SEPARATOR).map(h=>s.parsePairKeyValue(h)).filter(h=>h!==void 0&&h.value.length>0).reduce((h,g)=>(h[g.key]=g.value,h),{});s.parseKeyPairsIntoRecord=l}),Ku=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpBaggagePropagator=void 0;var k=Ft(),d=Vn(),v=Ps(),_=Bn(),p=class{inject(l,u,h){let g=k.propagation.getBaggage(l);if(!g||d.isTracingSuppressed(l))return;let y=_.getKeyPairs(g).filter(w=>w.length<=v.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,v.BAGGAGE_MAX_NAME_VALUE_PAIRS),m=_.serializeKeyPairs(y);m.length>0&&h.set(u,v.BAGGAGE_HEADER,m)}extract(l,u,h){let g=h.get(u,v.BAGGAGE_HEADER);if(!g)return l;let y={};return g.length===0||(g.split(v.BAGGAGE_ITEMS_SEPARATOR).forEach(m=>{let w=_.parsePairKeyValue(m);if(w){let E={value:w.value};w.metadata&&(E.metadata=w.metadata),y[w.key]=E}}),Object.entries(y).length===0)?l:k.propagation.setBaggage(l,k.propagation.createBaggage(y))}fields(){return[v.BAGGAGE_HEADER]}};s.HttpBaggagePropagator=p}),Yu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isAttributeValue=s.sanitizeAttributes=void 0;function k(p){let l={};if(p==null||typeof p!="object")return l;for(let[u,h]of Object.entries(p))d(h)&&(Array.isArray(h)?l[u]=h.slice():l[u]=h);return l}s.sanitizeAttributes=k;function d(p){return p==null?!0:Array.isArray(p)?v(p):_(p)}s.isAttributeValue=d;function v(p){let l;for(let u of p)if(u!=null){if(!l){if(_(u)){l=typeof u;continue}return!1}if(typeof u!==l)return!1}return!0}function _(p){switch(typeof p){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),jn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.loggingErrorHandler=void 0;var k=Ft();function d(){return p=>{k.diag.error(v(p))}}s.loggingErrorHandler=d;function v(p){return typeof p=="string"?p:JSON.stringify(_(p))}function _(p){let l={},u=p;for(;u!==null;)Object.getOwnPropertyNames(u).forEach(h=>{if(l[h])return;let g=u[h];g&&(l[h]=String(g))}),u=Object.getPrototypeOf(u);return l}}),Ns=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.globalErrorHandler=s.setGlobalErrorHandler=void 0;var k=jn(),d=k.loggingErrorHandler();function v(p){d=p}s.setGlobalErrorHandler=v;var _=p=>{try{d(p)}catch(l){}};s.globalErrorHandler=_}),ma=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TracesSamplerValues=void 0;var k;(function(d){d.AlwaysOff="always_off",d.AlwaysOn="always_on",d.ParentBasedAlwaysOff="parentbased_always_off",d.ParentBasedAlwaysOn="parentbased_always_on",d.ParentBasedTraceIdRatio="parentbased_traceidratio",d.TraceIdRatio="traceidratio"})(k=s.TracesSamplerValues||(s.TracesSamplerValues={}))}),fa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseEnvironment=s.DEFAULT_ENVIRONMENT=void 0;var k=Ft(),d=ma(),v=",",_=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function p(E){return _.indexOf(E)>-1}var l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function u(E){return l.indexOf(E)>-1}s.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:k.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:d.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function h(E,R,C,D=-1/0,x=1/0){if(typeof C[E]!="undefined"){let Q=Number(C[E]);isNaN(Q)||(Q<D?R[E]=D:Q>x?R[E]=x:R[E]=Q)}}function g(E,R,C,D=v){let x=C[E];typeof x=="string"&&(R[E]=x.split(D).map(Q=>Q.trim()))}var y={ALL:k.DiagLogLevel.ALL,VERBOSE:k.DiagLogLevel.VERBOSE,DEBUG:k.DiagLogLevel.DEBUG,INFO:k.DiagLogLevel.INFO,WARN:k.DiagLogLevel.WARN,ERROR:k.DiagLogLevel.ERROR,NONE:k.DiagLogLevel.NONE};function m(E,R,C){let D=C[E];if(typeof D=="string"){let x=y[D.toUpperCase()];x!=null&&(R[E]=x)}}function w(E){let R={};for(let C in s.DEFAULT_ENVIRONMENT){let D=C;switch(D){case"OTEL_LOG_LEVEL":m(D,R,E);break;default:if(p(D))h(D,R,E);else if(u(D))g(D,R,E);else{let x=E[D];typeof x!="undefined"&&x!==null&&(R[D]=String(x))}}}return R}s.parseEnvironment=w}),ho=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getEnv=void 0;var k=q(2087),d=fa();function v(){let _=d.parseEnvironment(process.env);return Object.assign({HOSTNAME:k.hostname()},d.DEFAULT_ENVIRONMENT,_)}s.getEnv=v}),Li=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBase64=void 0;function k(d){let v=d.length,_="";for(let p=0;p<v;p+=2){let l=d.substring(p,p+2),u=parseInt(l,16);_+=String.fromCharCode(u)}return Buffer.from(_,"ascii").toString("base64")}s.hexToBase64=k}),po=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RandomIdGenerator=void 0;var k=8,d=16,v=class{constructor(){this.generateTraceId=p(d),this.generateSpanId=p(k)}};s.RandomIdGenerator=v;var _=Buffer.allocUnsafe(d);function p(l){return function(){for(let u=0;u<l/4;u++)_.writeUInt32BE(Math.random()*2**32>>>0,u*4);for(let u=0;u<l&&!(_[u]>0);u++)u===l-1&&(_[l-1]=1);return _.toString("hex",0,l)}}}),Xu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.otperformance=void 0;var k=q(630);s.otperformance=k.performance}),ga=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="0.23.0"}),Ht=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RpcGrpcStatusCodeValues=s.MessagingOperationValues=s.MessagingDestinationKindValues=s.HttpFlavorValues=s.NetTransportValues=s.FaasInvokedProviderValues=s.FaasDocumentOperationValues=s.FaasTriggerValues=s.DbCassandraConsistencyLevelValues=s.DbSystemValues=s.SemanticAttributes=void 0,s.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var k;(function(m){m.OTHER_SQL="other_sql",m.MSSQL="mssql",m.MYSQL="mysql",m.ORACLE="oracle",m.DB2="db2",m.POSTGRESQL="postgresql",m.REDSHIFT="redshift",m.HIVE="hive",m.CLOUDSCAPE="cloudscape",m.HSQLDB="hsqldb",m.PROGRESS="progress",m.MAXDB="maxdb",m.HANADB="hanadb",m.INGRES="ingres",m.FIRSTSQL="firstsql",m.EDB="edb",m.CACHE="cache",m.ADABAS="adabas",m.FIREBIRD="firebird",m.DERBY="derby",m.FILEMAKER="filemaker",m.INFORMIX="informix",m.INSTANTDB="instantdb",m.INTERBASE="interbase",m.MARIADB="mariadb",m.NETEZZA="netezza",m.PERVASIVE="pervasive",m.POINTBASE="pointbase",m.SQLITE="sqlite",m.SYBASE="sybase",m.TERADATA="teradata",m.VERTICA="vertica",m.H2="h2",m.COLDFUSION="coldfusion",m.CASSANDRA="cassandra",m.HBASE="hbase",m.MONGODB="mongodb",m.REDIS="redis",m.COUCHBASE="couchbase",m.COUCHDB="couchdb",m.COSMOSDB="cosmosdb",m.DYNAMODB="dynamodb",m.NEO4J="neo4j",m.GEODE="geode",m.ELASTICSEARCH="elasticsearch",m.MEMCACHED="memcached",m.COCKROACHDB="cockroachdb"})(k=s.DbSystemValues||(s.DbSystemValues={}));var d;(function(m){m.ALL="all",m.EACH_QUORUM="each_quorum",m.QUORUM="quorum",m.LOCAL_QUORUM="local_quorum",m.ONE="one",m.TWO="two",m.THREE="three",m.LOCAL_ONE="local_one",m.ANY="any",m.SERIAL="serial",m.LOCAL_SERIAL="local_serial"})(d=s.DbCassandraConsistencyLevelValues||(s.DbCassandraConsistencyLevelValues={}));var v;(function(m){m.DATASOURCE="datasource",m.HTTP="http",m.PUBSUB="pubsub",m.TIMER="timer",m.OTHER="other"})(v=s.FaasTriggerValues||(s.FaasTriggerValues={}));var _;(function(m){m.INSERT="insert",m.EDIT="edit",m.DELETE="delete"})(_=s.FaasDocumentOperationValues||(s.FaasDocumentOperationValues={}));var p;(function(m){m.AWS="aws",m.AZURE="azure",m.GCP="gcp"})(p=s.FaasInvokedProviderValues||(s.FaasInvokedProviderValues={}));var l;(function(m){m.IP_TCP="ip_tcp",m.IP_UDP="ip_udp",m.IP="ip",m.UNIX="unix",m.PIPE="pipe",m.INPROC="inproc",m.OTHER="other"})(l=s.NetTransportValues||(s.NetTransportValues={}));var u;(function(m){m.HTTP_1_0="1.0",m.HTTP_1_1="1.1",m.HTTP_2_0="2.0",m.SPDY="SPDY",m.QUIC="QUIC"})(u=s.HttpFlavorValues||(s.HttpFlavorValues={}));var h;(function(m){m.QUEUE="queue",m.TOPIC="topic"})(h=s.MessagingDestinationKindValues||(s.MessagingDestinationKindValues={}));var g;(function(m){m.RECEIVE="receive",m.PROCESS="process"})(g=s.MessagingOperationValues||(s.MessagingOperationValues={}));var y;(function(m){m[m.OK=0]="OK",m[m.CANCELLED=1]="CANCELLED",m[m.UNKNOWN=2]="UNKNOWN",m[m.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",m[m.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",m[m.NOT_FOUND=5]="NOT_FOUND",m[m.ALREADY_EXISTS=6]="ALREADY_EXISTS",m[m.PERMISSION_DENIED=7]="PERMISSION_DENIED",m[m.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",m[m.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",m[m.ABORTED=10]="ABORTED",m[m.OUT_OF_RANGE=11]="OUT_OF_RANGE",m[m.UNIMPLEMENTED=12]="UNIMPLEMENTED",m[m.INTERNAL=13]="INTERNAL",m[m.UNAVAILABLE=14]="UNAVAILABLE",m[m.DATA_LOSS=15]="DATA_LOSS",m[m.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(y=s.RpcGrpcStatusCodeValues||(s.RpcGrpcStatusCodeValues={}))}),$r=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Ht(),s)}),nt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetrySdkLanguageValues=s.OsTypeValues=s.HostArchValues=s.AwsEcsLaunchtypeValues=s.CloudPlatformValues=s.CloudProviderValues=s.ResourceAttributes=void 0,s.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var k;(function(u){u.AWS="aws",u.AZURE="azure",u.GCP="gcp"})(k=s.CloudProviderValues||(s.CloudProviderValues={}));var d;(function(u){u.AWS_EC2="aws_ec2",u.AWS_ECS="aws_ecs",u.AWS_EKS="aws_eks",u.AWS_LAMBDA="aws_lambda",u.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",u.AZURE_VM="azure_vm",u.AZURE_CONTAINER_INSTANCES="azure_container_instances",u.AZURE_AKS="azure_aks",u.AZURE_FUNCTIONS="azure_functions",u.AZURE_APP_SERVICE="azure_app_service",u.GCP_COMPUTE_ENGINE="gcp_compute_engine",u.GCP_CLOUD_RUN="gcp_cloud_run",u.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",u.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",u.GCP_APP_ENGINE="gcp_app_engine"})(d=s.CloudPlatformValues||(s.CloudPlatformValues={}));var v;(function(u){u.EC2="ec2",u.FARGATE="fargate"})(v=s.AwsEcsLaunchtypeValues||(s.AwsEcsLaunchtypeValues={}));var _;(function(u){u.AMD64="amd64",u.ARM32="arm32",u.ARM64="arm64",u.IA64="ia64",u.PPC32="ppc32",u.PPC64="ppc64",u.X86="x86"})(_=s.HostArchValues||(s.HostArchValues={}));var p;(function(u){u.WINDOWS="windows",u.LINUX="linux",u.DARWIN="darwin",u.FREEBSD="freebsd",u.NETBSD="netbsd",u.OPENBSD="openbsd",u.DRAGONFLYBSD="dragonflybsd",u.HPUX="hpux",u.AIX="aix",u.SOLARIS="solaris",u.Z_OS="z_os"})(p=s.OsTypeValues||(s.OsTypeValues={}));var l;(function(u){u.CPP="cpp",u.DOTNET="dotnet",u.ERLANG="erlang",u.GO="go",u.JAVA="java",u.NODEJS="nodejs",u.PHP="php",u.PYTHON="python",u.RUBY="ruby",u.WEBJS="webjs"})(l=s.TelemetrySdkLanguageValues||(s.TelemetrySdkLanguageValues={}))}),mo=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(nt(),s)}),qi=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d($r(),s),d(mo(),s)}),Ju=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SDK_INFO=void 0;var k=ga(),d=qi();s.SDK_INFO={[d.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[d.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[d.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:d.TelemetrySdkLanguageValues.NODEJS,[d.ResourceAttributes.TELEMETRY_SDK_VERSION]:k.VERSION}}),Zu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unrefTimer=void 0;function k(d){d.unref()}s.unrefTimer=k}),Gr=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(ho(),s),d(Li(),s),d(po(),s),d(Xu(),s),d(Ju(),s),d(Zu(),s)}),va=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Gr(),s)}),el=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTimeInput=s.isTimeInputHrTime=s.hrTimeToMicroseconds=s.hrTimeToMilliseconds=s.hrTimeToNanoseconds=s.hrTimeToTimeStamp=s.hrTimeDuration=s.timeInputToHrTime=s.hrTime=void 0;var k=va(),d=9,v=Math.pow(10,d);function _(C){let D=C/1e3,x=Math.trunc(D),Q=Number((D-x).toFixed(d))*v;return[x,Q]}function p(){let C=k.otperformance.timeOrigin;if(typeof C!="number"){let D=k.otperformance;C=D.timing&&D.timing.fetchStart}return C}function l(C){let D=_(p()),x=_(typeof C=="number"?C:k.otperformance.now()),Q=D[0]+x[0],re=D[1]+x[1];return re>v&&(re-=v,Q+=1),[Q,re]}s.hrTime=l;function u(C){if(E(C))return C;if(typeof C=="number")return C<p()?l(C):_(C);if(C instanceof Date)return _(C.getTime());throw TypeError("Invalid input type")}s.timeInputToHrTime=u;function h(C,D){let x=D[0]-C[0],Q=D[1]-C[1];return Q<0&&(x-=1,Q+=v),[x,Q]}s.hrTimeDuration=h;function g(C){let D=d,x=`${"0".repeat(D)}${C[1]}Z`,Q=x.substr(x.length-D-1);return new Date(C[0]*1e3).toISOString().replace("000Z",Q)}s.hrTimeToTimeStamp=g;function y(C){return C[0]*v+C[1]}s.hrTimeToNanoseconds=y;function m(C){return Math.round(C[0]*1e3+C[1]/1e6)}s.hrTimeToMilliseconds=m;function w(C){return Math.round(C[0]*1e6+C[1]/1e3)}s.hrTimeToMicroseconds=w;function E(C){return Array.isArray(C)&&C.length===2&&typeof C[0]=="number"&&typeof C[1]=="number"}s.isTimeInputHrTime=E;function R(C){return E(C)||typeof C=="number"||C instanceof Date}s.isTimeInput=R}),tl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),fo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExportResultCode=void 0;var k;(function(d){d[d.SUCCESS=0]="SUCCESS",d[d.FAILED=1]="FAILED"})(k=s.ExportResultCode||(s.ExportResultCode={}))}),rl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CompositePropagator=void 0;var k=Ft(),d=class{constructor(v={}){var _;this._propagators=(_=v.propagators)!==null&&_!==void 0?_:[],this._fields=Array.from(new Set(this._propagators.map(p=>typeof p.fields=="function"?p.fields():[]).reduce((p,l)=>p.concat(l),[])))}inject(v,_,p){for(let l of this._propagators)try{l.inject(v,_,p)}catch(u){k.diag.warn(`Failed to inject with ${l.constructor.name}. Err: ${u.message}`)}}extract(v,_,p){return this._propagators.reduce((l,u)=>{try{return u.extract(l,_,p)}catch(h){k.diag.warn(`Failed to inject with ${u.constructor.name}. Err: ${h.message}`)}return l},v)}fields(){return this._fields.slice()}};s.CompositePropagator=d}),nl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.validateValue=s.validateKey=void 0;var k="[_0-9a-z-*/]",d=`[a-z]${k}{0,255}`,v=`[a-z0-9]${k}{0,240}@[a-z]${k}{0,13}`,_=new RegExp(`^(?:${d}|${v})$`),p=/^[ -~]{0,255}[!-~]$/,l=/,|=/;function u(g){return _.test(g)}s.validateKey=u;function h(g){return p.test(g)&&!l.test(g)}s.validateValue=h}),Ui=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceState=void 0;var k=nl(),d=32,v=512,_=",",p="=",l=class{constructor(u){this._internalState=new Map,u&&this._parse(u)}set(u,h){let g=this._clone();return g._internalState.has(u)&&g._internalState.delete(u),g._internalState.set(u,h),g}unset(u){let h=this._clone();return h._internalState.delete(u),h}get(u){return this._internalState.get(u)}serialize(){return this._keys().reduce((u,h)=>(u.push(h+p+this.get(h)),u),[]).join(_)}_parse(u){u.length>v||(this._internalState=u.split(_).reverse().reduce((h,g)=>{let y=g.trim(),m=y.indexOf(p);if(m!==-1){let w=y.slice(0,m),E=y.slice(m+1,g.length);k.validateKey(w)&&k.validateValue(E)&&h.set(w,E)}return h},new Map),this._internalState.size>d&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,d))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let u=new l;return u._internalState=new Map(this._internalState),u}};s.TraceState=l}),go=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpTraceContextPropagator=s.parseTraceParent=s.TRACE_STATE_HEADER=s.TRACE_PARENT_HEADER=void 0;var k=Ft(),d=Vn(),v=Ui();s.TRACE_PARENT_HEADER="traceparent",s.TRACE_STATE_HEADER="tracestate";var _="00",p="(?!ff)[\\da-f]{2}",l="(?![0]{32})[\\da-f]{32}",u="(?![0]{16})[\\da-f]{16}",h="[\\da-f]{2}",g=new RegExp(`^\\s?(${p})-(${l})-(${u})-(${h})(-.*)?\\s?$`);function y(w){let E=g.exec(w);return!E||E[1]==="00"&&E[5]?null:{traceId:E[2],spanId:E[3],traceFlags:parseInt(E[4],16)}}s.parseTraceParent=y;var m=class{inject(w,E,R){let C=k.trace.getSpanContext(w);if(!C||d.isTracingSuppressed(w)||!k.isSpanContextValid(C))return;let D=`${_}-${C.traceId}-${C.spanId}-0${Number(C.traceFlags||k.TraceFlags.NONE).toString(16)}`;R.set(E,s.TRACE_PARENT_HEADER,D),C.traceState&&R.set(E,s.TRACE_STATE_HEADER,C.traceState.serialize())}extract(w,E,R){let C=R.get(E,s.TRACE_PARENT_HEADER);if(!C)return w;let D=Array.isArray(C)?C[0]:C;if(typeof D!="string")return w;let x=y(D);if(!x)return w;x.isRemote=!0;let Q=R.get(E,s.TRACE_STATE_HEADER);if(Q){let re=Array.isArray(Q)?Q.join(","):Q;x.traceState=new v.TraceState(typeof re=="string"?re:void 0)}return k.trace.setSpanContext(w,x)}fields(){return[s.TRACE_PARENT_HEADER,s.TRACE_STATE_HEADER]}};s.HttpTraceContextPropagator=m}),il=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ya=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getRPCMetadata=s.deleteRPCMetadata=s.setRPCMetadata=s.RPCType=void 0;var k=Ft(),d=k.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),v;(function(u){u.HTTP="http"})(v=s.RPCType||(s.RPCType={}));function _(u,h){return u.setValue(d,h)}s.setRPCMetadata=_;function p(u){return u.deleteValue(d)}s.deleteRPCMetadata=p;function l(u){return u.getValue(d)}s.getRPCMetadata=l}),As=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOffSampler=void 0;var k=Ft(),d=class{shouldSample(){return{decision:k.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};s.AlwaysOffSampler=d}),vo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOnSampler=void 0;var k=Ft(),d=class{shouldSample(){return{decision:k.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};s.AlwaysOnSampler=d}),sl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ParentBasedSampler=void 0;var k=Ft(),d=Ns(),v=As(),_=vo(),p=class{constructor(l){var u,h,g,y;this._root=l.root,this._root||(d.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new _.AlwaysOnSampler),this._remoteParentSampled=(u=l.remoteParentSampled)!==null&&u!==void 0?u:new _.AlwaysOnSampler,this._remoteParentNotSampled=(h=l.remoteParentNotSampled)!==null&&h!==void 0?h:new v.AlwaysOffSampler,this._localParentSampled=(g=l.localParentSampled)!==null&&g!==void 0?g:new _.AlwaysOnSampler,this._localParentNotSampled=(y=l.localParentNotSampled)!==null&&y!==void 0?y:new v.AlwaysOffSampler}shouldSample(l,u,h,g,y,m){let w=k.trace.getSpanContext(l);return!w||!k.isSpanContextValid(w)?this._root.shouldSample(l,u,h,g,y,m):w.isRemote?w.traceFlags&k.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(l,u,h,g,y,m):this._remoteParentNotSampled.shouldSample(l,u,h,g,y,m):w.traceFlags&k.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(l,u,h,g,y,m):this._localParentNotSampled.shouldSample(l,u,h,g,y,m)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};s.ParentBasedSampler=p}),al=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceIdRatioBasedSampler=void 0;var k=Ft(),d=class{constructor(v=0){this._ratio=v,this._ratio=this._normalize(v),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(v,_){return{decision:k.isValidTraceId(_)&&this._accumulate(_)<this._upperBound?k.SamplingDecision.RECORD_AND_SAMPLED:k.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(v){return typeof v!="number"||isNaN(v)?0:v>=1?1:v<=0?0:v}_accumulate(v){let _=0;for(let p=0;p<v.length/8;p++){let l=p*8,u=parseInt(v.slice(l,l+8),16);_=(_^u)>>>0}return _}};s.TraceIdRatioBasedSampler=d}),ol=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isUrlIgnored=s.urlMatches=void 0;function k(v,_){return typeof _=="string"?v===_:_.test(v)}s.urlMatches=k;function d(v,_){if(!_)return!1;for(let p of _)if(k(v,p))return!0;return!1}s.isUrlIgnored=d}),yo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isWrapped=void 0;function k(d){return typeof d=="function"&&typeof d.__original=="function"&&typeof d.__unwrap=="function"&&d.__wrapped===!0}s.isWrapped=k}),Xr=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),s.baggageUtils=void 0,d(Ku(),s),d(Yu(),s),d(Ns(),s),d(jn(),s),d(el(),s),d(tl(),s),d(fo(),s),d(ga(),s),s.baggageUtils=Bn(),d(va(),s),d(rl(),s),d(go(),s),d(il(),s),d(ya(),s),d(As(),s),d(vo(),s),d(sl(),s),d(al(),s),d(Vn(),s),d(Ui(),s),d(fa(),s),d(ma(),s),d(ol(),s),d(yo(),s),d(ga(),s)}),ul=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExceptionEventName=void 0,s.ExceptionEventName="exception"}),ba=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Span=void 0;var k=Ft(),d=Xr(),v=qi(),_=ul(),p=class{constructor(l,u,h,g,y,m,w=[],E=d.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:k.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=h,this._spanContext=g,this.parentSpanId=m,this.kind=y,this.links=w,this.startTime=d.timeInputToHrTime(E),this.resource=l.resource,this.instrumentationLibrary=l.instrumentationLibrary,this._spanLimits=l.getSpanLimits(),this._spanProcessor=l.getActiveSpanProcessor(),this._spanProcessor.onStart(this,u)}spanContext(){return this._spanContext}setAttribute(l,u){return u==null||this._isSpanEnded()?this:l.length===0?(k.diag.warn(`Invalid attribute key: ${l}`),this):d.isAttributeValue(u)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,l)?this:(this.attributes[l]=u,this):(k.diag.warn(`Invalid attribute value set for key: ${l}`),this)}setAttributes(l){for(let[u,h]of Object.entries(l))this.setAttribute(u,h);return this}addEvent(l,u,h){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(k.diag.warn("Dropping extra events."),this.events.shift()),d.isTimeInput(u)&&(typeof h=="undefined"&&(h=u),u=void 0),typeof h=="undefined"&&(h=d.hrTime()),this.events.push({name:l,attributes:u,time:d.timeInputToHrTime(h)}),this)}setStatus(l){return this._isSpanEnded()?this:(this.status=l,this)}updateName(l){return this._isSpanEnded()?this:(this.name=l,this)}end(l=d.hrTime()){if(this._isSpanEnded()){k.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=d.timeInputToHrTime(l),this._duration=d.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&k.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(l,u=d.hrTime()){let h={};typeof l=="string"?h[v.SemanticAttributes.EXCEPTION_MESSAGE]=l:l&&(l.code?h[v.SemanticAttributes.EXCEPTION_TYPE]=l.code.toString():l.name&&(h[v.SemanticAttributes.EXCEPTION_TYPE]=l.name),l.message&&(h[v.SemanticAttributes.EXCEPTION_MESSAGE]=l.message),l.stack&&(h[v.SemanticAttributes.EXCEPTION_STACKTRACE]=l.stack)),h[v.SemanticAttributes.EXCEPTION_TYPE]||h[v.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(_.ExceptionEventName,h,u):k.diag.warn(`Failed to record an exception ${l}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&k.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};s.Span=p}),ll=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.buildSamplerFromEnv=s.DEFAULT_CONFIG=void 0;var k=Ft(),d=Xr(),v=d.getEnv(),_=d.TracesSamplerValues.AlwaysOn;s.DEFAULT_CONFIG={sampler:p(v),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:d.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:d.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:d.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function p(h=d.getEnv()){switch(h.OTEL_TRACES_SAMPLER){case d.TracesSamplerValues.AlwaysOn:return new d.AlwaysOnSampler;case d.TracesSamplerValues.AlwaysOff:return new d.AlwaysOffSampler;case d.TracesSamplerValues.ParentBasedAlwaysOn:return new d.ParentBasedSampler({root:new d.AlwaysOnSampler});case d.TracesSamplerValues.ParentBasedAlwaysOff:return new d.ParentBasedSampler({root:new d.AlwaysOffSampler});case d.TracesSamplerValues.TraceIdRatio:return new d.TraceIdRatioBasedSampler(u(h));case d.TracesSamplerValues.ParentBasedTraceIdRatio:return new d.ParentBasedSampler({root:new d.TraceIdRatioBasedSampler(u(h))});default:return k.diag.error(`OTEL_TRACES_SAMPLER value "${h.OTEL_TRACES_SAMPLER} invalid, defaulting to ${_}".`),new d.AlwaysOnSampler}}s.buildSamplerFromEnv=p;var l=1;function u(h){if(h.OTEL_TRACES_SAMPLER_ARG===void 0||h.OTEL_TRACES_SAMPLER_ARG==="")return k.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${l}.`),l;let g=Number(h.OTEL_TRACES_SAMPLER_ARG);return isNaN(g)?(k.diag.error(`OTEL_TRACES_SAMPLER_ARG=${h.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${l}.`),l):g<0||g>1?(k.diag.error(`OTEL_TRACES_SAMPLER_ARG=${h.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${l}.`),l):g}}),Is=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.mergeConfig=void 0;var k=ll();function d(v){let _={sampler:k.buildSamplerFromEnv()},p=Object.assign({},k.DEFAULT_CONFIG,_,v);return p.spanLimits=Object.assign({},k.DEFAULT_CONFIG.spanLimits,v.spanLimits||{}),p}s.mergeConfig=d}),wa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Tracer=void 0;var k=Ft(),d=Xr(),v=ba(),_=Is(),p=class{constructor(u,h,g){this._tracerProvider=g;let y=_.mergeConfig(h);this._sampler=y.sampler,this._spanLimits=y.spanLimits,this._idGenerator=h.idGenerator||new d.RandomIdGenerator,this.resource=g.resource,this.instrumentationLibrary=u}startSpan(u,h={},g=k.context.active()){var y,m;if(d.isTracingSuppressed(g))return k.diag.debug("Instrumentation suppressed, returning Noop Span"),k.trace.wrapSpanContext(k.INVALID_SPAN_CONTEXT);let w=l(h,g),E=this._idGenerator.generateSpanId(),R,C,D;!w||!k.trace.isSpanContextValid(w)?R=this._idGenerator.generateTraceId():(R=w.traceId,C=w.traceState,D=w.spanId);let x=(y=h.kind)!==null&&y!==void 0?y:k.SpanKind.INTERNAL,Q=(m=h.links)!==null&&m!==void 0?m:[],re=d.sanitizeAttributes(h.attributes),Y=this._sampler.shouldSample(h.root?k.trace.setSpanContext(g,k.INVALID_SPAN_CONTEXT):g,R,u,x,re,Q),ue=Y.decision===k.SamplingDecision.RECORD_AND_SAMPLED?k.TraceFlags.SAMPLED:k.TraceFlags.NONE,_e={traceId:R,spanId:E,traceFlags:ue,traceState:C};if(Y.decision===k.SamplingDecision.NOT_RECORD)return k.diag.debug("Recording is off, propagating context in a non-recording span"),k.trace.wrapSpanContext(_e);let Te=new v.Span(this,g,u,_e,x,D,Q,h.startTime);return Te.setAttributes(Object.assign(re,Y.attributes)),Te}startActiveSpan(u,h,g,y){let m,w,E;if(arguments.length<2)return;arguments.length===2?E=h:arguments.length===3?(m=h,E=g):(m=h,w=g,E=y);let R=w!=null?w:k.context.active(),C=this.startSpan(u,m,R),D=k.trace.setSpan(R,C);return k.context.with(D,E,void 0,C)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};s.Tracer=p;function l(u,h){if(!u.root)return k.trace.getSpanContext(h)}}),_a=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultServiceName=void 0;function k(){return`unknown_service:${process.argv0}`}s.defaultServiceName=k}),bo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.detectResources=void 0;var k=Eo(),d=Ft(),v=q(1669),_=async(l={})=>{let u=Object.assign(l),h=await Promise.all((u.detectors||[]).map(async g=>{try{let y=await g.detect(u);return d.diag.debug(`${g.constructor.name} found resource.`,y),y}catch(y){return d.diag.debug(`${g.constructor.name} failed: ${y.message}`),k.Resource.empty()}}));return p(h),h.reduce((g,y)=>g.merge(y),k.Resource.empty())};s.detectResources=_;var p=l=>{l.forEach(u=>{if(Object.keys(u.attributes).length>0){let h=v.inspect(u.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});d.diag.verbose(h)}})}}),Ea=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.envDetector=void 0;var k=Ft(),d=Xr(),v=qi(),_=pi(),p=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(l){let u={},h=d.getEnv(),g=h.OTEL_RESOURCE_ATTRIBUTES,y=h.OTEL_SERVICE_NAME;if(g)try{let m=this._parseResourceAttributes(g);Object.assign(u,m)}catch(m){k.diag.debug(`EnvDetector failed: ${m.message}`)}return y&&(u[v.ResourceAttributes.SERVICE_NAME]=y),new _.Resource(u)}_parseResourceAttributes(l){if(!l)return{};let u={},h=l.split(this._COMMA_SEPARATOR,-1);for(let g of h){let y=g.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(y.length!==2)continue;let[m,w]=y;if(m=m.trim(),w=w.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(m))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(w))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);u[m]=w}return u}_isValid(l){return l.length<=this._MAX_LENGTH&&this._isPrintableString(l)}_isPrintableString(l){for(let u=0;u<l.length;u++){let h=l.charAt(u);if(h<=" "||h>="~")return!1}return!0}_isValidAndNotEmpty(l){return l.length>0&&this._isValid(l)}};s.envDetector=new p}),cl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.processDetector=void 0;var k=Ft(),d=qi(),v=pi(),_=class{async detect(p){let l={[d.ResourceAttributes.PROCESS_PID]:process.pid,[d.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[d.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[d.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(l,p)}_getResourceAttributes(p,l){return p[d.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||p[d.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||p[d.ResourceAttributes.PROCESS_COMMAND]===""||p[d.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(k.diag.debug("ProcessDetector failed: Unable to find required process resources. "),v.Resource.empty()):new v.Resource(Object.assign({},p))}};s.processDetector=new _}),wo=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Ea(),s),d(cl(),s)}),_o=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(_a(),s),d(bo(),s),d(wo(),s)}),Ds=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(_o(),s)}),Eo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Resource=void 0;var k=qi(),d=Xr(),v=Ds(),_=class{constructor(p){this.attributes=p}static empty(){return _.EMPTY}static default(){return new _({[k.ResourceAttributes.SERVICE_NAME]:v.defaultServiceName(),[k.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:d.SDK_INFO[k.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[k.ResourceAttributes.TELEMETRY_SDK_NAME]:d.SDK_INFO[k.ResourceAttributes.TELEMETRY_SDK_NAME],[k.ResourceAttributes.TELEMETRY_SDK_VERSION]:d.SDK_INFO[k.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(p){if(!p||!Object.keys(p.attributes).length)return this;let l=Object.assign({},this.attributes,p.attributes);return new _(l)}};s.Resource=_,_.EMPTY=new _({})}),dl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),hl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),pi=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Eo(),s),d(Ds(),s),d(dl(),s),d(hl(),s)}),Sa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.MultiSpanProcessor=void 0;var k=Xr(),d=class{constructor(v){this._spanProcessors=v}forceFlush(){let v=[];for(let _ of this._spanProcessors)v.push(_.forceFlush());return new Promise(_=>{Promise.all(v).then(()=>{_()}).catch(p=>{k.globalErrorHandler(p||new Error("MultiSpanProcessor: forceFlush failed")),_()})})}onStart(v,_){for(let p of this._spanProcessors)p.onStart(v,_)}onEnd(v){for(let _ of this._spanProcessors)_.onEnd(v)}shutdown(){let v=[];for(let _ of this._spanProcessors)v.push(_.shutdown());return new Promise((_,p)=>{Promise.all(v).then(()=>{_()},p)})}};s.MultiSpanProcessor=d}),kn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopSpanProcessor=void 0;var k=class{onStart(d,v){}onEnd(d){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};s.NoopSpanProcessor=k}),pl=O((s,k)=>{var d=200,v="__lodash_hash_undefined__",_=800,p=16,l=9007199254740991,u="[object Arguments]",h="[object Array]",g="[object AsyncFunction]",y="[object Boolean]",m="[object Date]",w="[object Error]",E="[object Function]",R="[object GeneratorFunction]",C="[object Map]",D="[object Number]",x="[object Null]",Q="[object Object]",re="[object Proxy]",Y="[object RegExp]",ue="[object Set]",_e="[object String]",Te="[object Undefined]",Re="[object WeakMap]",xe="[object ArrayBuffer]",qe="[object DataView]",He="[object Float32Array]",Qe="[object Float64Array]",ut="[object Int8Array]",at="[object Int16Array]",Pt="[object Int32Array]",tt="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Be="[object Uint16Array]",Ve="[object Uint32Array]",Xe=/[\\^$.*+?()[\]{}|]/g,rt=/^\[object .+?Constructor\]$/,lt=/^(?:0|[1-9]\d*)$/,Je={};Je[He]=Je[Qe]=Je[ut]=Je[at]=Je[Pt]=Je[tt]=Je[Fe]=Je[Be]=Je[Ve]=!0,Je[u]=Je[h]=Je[xe]=Je[y]=Je[qe]=Je[m]=Je[w]=Je[E]=Je[C]=Je[D]=Je[Q]=Je[Y]=Je[ue]=Je[_e]=Je[Re]=!1;var kt=typeof global=="object"&&global&&global.Object===Object&&global,qt=typeof self=="object"&&self&&self.Object===Object&&self,At=kt||qt||Function("return this")(),Tt=typeof s=="object"&&s&&!s.nodeType&&s,vt=Tt&&typeof k=="object"&&k&&!k.nodeType&&k,er=vt&&vt.exports===Tt,or=er&&kt.process,et=function(){try{var se=vt&&vt.require&&vt.require("util").types;return se||or&&or.binding&&or.binding("util")}catch(ve){}}(),Ze=et&&et.isTypedArray;function ot(se,ve,Ce){switch(Ce.length){case 0:return se.call(ve);case 1:return se.call(ve,Ce[0]);case 2:return se.call(ve,Ce[0],Ce[1]);case 3:return se.call(ve,Ce[0],Ce[1],Ce[2])}return se.apply(ve,Ce)}function Et(se,ve){for(var Ce=-1,Ye=Array(se);++Ce<se;)Ye[Ce]=ve(Ce);return Ye}function In(se){return function(ve){return se(ve)}}function en(se,ve){return se==null?void 0:se[ve]}function Ie(se,ve){return function(Ce){return se(ve(Ce))}}var hn=Array.prototype,pn=Function.prototype,wr=Object.prototype,Bt=At["__core-js_shared__"],mn=pn.toString,_r=wr.hasOwnProperty,Yn=function(){var se=/[^.]+$/.exec(Bt&&Bt.keys&&Bt.keys.IE_PROTO||"");return se?"Symbol(src)_1."+se:""}(),fn=wr.toString,Rt=mn.call(Object),gn=RegExp("^"+mn.call(_r).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vn=er?At.Buffer:void 0,Xn=At.Symbol,Jn=At.Uint8Array,tr=vn?vn.allocUnsafe:void 0,ur=Ie(Object.getPrototypeOf,Object),Vr=Object.create,Er=wr.propertyIsEnumerable,hr=hn.splice,pr=Xn?Xn.toStringTag:void 0,rr=function(){try{var se=Qi(Object,"defineProperty");return se({},"",{}),se}catch(ve){}}(),dt=vn?vn.isBuffer:void 0,ir=Math.max,We=Date.now,yn=Qi(At,"Map"),xr=Qi(Object,"create"),st=function(){function se(){}return function(ve){if(!Fr(ve))return{};if(Vr)return Vr(ve);se.prototype=ve;var Ce=new se;return se.prototype=void 0,Ce}}();function Wr(se){var ve=-1,Ce=se==null?0:se.length;for(this.clear();++ve<Ce;){var Ye=se[ve];this.set(Ye[0],Ye[1])}}function Zn(){this.__data__=xr?xr(null):{},this.size=0}function bi(se){var ve=this.has(se)&&delete this.__data__[se];return this.size-=ve?1:0,ve}function ei(se){var ve=this.__data__;if(xr){var Ce=ve[se];return Ce===v?void 0:Ce}return _r.call(ve,se)?ve[se]:void 0}function bn(se){var ve=this.__data__;return xr?ve[se]!==void 0:_r.call(ve,se)}function Dn(se,ve){var Ce=this.__data__;return this.size+=this.has(se)?0:1,Ce[se]=xr&&ve===void 0?v:ve,this}Wr.prototype.clear=Zn,Wr.prototype.delete=bi,Wr.prototype.get=ei,Wr.prototype.has=bn,Wr.prototype.set=Dn;function Sr(se){var ve=-1,Ce=se==null?0:se.length;for(this.clear();++ve<Ce;){var Ye=se[ve];this.set(Ye[0],Ye[1])}}function wi(){this.__data__=[],this.size=0}function _i(se){var ve=this.__data__,Ce=Me(ve,se);if(Ce<0)return!1;var Ye=ve.length-1;return Ce==Ye?ve.pop():hr.call(ve,Ce,1),--this.size,!0}function kr(se){var ve=this.__data__,Ce=Me(ve,se);return Ce<0?void 0:ve[Ce][1]}function ti(se){return Me(this.__data__,se)>-1}function ri(se,ve){var Ce=this.__data__,Ye=Me(Ce,se);return Ye<0?(++this.size,Ce.push([se,ve])):Ce[Ye][1]=ve,this}Sr.prototype.clear=wi,Sr.prototype.delete=_i,Sr.prototype.get=kr,Sr.prototype.has=ti,Sr.prototype.set=ri;function tn(se){var ve=-1,Ce=se==null?0:se.length;for(this.clear();++ve<Ce;){var Ye=se[ve];this.set(Ye[0],Ye[1])}}function Ei(){this.size=0,this.__data__={hash:new Wr,map:new(yn||Sr),string:new Wr}}function Si(se){var ve=La(this,se).delete(se);return this.size-=ve?1:0,ve}function ki(se){return La(this,se).get(se)}function Mr(se){return La(this,se).has(se)}function Ti(se,ve){var Ce=La(this,se),Ye=Ce.size;return Ce.set(se,ve),this.size+=Ce.size==Ye?0:1,this}tn.prototype.clear=Ei,tn.prototype.delete=Si,tn.prototype.get=ki,tn.prototype.has=Mr,tn.prototype.set=Ti;function Kr(se){var ve=this.__data__=new Sr(se);this.size=ve.size}function On(){this.__data__=new Sr,this.size=0}function b(se){var ve=this.__data__,Ce=ve.delete(se);return this.size=ve.size,Ce}function N(se){return this.__data__.get(se)}function F(se){return this.__data__.has(se)}function ae(se,ve){var Ce=this.__data__;if(Ce instanceof Sr){var Ye=Ce.__data__;if(!yn||Ye.length<d-1)return Ye.push([se,ve]),this.size=++Ce.size,this;Ce=this.__data__=new tn(Ye)}return Ce.set(se,ve),this.size=Ce.size,this}Kr.prototype.clear=On,Kr.prototype.delete=b,Kr.prototype.get=N,Kr.prototype.has=F,Kr.prototype.set=ae;function le(se,ve){var Ce=jt(se),Ye=!Ce&&Ua(se),St=!Ce&&!Ye&&Ci(se),Mt=!Ce&&!Ye&&!St&&su(se),zt=Ce||Ye||St||Mt,bt=zt?Et(se.length,String):[],Qt=bt.length;for(var sn in se)(ve||_r.call(se,sn))&&!(zt&&(sn=="length"||St&&(sn=="offset"||sn=="parent")||Mt&&(sn=="buffer"||sn=="byteLength"||sn=="byteOffset")||oc(sn,Qt)))&&bt.push(sn);return bt}function ge(se,ve,Ce){(Ce!==void 0&&!Ri(se[ve],Ce)||Ce===void 0&&!(ve in se))&&Oe(se,ve,Ce)}function ye(se,ve,Ce){var Ye=se[ve];(!(_r.call(se,ve)&&Ri(Ye,Ce))||Ce===void 0&&!(ve in se))&&Oe(se,ve,Ce)}function Me(se,ve){for(var Ce=se.length;Ce--;)if(Ri(se[Ce][0],ve))return Ce;return-1}function Oe(se,ve,Ce){ve=="__proto__"&&rr?rr(se,ve,{configurable:!0,enumerable:!0,value:Ce,writable:!0}):se[ve]=Ce}var mt=ac();function yt(se){return se==null?se===void 0?Te:x:pr&&pr in Object(se)?Ad(se):ms(se)}function ft(se){return nn(se)&&yt(se)==u}function ht(se){if(!Fr(se)||lc(se))return!1;var ve=$a(se)?gn:rt;return ve.test(rn(se))}function It(se){return nn(se)&&iu(se.length)&&!!Je[yt(se)]}function xa(se){if(!Fr(se))return tu(se);var ve=eu(se),Ce=[];for(var Ye in se)Ye=="constructor"&&(ve||!_r.call(se,Ye))||Ce.push(Ye);return Ce}function Ma(se,ve,Ce,Ye,St){se!==ve&&mt(ve,function(Mt,zt){if(St||(St=new Kr),Fr(Mt))Xo(se,ve,zt,Ce,Ma,Ye,St);else{var bt=Ye?Ye(qa(se,zt),Mt,zt+"",se,ve,St):void 0;bt===void 0&&(bt=Mt),ge(se,zt,bt)}},js)}function Xo(se,ve,Ce,Ye,St,Mt,zt){var bt=qa(se,Ce),Qt=qa(ve,Ce),sn=zt.get(Qt);if(sn){ge(se,Ce,sn);return}var Br=Mt?Mt(bt,Qt,Ce+"",se,ve,zt):void 0,gs=Br===void 0;if(gs){var Wi=jt(Qt),Ga=!Wi&&Ci(Qt),uu=!Wi&&!Ga&&su(Qt);Br=Qt,Wi||Ga||uu?jt(bt)?Br=bt:fs(bt)?Br=ic(bt):Ga?(gs=!1,Br=Pd(Qt,!0)):uu?(gs=!1,Br=nc(Qt,!0)):Br=[]:dc(Qt)||Ua(Qt)?(Br=bt,Ua(bt)?Br=hc(bt):(!Fr(bt)||$a(bt))&&(Br=Id(Qt))):gs=!1}gs&&(zt.set(Qt,Br),St(Br,Qt,Ye,Mt,zt),zt.delete(Qt)),ge(se,Ce,Br)}function Fa(se,ve){return nu(ru(se,ve,ou),se+"")}var Jo=rr?function(se,ve){return rr(se,"toString",{configurable:!0,enumerable:!1,value:pc(ve),writable:!0})}:ou;function Pd(se,ve){if(ve)return se.slice();var Ce=se.length,Ye=tr?tr(Ce):new se.constructor(Ce);return se.copy(Ye),Ye}function Nd(se){var ve=new se.constructor(se.byteLength);return new Jn(ve).set(new Jn(se)),ve}function nc(se,ve){var Ce=ve?Nd(se.buffer):se.buffer;return new se.constructor(Ce,se.byteOffset,se.length)}function ic(se,ve){var Ce=-1,Ye=se.length;for(ve||(ve=Array(Ye));++Ce<Ye;)ve[Ce]=se[Ce];return ve}function sc(se,ve,Ce,Ye){var St=!Ce;Ce||(Ce={});for(var Mt=-1,zt=ve.length;++Mt<zt;){var bt=ve[Mt],Qt=Ye?Ye(Ce[bt],se[bt],bt,Ce,se):void 0;Qt===void 0&&(Qt=se[bt]),St?Oe(Ce,bt,Qt):ye(Ce,bt,Qt)}return Ce}function Nr(se){return Fa(function(ve,Ce){var Ye=-1,St=Ce.length,Mt=St>1?Ce[St-1]:void 0,zt=St>2?Ce[2]:void 0;for(Mt=se.length>3&&typeof Mt=="function"?(St--,Mt):void 0,zt&&Zo(Ce[0],Ce[1],zt)&&(Mt=St<3?void 0:Mt,St=1),ve=Object(ve);++Ye<St;){var bt=Ce[Ye];bt&&se(ve,bt,Ye,Mt)}return ve})}function ac(se){return function(ve,Ce,Ye){for(var St=-1,Mt=Object(ve),zt=Ye(ve),bt=zt.length;bt--;){var Qt=zt[se?bt:++St];if(Ce(Mt[Qt],Qt,Mt)===!1)break}return ve}}function La(se,ve){var Ce=se.__data__;return uc(ve)?Ce[typeof ve=="string"?"string":"hash"]:Ce.map}function Qi(se,ve){var Ce=en(se,ve);return ht(Ce)?Ce:void 0}function Ad(se){var ve=_r.call(se,pr),Ce=se[pr];try{se[pr]=void 0;var Ye=!0}catch(Mt){}var St=fn.call(se);return Ye&&(ve?se[pr]=Ce:delete se[pr]),St}function Id(se){return typeof se.constructor=="function"&&!eu(se)?st(ur(se)):{}}function oc(se,ve){var Ce=typeof se;return ve=ve==null?l:ve,!!ve&&(Ce=="number"||Ce!="symbol"&&lt.test(se))&&se>-1&&se%1==0&&se<ve}function Zo(se,ve,Ce){if(!Fr(Ce))return!1;var Ye=typeof ve;return(Ye=="number"?Bs(Ce)&&oc(ve,Ce.length):Ye=="string"&&ve in Ce)?Ri(Ce[ve],se):!1}function uc(se){var ve=typeof se;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?se!=="__proto__":se===null}function lc(se){return!!Yn&&Yn in se}function eu(se){var ve=se&&se.constructor,Ce=typeof ve=="function"&&ve.prototype||wr;return se===Ce}function tu(se){var ve=[];if(se!=null)for(var Ce in Object(se))ve.push(Ce);return ve}function ms(se){return fn.call(se)}function ru(se,ve,Ce){return ve=ir(ve===void 0?se.length-1:ve,0),function(){for(var Ye=arguments,St=-1,Mt=ir(Ye.length-ve,0),zt=Array(Mt);++St<Mt;)zt[St]=Ye[ve+St];St=-1;for(var bt=Array(ve+1);++St<ve;)bt[St]=Ye[St];return bt[ve]=Ce(zt),ot(se,this,bt)}}function qa(se,ve){if(!(ve==="constructor"&&typeof se[ve]=="function")&&ve!="__proto__")return se[ve]}var nu=cc(Jo);function cc(se){var ve=0,Ce=0;return function(){var Ye=We(),St=p-(Ye-Ce);if(Ce=Ye,St>0){if(++ve>=_)return arguments[0]}else ve=0;return se.apply(void 0,arguments)}}function rn(se){if(se!=null){try{return mn.call(se)}catch(ve){}try{return se+""}catch(ve){}}return""}function Ri(se,ve){return se===ve||se!==se&&ve!==ve}var Ua=ft(function(){return arguments}())?ft:function(se){return nn(se)&&_r.call(se,"callee")&&!Er.call(se,"callee")},jt=Array.isArray;function Bs(se){return se!=null&&iu(se.length)&&!$a(se)}function fs(se){return nn(se)&&Bs(se)}var Ci=dt||mc;function $a(se){if(!Fr(se))return!1;var ve=yt(se);return ve==E||ve==R||ve==g||ve==re}function iu(se){return typeof se=="number"&&se>-1&&se%1==0&&se<=l}function Fr(se){var ve=typeof se;return se!=null&&(ve=="object"||ve=="function")}function nn(se){return se!=null&&typeof se=="object"}function dc(se){if(!nn(se)||yt(se)!=Q)return!1;var ve=ur(se);if(ve===null)return!0;var Ce=_r.call(ve,"constructor")&&ve.constructor;return typeof Ce=="function"&&Ce instanceof Ce&&mn.call(Ce)==Rt}var su=Ze?In(Ze):It;function hc(se){return sc(se,js(se))}function js(se){return Bs(se)?le(se,!0):xa(se)}var au=Nr(function(se,ve,Ce){Ma(se,ve,Ce)});function pc(se){return function(){return se}}function ou(se){return se}function mc(){return!1}k.exports=au}),ml=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessorBase=void 0;var k=Ft(),d=Xr(),v=class{constructor(_,p){this._exporter=_,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let l=d.getEnv();this._maxExportBatchSize=typeof(p==null?void 0:p.maxExportBatchSize)=="number"?p.maxExportBatchSize:l.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(p==null?void 0:p.maxQueueSize)=="number"?p.maxQueueSize:l.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(p==null?void 0:p.scheduledDelayMillis)=="number"?p.scheduledDelayMillis:l.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(p==null?void 0:p.exportTimeoutMillis)=="number"?p.exportTimeoutMillis:l.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(_){}onEnd(_){this._isShutdown||this._addToBuffer(_)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,p)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(_).catch(l=>{p(l)})}),this._shuttingDownPromise)}_addToBuffer(_){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(_),this._maybeStartTimer())}_flushAll(){return new Promise((_,p)=>{let l=[],u=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let h=0,g=u;h<g;h++)l.push(this._flushOneBatch());Promise.all(l).then(()=>{_()}).catch(p)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((_,p)=>{let l=setTimeout(()=>{p(new Error("Timeout"))},this._exportTimeoutMillis);k.context.with(d.suppressTracing(k.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),u=>{var h;clearTimeout(l),u.code===d.ExportResultCode.SUCCESS?_():p((h=u.error)!==null&&h!==void 0?h:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(_=>{d.globalErrorHandler(_)})},this._scheduledDelayMillis),d.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};s.BatchSpanProcessorBase=v}),So=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessor=void 0;var k=ml(),d=class extends k.BatchSpanProcessorBase{onShutdown(){}};s.BatchSpanProcessor=d}),ar=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(So(),s)}),Os=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(ar(),s)}),fl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BasicTracerProvider=s.ForceFlushState=void 0;var k=Ft(),d=Xr(),v=pi(),_=Rn(),p=ll(),l=Sa(),u=kn(),h=pl(),g=Os(),y;(function(w){w[w.resolved=0]="resolved",w[w.timeout=1]="timeout",w[w.error=2]="error",w[w.unresolved=3]="unresolved"})(y=s.ForceFlushState||(s.ForceFlushState={}));var m=class{constructor(w={}){var E;this._registeredSpanProcessors=[],this._tracers=new Map;let R=h({},p.DEFAULT_CONFIG,w);this.resource=(E=R.resource)!==null&&E!==void 0?E:v.Resource.empty(),this.resource=v.Resource.default().merge(this.resource),this._config=Object.assign({},R,{resource:this.resource});let C=this._buildExporterFromEnv();if(C!==void 0){let D=new g.BatchSpanProcessor(C);this.activeSpanProcessor=D}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(w,E){let R=`${w}@${E||""}`;return this._tracers.has(R)||this._tracers.set(R,new _.Tracer({name:w,version:E},this._config,this)),this._tracers.get(R)}addSpanProcessor(w){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(E=>k.diag.error("Error while trying to shutdown current span processor",E)),this._registeredSpanProcessors.push(w),this.activeSpanProcessor=new l.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(w={}){k.trace.setGlobalTracerProvider(this),w.propagator===void 0&&(w.propagator=this._buildPropagatorFromEnv()),w.contextManager&&k.context.setGlobalContextManager(w.contextManager),w.propagator&&k.propagation.setGlobalPropagator(w.propagator)}forceFlush(){let w=this._config.forceFlushTimeoutMillis,E=this._registeredSpanProcessors.map(R=>new Promise(C=>{let D,x=setTimeout(()=>{C(new Error(`Span processor did not completed within timeout period of ${w} ms`)),D=y.timeout},w);R.forceFlush().then(()=>{clearTimeout(x),D!==y.timeout&&(D=y.resolved,C(D))}).catch(Q=>{clearTimeout(x),D=y.error,C(Q)})}));return new Promise((R,C)=>{Promise.all(E).then(D=>{let x=D.filter(Q=>Q!==y.resolved);x.length>0?C(x):R()}).catch(D=>C([D]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(w){var E;return(E=m._registeredPropagators.get(w))===null||E===void 0?void 0:E()}_getSpanExporter(w){var E;return(E=m._registeredExporters.get(w))===null||E===void 0?void 0:E()}_buildPropagatorFromEnv(){let w=Array.from(new Set(d.getEnv().OTEL_PROPAGATORS)),E=w.map(R=>{let C=this._getPropagator(R);return C||k.diag.warn(`Propagator "${R}" requested through environment variable is unavailable.`),C}).reduce((R,C)=>(C&&R.push(C),R),[]);if(E.length!==0)return w.length===1?E[0]:new d.CompositePropagator({propagators:E})}_buildExporterFromEnv(){let w=d.getEnv().OTEL_TRACES_EXPORTER;if(w==="none")return;let E=this._getSpanExporter(w);return E||k.diag.error(`Exporter "${w}" requested through environment variable is unavailable.`),E}};s.BasicTracerProvider=m,m._registeredPropagators=new Map([["tracecontext",()=>new d.HttpTraceContextPropagator],["baggage",()=>new d.HttpBaggagePropagator]]),m._registeredExporters=new Map}),gl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ConsoleSpanExporter=void 0;var k=Xr(),d=class{export(v,_){return this._sendSpans(v,_)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(v){return{traceId:v.spanContext().traceId,parentId:v.parentSpanId,name:v.name,id:v.spanContext().spanId,kind:v.kind,timestamp:k.hrTimeToMicroseconds(v.startTime),duration:k.hrTimeToMicroseconds(v.duration),attributes:v.attributes,status:v.status,events:v.events}}_sendSpans(v,_){for(let p of v)console.log(this._exportInfo(p));if(_)return _({code:k.ExportResultCode.SUCCESS})}};s.ConsoleSpanExporter=d}),vd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.InMemorySpanExporter=void 0;var k=Xr(),d=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(v,_){if(this._stopped)return _({code:k.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...v),setTimeout(()=>_({code:k.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};s.InMemorySpanExporter=d}),yd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),bd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleSpanProcessor=void 0;var k=Ft(),d=Xr(),v=class{constructor(_){this._exporter=_,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(_){}onEnd(_){this._isShutdown||k.context.with(d.suppressTracing(k.context.active()),()=>{this._exporter.export([_],p=>{var l;p.code!==d.ExportResultCode.SUCCESS&&d.globalErrorHandler((l=p.error)!==null&&l!==void 0?l:new Error(`SimpleSpanProcessor: span export failed (status ${p})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,p)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(_).catch(l=>{p(l)})}),this._shuttingDownPromise)}};s.SimpleSpanProcessor=v}),vl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),cr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Tn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Vt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Rn=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(wa(),s),d(fl(),s),d(Os(),s),d(gl(),s),d(vd(),s),d(yd(),s),d(bd(),s),d(vl(),s),d(kn(),s),d(ba(),s),d(cr(),s),d(Tn(),s),d(Vt(),s)}),ka=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.azureCoreTracing=s.AzureMonitorSymbol=void 0;var k=pe();s.AzureMonitorSymbol="Azure_Monitor_Tracer";var d=!1,v=function(p){if(d)return p;try{var l=Rn(),u=Ft(),h=new l.BasicTracerProvider,g=h.getTracer("applicationinsights tracer"),y=p.setTracer;p.setTracer=function(m){var w=m.startSpan;m.startSpan=function(E,R,C){var D=w.call(this,E,R,C),x=D.end;return D.end=function(){var Q=x.apply(this,arguments);return k.channel.publish("azure-coretracing",D),Q},D},m[s.AzureMonitorSymbol]=!0,y.call(this,m)},u.trace.getSpan(u.context.active()),p.setTracer(g),d=!0}catch(m){}return p};s.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:v};function _(){k.channel.registerMonkeyPatch("@azure/core-tracing",s.azureCoreTracing)}s.enable=_}),yl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.bunyan=void 0;var k=pe(),d=function(_){var p=_.prototype._emit;return _.prototype._emit=function(l,u){var h=p.apply(this,arguments);if(!u){var g=h;g||(g=p.call(this,l,!0)),k.channel.publish("bunyan",{level:l.level,result:g})}return h},_};s.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:d};function v(){k.channel.registerMonkeyPatch("bunyan",s.bunyan)}s.enable=v}),bl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.console=void 0;var k=pe(),d=q(2413),v=function(p){var l=new d.Writable,u=new d.Writable;l.write=function(R){if(!R)return!0;var C=R.toString();return k.channel.publish("console",{message:C}),!0},u.write=function(R){if(!R)return!0;var C=R.toString();return k.channel.publish("console",{message:C,stderr:!0}),!0};for(var h=new p.Console(l,u),g=["log","info","warn","error","dir","time","timeEnd","trace","assert"],y=function(R){var C=p[R];C&&(p[R]=function(){if(h[R])try{h[R].apply(h,arguments)}catch(D){}return C.apply(p,arguments)})},m=0,w=g;m<w.length;m++){var E=w[m];y(E)}return p};s.console={versionSpecifier:">= 4.0.0",patch:v};function _(){k.channel.registerMonkeyPatch("console",s.console),q(7082)}s.enable=_}),wl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongoCore=void 0;var k=pe(),d=function(_){var p=_.Server.prototype.connect;return _.Server.prototype.connect=function(){var l=p.apply(this,arguments),u=this.s.pool.write;this.s.pool.write=function(){var g=typeof arguments[1]=="function"?1:2;return typeof arguments[g]=="function"&&(arguments[g]=k.channel.bindToContext(arguments[g])),u.apply(this,arguments)};var h=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=k.channel.bindToContext(arguments[1])),h.apply(this,arguments)},l},_};s.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d};function v(){k.channel.registerMonkeyPatch("mongodb-core",s.mongoCore)}s.enable=v}),ko=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(h){for(var g,y=1,m=arguments.length;y<m;y++){g=arguments[y];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(h[w]=g[w])}return h},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongo330=s.mongo3=s.mongo2=void 0;var d=pe(),v=function(h){var g=h.instrument({operationIdGenerator:{next:function(){return d.channel.bindToContext(function(m){return m()})}}}),y={};return g.on("started",function(m){y[m.requestId]||(y[m.requestId]=k(k({},m),{time:new Date}))}),g.on("succeeded",function(m){var w=y[m.requestId];w&&delete y[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return d.channel.publish("mongodb",{startedData:w,event:m,succeeded:!0})}):d.channel.publish("mongodb",{startedData:w,event:m,succeeded:!0})}),g.on("failed",function(m){var w=y[m.requestId];w&&delete y[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return d.channel.publish("mongodb",{startedData:w,event:m,succeeded:!1})}):d.channel.publish("mongodb",{startedData:w,event:m,succeeded:!1})}),h},_=function(h){var g=h.instrument(),y={},m={};return g.on("started",function(w){y[w.requestId]||(m[w.requestId]=d.channel.bindToContext(function(E){return E()}),y[w.requestId]=k(k({},w),{time:new Date}))}),g.on("succeeded",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof m[w.requestId]=="function"&&(m[w.requestId](function(){return d.channel.publish("mongodb",{startedData:E,event:w,succeeded:!0})}),delete m[w.requestId])}),g.on("failed",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof m[w.requestId]=="function"&&(m[w.requestId](function(){return d.channel.publish("mongodb",{startedData:E,event:w,succeeded:!1})}),delete m[w.requestId])}),h},p=function(h){var g=h.Server.prototype.connect;return h.Server.prototype.connect=function(){var y=g.apply(this,arguments),m=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var E=typeof arguments[1]=="function"?1:2;return typeof arguments[E]=="function"&&(arguments[E]=d.channel.bindToContext(arguments[E])),m.apply(this,arguments)};var w=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=d.channel.bindToContext(arguments[1])),w.apply(this,arguments)},y},h},l=function(h){p(h);var g=h.instrument(),y={},m={};return g.on("started",function(w){y[w.requestId]||(m[w.requestId]=d.channel.bindToContext(function(E){return E()}),y[w.requestId]=w)}),g.on("succeeded",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof m[w.requestId]=="function"&&(m[w.requestId](function(){return d.channel.publish("mongodb",{startedData:E,event:w,succeeded:!0})}),delete m[w.requestId])}),g.on("failed",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof m[w.requestId]=="function"&&(m[w.requestId](function(){return d.channel.publish("mongodb",{startedData:E,event:w,succeeded:!1})}),delete m[w.requestId])}),h};s.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:v},s.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:_},s.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:l};function u(){d.channel.registerMonkeyPatch("mongodb",s.mongo2),d.channel.registerMonkeyPatch("mongodb",s.mongo3),d.channel.registerMonkeyPatch("mongodb",s.mongo330)}s.enable=u}),dn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mysql=void 0;var k=pe(),d=q(5622),v=function(p,l){var u=function(E,R){return function(C,D){var x=E[C];x&&(E[C]=function(){for(var Q=arguments.length-1,re=arguments.length-1;re>=0;--re)if(typeof arguments[re]=="function"){Q=re;break}else if(typeof arguments[re]!="undefined")break;var Y=arguments[Q],ue={result:null,startTime:null,startDate:null};typeof Y=="function"&&(D?(ue.startTime=process.hrtime(),ue.startDate=new Date,arguments[Q]=k.channel.bindToContext(D(ue,Y))):arguments[Q]=k.channel.bindToContext(Y));var _e=x.apply(this,arguments);return ue.result=_e,_e})}},h=function(E,R){return u(E.prototype,R+".prototype")},g=["connect","changeUser","ping","statistics","end"],y=q(3255)(d.dirname(l)+"/lib/Connection");g.forEach(function(E){return h(y,"Connection")(E)}),u(y,"Connection")("createQuery",function(E,R){return function(C){var D=process.hrtime(E.startTime),x=D[0]*1e3+D[1]/1e6|0;k.channel.publish("mysql",{query:E.result,callbackArgs:arguments,err:C,duration:x,time:E.startDate}),R.apply(this,arguments)}});var m=["_enqueueCallback"],w=q(9118)(d.dirname(l)+"/lib/Pool");return m.forEach(function(E){return h(w,"Pool")(E)}),p};s.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:v};function _(){k.channel.registerMonkeyPatch("mysql",s.mysql)}s.enable=_}),xs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgresPool1=void 0;var k=pe();function d(_){var p=_.prototype.connect;return _.prototype.connect=function(l){return l&&(arguments[0]=k.channel.bindToContext(l)),p.apply(this,arguments)},_}s.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:d};function v(){k.channel.registerMonkeyPatch("pg-pool",s.postgresPool1)}s.enable=v}),_l=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgres7=s.postgres6=void 0;var k=pe(),d=q(8614);function v(l,u){var h=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,m,w){var E={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},R=process.hrtime(),C;function D(x){x&&x[g]&&(x=x[g]);var Q=k.channel.bindToContext(function(re,Y){var ue=process.hrtime(R);if(E.result=Y&&{rowCount:Y.rowCount,command:Y.command},E.error=re,E.duration=Math.ceil(ue[0]*1e3+ue[1]/1e6),k.channel.publish("postgres",E),re){if(x)return x.apply(this,arguments);C&&C instanceof d.EventEmitter&&C.emit("error",re)}else x&&x.apply(this,arguments)});try{return Object.defineProperty(Q,g,{value:x}),Q}catch(re){return x}}try{typeof y=="string"?m instanceof Array?(E.query.preparable={text:y,args:m},w=D(w)):(E.query.text=y,w?w=D(w):m=D(m)):(typeof y.name=="string"?E.query.plan=y.name:y.values instanceof Array?E.query.preparable={text:y.text,args:y.values}:E.query.text=y.text,w?w=D(w):m?m=D(m):y.callback=D(y.callback))}catch(x){return h.apply(this,arguments)}return arguments[0]=y,arguments[1]=m,arguments[2]=w,arguments.length=arguments.length>3?arguments.length:3,C=h.apply(this,arguments),C},l}function _(l,u){var h=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,m,w){var E=this,R=!!w,C={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},D=process.hrtime(),x;function Q(re){re&&re[g]&&(re=re[g]);var Y=k.channel.bindToContext(function(ue,_e){var Te=process.hrtime(D);if(C.result=_e&&{rowCount:_e.rowCount,command:_e.command},C.error=ue,C.duration=Math.ceil(Te[0]*1e3+Te[1]/1e6),k.channel.publish("postgres",C),ue){if(re)return re.apply(this,arguments);x&&x instanceof d.EventEmitter&&x.emit("error",ue)}else re&&re.apply(this,arguments)});try{return Object.defineProperty(Y,g,{value:re}),Y}catch(ue){return re}}try{typeof y=="string"?m instanceof Array?(C.query.preparable={text:y,args:m},R=typeof w=="function",w=R?Q(w):w):(C.query.text=y,w?(R=typeof w=="function",w=R?Q(w):w):(R=typeof m=="function",m=R?Q(m):m)):(typeof y.name=="string"?C.query.plan=y.name:y.values instanceof Array?C.query.preparable={text:y.text,args:y.values}:C.query.text=y.text,w?(R=typeof w=="function",w=Q(w)):m?(R=typeof m=="function",m=R?Q(m):m):(R=typeof y.callback=="function",y.callback=R?Q(y.callback):y.callback))}catch(re){return h.apply(this,arguments)}return arguments[0]=y,arguments[1]=m,arguments[2]=w,arguments.length=arguments.length>3?arguments.length:3,x=h.apply(this,arguments),R?x:x.then(function(re){return Q()(void 0,re),new E._Promise(function(Y,ue){Y(re)})}).catch(function(re){return Q()(re,void 0),new E._Promise(function(Y,ue){ue(re)})})},l}s.postgres6={versionSpecifier:"6.*",patch:v},s.postgres7={versionSpecifier:">=7.* <=8.*",patch:_};function p(){k.channel.registerMonkeyPatch("pg",s.postgres6),k.channel.registerMonkeyPatch("pg",s.postgres7)}s.enable=p}),To=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.redis=void 0;var k=pe(),d=function(_){var p=_.RedisClient.prototype.internal_send_command;return _.RedisClient.prototype.internal_send_command=function(l){if(l){var u=l.callback;if(!u||!u.pubsubBound){var h=this.address,g=process.hrtime(),y=new Date;l.callback=k.channel.bindToContext(function(m,w){var E=process.hrtime(g),R=E[0]*1e3+E[1]/1e6|0;k.channel.publish("redis",{duration:R,address:h,commandObj:l,err:m,result:w,time:y}),typeof u=="function"&&u.apply(this,arguments)}),l.callback.pubsubBound=!0}}return p.call(this,l)},_};s.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d};function v(){k.channel.registerMonkeyPatch("redis",s.redis)}s.enable=v}),Ro=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(p){for(var l,u=1,h=arguments.length;u<h;u++){l=arguments[u];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(p[g]=l[g])}return p},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=void 0;var d=pe(),v=function(p){var l=p.Connection.prototype.makeRequest;return p.Connection.prototype.makeRequest=function(){function u(g){var y=process.hrtime(),m={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return d.channel.bindToContext(function(w,E,R){var C=process.hrtime(y);m=k(k({},m),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!w&&{rowCount:E,rows:R},query:{text:this.parametersByName.statement.value},error:w,duration:Math.ceil(C[0]*1e3+C[1]/1e6)}),d.channel.publish("tedious",m),g.call(this,w,E,R)})}var h=arguments[0];arguments[0].callback=u(h.callback),l.apply(this,arguments)},p};s.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:v};function _(){d.channel.registerMonkeyPatch("tedious",s.tedious)}s.enable=_}),El=O(s=>{"use strict";var k=s&&s.__extends||function(){var u=function(h,g){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(y[w]=m[w])},u(h,g)};return function(h,g){u(h,g);function y(){this.constructor=h}h.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),d=s&&s.__rest||function(u,h){var g={};for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&h.indexOf(y)<0&&(g[y]=u[y]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,y=Object.getOwnPropertySymbols(u);m<y.length;m++)h.indexOf(y[m])<0&&Object.prototype.propertyIsEnumerable.call(u,y[m])&&(g[y[m]]=u[y[m]]);return g};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.winston2=s.winston3=void 0;var v=pe(),_=function(u){var h=u.Logger.prototype.log,g,y=function(m,w,E){var R;return g===u.config.npm.levels?R="npm":g===u.config.syslog.levels?R="syslog":R="unknown",v.channel.publish("winston",{level:m,message:w,meta:E,levelKind:R}),w};return u.Logger.prototype.log=function(){return g=this.levels,!this.filters||this.filters.length===0?this.filters=[y]:this.filters[this.filters.length-1]!==y&&(this.filters=this.filters.filter(function(m){return m!==y}),this.filters.push(y)),h.apply(this,arguments)},u},p=function(u){var h=function(E,R){var C;return E.config.npm.levels[R]!=null?C="npm":E.config.syslog.levels[R]!=null?C="syslog":C="unknown",C},g=function(E){k(R,E);function R(C,D){var x=E.call(this,D)||this;return x.winston=C,x}return R.prototype.log=function(C,D){var x=C.message,Q=C.level,re=C.meta,Y=d(C,["message","level","meta"]);Q=typeof Symbol.for=="function"?C[Symbol.for("level")]:Q,x=C instanceof Error?C:x;var ue=h(this.winston,Q);re=re||{};for(var _e in Y)Y.hasOwnProperty(_e)&&(re[_e]=Y[_e]);v.channel.publish("winston",{message:x,level:Q,levelKind:ue,meta:re}),D()},R}(u.Transport);function y(){var E=arguments[0].levels||u.config.npm.levels,R;for(var C in E)E.hasOwnProperty(C)&&(R=R===void 0||E[C]>E[R]?C:R);this.add(new g(u,{level:R}))}var m=u.createLogger;u.createLogger=function(){var E=arguments[0].levels||u.config.npm.levels,R;for(var C in E)E.hasOwnProperty(C)&&(R=R===void 0||E[C]>E[R]?C:R);var D=m.apply(this,arguments);D.add(new g(u,{level:R}));var x=D.configure;return D.configure=function(){x.apply(this,arguments),y.apply(this,arguments)},D};var w=u.configure;return u.configure=function(){w.apply(this,arguments),y.apply(this,arguments)},u.add(new g(u)),u};s.winston3={versionSpecifier:"3.x",patch:p},s.winston2={versionSpecifier:"2.x",patch:_};function l(){v.channel.registerMonkeyPatch("winston",s.winston2),v.channel.registerMonkeyPatch("winston",s.winston3)}s.enable=l}),Co=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=s.pgPool=s.pg=s.winston=s.redis=s.mysql=s.mongodb=s.mongodbCore=s.console=s.bunyan=s.azuresdk=void 0;var k=ka();s.azuresdk=k;var d=yl();s.bunyan=d;var v=bl();s.console=v;var _=wl();s.mongodbCore=_;var p=ko();s.mongodb=p;var l=dn();s.mysql=l;var u=xs();s.pgPool=u;var h=_l();s.pg=h;var g=To();s.redis=g;var y=Ro();s.tedious=y;var m=El();s.winston=m;function w(){d.enable(),v.enable(),_.enable(),p.enable(),l.enable(),h.enable(),u.enable(),g.enable(),m.enable(),k.enable(),y.enable()}s.enable=w}),Ms=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.registerContextPreservation=s.IsInitialized=void 0;var k=te(),d=ce();s.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var v="DiagnosticChannel";if(s.IsInitialized){_=Co(),p=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",l=p.split(","),u={bunyan:_.bunyan,console:_.console,mongodb:_.mongodb,mongodbCore:_.mongodbCore,mysql:_.mysql,redis:_.redis,pg:_.pg,pgPool:_.pgPool,winston:_.winston,azuresdk:_.azuresdk};for(h in u)l.indexOf(h)===-1&&(u[h].enable(),d.info(v,"Subscribed to "+h+" events"));l.length>0&&d.info(v,"Some modules will not be patched",l)}else d.info(v,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var _,p,l,u,h;function g(y){if(s.IsInitialized){var m=pe();m.channel.addContextPreservation(y),m.channel.spanContextPropagator=k.AsyncScopeManager}}s.registerContextPreservation=g}),mi=O((s,k)=>{"use strict";k.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),zr=O((s,k)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(y){for(var m,w=1,E=arguments.length;w<E;w++){m=arguments[w];for(var R in m)Object.prototype.hasOwnProperty.call(m,R)&&(y[R]=m[R])}return y},d.apply(this,arguments)},v=q(8605),_=q(7211),p=q(8835),l=q(7619),u=ce(),h=mi(),g=function(){function y(){}return y.getCookie=function(m,w){var E="";if(m&&m.length&&typeof w=="string")for(var R=m+"=",C=w.split(";"),D=0;D<C.length;D++){var w=C[D];if(w=y.trim(w),w&&w.indexOf(R)===0){E=w.substring(R.length,C[D].length);break}}return E},y.trim=function(m){return typeof m=="string"?m.replace(/^\s+|\s+$/g,""):""},y.int32ArrayToBase64=function(m){var w=function(x,Q){return String.fromCharCode(x>>Q&255)},E=function(x){return w(x,24)+w(x,16)+w(x,8)+w(x,0)},R=m.map(E).join(""),C=Buffer.from?Buffer.from(R,"binary"):new Buffer(R,"binary"),D=C.toString("base64");return D.substr(0,D.indexOf("="))},y.random32=function(){return 4294967296*Math.random()|0},y.randomu32=function(){return y.random32()+2147483648},y.w3cTraceId=function(){for(var m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],w="",E,R=0;R<4;R++)E=y.random32(),w+=m[E&15]+m[E>>4&15]+m[E>>8&15]+m[E>>12&15]+m[E>>16&15]+m[E>>20&15]+m[E>>24&15]+m[E>>28&15];var C=m[8+Math.random()*4|0];return w.substr(0,8)+w.substr(9,4)+"4"+w.substr(13,3)+C+w.substr(16,3)+w.substr(19,12)},y.w3cSpanId=function(){return y.w3cTraceId().substring(16)},y.isValidW3CId=function(m){return m.length===32&&m!=="00000000000000000000000000000000"},y.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"},y.isError=function(m){return m instanceof Error},y.isPrimitive=function(m){var w=typeof m;return w==="string"||w==="number"||w==="boolean"},y.isDate=function(m){return Object.prototype.toString.call(m)==="[object Date]"},y.msToTimeSpan=function(m){(isNaN(m)||m<0)&&(m=0);var w=(m/1e3%60).toFixed(7).replace(/0{0,4}$/,""),E=""+Math.floor(m/(1e3*60))%60,R=""+Math.floor(m/(1e3*60*60))%24,C=Math.floor(m/(1e3*60*60*24));w=w.indexOf(".")<2?"0"+w:w,E=E.length<2?"0"+E:E,R=R.length<2?"0"+R:R;var D=C>0?C+".":"";return D+R+":"+E+":"+w},y.extractError=function(m){var w=m;return{message:m.message,code:w.code||w.id||""}},y.extractObject=function(m){return m instanceof Error?y.extractError(m):typeof m.toJSON=="function"?m.toJSON():m},y.validateStringMap=function(m){if(typeof m!="object"){u.info("Invalid properties dropped from payload");return}var w={};for(var E in m){var R="",C=m[E],D=typeof C;if(y.isPrimitive(C))R=C.toString();else if(C===null||D==="undefined")R="";else if(D==="function"){u.info("key: "+E+" was function; will not serialize");continue}else{var x=y.isArray(C)?C:y.extractObject(C);try{y.isPrimitive(x)?R=x:R=JSON.stringify(x)}catch(Q){R=C.constructor.name.toString()+" (Error: "+Q.message+")",u.info("key: "+E+", could not be serialized")}}w[E]=R.substring(0,y.MAX_PROPERTY_LENGTH)}return w},y.canIncludeCorrelationHeader=function(m,w){var E=m&&m.config&&m.config.correlationHeaderExcludedDomains;if(!E||E.length==0||!w)return!0;for(var R=0;R<E.length;R++){var C=new RegExp(E[R].replace(/\./g,".").replace(/\*/g,".*"));if(C.test(p.parse(w).hostname))return!1}return!0},y.getCorrelationContextTarget=function(m,w){var E=m.headers&&m.headers[h.requestContextHeader];if(E)for(var R=E.split(","),C=0;C<R.length;++C){var D=R[C].split("=");if(D.length==2&&D[0]==w)return D[1]}},y.makeRequest=function(m,w,E,R){w&&w.indexOf("//")===0&&(w="https:"+w);var C=p.parse(w),D=d(d({},E),{host:C.hostname,port:C.port,path:C.pathname}),x=void 0;if(C.protocol==="https:"&&(x=m.proxyHttpsUrl||void 0),C.protocol==="http:"&&(x=m.proxyHttpUrl||void 0),x){x.indexOf("//")===0&&(x="http:"+x);var Q=p.parse(x);Q.protocol==="https:"?(u.info("Proxies that use HTTPS are not supported"),x=void 0):D=d(d({},D),{host:Q.hostname,port:Q.port||"80",path:w,headers:d(d({},D.headers),{Host:C.hostname})})}var re=C.protocol==="https:"&&!x;return re&&m.httpsAgent!==void 0?D.agent=m.httpsAgent:!re&&m.httpAgent!==void 0?D.agent=m.httpAgent:re&&(D.agent=y.tlsRestrictedAgent),re?_.request(D,R):v.request(D,R)},y.safeIncludeCorrelationHeader=function(m,w,E){var R;if(typeof E=="string")R=E;else if(E instanceof Array)R=E.join(",");else if(E&&typeof E.toString=="function")try{R=E.toString()}catch(C){u.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",C,E)}R?y.addCorrelationIdHeaderFromString(m,w,R):w.setHeader(h.requestContextHeader,h.requestContextSourceKey+"="+m.config.correlationId)},y.dumpObj=function(m){var w=Object.prototype.toString.call(m),E="";return w==="[object Error]"?E="{ stack: '"+m.stack+"', message: '"+m.message+"', name: '"+m.name+"'":E=JSON.stringify(m),w+E},y.addCorrelationIdHeaderFromString=function(m,w,E){var R=E.split(","),C=h.requestContextSourceKey+"=",D=R.some(function(x){return x.substring(0,C.length)===C});D||w.setHeader(h.requestContextHeader,E+","+h.requestContextSourceKey+"="+m.config.correlationId)},y.MAX_PROPERTY_LENGTH=8192,y.tlsRestrictedAgent=new _.Agent({keepAlive:!0,maxSockets:25,secureOptions:l.SSL_OP_NO_SSLv2|l.SSL_OP_NO_SSLv3|l.SSL_OP_NO_TLSv1|l.SSL_OP_NO_TLSv1_1}),y}();k.exports=g}),$i=O((s,k)=>{"use strict";var d=zr(),v=ce(),_=function(){function p(){}return p.queryCorrelationId=function(l,u){var h=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId";if(p.completedLookups.hasOwnProperty(h)){u(p.completedLookups[h]);return}else if(p.pendingLookups[h]){p.pendingLookups[h].push(u);return}p.pendingLookups[h]=[u];var g=function(){if(p.pendingLookups[h]){var y={method:"GET",disableAppInsightsAutoCollection:!0};v.info(p.TAG,y);var m=d.makeRequest(l,h,y,function(w){if(w.statusCode===200){var E="";w.setEncoding("utf-8"),w.on("data",function(R){E+=R}),w.on("end",function(){v.info(p.TAG,E);var R=p.correlationIdPrefix+E;p.completedLookups[h]=R,p.pendingLookups[h]&&p.pendingLookups[h].forEach(function(C){return C(R)}),delete p.pendingLookups[h]})}else w.statusCode>=400&&w.statusCode<500?(p.completedLookups[h]=void 0,delete p.pendingLookups[h]):setTimeout(g,l.correlationIdRetryIntervalMs)});m&&(m.on("error",function(w){v.warn(p.TAG,w)}),m.end())}};setTimeout(g,0)},p.cancelCorrelationIdQuery=function(l,u){var h=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId",g=p.pendingLookups[h];g&&(p.pendingLookups[h]=g.filter(function(y){return y!=u}),p.pendingLookups[h].length==0&&delete p.pendingLookups[h])},p.generateRequestId=function(l){if(l){l=l[0]=="|"?l:"|"+l,l[l.length-1]!=="."&&(l+=".");var u=(p.currentRootId++).toString(16);return p.appendSuffix(l,u,"_")}else return p.generateRootId()},p.getRootId=function(l){var u=l.indexOf(".");u<0&&(u=l.length);var h=l[0]==="|"?1:0;return l.substring(h,u)},p.generateRootId=function(){return"|"+d.w3cTraceId()+"."},p.appendSuffix=function(l,u,h){if(l.length+u.length<p.requestIdMaxLength)return l+u+h;var g=p.requestIdMaxLength-9;if(l.length>g)for(;g>1;--g){var y=l[g-1];if(y==="."||y==="_")break}if(g<=1)return p.generateRootId();for(u=d.randomu32().toString(16);u.length<8;)u="0"+u;return l.substring(0,g)+u+"#"},p.TAG="CorrelationIdManager",p.correlationIdPrefix="cid-v1:",p.w3cEnabled=!0,p.pendingLookups={},p.completedLookups={},p.requestIdMaxLength=1024,p.currentRootId=d.randomu32(),p}();k.exports=_}),Fs=O((s,k)=>{"use strict";var d=zr(),v=$i(),_=function(){function p(l,u){if(this.traceFlag=p.DEFAULT_TRACE_FLAG,this.version=p.DEFAULT_VERSION,l&&typeof l=="string")if(l.split(",").length>1)this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16);else{var h=l.trim().split("-"),g=h.length;g>=4?(this.version=h[0],this.traceId=h[1],this.spanId=h[2],this.traceFlag=h[3]):(this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=p.DEFAULT_VERSION,this.traceId=d.w3cTraceId()),this.version==="00"&&g!==4&&(this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=p.DEFAULT_VERSION,this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=p.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=p.DEFAULT_TRACE_FLAG,this.traceId=d.w3cTraceId()),p.isValidTraceId(this.traceId)||(this.traceId=d.w3cTraceId()),p.isValidSpanId(this.spanId)||(this.spanId=d.w3cTraceId().substr(0,16),this.traceId=d.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(u){this.parentId=u.slice();var y=v.getRootId(u);p.isValidTraceId(y)||(this.legacyRootId=y,y=d.w3cTraceId()),u.indexOf("|")!==-1&&(u=u.substring(1+u.substring(0,u.length-1).lastIndexOf("."),u.length-1)),this.traceId=y,this.spanId=u}else this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)}return p.isValidTraceId=function(l){return l.match(/^[0-9a-f]{32}$/)&&l!=="00000000000000000000000000000000"},p.isValidSpanId=function(l){return l.match(/^[0-9a-f]{16}$/)&&l!=="0000000000000000"},p.formatOpenTelemetryTraceFlags=function(l){var u="0"+l.toString(16);return u.substring(u.length-2)},p.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},p.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},p.prototype.updateSpanId=function(){this.spanId=d.w3cTraceId().substr(0,16)},p.DEFAULT_TRACE_FLAG="01",p.DEFAULT_VERSION="00",p}();k.exports=_}),Po=O((s,k)=>{"use strict";var d=function(){function v(_){this.fieldmap=[],!!_&&(this.fieldmap=this.parseHeader(_))}return v.prototype.toString=function(){var _=this.fieldmap;return!_||_.length==0?null:_.join(", ")},v.validateKeyChars=function(_){var p=_.split("@");if(p.length==2){var l=p[0].trim(),u=p[1].trim(),h=Boolean(l.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),g=Boolean(u.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return h&&g}else if(p.length==1)return Boolean(_.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},v.prototype.parseHeader=function(_){var p=[],l={},u=_.split(",");if(u.length>32)return null;for(var h=0,g=u;h<g.length;h++){var y=g[h],m=y.trim();if(m.length!==0){var w=m.split("=");if(w.length!==2||!v.validateKeyChars(w[0])||l[w[0]])return null;l[w[0]]=!0,p.push(m)}}return p},v.strict=!0,v}();k.exports=d}),Cn=O((s,k)=>{"use strict";var d=function(){function v(){}return v}();k.exports=d}),No=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),fi=O((s,k)=>{"use strict";var d=function(){function v(){}return v}();k.exports=d}),is=O((s,k)=>{"use strict";var d=function(){function v(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return v}();k.exports=d}),Gi=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=fi(),_=function(p){d(l,p);function l(){return p.call(this)||this}return l}(v);k.exports=_}),Ls=O((s,k)=>{"use strict";var d;(function(v){v[v.Measurement=0]="Measurement",v[v.Aggregation=1]="Aggregation"})(d||(d={})),k.exports=d}),Sl=O((s,k)=>{"use strict";var d=Ls(),v=function(){function _(){this.kind=d.Measurement}return _}();k.exports=v}),kl=O((s,k)=>{"use strict";var d=function(){function v(){this.ver=1,this.sampleRate=100,this.tags={}}return v}();k.exports=d}),Ao=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),Io=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.exceptions=[],u.properties={},u.measurements={},u}return l}(v);k.exports=_}),Tl=O((s,k)=>{"use strict";var d=function(){function v(){this.hasFullStack=!0,this.parsedStack=[]}return v}();k.exports=d}),Do=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u}return l}(v);k.exports=_}),wd=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.metrics=[],u.properties={},u}return l}(v);k.exports=_}),Rl=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Ao(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),_d=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.success=!0,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),Cl=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Cn(),_=function(p){d(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),Nt=O((s,k)=>{"use strict";var d;(function(v){v[v.Verbose=0]="Verbose",v[v.Information=1]="Information",v[v.Warning=2]="Warning",v[v.Error=3]="Error",v[v.Critical=4]="Critical"})(d||(d={})),k.exports=d}),gi=O((s,k)=>{"use strict";var d=function(){function v(){}return v}();k.exports=d}),vi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AvailabilityData=No(),s.Base=fi(),s.ContextTagKeys=is(),s.Data=Gi(),s.DataPoint=Sl(),s.DataPointType=Ls(),s.Domain=Cn(),s.Envelope=kl(),s.EventData=Ao(),s.ExceptionData=Io(),s.ExceptionDetails=Tl(),s.MessageData=Do(),s.MetricData=wd(),s.PageViewData=Rl(),s.RemoteDependencyData=_d(),s.RequestData=Cl(),s.SeverityLevel=Nt(),s.StackFrame=gi()}),qs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.domainSupportsProperties=s.RemoteDependencyDataConstants=void 0;var k=vi(),d=function(){function _(){}return _.TYPE_HTTP="Http",_.TYPE_AI="Http (tracked component)",_}();s.RemoteDependencyDataConstants=d;function v(_){return"properties"in _||_ instanceof k.EventData||_ instanceof k.ExceptionData||_ instanceof k.MessageData||_ instanceof k.MetricData||_ instanceof k.PageViewData||_ instanceof k.RemoteDependencyData||_ instanceof k.RequestData}s.domainSupportsProperties=v}),Hr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Pl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Pn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ta=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Hi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Pr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ra=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Nn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Oo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),dr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Vi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Nl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),xo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetryType=s.TelemetryTypeString=s.baseTypeToTelemetryType=s.telemetryTypeToBaseType=void 0;function k(_){switch(_){case v.Event:return"EventData";case v.Exception:return"ExceptionData";case v.Trace:return"MessageData";case v.Metric:return"MetricData";case v.Request:return"RequestData";case v.Dependency:return"RemoteDependencyData";case v.Availability:return"AvailabilityData";case v.PageView:return"PageViewData"}}s.telemetryTypeToBaseType=k;function d(_){switch(_){case"EventData":return v.Event;case"ExceptionData":return v.Exception;case"MessageData":return v.Trace;case"MetricData":return v.Metric;case"RequestData":return v.Request;case"RemoteDependencyData":return v.Dependency;case"AvailabilityData":return v.Availability;case"PageViewData":return v.PageView}}s.baseTypeToTelemetryType=d,s.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var v;(function(_){_[_.Event=0]="Event",_[_.Exception=1]="Exception",_[_.Trace=2]="Trace",_[_.Metric=3]="Metric",_[_.Request=4]="Request",_[_.Dependency=5]="Dependency",_[_.Availability=6]="Availability",_[_.PageView=7]="PageView"})(v=s.TelemetryType||(s.TelemetryType={}))}),ss=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Hr(),s),d(Pl(),s),d(Pn(),s),d(Ta(),s),d(Hi(),s),d(Pr(),s),d(Ra(),s),d(Nn(),s),d(Oo(),s),d(dr(),s),d(Vi(),s),d(Nl(),s),d(xo(),s)}),Mo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Fo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Lo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Al=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),qo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ca=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),as=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Uo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Bi=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Mo(),s),d(Fo(),s),d(Lo(),s),d(Al(),s),d(qo(),s),d(Ca(),s),d(as(),s),d(Uo(),s)}),_t=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(qs(),s),d(vi(),s),d(ss(),s),d(Bi(),s)}),Qr=O((s,k)=>{"use strict";var d=function(){function v(){}return v.prototype.getUrl=function(){return this.url},v.prototype.RequestParser=function(){this.startTime=+new Date},v.prototype._setStatus=function(_,p){var l=+new Date;this.duration=l-this.startTime,this.statusCode=_;var u=this.properties||{};if(p){if(typeof p=="string")u.error=p;else if(p instanceof Error)u.error=p.message;else if(typeof p=="object")for(var h in p)u[h]=p[h]&&p[h].toString&&p[h].toString()}this.properties=u},v.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},v}();k.exports=d}),Us=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var w=function(E,R){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,D){C.__proto__=D}||function(C,D){for(var x in D)Object.prototype.hasOwnProperty.call(D,x)&&(C[x]=D[x])},w(E,R)};return function(E,R){w(E,R);function C(){this.constructor=E}E.prototype=R===null?Object.create(R):(C.prototype=R.prototype,new C)}}(),v=q(8835),_=_t(),p=zr(),l=mi(),u=Qr(),h=$i(),g=Po(),y=Fs(),m=function(w){d(E,w);function E(R,C){var D=w.call(this)||this;return R&&(D.method=R.method,D.url=D._getAbsoluteUrl(R),D.startTime=+new Date,D.socketRemoteAddress=R.socket&&R.socket.remoteAddress,D.parseHeaders(R,C),R.connection&&(D.connectionRemoteAddress=R.connection.remoteAddress,D.legacySocketRemoteAddress=R.connection.socket&&R.connection.socket.remoteAddress)),D}return E.prototype.onError=function(R,C){this._setStatus(void 0,R),C&&(this.duration=C)},E.prototype.onResponse=function(R,C){this._setStatus(R.statusCode,void 0),C&&(this.duration=C)},E.prototype.getRequestTelemetry=function(R){var C={id:this.requestId,name:this.method+" "+v.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(R&&R.time?C.time=R.time:this.startTime&&(C.time=new Date(this.startTime)),R){for(var D in R)C[D]||(C[D]=R[D]);if(R.properties)for(var D in R.properties)C.properties[D]=R.properties[D]}return C},E.prototype.getRequestTags=function(R){var C={};for(var D in R)C[D]=R[D];return C[E.keys.locationIp]=R[E.keys.locationIp]||this._getIp(),C[E.keys.sessionId]=R[E.keys.sessionId]||this._getId("ai_session"),C[E.keys.userId]=R[E.keys.userId]||this._getId("ai_user"),C[E.keys.userAuthUserId]=R[E.keys.userAuthUserId]||this._getId("ai_authUser"),C[E.keys.operationName]=this.getOperationName(R),C[E.keys.operationParentId]=this.getOperationParentId(R),C[E.keys.operationId]=this.getOperationId(R),C},E.prototype.getOperationId=function(R){return R[E.keys.operationId]||this.operationId},E.prototype.getOperationParentId=function(R){return R[E.keys.operationParentId]||this.parentId||this.getOperationId(R)},E.prototype.getOperationName=function(R){return R[E.keys.operationName]||this.method+" "+v.parse(this.url).pathname},E.prototype.getRequestId=function(){return this.requestId},E.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},E.prototype.getTraceparent=function(){return this.traceparent},E.prototype.getTracestate=function(){return this.tracestate},E.prototype.getLegacyRootId=function(){return this.legacyRootId},E.prototype._getAbsoluteUrl=function(R){if(!R.headers)return R.url;var C=R.connection?R.connection.encrypted:null,D=v.parse(R.url),x=D.pathname,Q=D.search,re=C||R.headers["x-forwarded-proto"]=="https"?"https":"http",Y=v.format({protocol:re,host:R.headers.host,pathname:x,search:Q});return Y},E.prototype._getIp=function(){var R=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,C=function(x){var Q=R.exec(x);if(Q)return Q[0]},D=C(this.rawHeaders["x-forwarded-for"])||C(this.rawHeaders["x-client-ip"])||C(this.rawHeaders["x-real-ip"])||C(this.connectionRemoteAddress)||C(this.socketRemoteAddress)||C(this.legacySocketRemoteAddress);return!D&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(D="127.0.0.1"),D},E.prototype._getId=function(R){var C=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",D=E.parseId(p.getCookie(R,C));return D},E.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},E.prototype.parseHeaders=function(R,C){if(this.rawHeaders=R.headers||R.rawHeaders,this.userAgent=R.headers&&R.headers["user-agent"],this.sourceCorrelationId=p.getCorrelationContextTarget(R,l.requestContextSourceKey),R.headers){var D=R.headers[l.traceStateHeader]?R.headers[l.traceStateHeader].toString():null,x=R.headers[l.traceparentHeader]?R.headers[l.traceparentHeader].toString():null,Q=R.headers[l.requestIdHeader]?R.headers[l.requestIdHeader].toString():null,re=R.headers[l.parentIdHeader]?R.headers[l.parentIdHeader].toString():null,Y=R.headers[l.rootIdHeader]?R.headers[l.rootIdHeader].toString():null;this.correlationContextHeader=R.headers[l.correlationContextHeader]?R.headers[l.correlationContextHeader].toString():null,h.w3cEnabled&&(x||D)?(this.traceparent=new y(x?x.toString():null),this.tracestate=x&&D&&new g(D?D.toString():null),this.setBackCompatFromThisTraceContext()):Q?h.w3cEnabled?(this.traceparent=new y(null,Q),this.setBackCompatFromThisTraceContext()):(this.parentId=Q,this.requestId=h.generateRequestId(this.parentId),this.operationId=h.getRootId(this.requestId)):h.w3cEnabled?(this.traceparent=new y,this.traceparent.parentId=re,this.traceparent.legacyRootId=Y||re,this.setBackCompatFromThisTraceContext()):(this.parentId=re,this.requestId=h.generateRequestId(Y||this.parentId),this.correlationContextHeader=null,this.operationId=h.getRootId(this.requestId)),C&&(this.requestId=C,this.operationId=h.getRootId(this.requestId))}},E.parseId=function(R){var C=R.split("|");return C.length>0?C[0]:""},E.keys=new _.ContextTagKeys,E}(u);k.exports=m}),Pa=O((s,k)=>{s=k.exports=Ie;var d;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?d=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:d=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,l=s.re=[],u=s.src=[],h=0,g=h++;u[g]="0|[1-9]\\d*";var y=h++;u[y]="[0-9]+";var m=h++;u[m]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var w=h++;u[w]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var E=h++;u[E]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var R=h++;u[R]="(?:"+u[g]+"|"+u[m]+")";var C=h++;u[C]="(?:"+u[y]+"|"+u[m]+")";var D=h++;u[D]="(?:-("+u[R]+"(?:\\."+u[R]+")*))";var x=h++;u[x]="(?:-?("+u[C]+"(?:\\."+u[C]+")*))";var Q=h++;u[Q]="[0-9A-Za-z-]+";var re=h++;u[re]="(?:\\+("+u[Q]+"(?:\\."+u[Q]+")*))";var Y=h++,ue="v?"+u[w]+u[D]+"?"+u[re]+"?";u[Y]="^"+ue+"$";var _e="[v=\\s]*"+u[E]+u[x]+"?"+u[re]+"?",Te=h++;u[Te]="^"+_e+"$";var Re=h++;u[Re]="((?:<|>)?=?)";var xe=h++;u[xe]=u[y]+"|x|X|\\*";var qe=h++;u[qe]=u[g]+"|x|X|\\*";var He=h++;u[He]="[v=\\s]*("+u[qe]+")(?:\\.("+u[qe]+")(?:\\.("+u[qe]+")(?:"+u[D]+")?"+u[re]+"?)?)?";var Qe=h++;u[Qe]="[v=\\s]*("+u[xe]+")(?:\\.("+u[xe]+")(?:\\.("+u[xe]+")(?:"+u[x]+")?"+u[re]+"?)?)?";var ut=h++;u[ut]="^"+u[Re]+"\\s*"+u[He]+"$";var at=h++;u[at]="^"+u[Re]+"\\s*"+u[Qe]+"$";var Pt=h++;u[Pt]="(?:^|[^\\d])(\\d{1,"+p+"})(?:\\.(\\d{1,"+p+"}))?(?:\\.(\\d{1,"+p+"}))?(?:$|[^\\d])";var tt=h++;u[tt]="(?:~>?)";var Fe=h++;u[Fe]="(\\s*)"+u[tt]+"\\s+",l[Fe]=new RegExp(u[Fe],"g");var Be="$1~",Ve=h++;u[Ve]="^"+u[tt]+u[He]+"$";var Xe=h++;u[Xe]="^"+u[tt]+u[Qe]+"$";var rt=h++;u[rt]="(?:\\^)";var lt=h++;u[lt]="(\\s*)"+u[rt]+"\\s+",l[lt]=new RegExp(u[lt],"g");var Je="$1^",kt=h++;u[kt]="^"+u[rt]+u[He]+"$";var qt=h++;u[qt]="^"+u[rt]+u[Qe]+"$";var At=h++;u[At]="^"+u[Re]+"\\s*("+_e+")$|^$";var Tt=h++;u[Tt]="^"+u[Re]+"\\s*("+ue+")$|^$";var vt=h++;u[vt]="(\\s*)"+u[Re]+"\\s*("+_e+"|"+u[He]+")",l[vt]=new RegExp(u[vt],"g");var er="$1$2$3",or=h++;u[or]="^\\s*("+u[He]+")\\s+-\\s+("+u[He]+")\\s*$";var et=h++;u[et]="^\\s*("+u[Qe]+")\\s+-\\s+("+u[Qe]+")\\s*$";var Ze=h++;for(u[Ze]="(<|>)?=?\\s*\\*",ot=0;ot<h;ot++)d(ot,u[ot]),l[ot]||(l[ot]=new RegExp(u[ot]));var ot;s.parse=Et;function Et(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie)return b;if(typeof b!="string"||b.length>v)return null;var F=N.loose?l[Te]:l[Y];if(!F.test(b))return null;try{return new Ie(b,N)}catch(ae){return null}}s.valid=In;function In(b,N){var F=Et(b,N);return F?F.version:null}s.clean=en;function en(b,N){var F=Et(b.trim().replace(/^[=v]+/,""),N);return F?F.version:null}s.SemVer=Ie;function Ie(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie){if(b.loose===N.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof Ie))return new Ie(b,N);d("SemVer",b,N),this.options=N,this.loose=!!N.loose;var F=b.trim().match(N.loose?l[Te]:l[Y]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(ae){if(/^[0-9]+$/.test(ae)){var le=+ae;if(le>=0&&le<_)return le}return ae}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}Ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ie.prototype.toString=function(){return this.version},Ie.prototype.compare=function(b){return d("SemVer.compare",this.version,this.options,b),b instanceof Ie||(b=new Ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},Ie.prototype.compareMain=function(b){return b instanceof Ie||(b=new Ie(b,this.options)),Bt(this.major,b.major)||Bt(this.minor,b.minor)||Bt(this.patch,b.patch)},Ie.prototype.comparePre=function(b){if(b instanceof Ie||(b=new Ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var N=0;do{var F=this.prerelease[N],ae=b.prerelease[N];if(d("prerelease compare",N,F,ae),F===void 0&&ae===void 0)return 0;if(ae===void 0)return 1;if(F===void 0)return-1;if(F!==ae)return Bt(F,ae)}while(++N)},Ie.prototype.inc=function(b,N){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},s.inc=hn;function hn(b,N,F,ae){typeof F=="string"&&(ae=F,F=void 0);try{return new Ie(b,F).inc(N,ae).version}catch(le){return null}}s.diff=pn;function pn(b,N){if(Vr(b,N))return null;var F=Et(b),ae=Et(N),le="";if(F.prerelease.length||ae.prerelease.length){le="pre";var ge="prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==ae[ye])return le+ye;return ge}s.compareIdentifiers=Bt;var wr=/^[0-9]+$/;function Bt(b,N){var F=wr.test(b),ae=wr.test(N);return F&&ae&&(b=+b,N=+N),b===N?0:F&&!ae?-1:ae&&!F?1:b<N?-1:1}s.rcompareIdentifiers=mn;function mn(b,N){return Bt(N,b)}s.major=_r;function _r(b,N){return new Ie(b,N).major}s.minor=Yn;function Yn(b,N){return new Ie(b,N).minor}s.patch=fn;function fn(b,N){return new Ie(b,N).patch}s.compare=Rt;function Rt(b,N,F){return new Ie(b,F).compare(new Ie(N,F))}s.compareLoose=gn;function gn(b,N){return Rt(b,N,!0)}s.rcompare=vn;function vn(b,N,F){return Rt(N,b,F)}s.sort=Xn;function Xn(b,N){return b.sort(function(F,ae){return s.compare(F,ae,N)})}s.rsort=Jn;function Jn(b,N){return b.sort(function(F,ae){return s.rcompare(F,ae,N)})}s.gt=tr;function tr(b,N,F){return Rt(b,N,F)>0}s.lt=ur;function ur(b,N,F){return Rt(b,N,F)<0}s.eq=Vr;function Vr(b,N,F){return Rt(b,N,F)===0}s.neq=Er;function Er(b,N,F){return Rt(b,N,F)!==0}s.gte=hr;function hr(b,N,F){return Rt(b,N,F)>=0}s.lte=pr;function pr(b,N,F){return Rt(b,N,F)<=0}s.cmp=rr;function rr(b,N,F,ae){switch(N){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Vr(b,F,ae);case"!=":return Er(b,F,ae);case">":return tr(b,F,ae);case">=":return hr(b,F,ae);case"<":return ur(b,F,ae);case"<=":return pr(b,F,ae);default:throw new TypeError("Invalid operator: "+N)}}s.Comparator=dt;function dt(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof dt){if(b.loose===!!N.loose)return b;b=b.value}if(!(this instanceof dt))return new dt(b,N);d("comparator",b,N),this.options=N,this.loose=!!N.loose,this.parse(b),this.semver===ir?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}var ir={};dt.prototype.parse=function(b){var N=this.options.loose?l[At]:l[Tt],F=b.match(N);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new Ie(F[2],this.options.loose):this.semver=ir},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(b){return d("Comparator.test",b,this.options.loose),this.semver===ir?!0:(typeof b=="string"&&(b=new Ie(b,this.options)),rr(b,this.operator,this.semver,this.options))},dt.prototype.intersects=function(b,N){if(!(b instanceof dt))throw new TypeError("a Comparator is required");(!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1});var F;if(this.operator==="")return F=new We(b.value,N),kr(this.value,F,N);if(b.operator==="")return F=new We(this.value,N),kr(b.semver,F,N);var ae=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),le=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),ge=this.semver.version===b.semver.version,ye=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),Me=rr(this.semver,"<",b.semver,N)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),Oe=rr(this.semver,">",b.semver,N)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return ae||le||ge&&ye||Me||Oe},s.Range=We;function We(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof We)return b.loose===!!N.loose&&b.includePrerelease===!!N.includePrerelease?b:new We(b.raw,N);if(b instanceof dt)return new We(b.value,N);if(!(this instanceof We))return new We(b,N);if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}We.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},We.prototype.toString=function(){return this.range},We.prototype.parseRange=function(b){var N=this.options.loose;b=b.trim();var F=N?l[et]:l[or];b=b.replace(F,wi),d("hyphen replace",b),b=b.replace(l[vt],er),d("comparator trim",b,l[vt]),b=b.replace(l[Fe],Be),b=b.replace(l[lt],Je),b=b.split(/\s+/).join(" ");var ae=N?l[At]:l[Tt],le=b.split(" ").map(function(ge){return xr(ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(le=le.filter(function(ge){return!!ge.match(ae)})),le=le.map(function(ge){return new dt(ge,this.options)},this),le},We.prototype.intersects=function(b,N){if(!(b instanceof We))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(ae){return b.set.some(function(le){return le.every(function(ge){return ae.intersects(ge,N)})})})})},s.toComparators=yn;function yn(b,N){return new We(b,N).set.map(function(F){return F.map(function(ae){return ae.value}).join(" ").trim().split(" ")})}function xr(b,N){return d("comp",b,N),b=bi(b,N),d("caret",b),b=Wr(b,N),d("tildes",b),b=bn(b,N),d("xrange",b),b=Sr(b,N),d("stars",b),b}function st(b){return!b||b.toLowerCase()==="x"||b==="*"}function Wr(b,N){return b.trim().split(/\s+/).map(function(F){return Zn(F,N)}).join(" ")}function Zn(b,N){var F=N.loose?l[Xe]:l[Ve];return b.replace(F,function(ae,le,ge,ye,Me){d("tilde",b,ae,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Me?(d("replaceTilde pr",Me),Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0"):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0",d("tilde return",Oe),Oe})}function bi(b,N){return b.trim().split(/\s+/).map(function(F){return ei(F,N)}).join(" ")}function ei(b,N){d("caret",b,N);var F=N.loose?l[qt]:l[kt];return b.replace(F,function(ae,le,ge,ye,Me){d("caret",b,ae,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?le==="0"?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+".0 <"+(+le+1)+".0.0":Me?(d("replaceCaret pr",Me),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+(+le+1)+".0.0"):(d("no pr"),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+" <"+(+le+1)+".0.0"),d("caret return",Oe),Oe})}function bn(b,N){return d("replaceXRanges",b,N),b.split(/\s+/).map(function(F){return Dn(F,N)}).join(" ")}function Dn(b,N){b=b.trim();var F=N.loose?l[at]:l[ut];return b.replace(F,function(ae,le,ge,ye,Me,Oe){d("xRange",b,ae,le,ge,ye,Me,Oe);var mt=st(ge),yt=mt||st(ye),ft=yt||st(Me),ht=ft;return le==="="&&ht&&(le=""),mt?le===">"||le==="<"?ae="<0.0.0":ae="*":le&&ht?(yt&&(ye=0),Me=0,le===">"?(le=">=",yt?(ge=+ge+1,ye=0,Me=0):(ye=+ye+1,Me=0)):le==="<="&&(le="<",yt?ge=+ge+1:ye=+ye+1),ae=le+ge+"."+ye+"."+Me):yt?ae=">="+ge+".0.0 <"+(+ge+1)+".0.0":ft&&(ae=">="+ge+"."+ye+".0 <"+ge+"."+(+ye+1)+".0"),d("xRange return",ae),ae})}function Sr(b,N){return d("replaceStars",b,N),b.trim().replace(l[Ze],"")}function wi(b,N,F,ae,le,ge,ye,Me,Oe,mt,yt,ft,ht){return st(F)?N="":st(ae)?N=">="+F+".0.0":st(le)?N=">="+F+"."+ae+".0":N=">="+N,st(Oe)?Me="":st(mt)?Me="<"+(+Oe+1)+".0.0":st(yt)?Me="<"+Oe+"."+(+mt+1)+".0":ft?Me="<="+Oe+"."+mt+"."+yt+"-"+ft:Me="<="+Me,(N+" "+Me).trim()}We.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new Ie(b,this.options));for(var N=0;N<this.set.length;N++)if(_i(this.set[N],b,this.options))return!0;return!1};function _i(b,N,F){for(var ae=0;ae<b.length;ae++)if(!b[ae].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(ae=0;ae<b.length;ae++)if(d(b[ae].semver),b[ae].semver!==ir&&b[ae].semver.prerelease.length>0){var le=b[ae].semver;if(le.major===N.major&&le.minor===N.minor&&le.patch===N.patch)return!0}return!1}return!0}s.satisfies=kr;function kr(b,N,F){try{N=new We(N,F)}catch(ae){return!1}return N.test(b)}s.maxSatisfying=ti;function ti(b,N,F){var ae=null,le=null;try{var ge=new We(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!ae||le.compare(ye)===-1)&&(ae=ye,le=new Ie(ae,F))}),ae}s.minSatisfying=ri;function ri(b,N,F){var ae=null,le=null;try{var ge=new We(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!ae||le.compare(ye)===1)&&(ae=ye,le=new Ie(ae,F))}),ae}s.minVersion=tn;function tn(b,N){b=new We(b,N);var F=new Ie("0.0.0");if(b.test(F)||(F=new Ie("0.0.0-0"),b.test(F)))return F;F=null;for(var ae=0;ae<b.set.length;++ae){var le=b.set[ae];le.forEach(function(ge){var ye=new Ie(ge.semver.version);switch(ge.operator){case">":ye.prerelease.length===0?ye.patch++:ye.prerelease.push(0),ye.raw=ye.format();case"":case">=":(!F||tr(F,ye))&&(F=ye);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ge.operator)}})}return F&&b.test(F)?F:null}s.validRange=Ei;function Ei(b,N){try{return new We(b,N).range||"*"}catch(F){return null}}s.ltr=Si;function Si(b,N,F){return Mr(b,N,"<",F)}s.gtr=ki;function ki(b,N,F){return Mr(b,N,">",F)}s.outside=Mr;function Mr(b,N,F,ae){b=new Ie(b,ae),N=new We(N,ae);var le,ge,ye,Me,Oe;switch(F){case">":le=tr,ge=pr,ye=ur,Me=">",Oe=">=";break;case"<":le=ur,ge=hr,ye=tr,Me="<",Oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kr(b,N,ae))return!1;for(var mt=0;mt<N.set.length;++mt){var yt=N.set[mt],ft=null,ht=null;if(yt.forEach(function(It){It.semver===ir&&(It=new dt(">=0.0.0")),ft=ft||It,ht=ht||It,le(It.semver,ft.semver,ae)?ft=It:ye(It.semver,ht.semver,ae)&&(ht=It)}),ft.operator===Me||ft.operator===Oe||(!ht.operator||ht.operator===Me)&&ge(b,ht.semver)||ht.operator===Oe&&ye(b,ht.semver))return!1}return!0}s.prerelease=Ti;function Ti(b,N){var F=Et(b,N);return F&&F.prerelease.length?F.prerelease:null}s.intersects=Kr;function Kr(b,N,F){return b=new We(b,F),N=new We(N,F),b.intersects(N)}s.coerce=On;function On(b){if(b instanceof Ie)return b;if(typeof b!="string")return null;var N=b.match(l[Pt]);return N==null?null:Et(N[1]+"."+(N[2]||"0")+"."+(N[3]||"0"))}}),os=O((s,k)=>{"use strict";function d(y){return typeof y=="function"}var v=console.error.bind(console);function _(y,m,w){var E=!!y[m]&&y.propertyIsEnumerable(m);Object.defineProperty(y,m,{configurable:!0,enumerable:E,writable:!0,value:w})}function p(y){y&&y.logger&&(d(y.logger)?v=y.logger:v("new logger isn't a function, not replacing"))}function l(y,m,w){if(!y||!y[m]){v("no original function "+m+" to wrap");return}if(!w){v("no wrapper function"),v(new Error().stack);return}if(!d(y[m])||!d(w)){v("original object and wrapper must be functions");return}var E=y[m],R=w(E,m);return _(R,"__original",E),_(R,"__unwrap",function(){y[m]===R&&_(y,m,E)}),_(R,"__wrapped",!0),_(y,m,R),R}function u(y,m,w){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(m&&Array.isArray(m))){v("must provide one or more functions to wrap on modules");return}y.forEach(function(E){m.forEach(function(R){l(E,R,w)})})}function h(y,m){if(!y||!y[m]){v("no function to unwrap."),v(new Error().stack);return}if(!y[m].__unwrap)v("no original to unwrap to -- has "+m+" already been unwrapped?");else return y[m].__unwrap()}function g(y,m){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(m&&Array.isArray(m))){v("must provide one or more functions to unwrap on modules");return}y.forEach(function(w){m.forEach(function(E){h(w,E)})})}p.wrap=l,p.massWrap=u,p.unwrap=h,p.massUnwrap=g,k.exports=p}),us=O((s,k)=>{"use strict";var d=os(),v=d.wrap,_=d.unwrap,p="wrap@before";function l(m,w,E){var R=!!m[w]&&m.propertyIsEnumerable(w);Object.defineProperty(m,w,{configurable:!0,enumerable:R,writable:!0,value:E})}function u(m,w){for(var E=w.length,R=0;R<E;R++){var C=w[R],D=m[p];if(typeof D=="function")D(C);else if(Array.isArray(D))for(var x=D.length,Q=0;Q<x;Q++)D[Q](C)}}function h(m,w){var E;return E=m._events&&m._events[w],Array.isArray(E)||(E?E=[E]:E=[]),E}function g(m,w,E){var R=h(m,w),C=R.filter(function(D){return E.indexOf(D)===-1});C.length>0&&u(m,C)}function y(m,w){if(m){var E=m;if(typeof m=="function")E=w(m);else if(Array.isArray(m)){E=[];for(var R=0;R<m.length;R++)E[R]=w(m[R])}return E}}k.exports=function(m,w,E){if(!m||!m.on||!m.addListener||!m.removeListener||!m.emit)throw new Error("can only wrap real EEs");if(!w)throw new Error("must have function to run on listener addition");if(!E)throw new Error("must have function to wrap listeners when emitting");function R(D){return function(x,Q){var re=h(this,x).slice();try{var Y=D.call(this,x,Q);return g(this,x,re),Y}finally{this.on.__wrapped||v(this,"on",R),this.addListener.__wrapped||v(this,"addListener",R)}}}function C(D){return function(x){if(!this._events||!this._events[x])return D.apply(this,arguments);var Q=this._events[x];function re(Y){return function(){this._events[x]=Q;try{return Y.apply(this,arguments)}finally{Q=this._events[x],this._events[x]=y(Q,E)}}}v(this,"removeListener",re);try{return this._events[x]=y(Q,E),D.apply(this,arguments)}finally{_(this,"removeListener"),this._events[x]=Q}}}m[p]?typeof m[p]=="function"?l(m,p,[m[p],w]):Array.isArray(m[p])&&m[p].push(w):l(m,p,w),m.__wrapped||(v(m,"addListener",R),v(m,"on",R),v(m,"emit",C),l(m,"__unwrap",function(){_(m,"addListener"),_(m,"on"),_(m,"emit"),delete m[p],delete m.__wrapped}),l(m,"__wrapped",!0))}}),Il=O((s,k)=>{"use strict";var d=q(1669),v=q(2357),_=us(),p=q(7303),l="cls@contexts",u="error@context",h=process.env.DEBUG_CLS_HOOKED,g=-1;k.exports={getNamespace:m,createNamespace:w,destroyNamespace:E,reset:R,ERROR_SYMBOL:u};function y(D){this.name=D,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}y.prototype.set=function(D,x){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[D]=x,h){let Q=" ".repeat(this._indent<0?0:this._indent);C(Q+"CONTEXT-SET KEY:"+D+"="+x+" in ns:"+this.name+" currentUid:"+g+" active:"+d.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return x},y.prototype.get=function(D){if(!this.active){if(h){let x=p.currentId(),Q=p.triggerAsyncId(),re=" ".repeat(this._indent<0?0:this._indent);C(`${re}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${D}=undefined currentUid:${g} asyncHooksCurrentId:${x} triggerId:${Q} len:${this._set.length}`)}return}if(h){let x=p.executionAsyncId(),Q=p.triggerAsyncId(),re=" ".repeat(this._indent<0?0:this._indent);C(re+"CONTEXT-GETTING KEY:"+D+"="+this.active[D]+" ("+this.name+") currentUid:"+g+" active:"+d.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),C(`${re}CONTEXT-GETTING KEY: (${this.name}) ${D}=${this.active[D]} currentUid:${g} asyncHooksCurrentId:${x} triggerId:${Q} len:${this._set.length} active:${d.inspect(this.active)}`)}return this.active[D]},y.prototype.createContext=function(){let D=Object.create(this.active?this.active:Object.prototype);if(D._ns_name=this.name,D.id=g,h){let x=p.executionAsyncId(),Q=p.triggerAsyncId(),re=" ".repeat(this._indent<0?0:this._indent);C(`${re}CONTEXT-CREATED Context: (${this.name}) currentUid:${g} asyncHooksCurrentId:${x} triggerId:${Q} len:${this._set.length} context:${d.inspect(D,{showHidden:!0,depth:2,colors:!0})}`)}return D},y.prototype.run=function(D){let x=this.createContext();this.enter(x);try{if(h){let Q=p.triggerAsyncId(),re=p.executionAsyncId(),Y=" ".repeat(this._indent<0?0:this._indent);C(`${Y}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${g} triggerId:${Q} asyncHooksCurrentId:${re} len:${this._set.length} context:${d.inspect(x)}`)}return D(x),x}catch(Q){throw Q&&(Q[u]=x),Q}finally{if(h){let Q=p.triggerAsyncId(),re=p.executionAsyncId(),Y=" ".repeat(this._indent<0?0:this._indent);C(`${Y}CONTEXT-RUN END: (${this.name}) currentUid:${g} triggerId:${Q} asyncHooksCurrentId:${re} len:${this._set.length} ${d.inspect(x)}`)}this.exit(x)}},y.prototype.runAndReturn=function(D){let x;return this.run(function(Q){x=D(Q)}),x},y.prototype.runPromise=function(D){let x=this.createContext();this.enter(x);let Q=D(x);if(!Q||!Q.then||!Q.catch)throw new Error("fn must return a promise.");return h&&C("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(x)),Q.then(re=>(h&&C("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(x)),this.exit(x),re)).catch(re=>{throw re[u]=x,h&&C("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(x)),this.exit(x),re})},y.prototype.bind=function(D,x){x||(this.active?x=this.active:x=this.createContext());let Q=this;return function(){Q.enter(x);try{return D.apply(this,arguments)}catch(re){throw re&&(re[u]=x),re}finally{Q.exit(x)}}},y.prototype.enter=function(D){if(v.ok(D,"context must be provided for entering"),h){let x=p.executionAsyncId(),Q=p.triggerAsyncId(),re=" ".repeat(this._indent<0?0:this._indent);C(`${re}CONTEXT-ENTER: (${this.name}) currentUid:${g} triggerId:${Q} asyncHooksCurrentId:${x} len:${this._set.length} ${d.inspect(D)}`)}this._set.push(this.active),this.active=D},y.prototype.exit=function(D){if(v.ok(D,"context must be provided for exiting"),h){let Q=p.executionAsyncId(),re=p.triggerAsyncId(),Y=" ".repeat(this._indent<0?0:this._indent);C(`${Y}CONTEXT-EXIT: (${this.name}) currentUid:${g} triggerId:${re} asyncHooksCurrentId:${Q} len:${this._set.length} ${d.inspect(D)}`)}if(this.active===D){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let x=this._set.lastIndexOf(D);x<0?(h&&C("??ERROR?? context exiting but not entered - ignoring: "+d.inspect(D)),v.ok(x>=0,`context not currently entered; can't exit. 
`+d.inspect(this)+`
`+d.inspect(D))):(v.ok(x,"can't remove top context"),this._set.splice(x,1))},y.prototype.bindEmitter=function(D){v.ok(D.on&&D.addListener&&D.emit,"can only bind real EEs");let x=this,Q="context@"+this.name;function re(ue){!ue||(ue[l]||(ue[l]=Object.create(null)),ue[l][Q]={namespace:x,context:x.active})}function Y(ue){if(!(ue&&ue[l]))return ue;let _e=ue,Te=ue[l];return Object.keys(Te).forEach(function(Re){let xe=Te[Re];_e=xe.namespace.bind(_e,xe.context)}),_e}_(D,re,Y)},y.prototype.fromException=function(D){return D[u]};function m(D){return process.namespaces[D]}function w(D){v.ok(D,"namespace must be given a name."),h&&C(`NS-CREATING NAMESPACE (${D})`);let x=new y(D);return x.id=g,p.createHook({init(Q,re,Y,ue){if(g=p.executionAsyncId(),x.active){if(x._contexts.set(Q,x.active),h){let _e=" ".repeat(x._indent<0?0:x._indent);C(`${_e}INIT [${re}] (${D}) asyncId:${Q} currentUid:${g} triggerId:${Y} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}}else if(g===0){let _e=p.triggerAsyncId(),Te=x._contexts.get(_e);if(Te){if(x._contexts.set(Q,Te),h){let Re=" ".repeat(x._indent<0?0:x._indent);C(`${Re}INIT USING CONTEXT FROM TRIGGERID [${re}] (${D}) asyncId:${Q} currentUid:${g} triggerId:${_e} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}}else if(h){let Re=" ".repeat(x._indent<0?0:x._indent);C(`${Re}INIT MISSING CONTEXT [${re}] (${D}) asyncId:${Q} currentUid:${g} triggerId:${_e} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}}if(h&&re==="PROMISE"){C(d.inspect(ue,{showHidden:!0}));let _e=ue.parentId,Te=" ".repeat(x._indent<0?0:x._indent);C(`${Te}INIT RESOURCE-PROMISE [${re}] (${D}) parentId:${_e} asyncId:${Q} currentUid:${g} triggerId:${Y} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}},before(Q){g=p.executionAsyncId();let re;if(re=x._contexts.get(Q)||x._contexts.get(g),re){if(h){let Y=p.triggerAsyncId(),ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}BEFORE (${D}) asyncId:${Q} currentUid:${g} triggerId:${Y} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(re)}`),x._indent+=2}x.enter(re)}else if(h){let Y=p.triggerAsyncId(),ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}BEFORE MISSING CONTEXT (${D}) asyncId:${Q} currentUid:${g} triggerId:${Y} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${d.inspect(x._contexts,{showHidden:!0,depth:2,colors:!0})}`),x._indent+=2}},after(Q){g=p.executionAsyncId();let re;if(re=x._contexts.get(Q)||x._contexts.get(g),re){if(h){let Y=p.triggerAsyncId();x._indent-=2;let ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}AFTER (${D}) asyncId:${Q} currentUid:${g} triggerId:${Y} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(re)}`)}x.exit(re)}else if(h){let Y=p.triggerAsyncId();x._indent-=2;let ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}AFTER MISSING CONTEXT (${D}) asyncId:${Q} currentUid:${g} triggerId:${Y} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(re)}`)}},destroy(Q){if(g=p.executionAsyncId(),h){let re=p.triggerAsyncId(),Y=" ".repeat(x._indent<0?0:x._indent);C(`${Y}DESTROY (${D}) currentUid:${g} asyncId:${Q} triggerId:${re} active:${d.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(x._contexts.get(g))}`)}x._contexts.delete(Q)}}).enable(),process.namespaces[D]=x,x}function E(D){let x=m(D);v.ok(x,`can't delete nonexistent namespace! "`+D+'"'),v.ok(x.id,"don't assign to process.namespaces directly! "+d.inspect(x)),process.namespaces[D]=null}function R(){process.namespaces&&Object.keys(process.namespaces).forEach(function(D){E(D)}),process.namespaces=Object.create(null)}process.namespaces={};function C(...D){h&&process._rawDebug(`${d.format(...D)}`)}}),Dl=O((s,k)=>{"use strict";function d(){}k.exports=function(){let v=this._hooks,_=this._state,p=process.nextTick;process.nextTick=function(){if(!_.enabled)return p.apply(process,arguments);let l=new Array(arguments.length);for(let y=0;y<arguments.length;y++)l[y]=arguments[y];let u=l[0];if(typeof u!="function")throw new TypeError("callback is not a function");let h=new d,g=--_.counter;return v.init.call(h,g,0,null,null),l[0]=function(){v.pre.call(h,g);let y=!0;try{u.apply(this,arguments),y=!1}finally{y&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){v.post.call(h,g,!0),v.destroy.call(null,g)})}v.post.call(h,g,!1),v.destroy.call(null,g)},p.apply(process,l)}}}),zn=O((s,k)=>{"use strict";function d(){}k.exports=function(){let v=this._hooks,_=this._state,p=global.Promise,l=p.prototype.then;p.prototype.then=y;function u(m,w,E,R){return typeof m!="function"?R?h(E):g(E):function(){v.pre.call(w,E);try{return m.apply(this,arguments)}finally{v.post.call(w,E,!1),v.destroy.call(null,E)}}}function h(m){return function(w){return v.destroy.call(null,m),w}}function g(m){return function(w){throw v.destroy.call(null,m),w}}function y(m,w){if(!_.enabled)return l.call(this,m,w);let E=new d,R=--_.counter;return v.init.call(E,R,0,null,null),l.call(this,u(m,E,R,!0),u(w,E,R,!1))}}}),Ol=O((s,k)=>{"use strict";var d=q(8213);function v(){}function _(){}function p(){}var l=new Map,u=new Map,h=new Map,g=null,y=!1;k.exports=function(){m(this._hooks,this._state,"setTimeout","clearTimeout",v,l,!0),m(this._hooks,this._state,"setInterval","clearInterval",_,u,!1),m(this._hooks,this._state,"setImmediate","clearImmediate",p,h,!0),global.setTimeout=d.setTimeout,global.setInterval=d.setInterval,global.setImmediate=d.setImmediate,global.clearTimeout=d.clearTimeout,global.clearInterval=d.clearInterval,global.clearImmediate=d.clearImmediate};function m(w,E,R,C,D,x,Q){let re=d[R],Y=d[C];d[R]=function(){if(!E.enabled)return re.apply(d,arguments);let ue=new Array(arguments.length);for(let qe=0;qe<arguments.length;qe++)ue[qe]=arguments[qe];let _e=ue[0];if(typeof _e!="function")throw new TypeError('"callback" argument must be a function');let Te=new D,Re=--E.counter,xe;return w.init.call(Te,Re,0,null,null),ue[0]=function(){g=xe,w.pre.call(Te,Re);let qe=!0;try{_e.apply(this,arguments),qe=!1}finally{qe&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){w.post.call(Te,Re,!0),x.delete(xe),w.destroy.call(null,Re)})}w.post.call(Te,Re,!1),g=null,(Q||y)&&(y=!1,x.delete(xe),w.destroy.call(null,Re))},xe=re.apply(d,ue),x.set(xe,Re),xe},d[C]=function(ue){if(g===ue&&ue!==null)y=!0;else if(x.has(ue)){let _e=x.get(ue);x.delete(ue),w.destroy.call(null,_e)}Y.apply(d,arguments)}}}),Jr=O((s,k)=>{k.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),An=O((s,k)=>{"use strict";var d=process.binding("async_wrap"),v=d.Providers.TIMERWRAP,_={nextTick:Dl(),promise:zn(),timers:Ol()},p=new Set;function l(){this.enabled=!1,this.counter=0}function u(){let y=this.initFns=[],m=this.preFns=[],w=this.postFns=[],E=this.destroyFns=[];this.init=function(R,C,D,x){if(C===v){p.add(R);return}for(let Q of y)Q(R,this,C,D,x)},this.pre=function(R){if(!p.has(R))for(let C of m)C(R,this)},this.post=function(R,C){if(!p.has(R))for(let D of w)D(R,this,C)},this.destroy=function(R){if(p.has(R)){p.delete(R);return}for(let C of E)C(R)}}u.prototype.add=function(y){y.init&&this.initFns.push(y.init),y.pre&&this.preFns.push(y.pre),y.post&&this.postFns.push(y.post),y.destroy&&this.destroyFns.push(y.destroy)};function h(y,m){let w=y.indexOf(m);w!==-1&&y.splice(w,1)}u.prototype.remove=function(y){y.init&&h(this.initFns,y.init),y.pre&&h(this.preFns,y.pre),y.post&&h(this.postFns,y.post),y.destroy&&h(this.destroyFns,y.destroy)};function g(){this._state=new l,this._hooks=new u,this.version=Jr().version,this.providers=d.Providers;for(let y of Object.keys(_))_[y].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),d.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}k.exports=g,g.prototype.addHooks=function(y){this._hooks.add(y)},g.prototype.removeHooks=function(y){this._hooks.remove(y)},g.prototype.enable=function(){this._state.enabled=!0,d.enable()},g.prototype.disable=function(){this._state.enabled=!1,d.disable()}}),$s=O((s,k)=>{k.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),xl=O((s,k)=>{function d(v){try{return Error.prototype.toString.call(v)}catch(_){try{return"<error: "+_+">"}catch(p){return"<error>"}}}k.exports=function(v,_){var p=[];p.push(d(v));for(var l=0;l<_.length;l++){var u=_[l],h;try{h=u.toString()}catch(g){try{h="<error: "+g+">"}catch(y){h="<error>"}}p.push("    at "+h)}return p.join(`
`)}}),Ml=O((s,k)=>{var d=xl();function v(){this.extend=new l,this.filter=new l,this.format=new u,this.version=$s().version}var _=!1;v.prototype.callSite=function m(w){w||(w={}),_=!0;var E={};Error.captureStackTrace(E,m);var R=E.stack;return _=!1,R=R.slice(w.slice||0),w.extend&&(R=this.extend._modify(E,R)),w.filter&&(R=this.filter._modify(E,R)),R};var p=new v;function l(){this._modifiers=[]}l.prototype._modify=function(m,w){for(var E=0,R=this._modifiers.length;E<R;E++)w=this._modifiers[E](m,w);return w},l.prototype.attach=function(m){this._modifiers.push(m)},l.prototype.deattach=function(m){var w=this._modifiers.indexOf(m);return w===-1?!1:(this._modifiers.splice(w,1),!0)};function u(){this._formater=d,this._previous=void 0}u.prototype.replace=function(m){m?this._formater=m:this.restore()},u.prototype.restore=function(){this._formater=d,this._previous=void 0},u.prototype._backup=function(){this._previous=this._formater},u.prototype._roolback=function(){this._previous===d?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&p.format.replace(Error.prepareStackTrace);var h=!1;function g(m,w){if(_)return w;if(h)return d(m,w);var E=w.concat();E=p.extend._modify(m,E),E=p.filter._modify(m,E),E=E.slice(0,Error.stackTraceLimit),Object.isExtensible(m)&&Object.getOwnPropertyDescriptor(m,"callSite")===void 0&&(m.callSite={original:w,mutated:E}),h=!0;var R=p.format._formater(m,E);return h=!1,R}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return g},set:function(m){m===g?p.format._roolback():(p.format._backup(),p.format.replace(m))}});function y(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:y,set:function(m){Object.defineProperty(this,"callSite",{value:m,writable:!0,configurable:!0})},configurable:!0}),k.exports=p}),ls=O((s,k)=>{if(global._stackChain)if(global._stackChain.version===$s().version)k.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else k.exports=global._stackChain=Ml()}),Fl=O((s,k)=>{"use strict";var d=An();if(global._asyncHook)if(global._asyncHook.version===Jr().version)k.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else ls().filter.attach(function(v,_){return _.filter(function(p){let l=p.getFileName();return!(l&&l.slice(0,__dirname.length)===__dirname)})}),k.exports=global._asyncHook=new d}),yi=O((s,k)=>{"use strict";var d=q(1669),v=q(2357),_=us(),p=Fl(),l="cls@contexts",u="error@context",h=[];for(let Y in p.providers)h[p.providers[Y]]=Y;var g=process.env.DEBUG_CLS_HOOKED,y=-1;k.exports={getNamespace:w,createNamespace:E,destroyNamespace:R,reset:C,ERROR_SYMBOL:u};function m(Y){this.name=Y,this.active=null,this._set=[],this.id=null,this._contexts=new Map}m.prototype.set=function(Y,ue){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return g&&D("    SETTING KEY:"+Y+"="+ue+" in ns:"+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0)),this.active[Y]=ue,ue},m.prototype.get=function(Y){if(!this.active){g&&D("    GETTING KEY:"+Y+"=undefined "+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0));return}return g&&D("    GETTING KEY:"+Y+"="+this.active[Y]+" "+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0)),this.active[Y]},m.prototype.createContext=function(){g&&D("   CREATING Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  active:"+d.inspect(this.active,!0,2,!0));let Y=Object.create(this.active?this.active:Object.prototype);return Y._ns_name=this.name,Y.id=y,g&&D("   CREATED Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  context:"+d.inspect(Y,!0,2,!0)),Y},m.prototype.run=function(Y){let ue=this.createContext();this.enter(ue);try{return g&&D(" BEFORE RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(ue)),Y(ue),ue}catch(_e){throw _e&&(_e[u]=ue),_e}finally{g&&D(" AFTER RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(ue)),this.exit(ue)}},m.prototype.runAndReturn=function(Y){var ue;return this.run(function(_e){ue=Y(_e)}),ue},m.prototype.runPromise=function(Y){let ue=this.createContext();this.enter(ue);let _e=Y(ue);if(!_e||!_e.then||!_e.catch)throw new Error("fn must return a promise.");return g&&D(" BEFORE runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(ue)),_e.then(Te=>(g&&D(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(ue)),this.exit(ue),Te)).catch(Te=>{throw Te[u]=ue,g&&D(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(ue)),this.exit(ue),Te})},m.prototype.bind=function(Y,ue){ue||(this.active?ue=this.active:ue=this.createContext());let _e=this;return function(){_e.enter(ue);try{return Y.apply(this,arguments)}catch(Te){throw Te&&(Te[u]=ue),Te}finally{_e.exit(ue)}}},m.prototype.enter=function(Y){v.ok(Y,"context must be provided for entering"),g&&D("  ENTER "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+d.inspect(Y)),this._set.push(this.active),this.active=Y},m.prototype.exit=function(Y){if(v.ok(Y,"context must be provided for exiting"),g&&D("  EXIT "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+d.inspect(Y)),this.active===Y){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let ue=this._set.lastIndexOf(Y);ue<0?(g&&D("??ERROR?? context exiting but not entered - ignoring: "+d.inspect(Y)),v.ok(ue>=0,`context not currently entered; can't exit. 
`+d.inspect(this)+`
`+d.inspect(Y))):(v.ok(ue,"can't remove top context"),this._set.splice(ue,1))},m.prototype.bindEmitter=function(Y){v.ok(Y.on&&Y.addListener&&Y.emit,"can only bind real EEs");let ue=this,_e="context@"+this.name;function Te(xe){!xe||(xe[l]||(xe[l]=Object.create(null)),xe[l][_e]={namespace:ue,context:ue.active})}function Re(xe){if(!(xe&&xe[l]))return xe;let qe=xe,He=xe[l];return Object.keys(He).forEach(function(Qe){let ut=He[Qe];qe=ut.namespace.bind(qe,ut.context)}),qe}_(Y,Te,Re)},m.prototype.fromException=function(Y){return Y[u]};function w(Y){return process.namespaces[Y]}function E(Y){v.ok(Y,"namespace must be given a name."),g&&D("CREATING NAMESPACE "+Y);let ue=new m(Y);return ue.id=y,p.addHooks({init(_e,Te,Re,xe,qe){y=_e,xe?(ue._contexts.set(_e,ue._contexts.get(xe)),g&&D("PARENTID: "+Y+" uid:"+_e+" parent:"+xe+" provider:"+Re)):ue._contexts.set(y,ue.active),g&&D("INIT "+Y+" uid:"+_e+" parent:"+xe+" provider:"+h[Re]+" active:"+d.inspect(ue.active,!0))},pre(_e,Te){y=_e;let Re=ue._contexts.get(_e);Re?(g&&D(" PRE "+Y+" uid:"+_e+" handle:"+x(Te)+" context:"+d.inspect(Re)),ue.enter(Re)):g&&D(" PRE MISSING CONTEXT "+Y+" uid:"+_e+" handle:"+x(Te))},post(_e,Te){y=_e;let Re=ue._contexts.get(_e);Re?(g&&D(" POST "+Y+" uid:"+_e+" handle:"+x(Te)+" context:"+d.inspect(Re)),ue.exit(Re)):g&&D(" POST MISSING CONTEXT "+Y+" uid:"+_e+" handle:"+x(Te))},destroy(_e){y=_e,g&&D("DESTROY "+Y+" uid:"+_e+" context:"+d.inspect(ue._contexts.get(y))+" active:"+d.inspect(ue.active,!0)),ue._contexts.delete(_e)}}),process.namespaces[Y]=ue,ue}function R(Y){let ue=w(Y);v.ok(ue,`can't delete nonexistent namespace! "`+Y+'"'),v.ok(ue.id,"don't assign to process.namespaces directly! "+d.inspect(ue)),process.namespaces[Y]=null}function C(){process.namespaces&&Object.keys(process.namespaces).forEach(function(Y){R(Y)}),process.namespaces=Object.create(null)}process.namespaces={},p._state&&!p._state.enabled&&p.enable();function D(Y){process.env.DEBUG&&process._rawDebug(Y)}function x(Y){if(!Y)return Y;if(typeof Y=="function")return Y.name?Y.name:(Y.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(Y.constructor&&Y.constructor.name)return Y.constructor.name}if(g){Q=ls();for(re in Q.filter._modifiers)Q.filter.deattach(re)}var Q,re}),Ll=O((s,k)=>{"use strict";var d=Pa();process&&d.gte(process.versions.node,"8.0.0")?k.exports=Il():k.exports=yi()}),cs=O((s,k)=>{s=k.exports=Ie;var d;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?d=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:d=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,l=s.re=[],u=s.src=[],h=0,g=h++;u[g]="0|[1-9]\\d*";var y=h++;u[y]="[0-9]+";var m=h++;u[m]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var w=h++;u[w]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var E=h++;u[E]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var R=h++;u[R]="(?:"+u[g]+"|"+u[m]+")";var C=h++;u[C]="(?:"+u[y]+"|"+u[m]+")";var D=h++;u[D]="(?:-("+u[R]+"(?:\\."+u[R]+")*))";var x=h++;u[x]="(?:-?("+u[C]+"(?:\\."+u[C]+")*))";var Q=h++;u[Q]="[0-9A-Za-z-]+";var re=h++;u[re]="(?:\\+("+u[Q]+"(?:\\."+u[Q]+")*))";var Y=h++,ue="v?"+u[w]+u[D]+"?"+u[re]+"?";u[Y]="^"+ue+"$";var _e="[v=\\s]*"+u[E]+u[x]+"?"+u[re]+"?",Te=h++;u[Te]="^"+_e+"$";var Re=h++;u[Re]="((?:<|>)?=?)";var xe=h++;u[xe]=u[y]+"|x|X|\\*";var qe=h++;u[qe]=u[g]+"|x|X|\\*";var He=h++;u[He]="[v=\\s]*("+u[qe]+")(?:\\.("+u[qe]+")(?:\\.("+u[qe]+")(?:"+u[D]+")?"+u[re]+"?)?)?";var Qe=h++;u[Qe]="[v=\\s]*("+u[xe]+")(?:\\.("+u[xe]+")(?:\\.("+u[xe]+")(?:"+u[x]+")?"+u[re]+"?)?)?";var ut=h++;u[ut]="^"+u[Re]+"\\s*"+u[He]+"$";var at=h++;u[at]="^"+u[Re]+"\\s*"+u[Qe]+"$";var Pt=h++;u[Pt]="(?:^|[^\\d])(\\d{1,"+p+"})(?:\\.(\\d{1,"+p+"}))?(?:\\.(\\d{1,"+p+"}))?(?:$|[^\\d])";var tt=h++;u[tt]="(?:~>?)";var Fe=h++;u[Fe]="(\\s*)"+u[tt]+"\\s+",l[Fe]=new RegExp(u[Fe],"g");var Be="$1~",Ve=h++;u[Ve]="^"+u[tt]+u[He]+"$";var Xe=h++;u[Xe]="^"+u[tt]+u[Qe]+"$";var rt=h++;u[rt]="(?:\\^)";var lt=h++;u[lt]="(\\s*)"+u[rt]+"\\s+",l[lt]=new RegExp(u[lt],"g");var Je="$1^",kt=h++;u[kt]="^"+u[rt]+u[He]+"$";var qt=h++;u[qt]="^"+u[rt]+u[Qe]+"$";var At=h++;u[At]="^"+u[Re]+"\\s*("+_e+")$|^$";var Tt=h++;u[Tt]="^"+u[Re]+"\\s*("+ue+")$|^$";var vt=h++;u[vt]="(\\s*)"+u[Re]+"\\s*("+_e+"|"+u[He]+")",l[vt]=new RegExp(u[vt],"g");var er="$1$2$3",or=h++;u[or]="^\\s*("+u[He]+")\\s+-\\s+("+u[He]+")\\s*$";var et=h++;u[et]="^\\s*("+u[Qe]+")\\s+-\\s+("+u[Qe]+")\\s*$";var Ze=h++;for(u[Ze]="(<|>)?=?\\s*\\*",ot=0;ot<h;ot++)d(ot,u[ot]),l[ot]||(l[ot]=new RegExp(u[ot]));var ot;s.parse=Et;function Et(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie)return b;if(typeof b!="string"||b.length>v)return null;var F=N.loose?l[Te]:l[Y];if(!F.test(b))return null;try{return new Ie(b,N)}catch(ae){return null}}s.valid=In;function In(b,N){var F=Et(b,N);return F?F.version:null}s.clean=en;function en(b,N){var F=Et(b.trim().replace(/^[=v]+/,""),N);return F?F.version:null}s.SemVer=Ie;function Ie(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie){if(b.loose===N.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof Ie))return new Ie(b,N);d("SemVer",b,N),this.options=N,this.loose=!!N.loose;var F=b.trim().match(N.loose?l[Te]:l[Y]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(ae){if(/^[0-9]+$/.test(ae)){var le=+ae;if(le>=0&&le<_)return le}return ae}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}Ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ie.prototype.toString=function(){return this.version},Ie.prototype.compare=function(b){return d("SemVer.compare",this.version,this.options,b),b instanceof Ie||(b=new Ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},Ie.prototype.compareMain=function(b){return b instanceof Ie||(b=new Ie(b,this.options)),Bt(this.major,b.major)||Bt(this.minor,b.minor)||Bt(this.patch,b.patch)},Ie.prototype.comparePre=function(b){if(b instanceof Ie||(b=new Ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var N=0;do{var F=this.prerelease[N],ae=b.prerelease[N];if(d("prerelease compare",N,F,ae),F===void 0&&ae===void 0)return 0;if(ae===void 0)return 1;if(F===void 0)return-1;if(F!==ae)return Bt(F,ae)}while(++N)},Ie.prototype.inc=function(b,N){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},s.inc=hn;function hn(b,N,F,ae){typeof F=="string"&&(ae=F,F=void 0);try{return new Ie(b,F).inc(N,ae).version}catch(le){return null}}s.diff=pn;function pn(b,N){if(Vr(b,N))return null;var F=Et(b),ae=Et(N),le="";if(F.prerelease.length||ae.prerelease.length){le="pre";var ge="prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==ae[ye])return le+ye;return ge}s.compareIdentifiers=Bt;var wr=/^[0-9]+$/;function Bt(b,N){var F=wr.test(b),ae=wr.test(N);return F&&ae&&(b=+b,N=+N),b===N?0:F&&!ae?-1:ae&&!F?1:b<N?-1:1}s.rcompareIdentifiers=mn;function mn(b,N){return Bt(N,b)}s.major=_r;function _r(b,N){return new Ie(b,N).major}s.minor=Yn;function Yn(b,N){return new Ie(b,N).minor}s.patch=fn;function fn(b,N){return new Ie(b,N).patch}s.compare=Rt;function Rt(b,N,F){return new Ie(b,F).compare(new Ie(N,F))}s.compareLoose=gn;function gn(b,N){return Rt(b,N,!0)}s.rcompare=vn;function vn(b,N,F){return Rt(N,b,F)}s.sort=Xn;function Xn(b,N){return b.sort(function(F,ae){return s.compare(F,ae,N)})}s.rsort=Jn;function Jn(b,N){return b.sort(function(F,ae){return s.rcompare(F,ae,N)})}s.gt=tr;function tr(b,N,F){return Rt(b,N,F)>0}s.lt=ur;function ur(b,N,F){return Rt(b,N,F)<0}s.eq=Vr;function Vr(b,N,F){return Rt(b,N,F)===0}s.neq=Er;function Er(b,N,F){return Rt(b,N,F)!==0}s.gte=hr;function hr(b,N,F){return Rt(b,N,F)>=0}s.lte=pr;function pr(b,N,F){return Rt(b,N,F)<=0}s.cmp=rr;function rr(b,N,F,ae){switch(N){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Vr(b,F,ae);case"!=":return Er(b,F,ae);case">":return tr(b,F,ae);case">=":return hr(b,F,ae);case"<":return ur(b,F,ae);case"<=":return pr(b,F,ae);default:throw new TypeError("Invalid operator: "+N)}}s.Comparator=dt;function dt(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof dt){if(b.loose===!!N.loose)return b;b=b.value}if(!(this instanceof dt))return new dt(b,N);d("comparator",b,N),this.options=N,this.loose=!!N.loose,this.parse(b),this.semver===ir?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}var ir={};dt.prototype.parse=function(b){var N=this.options.loose?l[At]:l[Tt],F=b.match(N);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new Ie(F[2],this.options.loose):this.semver=ir},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(b){return d("Comparator.test",b,this.options.loose),this.semver===ir?!0:(typeof b=="string"&&(b=new Ie(b,this.options)),rr(b,this.operator,this.semver,this.options))},dt.prototype.intersects=function(b,N){if(!(b instanceof dt))throw new TypeError("a Comparator is required");(!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1});var F;if(this.operator==="")return F=new We(b.value,N),kr(this.value,F,N);if(b.operator==="")return F=new We(this.value,N),kr(b.semver,F,N);var ae=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),le=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),ge=this.semver.version===b.semver.version,ye=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),Me=rr(this.semver,"<",b.semver,N)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),Oe=rr(this.semver,">",b.semver,N)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return ae||le||ge&&ye||Me||Oe},s.Range=We;function We(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof We)return b.loose===!!N.loose&&b.includePrerelease===!!N.includePrerelease?b:new We(b.raw,N);if(b instanceof dt)return new We(b.value,N);if(!(this instanceof We))return new We(b,N);if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}We.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},We.prototype.toString=function(){return this.range},We.prototype.parseRange=function(b){var N=this.options.loose;b=b.trim();var F=N?l[et]:l[or];b=b.replace(F,wi),d("hyphen replace",b),b=b.replace(l[vt],er),d("comparator trim",b,l[vt]),b=b.replace(l[Fe],Be),b=b.replace(l[lt],Je),b=b.split(/\s+/).join(" ");var ae=N?l[At]:l[Tt],le=b.split(" ").map(function(ge){return xr(ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(le=le.filter(function(ge){return!!ge.match(ae)})),le=le.map(function(ge){return new dt(ge,this.options)},this),le},We.prototype.intersects=function(b,N){if(!(b instanceof We))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(ae){return b.set.some(function(le){return le.every(function(ge){return ae.intersects(ge,N)})})})})},s.toComparators=yn;function yn(b,N){return new We(b,N).set.map(function(F){return F.map(function(ae){return ae.value}).join(" ").trim().split(" ")})}function xr(b,N){return d("comp",b,N),b=bi(b,N),d("caret",b),b=Wr(b,N),d("tildes",b),b=bn(b,N),d("xrange",b),b=Sr(b,N),d("stars",b),b}function st(b){return!b||b.toLowerCase()==="x"||b==="*"}function Wr(b,N){return b.trim().split(/\s+/).map(function(F){return Zn(F,N)}).join(" ")}function Zn(b,N){var F=N.loose?l[Xe]:l[Ve];return b.replace(F,function(ae,le,ge,ye,Me){d("tilde",b,ae,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Me?(d("replaceTilde pr",Me),Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0"):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0",d("tilde return",Oe),Oe})}function bi(b,N){return b.trim().split(/\s+/).map(function(F){return ei(F,N)}).join(" ")}function ei(b,N){d("caret",b,N);var F=N.loose?l[qt]:l[kt];return b.replace(F,function(ae,le,ge,ye,Me){d("caret",b,ae,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?le==="0"?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+".0 <"+(+le+1)+".0.0":Me?(d("replaceCaret pr",Me),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+(+le+1)+".0.0"):(d("no pr"),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+" <"+(+le+1)+".0.0"),d("caret return",Oe),Oe})}function bn(b,N){return d("replaceXRanges",b,N),b.split(/\s+/).map(function(F){return Dn(F,N)}).join(" ")}function Dn(b,N){b=b.trim();var F=N.loose?l[at]:l[ut];return b.replace(F,function(ae,le,ge,ye,Me,Oe){d("xRange",b,ae,le,ge,ye,Me,Oe);var mt=st(ge),yt=mt||st(ye),ft=yt||st(Me),ht=ft;return le==="="&&ht&&(le=""),mt?le===">"||le==="<"?ae="<0.0.0":ae="*":le&&ht?(yt&&(ye=0),Me=0,le===">"?(le=">=",yt?(ge=+ge+1,ye=0,Me=0):(ye=+ye+1,Me=0)):le==="<="&&(le="<",yt?ge=+ge+1:ye=+ye+1),ae=le+ge+"."+ye+"."+Me):yt?ae=">="+ge+".0.0 <"+(+ge+1)+".0.0":ft&&(ae=">="+ge+"."+ye+".0 <"+ge+"."+(+ye+1)+".0"),d("xRange return",ae),ae})}function Sr(b,N){return d("replaceStars",b,N),b.trim().replace(l[Ze],"")}function wi(b,N,F,ae,le,ge,ye,Me,Oe,mt,yt,ft,ht){return st(F)?N="":st(ae)?N=">="+F+".0.0":st(le)?N=">="+F+"."+ae+".0":N=">="+N,st(Oe)?Me="":st(mt)?Me="<"+(+Oe+1)+".0.0":st(yt)?Me="<"+Oe+"."+(+mt+1)+".0":ft?Me="<="+Oe+"."+mt+"."+yt+"-"+ft:Me="<="+Me,(N+" "+Me).trim()}We.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new Ie(b,this.options));for(var N=0;N<this.set.length;N++)if(_i(this.set[N],b,this.options))return!0;return!1};function _i(b,N,F){for(var ae=0;ae<b.length;ae++)if(!b[ae].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(ae=0;ae<b.length;ae++)if(d(b[ae].semver),b[ae].semver!==ir&&b[ae].semver.prerelease.length>0){var le=b[ae].semver;if(le.major===N.major&&le.minor===N.minor&&le.patch===N.patch)return!0}return!1}return!0}s.satisfies=kr;function kr(b,N,F){try{N=new We(N,F)}catch(ae){return!1}return N.test(b)}s.maxSatisfying=ti;function ti(b,N,F){var ae=null,le=null;try{var ge=new We(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!ae||le.compare(ye)===-1)&&(ae=ye,le=new Ie(ae,F))}),ae}s.minSatisfying=ri;function ri(b,N,F){var ae=null,le=null;try{var ge=new We(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!ae||le.compare(ye)===1)&&(ae=ye,le=new Ie(ae,F))}),ae}s.minVersion=tn;function tn(b,N){b=new We(b,N);var F=new Ie("0.0.0");if(b.test(F)||(F=new Ie("0.0.0-0"),b.test(F)))return F;F=null;for(var ae=0;ae<b.set.length;++ae){var le=b.set[ae];le.forEach(function(ge){var ye=new Ie(ge.semver.version);switch(ge.operator){case">":ye.prerelease.length===0?ye.patch++:ye.prerelease.push(0),ye.raw=ye.format();case"":case">=":(!F||tr(F,ye))&&(F=ye);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ge.operator)}})}return F&&b.test(F)?F:null}s.validRange=Ei;function Ei(b,N){try{return new We(b,N).range||"*"}catch(F){return null}}s.ltr=Si;function Si(b,N,F){return Mr(b,N,"<",F)}s.gtr=ki;function ki(b,N,F){return Mr(b,N,">",F)}s.outside=Mr;function Mr(b,N,F,ae){b=new Ie(b,ae),N=new We(N,ae);var le,ge,ye,Me,Oe;switch(F){case">":le=tr,ge=pr,ye=ur,Me=">",Oe=">=";break;case"<":le=ur,ge=hr,ye=tr,Me="<",Oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kr(b,N,ae))return!1;for(var mt=0;mt<N.set.length;++mt){var yt=N.set[mt],ft=null,ht=null;if(yt.forEach(function(It){It.semver===ir&&(It=new dt(">=0.0.0")),ft=ft||It,ht=ht||It,le(It.semver,ft.semver,ae)?ft=It:ye(It.semver,ht.semver,ae)&&(ht=It)}),ft.operator===Me||ft.operator===Oe||(!ht.operator||ht.operator===Me)&&ge(b,ht.semver)||ht.operator===Oe&&ye(b,ht.semver))return!1}return!0}s.prerelease=Ti;function Ti(b,N){var F=Et(b,N);return F&&F.prerelease.length?F.prerelease:null}s.intersects=Kr;function Kr(b,N,F){return b=new We(b,F),N=new We(N,F),b.intersects(N)}s.coerce=On;function On(b){if(b instanceof Ie)return b;if(typeof b!="string")return null;var N=b.match(l[Pt]);return N==null?null:Et(N[1]+"."+(N[2]||"0")+"."+(N[3]||"0"))}}),$o=O((s,k)=>{var d=os().wrap,v=1<<0,_=1<<1,p=1<<2,l=1<<3,u=[],h=0,g=!1,y=[],m,w;function E(Te,Re){var xe=Te.length,qe=Re.length,He=[];if(xe===0&&qe===0)return He;for(var Qe=0;Qe<xe;Qe++)He[Qe]=Te[Qe];if(qe===0)return He;for(var ut=0;ut<qe;ut++){var at=!0;for(Qe=0;Qe<xe;Qe++)if(Te[Qe].uid===Re[ut].uid){at=!1;break}at&&He.push(Re[ut])}return He}process._fatalException?(R=!1,m=function(Te){var Re=u.length;if(R||Re===0)return!1;var xe=!1;R=!0;for(var qe=0;qe<Re;++qe){var He=u[qe];if((He.flags&l)!=0){var Qe=C&&C[He.uid];xe=He.error(Qe,Te)||xe}}return R=!1,y.length>0&&(u=y.pop()),C=void 0,xe&&!g},w=function(Te,Re,xe){var qe=[];g=!0;for(var He=0;He<xe;++He){var Qe=Re[He];if(qe[Qe.uid]=Qe.data,(Qe.flags&v)!=0){var ut=Qe.create(Qe.data);ut!==void 0&&(qe[Qe.uid]=ut)}}return g=!1,function(){C=qe,y.push(u),u=E(Re,u),g=!0;for(var at=0;at<xe;++at)(Re[at].flags&_)>0&&Re[at].before(this,qe[Re[at].uid]);g=!1;var Pt=Te.apply(this,arguments);for(g=!0,at=0;at<xe;++at)(Re[at].flags&p)>0&&Re[at].after(this,qe[Re[at].uid]);return g=!1,u=y.pop(),C=void 0,Pt}},d(process,"_fatalException",function(Te){return function(Re){return m(Re)||Te(Re)}})):(D=!1,m=function(Te){if(D)throw Te;for(var Re=!1,xe=u.length,qe=0;qe<xe;++qe){var He=u[qe];(He.flags&l)!=0&&(Re=He.error(null,Te)||Re)}if(!Re&&g)throw Te},w=function(Te,Re,xe){var qe=[];g=!0;for(var He=0;He<xe;++He){var Qe=Re[He];if(qe[Qe.uid]=Qe.data,(Qe.flags&v)!=0){var ut=Qe.create(Qe.data);ut!==void 0&&(qe[Qe.uid]=ut)}}return g=!1,function(){var at=!1,Pt=!1;y.push(u),u=E(Re,u),g=!0;for(var tt=0;tt<xe;++tt)(Re[tt].flags&_)>0&&Re[tt].before(this,qe[Re[tt].uid]);g=!1;var Fe;try{Fe=Te.apply(this,arguments)}catch(Be){at=!0;for(var tt=0;tt<xe;++tt)if((u[tt].flags&l)!=0)try{Pt=u[tt].error(qe[Re[tt].uid],Be)||Pt}catch(Xe){throw D=!0,Xe}if(!Pt)throw process.removeListener("uncaughtException",m),process._originalNextTick(function(){process.addListener("uncaughtException",m)}),Be}finally{if(!at||Pt){for(g=!0,tt=0;tt<xe;++tt)(Re[tt].flags&p)>0&&Re[tt].after(this,qe[Re[tt].uid]);g=!1}u=y.pop()}return Fe}},process.addListener("uncaughtException",m));var R,C,D;function x(Te,Re,xe){g=!0;for(var qe=0;qe<xe;++qe){var He=Re[qe];He.create&&He.create(He.data)}return g=!1,function(){y.push(u),u=E(Re,u);var Qe=Te.apply(this,arguments);return u=y.pop(),Qe}}function Q(Te){var Re=u.length;if(Re===0)return Te;for(var xe=u.slice(),qe=0;qe<Re;++qe)if(xe[qe].flags>0)return w(Te,xe,Re);return x(Te,xe,Re)}function re(Te,Re){typeof Te.create=="function"&&(this.create=Te.create,this.flags|=v),typeof Te.before=="function"&&(this.before=Te.before,this.flags|=_),typeof Te.after=="function"&&(this.after=Te.after,this.flags|=p),typeof Te.error=="function"&&(this.error=Te.error,this.flags|=l),this.uid=++h,this.data=Re===void 0?null:Re}re.prototype.create=void 0,re.prototype.before=void 0,re.prototype.after=void 0,re.prototype.error=void 0,re.prototype.data=void 0,re.prototype.uid=0,re.prototype.flags=0;function Y(Te,Re){if(typeof Te!="object"||!Te)throw new TypeError("callbacks argument must be an object");return Te instanceof re?Te:new re(Te,Re)}function ue(Te,Re){var xe;Te instanceof re?xe=Te:xe=Y(Te,Re);for(var qe=!1,He=0;He<u.length;He++)if(xe===u[He]){qe=!0;break}return qe||u.push(xe),xe}function _e(Te){for(var Re=0;Re<u.length;Re++)if(Te===u[Re]){u.splice(Re,1);break}}process.createAsyncListener=Y,process.addAsyncListener=ue,process.removeAsyncListener=_e,k.exports=Q}),ql=O((s,k)=>{"use strict";k.exports=(d,v)=>class extends d{constructor(_){var p,l;super(h);var u=this;try{_.apply(p,l)}catch(g){l[1](g)}return u;function h(g,y){p=this,l=[m,w];function m(E){return v(u,!1),g(E)}function w(E){return v(u,!1),y(E)}}}}}),Qn=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var s=os(),k=cs(),d=s.wrap,v=s.massWrap,_=$o(),p=q(1669),l=k.gte(process.version,"6.0.0"),u=k.gte(process.version,"7.0.0"),h=k.gte(process.version,"8.0.0"),g=k.gte(process.version,"11.0.0"),y=q(1631);u&&!y._normalizeArgs?y._normalizeArgs=function(Fe){if(Fe.length===0)return[{},null];var Be=Fe[0],Ve={};typeof Be=="object"&&Be!==null?Ve=Be:tt(Be)?Ve.path=Be:(Ve.port=Be,Fe.length>1&&typeof Fe[1]=="string"&&(Ve.host=Fe[1]));var Xe=Fe[Fe.length-1];return typeof Xe!="function"?[Ve,null]:[Ve,Xe]}:!u&&!y._normalizeConnectArgs&&(y._normalizeConnectArgs=function(Fe){var Be={};function Ve(rt){return(rt=Number(rt))>=0?rt:!1}typeof Fe[0]=="object"&&Fe[0]!==null?Be=Fe[0]:typeof Fe[0]=="string"&&Ve(Fe[0])===!1?Be.path=Fe[0]:(Be.port=Fe[0],typeof Fe[1]=="string"&&(Be.host=Fe[1]));var Xe=Fe[Fe.length-1];return typeof Xe=="function"?[Be,Xe]:[Be]}),"_setUpListenHandle"in y.Server.prototype?d(y.Server.prototype,"_setUpListenHandle",m):d(y.Server.prototype,"_listen2",m);function m(Fe){return function(){this.on("connection",function(Be){Be._handle&&(Be._handle.onread=_(Be._handle.onread))});try{return Fe.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=_(this._handle.onconnection))}}}function w(Fe){if(Fe&&Fe._handle){var Be=Fe._handle;Be._originalOnread||(Be._originalOnread=Be.onread),Be.onread=_(Be._originalOnread)}}d(y.Socket.prototype,"connect",function(Fe){return function(){var Be;h&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?Be=arguments[0]:Be=u?y._normalizeArgs(arguments):y._normalizeConnectArgs(arguments),Be[1]&&(Be[1]=_(Be[1]));var Ve=Fe.apply(this,Be);return w(this),Ve}});var E=q(8605);d(E.Agent.prototype,"addRequest",function(Fe){return function(Be){var Ve=Be.onSocket;return Be.onSocket=_(function(Xe){return w(Xe),Ve.apply(this,arguments)}),Fe.apply(this,arguments)}});var R=q(3129);function C(Fe){Array.isArray(Fe.stdio)&&Fe.stdio.forEach(function(Be){Be&&Be._handle&&(Be._handle.onread=_(Be._handle.onread),d(Be._handle,"close",at))}),Fe._handle&&(Fe._handle.onexit=_(Fe._handle.onexit))}R.ChildProcess?d(R.ChildProcess.prototype,"spawn",function(Fe){return function(){var Be=Fe.apply(this,arguments);return C(this),Be}}):v(R,["execFile","fork","spawn"],function(Fe){return function(){var Be=Fe.apply(this,arguments);return C(Be),Be}}),process._fatalException||(process._originalNextTick=process.nextTick);var D=[];process._nextDomainTick&&D.push("_nextDomainTick"),process._tickDomainCallback&&D.push("_tickDomainCallback"),v(process,D,ut),d(process,"nextTick",at);var x=["setTimeout","setInterval"];global.setImmediate&&x.push("setImmediate");var Q=q(8213),re=global.setTimeout===Q.setTimeout;v(Q,x,at),re&&v(global,x,at);var Y=q(881);v(Y,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ut),Y.resolveNaptr&&d(Y,"resolveNaptr",ut);var ue=q(5747);v(ue,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ut),ue.lchown&&d(ue,"lchown",ut),ue.lchmod&&d(ue,"lchmod",ut),ue.ftruncate&&d(ue,"ftruncate",ut);var _e;try{_e=q(8761)}catch(Fe){}_e&&_e.Deflate&&_e.Deflate.prototype&&(Te=Object.getPrototypeOf(_e.Deflate.prototype),Te._transform?d(Te,"_transform",ut):Te.write&&Te.flush&&Te.end&&v(Te,["write","flush","end"],ut));var Te,Re;try{Re=q(6417)}catch(Fe){}Re&&(xe=["pbkdf2","randomBytes"],g||xe.push("pseudoRandomBytes"),v(Re,xe,ut));var xe,qe=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";qe&&(He=process.addAsyncListener({create:function(){qe=!1}}),global.Promise.resolve(!0).then(function(){qe=!1}),process.removeAsyncListener(He));var He;qe&&Qe();function Qe(){var Fe=global.Promise;function Be(Je){if(!(this instanceof Be))return Fe(Je);if(typeof Je!="function")return new Fe(Je);var kt,qt,At=new Fe(Tt);At.__proto__=Be.prototype;try{Je.apply(kt,qt)}catch(vt){qt[1](vt)}return At;function Tt(vt,er){kt=this,qt=[or,et];function or(Ze){return Xe(At,!1),vt(Ze)}function et(Ze){return Xe(At,!1),er(Ze)}}}if(p.inherits(Be,Fe),d(Fe.prototype,"then",lt),Fe.prototype.chain&&d(Fe.prototype,"chain",lt),l)global.Promise=ql()(Fe,Xe);else{var Ve=["all","race","reject","resolve","accept","defer"];Ve.forEach(function(Je){typeof Fe[Je]=="function"&&(Be[Je]=Fe[Je])}),global.Promise=Be}function Xe(Je,kt){(!Je.__asl_wrapper||kt)&&(Je.__asl_wrapper=_(rt))}function rt(Je,kt,qt,At){var Tt;try{return Tt=kt.call(Je,qt),{returnVal:Tt,error:!1}}catch(vt){return{errorVal:vt,error:!0}}finally{Tt instanceof Fe?At.__asl_wrapper=function(){var vt=Tt.__asl_wrapper||rt;return vt.apply(this,arguments)}:Xe(At,!0)}}function lt(Je){return function(){var kt=this,qt=Je.apply(kt,Array.prototype.map.call(arguments,At));return qt.__asl_wrapper=function(Tt,vt,er,or){return kt.__asl_wrapper?(kt.__asl_wrapper(Tt,function(){},null,qt),qt.__asl_wrapper(Tt,vt,er,or)):rt(Tt,vt,er,or)},qt;function At(Tt){return typeof Tt!="function"?Tt:_(function(vt){var er=(kt.__asl_wrapper||rt)(this,Tt,vt,qt);if(er.error)throw er.errorVal;return er.returnVal})}}}}function ut(Fe){var Be=function(){var Ve,Xe=arguments.length-1;if(typeof arguments[Xe]=="function"){Ve=Array(arguments.length);for(var rt=0;rt<arguments.length-1;rt++)Ve[rt]=arguments[rt];Ve[Xe]=_(arguments[Xe])}return Fe.apply(this,Ve||arguments)};switch(Fe.length){case 1:return function(Ve){return arguments.length!==1?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve))};case 2:return function(Ve,Xe){return arguments.length!==2?Be.apply(this,arguments):(typeof Xe=="function"&&(Xe=_(Xe)),Fe.call(this,Ve,Xe))};case 3:return function(Ve,Xe,rt){return arguments.length!==3?Be.apply(this,arguments):(typeof rt=="function"&&(rt=_(rt)),Fe.call(this,Ve,Xe,rt))};case 4:return function(Ve,Xe,rt,lt){return arguments.length!==4?Be.apply(this,arguments):(typeof lt=="function"&&(lt=_(lt)),Fe.call(this,Ve,Xe,rt,lt))};case 5:return function(Ve,Xe,rt,lt,Je){return arguments.length!==5?Be.apply(this,arguments):(typeof Je=="function"&&(Je=_(Je)),Fe.call(this,Ve,Xe,rt,lt,Je))};case 6:return function(Ve,Xe,rt,lt,Je,kt){return arguments.length!==6?Be.apply(this,arguments):(typeof kt=="function"&&(kt=_(kt)),Fe.call(this,Ve,Xe,rt,lt,Je,kt))};default:return Be}}function at(Fe){var Be=function(){var Ve;if(typeof arguments[0]=="function"){Ve=Array(arguments.length),Ve[0]=_(arguments[0]);for(var Xe=1;Xe<arguments.length;Xe++)Ve[Xe]=arguments[Xe]}return Fe.apply(this,Ve||arguments)};switch(Fe.length){case 1:return function(Ve){return arguments.length!==1?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve))};case 2:return function(Ve,Xe){return arguments.length!==2?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe))};case 3:return function(Ve,Xe,rt){return arguments.length!==3?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt))};case 4:return function(Ve,Xe,rt,lt){return arguments.length!==4?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt,lt))};case 5:return function(Ve,Xe,rt,lt,Je){return arguments.length!==5?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt,lt,Je))};case 6:return function(Ve,Xe,rt,lt,Je,kt){return arguments.length!==6?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt,lt,Je,kt))};default:return Be}}function Pt(Fe){return(Fe=Number(Fe))>=0?Fe:!1}function tt(Fe){return typeof Fe=="string"&&Pt(Fe)===!1}}),Ul=O((s,k)=>{"use strict";var d=q(2357),v=us(),_="cls@contexts",p="error@context";process.addAsyncListener||Qn();function l(m){this.name=m,this.active=null,this._set=[],this.id=null}l.prototype.set=function(m,w){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[m]=w,w},l.prototype.get=function(m){if(this.active)return this.active[m]},l.prototype.createContext=function(){return Object.create(this.active)},l.prototype.run=function(m){var w=this.createContext();this.enter(w);try{return m(w),w}catch(E){throw E&&(E[p]=w),E}finally{this.exit(w)}},l.prototype.runAndReturn=function(m){var w;return this.run(function(E){w=m(E)}),w},l.prototype.bind=function(m,w){w||(this.active?w=this.active:w=this.createContext());var E=this;return function(){E.enter(w);try{return m.apply(this,arguments)}catch(R){throw R&&(R[p]=w),R}finally{E.exit(w)}}},l.prototype.enter=function(m){d.ok(m,"context must be provided for entering"),this._set.push(this.active),this.active=m},l.prototype.exit=function(m){if(d.ok(m,"context must be provided for exiting"),this.active===m){d.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var w=this._set.lastIndexOf(m);d.ok(w>=0,"context not currently entered; can't exit"),d.ok(w,"can't remove top context"),this._set.splice(w,1)},l.prototype.bindEmitter=function(m){d.ok(m.on&&m.addListener&&m.emit,"can only bind real EEs");var w=this,E="context@"+this.name;function R(D){!D||(D[_]||(D[_]=Object.create(null)),D[_][E]={namespace:w,context:w.active})}function C(D){if(!(D&&D[_]))return D;var x=D,Q=D[_];return Object.keys(Q).forEach(function(re){var Y=Q[re];x=Y.namespace.bind(x,Y.context)}),x}v(m,R,C)},l.prototype.fromException=function(m){return m[p]};function u(m){return process.namespaces[m]}function h(m){d.ok(m,"namespace must be given a name!");var w=new l(m);return w.id=process.addAsyncListener({create:function(){return w.active},before:function(E,R){R&&w.enter(R)},after:function(E,R){R&&w.exit(R)},error:function(E){E&&w.exit(E)}}),process.namespaces[m]=w,w}function g(m){var w=u(m);d.ok(w,"can't delete nonexistent namespace!"),d.ok(w.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(w.id),process.namespaces[m]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(m){g(m)}),process.namespaces=Object.create(null)}process.namespaces||y(),k.exports={getNamespace:u,createNamespace:h,destroyNamespace:g,reset:y}}),ji=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CorrelationContextManager=void 0;var k=ce(),d=Ms(),v=Fs(),_=Po(),p=Us(),l=function(){function h(){}return h.getCurrentContext=function(){if(!h.enabled)return null;var g=h.session.get(h.CONTEXT_NAME);return g===void 0?null:g},h.generateContextObject=function(g,y,m,w,E,R){return y=y||g,this.enabled?{operation:{name:m,id:g,parentId:y,traceparent:E,tracestate:R},customProperties:new u(w)}:null},h.spanToContextObject=function(g,y,m){var w=new v;return w.traceId=g.traceId,w.spanId=g.spanId,w.traceFlag=v.formatOpenTelemetryTraceFlags(g.traceFlags)||v.DEFAULT_TRACE_FLAG,w.parentId=y,h.generateContextObject(w.traceId,w.parentId,m,null,w)},h.runWithContext=function(g,y){var m;return h.enabled?h.session.bind(y,(m={},m[h.CONTEXT_NAME]=g,m))():y()},h.wrapEmitter=function(g){h.enabled&&h.session.bindEmitter(g)},h.wrapCallback=function(g,y){var m;return h.enabled?h.session.bind(g,y?(m={},m[h.CONTEXT_NAME]=y,m):void 0):g},h.enable=function(g){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}h.hasEverEnabled||(this.forceClsHooked=g,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(h.forceClsHooked===!0||h.forceClsHooked===void 0&&h.shouldUseClsHooked()?this.cls=Ll():this.cls=Ul()),h.session=this.cls.createNamespace("AI-CLS-Session"),d.registerContextPreservation(function(y){return h.session.bind(y)})),this.enabled=!0}},h.startOperation=function(g,y){var m=g&&g.traceContext||null,w=g&&g.traceId?g:null,E=g&&g.headers;if(w){var R=new v("00-"+w.traceId+"-"+w.spanId+"-01"),C=new _(w.traceState?w.traceState.serialize():null),D=h.generateContextObject(w.traceId,"|"+w.traceId+"."+w.spanId+".",typeof y=="string"?y:"",void 0,R,C);return D}if(m){var R=new v(m.traceparent),C=new _(m.tracestate),x=typeof y=="object"?new p(y):null,D=h.generateContextObject(R.traceId,R.parentId,typeof y=="string"?y:x.getOperationName({}),x&&x.getCorrelationContextHeader()||void 0,R,C);return D}if(E){var R=new v(E.traceparent?E.traceparent.toString():null),C=new _(E.tracestate?E.tracestate.toString():null),x=new p(g),D=h.generateContextObject(R.traceId,R.parentId,x.getOperationName({}),x.getCorrelationContextHeader(),R,C);return D}return k.warn("startOperation was called with invalid arguments",arguments),null},h.disable=function(){this.enabled=!1},h.reset=function(){h.hasEverEnabled&&(h.session=null,h.session=this.cls.createNamespace("AI-CLS-Session"))},h.isNodeVersionCompatible=function(){var g=process.versions.node.split(".");return parseInt(g[0])>3||parseInt(g[0])>2&&parseInt(g[1])>2},h.shouldUseClsHooked=function(){var g=process.versions.node.split(".");return parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=2},h.canUseClsHooked=function(){var g=process.versions.node.split("."),y=parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=0,m=parseInt(g[0])<8||parseInt(g[0])<=8&&parseInt(g[1])<2,w=parseInt(g[0])>4||parseInt(g[0])>=4&&parseInt(g[1])>=7;return!(y&&m)&&w},h.enabled=!1,h.hasEverEnabled=!1,h.forceClsHooked=void 0,h.CONTEXT_NAME="ApplicationInsights-Context",h}();s.CorrelationContextManager=l;var u=function(){function h(g){this.props=[],this.addHeaderData(g)}return h.prototype.addHeaderData=function(g){var y=g?g.split(", "):[];this.props=y.map(function(m){var w=m.split("=");return{key:w[0],value:w[1]}}).concat(this.props)},h.prototype.serializeToHeader=function(){return this.props.map(function(g){return g.key+"="+g.value}).join(", ")},h.prototype.getProperty=function(g){for(var y=0;y<this.props.length;++y){var m=this.props[y];if(m.key===g)return m.value}},h.prototype.setProperty=function(g,y){if(h.bannedCharacters.test(g)||h.bannedCharacters.test(y)){k.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+g+" and value: "+y);return}for(var m=0;m<this.props.length;++m){var w=this.props[m];if(w.key===g){w.value=y;return}}this.props.push({key:g,value:y})},h.bannedCharacters=/[,=]/,h}()}),$l=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var k=_t(),d=pe(),v=[],_=function(u){var h=u.data.message;v.forEach(function(g){h instanceof Error?g.trackException({exception:h}):(h.lastIndexOf(`
`)==h.length-1&&(h=h.substring(0,h.length-1)),g.trackTrace({message:h,severity:u.data.stderr?k.SeverityLevel.Warning:k.SeverityLevel.Information}))})};function p(u,h){u?(v.length===0&&d.channel.subscribe("console",_),v.push(h)):(v=v.filter(function(g){return g!=h}),v.length===0&&d.channel.unsubscribe("console",_))}s.enable=p;function l(){d.channel.unsubscribe("console",_),v=[]}s.dispose=l}),Gl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var k=_t(),d=pe(),v=[],_={10:k.SeverityLevel.Verbose,20:k.SeverityLevel.Verbose,30:k.SeverityLevel.Information,40:k.SeverityLevel.Warning,50:k.SeverityLevel.Error,60:k.SeverityLevel.Critical},p=function(h){var g=h.data.result;v.forEach(function(y){var m=_[h.data.level];g instanceof Error?y.trackException({exception:g}):y.trackTrace({message:g,severity:m})})};function l(h,g){h?(v.length===0&&d.channel.subscribe("bunyan",p),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&d.channel.unsubscribe("bunyan",p))}s.enable=l;function u(){d.channel.unsubscribe("bunyan",p),v=[]}s.dispose=u}),Hl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var k=_t(),d=pe(),v=[],_={syslog:function(h){var g={emerg:k.SeverityLevel.Critical,alert:k.SeverityLevel.Critical,crit:k.SeverityLevel.Critical,error:k.SeverityLevel.Error,warning:k.SeverityLevel.Warning,notice:k.SeverityLevel.Information,info:k.SeverityLevel.Information,debug:k.SeverityLevel.Verbose};return g[h]===void 0?k.SeverityLevel.Information:g[h]},npm:function(h){var g={error:k.SeverityLevel.Error,warn:k.SeverityLevel.Warning,info:k.SeverityLevel.Information,verbose:k.SeverityLevel.Verbose,debug:k.SeverityLevel.Verbose,silly:k.SeverityLevel.Verbose};return g[h]===void 0?k.SeverityLevel.Information:g[h]},unknown:function(h){return k.SeverityLevel.Information}},p=function(h){var g=h.data.message;v.forEach(function(y){if(g instanceof Error)y.trackException({exception:g,properties:h.data.meta});else{var m=_[h.data.levelKind](h.data.level);y.trackTrace({message:g,severity:m,properties:h.data.meta})}})};function l(h,g){h?(v.length===0&&d.channel.subscribe("winston",p),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&d.channel.unsubscribe("winston",p))}s.enable=l;function u(){d.channel.unsubscribe("winston",p),v=[]}s.dispose=u}),ds=O((s,k)=>{"use strict";var d=Ms(),v=function(){function _(p){if(_.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=p,_.INSTANCE=this}return _.prototype.enable=function(p,l){d.IsInitialized&&($l().enable(p&&l,this._client),Gl().enable(p,this._client),Hl().enable(p,this._client))},_.prototype.isInitialized=function(){return this._isInitialized},_.prototype.dispose=function(){_.INSTANCE=null,this.enable(!1,!1)},_._methodNames=["debug","info","log","warn","error"],_}();k.exports=v}),Vl=O((s,k)=>{"use strict";var d=function(){function v(_){if(v.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");v.INSTANCE=this,this._client=_;var p=process.versions.node.split(".");v._canUseUncaughtExceptionMonitor=parseInt(p[0])>13||parseInt(p[0])===13&&parseInt(p[1])>=7}return v.prototype.isInitialized=function(){return this._isInitialized},v.prototype.enable=function(_){var p=this;if(_){this._isInitialized=!0;var l=this;if(!this._exceptionListenerHandle){var u=function(h,g,y){y===void 0&&(y=new Error(v._FALLBACK_ERROR_MESSAGE)),p._client.trackException({exception:y}),p._client.flush({isAppCrashing:!0}),h&&g&&process.listeners(g).length===1&&(console.error(y),process.exit(1))};v._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=u.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=u.bind(this,!0,v.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=u.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(v._canUseUncaughtExceptionMonitor?process.removeListener(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},v.prototype.dispose=function(){v.INSTANCE=null,this.enable(!1),this._isInitialized=!1},v.INSTANCE=null,v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",v.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",v.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",v._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",v._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",v._canUseUncaughtExceptionMonitor=!1,v}();k.exports=d}),Wn=O(s=>{"use strict";var k;Object.defineProperty(s,"__esModule",{value:!0}),s.HeartBeatMetricName=s.DependencyTypeName=s.SpanAttribute=s.TelemetryTypeStringToQuickPulseDocumentType=s.TelemetryTypeStringToQuickPulseType=s.QuickPulseType=s.QuickPulseDocumentType=s.PerformanceToQuickPulseCounter=s.MetricId=s.PerformanceCounter=s.QuickPulseCounter=s.DEFAULT_LIVEMETRICS_HOST=s.DEFAULT_LIVEMETRICS_ENDPOINT=s.DEFAULT_BREEZE_ENDPOINT=void 0,s.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var d;(function(p){p.COMMITTED_BYTES="\\Memory\\Committed Bytes",p.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",p.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",p.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",p.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",p.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",p.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",p.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",p.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(d=s.QuickPulseCounter||(s.QuickPulseCounter={}));var v;(function(p){p.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",p.AVAILABLE_BYTES="\\Memory\\Available Bytes",p.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",p.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",p.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",p.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(v=s.PerformanceCounter||(s.PerformanceCounter={}));var _;(function(p){p.REQUESTS_DURATION="requests/duration",p.DEPENDENCIES_DURATION="dependencies/duration",p.EXCEPTIONS_COUNT="exceptions/count",p.TRACES_COUNT="traces/count"})(_=s.MetricId||(s.MetricId={})),s.PerformanceToQuickPulseCounter=(k={},k[v.PROCESSOR_TIME]=d.PROCESSOR_TIME,k[v.REQUEST_RATE]=d.REQUEST_RATE,k[v.REQUEST_DURATION]=d.REQUEST_DURATION,k[d.COMMITTED_BYTES]=d.COMMITTED_BYTES,k[d.REQUEST_FAILURE_RATE]=d.REQUEST_FAILURE_RATE,k[d.DEPENDENCY_RATE]=d.DEPENDENCY_RATE,k[d.DEPENDENCY_FAILURE_RATE]=d.DEPENDENCY_FAILURE_RATE,k[d.DEPENDENCY_DURATION]=d.DEPENDENCY_DURATION,k[d.EXCEPTION_RATE]=d.EXCEPTION_RATE,k),s.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},s.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},s.TelemetryTypeStringToQuickPulseType={EventData:s.QuickPulseType.Event,ExceptionData:s.QuickPulseType.Exception,MessageData:s.QuickPulseType.Trace,MetricData:s.QuickPulseType.Metric,RequestData:s.QuickPulseType.Request,RemoteDependencyData:s.QuickPulseType.Dependency,AvailabilityData:s.QuickPulseType.Availability,PageViewData:s.QuickPulseType.PageView},s.TelemetryTypeStringToQuickPulseDocumentType={EventData:s.QuickPulseDocumentType.Event,ExceptionData:s.QuickPulseDocumentType.Exception,MessageData:s.QuickPulseDocumentType.Trace,MetricData:s.QuickPulseDocumentType.Metric,RequestData:s.QuickPulseDocumentType.Request,RemoteDependencyData:s.QuickPulseDocumentType.Dependency,AvailabilityData:s.QuickPulseDocumentType.Availability,PageViewData:s.QuickPulseDocumentType.PageView},s.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},s.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},s.HeartBeatMetricName="HeartBeat"}),Gs=O((s,k)=>{"use strict";var d=q(2087),v=Wn(),_=function(){function p(l,u,h){u===void 0&&(u=6e4),h===void 0&&(h=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=l,this._collectionInterval=u,this._enableLiveMetricsCounters=h}return p.prototype.enable=function(l,u){var h=this;this._isEnabled=l,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),l?this._handle||(this._lastCpus=d.cpus(),this._lastRequests={totalRequestCount:p._totalRequestCount,totalFailedRequestCount:p._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:p._totalDependencyCount,totalFailedDependencyCount:p._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:p._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return h.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},p.countRequest=function(l,u){var h;if(p.isEnabled()){if(typeof l=="string")h=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")h=l;else return;p._intervalRequestExecutionTime+=h,u===!1&&p._totalFailedRequestCount++,p._totalRequestCount++}},p.countException=function(){p._totalExceptionCount++},p.countDependency=function(l,u){var h;if(p.isEnabled()){if(typeof l=="string")h=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")h=l;else return;p._intervalDependencyExecutionTime+=h,u===!1&&p._totalFailedDependencyCount++,p._totalDependencyCount++}},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},p.prototype._trackCpu=function(){var l=d.cpus();if(l&&l.length&&this._lastCpus&&l.length===this._lastCpus.length){for(var u=0,h=0,g=0,y=0,m=0,w=0;!!l&&w<l.length;w++){var E=l[w],R=this._lastCpus[w],C="% cpu("+w+") ",D=E.model,x=E.speed,Q=E.times,re=R.times,Y=Q.user-re.user||0;u+=Y;var ue=Q.sys-re.sys||0;h+=ue;var _e=Q.nice-re.nice||0;g+=_e;var Te=Q.idle-re.idle||0;y+=Te;var Re=Q.irq-re.irq||0;m+=Re}var xe=void 0;if(typeof process.cpuUsage=="function"){var qe=process.cpuUsage(),He=process.hrtime(),Qe=qe.user-this._lastAppCpuUsage.user+(qe.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var ut=(He[0]-this._lastHrtime[0])*1e6+(He[1]-this._lastHrtime[1])/1e3||0;xe=100*Qe/(ut*l.length)}this._lastAppCpuUsage=qe,this._lastHrtime=He}var at=u+h+g+y+m||1;this._client.trackMetric({name:v.PerformanceCounter.PROCESSOR_TIME,value:(at-y)/at*100}),this._client.trackMetric({name:v.PerformanceCounter.PROCESS_TIME,value:xe||u/at*100})}this._lastCpus=l},p.prototype._trackMemory=function(){var l=d.freemem(),u=process.memoryUsage().rss,h=d.totalmem()-l;this._client.trackMetric({name:v.PerformanceCounter.PRIVATE_BYTES,value:u}),this._client.trackMetric({name:v.PerformanceCounter.AVAILABLE_BYTES,value:l}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.COMMITTED_BYTES,value:h})},p.prototype._trackNetwork=function(){var l=this._lastRequests,u={totalRequestCount:p._totalRequestCount,totalFailedRequestCount:p._totalFailedRequestCount,time:+new Date},h=u.totalRequestCount-l.totalRequestCount||0,g=u.totalFailedRequestCount-l.totalFailedRequestCount||0,y=u.time-l.time,m=y/1e3,w=(p._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/h||0;if(this._lastIntervalRequestExecutionTime=p._intervalRequestExecutionTime,y>0){var E=h/m,R=g/m;this._client.trackMetric({name:v.PerformanceCounter.REQUEST_RATE,value:E}),(!this._enableLiveMetricsCounters||h>0)&&this._client.trackMetric({name:v.PerformanceCounter.REQUEST_DURATION,value:w}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.REQUEST_FAILURE_RATE,value:R})}this._lastRequests=u},p.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastDependencies,u={totalDependencyCount:p._totalDependencyCount,totalFailedDependencyCount:p._totalFailedDependencyCount,time:+new Date},h=u.totalDependencyCount-l.totalDependencyCount||0,g=u.totalFailedDependencyCount-l.totalFailedDependencyCount||0,y=u.time-l.time,m=y/1e3,w=(p._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/h||0;if(this._lastIntervalDependencyExecutionTime=p._intervalDependencyExecutionTime,y>0){var E=h/m,R=g/m;this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_RATE,value:E}),this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:R}),(!this._enableLiveMetricsCounters||h>0)&&this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_DURATION,value:w})}this._lastDependencies=u}},p.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastExceptions,u={totalExceptionCount:p._totalExceptionCount,time:+new Date},h=u.totalExceptionCount-l.totalExceptionCount||0,g=u.time-l.time,y=g/1e3;if(g>0){var m=h/y;this._client.trackMetric({name:v.QuickPulseCounter.EXCEPTION_RATE,value:m})}this._lastExceptions=u}},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p._totalRequestCount=0,p._totalFailedRequestCount=0,p._totalDependencyCount=0,p._totalFailedDependencyCount=0,p._totalExceptionCount=0,p._intervalDependencyExecutionTime=0,p._intervalRequestExecutionTime=0,p}();k.exports=_}),Na=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AggregatedMetricCounter=void 0;var k=function(){function d(v){this.dimensions=v,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return d}();s.AggregatedMetricCounter=k}),Hs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PreaggregatedMetricPropertyNames=void 0,s.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),Go=O((s,k)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(u){for(var h,g=1,y=arguments.length;g<y;g++){h=arguments[g];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(u[m]=h[m])}return u},d.apply(this,arguments)},v=Wn(),_=Na(),p=Hs(),l=function(){function u(h,g){g===void 0&&(g=6e4),u.INSTANCE||(u.INSTANCE=this),this._isInitialized=!1,u._dependencyCountersCollection=[],u._requestCountersCollection=[],u._exceptionCountersCollection=[],u._traceCountersCollection=[],this._client=h,this._collectionInterval=g}return u.prototype.enable=function(h,g){var y=this;this._isEnabled=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),h?this._handle||(this._collectionInterval=g||this._collectionInterval,this._handle=setInterval(function(){return y.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},u.countException=function(h){if(u.isEnabled()){var g=u._getAggregatedCounter(h,this._exceptionCountersCollection);g.totalCount++}},u.countTrace=function(h){if(u.isEnabled()){var g=u._getAggregatedCounter(h,this._traceCountersCollection);g.totalCount++}},u.countRequest=function(h,g){if(u.isEnabled()){var y,m=u._getAggregatedCounter(g,this._requestCountersCollection);if(typeof h=="string")y=+new Date("1970-01-01T"+h+"Z");else if(typeof h=="number")y=h;else return;m.intervalExecutionTime+=y,m.totalCount++}},u.countDependency=function(h,g){if(u.isEnabled()){var y=u._getAggregatedCounter(g,this._dependencyCountersCollection),m;if(typeof h=="string")m=+new Date("1970-01-01T"+h+"Z");else if(typeof h=="number")m=h;else return;y.intervalExecutionTime+=m,y.totalCount++}},u.prototype.isInitialized=function(){return this._isInitialized},u.isEnabled=function(){return u.INSTANCE&&u.INSTANCE._isEnabled},u.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},u._getAggregatedCounter=function(h,g){for(var y=!1,m=0;m<g.length;m++){if(h===g[m].dimensions)return g[m];if(Object.keys(h).length===Object.keys(g[m].dimensions).length){for(var w in h)if(h[w]!=g[m].dimensions[w]){y=!0;break}if(!y)return g[m];y=!1}}var E=new _.AggregatedMetricCounter(h);return g.push(E),E},u.prototype._trackRequestMetrics=function(){for(var h=0;h<u._requestCountersCollection.length;h++){var g=u._requestCountersCollection[h];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime,w=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,m>0&&y>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:g.dimensions,value:w,count:y,aggregationInterval:m,metricType:v.MetricId.REQUESTS_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackDependencyMetrics=function(){for(var h=0;h<u._dependencyCountersCollection.length;h++){var g=u._dependencyCountersCollection[h];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime,w=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,m>0&&y>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:g.dimensions,value:w,count:y,aggregationInterval:m,metricType:v.MetricId.DEPENDENCIES_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackExceptionMetrics=function(){for(var h=0;h<u._exceptionCountersCollection.length;h++){var g=u._exceptionCountersCollection[h],y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:g.dimensions,value:y,count:y,aggregationInterval:m,metricType:v.MetricId.EXCEPTIONS_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackTraceMetrics=function(){for(var h=0;h<u._traceCountersCollection.length;h++){var g=u._traceCountersCollection[h],y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:g.dimensions,value:y,count:y,aggregationInterval:m,metricType:v.MetricId.TRACES_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackPreAggregatedMetric=function(h){var g={};for(var y in h.dimensions)g[p.PreaggregatedMetricPropertyNames[y]]=h.dimensions[y];g=d(d({},g),{"_MS.MetricId":h.metricType,"_MS.AggregationIntervalMs":String(h.aggregationInterval),"_MS.IsAutocollected":"True"});var m={name:h.name,value:h.value,count:h.count,properties:g,kind:"Aggregation"};this._client.trackMetric(m)},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1),this._isInitialized=!1},u}();k.exports=l}),Vs=O((s,k)=>{"use strict";var d=q(2087),v=q(5747),_=q(5622),p=_t(),l=ce(),u=function(){function h(g){this.keys=new p.ContextTagKeys,this.tags={},this._loadApplicationContext(g),this._loadDeviceContext(),this._loadInternalContext()}return h.prototype._loadApplicationContext=function(g){if(g=g||_.resolve(__dirname,"../../../../package.json"),!h.appVersion[g]){h.appVersion[g]="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(h.appVersion[g]=y.version)}catch(m){l.info("unable to read app version: ",m)}}this.tags[this.keys.applicationVersion]=h.appVersion[g]},h.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=d&&d.hostname(),this.tags[this.keys.deviceOSVersion]=d&&d.type()+" "+d.release(),this.tags[this.keys.cloudRole]=h.DefaultRoleName,this.tags["ai.device.osArchitecture"]=d&&d.arch(),this.tags["ai.device.osPlatform"]=d&&d.platform()},h.prototype._loadInternalContext=function(){var g=_.resolve(__dirname,"../../package.json");if(!h.sdkVersion){h.sdkVersion="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(h.sdkVersion=y.version)}catch(m){l.info("unable to read app version: ",m)}}this.tags[this.keys.internalSdkVersion]="node:"+h.sdkVersion},h.DefaultRoleName="Web",h.appVersion={},h.sdkVersion=null,h}();k.exports=u}),Bl=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var y=function(m,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var C in R)Object.prototype.hasOwnProperty.call(R,C)&&(E[C]=R[C])},y(m,w)};return function(m,w){y(m,w);function E(){this.constructor=m}m.prototype=w===null?Object.create(w):(E.prototype=w.prototype,new E)}}(),v=q(8835),_=_t(),p=zr(),l=mi(),u=Qr(),h=$i(),g=function(y){d(m,y);function m(w,E){var R=y.call(this)||this;return E&&E.method&&w&&(R.method=E.method,R.url=m._getUrlFromRequestOptions(w,E),R.startTime=+new Date),R}return m.prototype.onError=function(w){this._setStatus(void 0,w)},m.prototype.onResponse=function(w){this._setStatus(w.statusCode,void 0),this.correlationId=p.getCorrelationContextTarget(w,l.requestContextTargetKey)},m.prototype.getDependencyTelemetry=function(w,E){var R=v.parse(this.url);R.search=void 0,R.hash=void 0;var C=this.method.toUpperCase()+" "+R.pathname,D=_.RemoteDependencyDataConstants.TYPE_HTTP,x=R.hostname;R.port&&(x+=":"+R.port),this.correlationId?(D=_.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==h.correlationIdPrefix&&(x+=" | "+this.correlationId)):D=_.RemoteDependencyDataConstants.TYPE_HTTP;var Q={id:E,name:C,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:D,target:x};if(w&&w.time?Q.time=w.time:this.startTime&&(Q.time=new Date(this.startTime)),w){for(var re in w)Q[re]||(Q[re]=w[re]);if(w.properties)for(var re in w.properties)Q.properties[re]=w.properties[re]}return Q},m._getUrlFromRequestOptions=function(w,E){if(typeof w=="string")if(w.indexOf("http://")===0||w.indexOf("https://")===0)w=v.parse(w);else{var R=v.parse(w);R.host==="443"?w=v.parse("https://"+w):w=v.parse("http://"+w)}else{if(w&&typeof v.URL=="function"&&w instanceof v.URL)return v.format(w);var C=w;w={},C&&Object.keys(C).forEach(function(Q){w[Q]=C[Q]})}if(w.path){var D=v.parse(w.path);w.pathname=D.pathname,w.search=D.search}if(w.host&&w.port){var x=v.parse("http://"+w.host);!x.port&&w.port&&(w.hostname=w.host,delete w.host)}return w.protocol=w.protocol||E.agent&&E.agent.protocol||E.protocol||void 0,w.hostname=w.hostname||"localhost",v.format(w)},m}(u);k.exports=g}),jl=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(l){for(var u,h=1,g=arguments.length;h<g;h++){u=arguments[h];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.spanToTelemetryContract=void 0;var d=Ft(),v=Wn();function _(l){var u=k({},l);return Object.keys(v.SpanAttribute).forEach(function(h){delete u[h]}),u}function p(l){var u="|"+l.spanContext().traceId+"."+l.spanContext().spanId+".",h=Math.round(l._duration[0]*1e3+l._duration[1]/1e6),g=l.attributes["peer.address"]?l.attributes["peer.address"].toString():"",y=l.attributes.component?l.attributes.component.toString():"",m=y.toUpperCase()===v.DependencyTypeName.Http||!!l.attributes[v.SpanAttribute.HttpUrl],w=y.toLowerCase()===v.DependencyTypeName.Grpc;if(m){var E=l.attributes[v.SpanAttribute.HttpMethod]||"GET",R=new URL(l.attributes[v.SpanAttribute.HttpUrl].toString()),C=l.attributes[v.SpanAttribute.HttpHost]||R.host,D=l.attributes[v.SpanAttribute.HttpPort]||R.port||null,x=R.pathname||"/",Q=E+" "+x,re=v.DependencyTypeName.Http,Y=D?(C+":"+D).toString():C.toString(),ue=R.toString(),_e=l.attributes[v.SpanAttribute.HttpStatusCode]||l.status.code||0,Te=_e<400;return{id:u,name:Q,dependencyTypeName:re,target:Y,data:ue,success:Te,duration:h,url:ue,resultCode:String(_e),properties:_(l.attributes)}}else if(w){var E=l.attributes[v.SpanAttribute.GrpcMethod]||"rpc",Re=l.attributes[v.SpanAttribute.GrpcService],xe=Re?E+" "+Re:l.name;return{id:u,duration:h,name:xe,target:Re.toString(),data:Re.toString()||xe,url:Re.toString()||xe,dependencyTypeName:v.DependencyTypeName.Grpc,resultCode:String(l.status.code||0),success:l.status.code===0,properties:_(l.attributes)}}else{var qe=l.name,He=l.links&&l.links.map(function(Qe){return{operation_Id:Qe.context.traceId,id:Qe.context.spanId}});return{id:u,duration:h,name:qe,target:g,data:g||qe,url:g||qe,dependencyTypeName:l.kind===d.SpanKind.INTERNAL?v.DependencyTypeName.InProc:y||l.name,resultCode:String(l.status.code||0),success:l.status.code===0,properties:k(k({},_(l.attributes)),{"_MS.links":He||void 0})}}}s.spanToTelemetryContract=p}),Ho=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=Ft(),d=pe(),v=Fs(),_=jl(),p=te(),l=[],u=function(g){var y=g.data,m=_.spanToTelemetryContract(y),w=y.spanContext(),E=new v;E.traceId=w.traceId,E.spanId=w.spanId,E.traceFlag=v.formatOpenTelemetryTraceFlags(w.traceFlags),E.parentId=y.parentSpanId?"|"+w.traceId+"."+y.parentSpanId+".":null,p.AsyncScopeManager.with(y,function(){l.forEach(function(R){y.kind===k.SpanKind.SERVER?R.trackRequest(m):(y.kind===k.SpanKind.CLIENT||y.kind===k.SpanKind.INTERNAL)&&R.trackDependency(m)})})};s.subscriber=u;function h(g,y){g?(l.length===0&&d.channel.subscribe("azure-coretracing",s.subscriber),l.push(y)):(l=l.filter(function(m){return m!=y}),l.length===0&&d.channel.unsubscribe("azure-coretracing",s.subscriber))}s.enable=h}),zl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=pe(),d=[],v=function(p){p.data.event.commandName!=="ismaster"&&d.forEach(function(l){var u=p.data.startedData&&p.data.startedData.databaseName||"Unknown database";l.trackDependency({target:u,data:p.data.event.commandName,name:p.data.event.commandName,duration:p.data.event.duration,success:p.data.succeeded,resultCode:p.data.succeeded?"0":"1",time:p.data.startedData.time,dependencyTypeName:"mongodb"})})};s.subscriber=v;function _(p,l){p?(d.length===0&&k.channel.subscribe("mongodb",s.subscriber),d.push(l)):(d=d.filter(function(u){return u!=l}),d.length===0&&k.channel.unsubscribe("mongodb",s.subscriber))}s.enable=_}),Aa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=pe(),d=[],v=function(p){d.forEach(function(l){var u=p.data.query||{},h=u.sql||"Unknown query",g=!p.data.err,y=u._connection||{},m=y.config||{},w=m.socketPath?m.socketPath:(m.host||"localhost")+":"+m.port;l.trackDependency({target:w,data:h,name:h,duration:p.data.duration,success:g,resultCode:g?"0":"1",time:p.data.time,dependencyTypeName:"mysql"})})};s.subscriber=v;function _(p,l){p?(d.length===0&&k.channel.subscribe("mysql",s.subscriber),d.push(l)):(d=d.filter(function(u){return u!=l}),d.length===0&&k.channel.unsubscribe("mysql",s.subscriber))}s.enable=_}),Ed=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=pe(),d=[],v=function(p){d.forEach(function(l){p.data.commandObj.command!=="info"&&l.trackDependency({target:p.data.address,name:p.data.commandObj.command,data:p.data.commandObj.command,duration:p.data.duration,success:!p.data.err,resultCode:p.data.err?"1":"0",time:p.data.time,dependencyTypeName:"redis"})})};s.subscriber=v;function _(p,l){p?(d.length===0&&k.channel.subscribe("redis",s.subscriber),d.push(l)):(d=d.filter(function(u){return u!=l}),d.length===0&&k.channel.unsubscribe("redis",s.subscriber))}s.enable=_}),Ql=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=pe(),d=[],v=function(p){d.forEach(function(l){var u=p.data.query,h=u.preparable&&u.preparable.text||u.plan||u.text||"unknown query",g=!p.data.error,y=p.data.database.host+":"+p.data.database.port;l.trackDependency({target:y,data:h,name:h,duration:p.data.duration,success:g,resultCode:g?"0":"1",time:p.data.time,dependencyTypeName:"postgres"})})};s.subscriber=v;function _(p,l){p?(d.length===0&&k.channel.subscribe("postgres",s.subscriber),d.push(l)):(d=d.filter(function(u){return u!=l}),d.length===0&&k.channel.unsubscribe("postgres",s.subscriber))}s.enable=_}),hs=O((s,k)=>{"use strict";var d=s&&s.__spreadArrays||function(){for(var R=0,C=0,D=arguments.length;C<D;C++)R+=arguments[C].length;for(var x=Array(R),Q=0,C=0;C<D;C++)for(var re=arguments[C],Y=0,ue=re.length;Y<ue;Y++,Q++)x[Q]=re[Y];return x},v=q(8605),_=q(7211),p=ce(),l=zr(),u=mi(),h=Bl(),g=ji(),y=$i(),m=Fs(),w=Ms(),E=function(){function R(C){if(R.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");R.INSTANCE=this,this._client=C}return R.prototype.enable=function(C){this._isEnabled=C,this._isEnabled&&!this._isInitialized&&this._initialize(),w.IsInitialized&&(Ho().enable(!0,this._client),zl().enable(C,this._client),Aa().enable(C,this._client),Ed().enable(C,this._client),Ql().enable(C,this._client))},R.prototype.isInitialized=function(){return this._isInitialized},R.prototype._initialize=function(){var C=this;this._isInitialized=!0;var D=v.request,x=_.request,Q=function(re,Y){var ue=!Y[R.disableCollectionRequestOption]&&!re[R.alreadyAutoCollectedFlag];Y.headers&&Y.headers["user-agent"]&&Y.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(ue=!1),re[R.alreadyAutoCollectedFlag]=!0,re&&Y&&ue&&(g.CorrelationContextManager.wrapEmitter(re),R.trackRequest(C._client,{options:Y,request:re}))};v.request=function(re){for(var Y=[],ue=1;ue<arguments.length;ue++)Y[ue-1]=arguments[ue];var _e=D.call.apply(D,d([v,re],Y));return Q(_e,re),_e},_.request=function(re){for(var Y=[],ue=1;ue<arguments.length;ue++)Y[ue-1]=arguments[ue];var _e=x.call.apply(x,d([_,re],Y));return Q(_e,re),_e},v.get=function(re){for(var Y,ue=[],_e=1;_e<arguments.length;_e++)ue[_e-1]=arguments[_e];var Te=(Y=v.request).call.apply(Y,d([v,re],ue));return Te.end(),Te},_.get=function(re){for(var Y,ue=[],_e=1;_e<arguments.length;_e++)ue[_e-1]=arguments[_e];var Te=(Y=_.request).call.apply(Y,d([_,re],ue));return Te.end(),Te}},R.trackRequest=function(C,D){if(!D.options||!D.request||!C){p.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!D.options,!D.request,!C);return}var x=new h(D.options,D.request),Q=g.CorrelationContextManager.getCurrentContext(),re,Y;if(Q&&Q.operation&&Q.operation.traceparent&&m.isValidTraceId(Q.operation.traceparent.traceId))Q.operation.traceparent.updateSpanId(),re=Q.operation.traceparent.getBackCompatRequestId();else if(y.w3cEnabled){var ue=new m;Y=ue.toString(),re=ue.getBackCompatRequestId()}else re=Q&&Q.operation&&Q.operation.parentId+R.requestNumber+++".";if(l.canIncludeCorrelationHeader(C,x.getUrl())&&D.request.getHeader&&D.request.setHeader&&C.config&&C.config.correlationId){var _e=D.request.getHeader(u.requestContextHeader);try{l.safeIncludeCorrelationHeader(C,D.request,_e)}catch(xe){p.warn("Request-Context header could not be set. Correlation of requests may be lost",xe)}if(Q&&Q.operation)try{if(D.request.setHeader(u.requestIdHeader,re),C.config.ignoreLegacyHeaders||(D.request.setHeader(u.parentIdHeader,Q.operation.id),D.request.setHeader(u.rootIdHeader,re)),Y||Q.operation.traceparent)D.request.setHeader(u.traceparentHeader,Y||Q.operation.traceparent.toString());else if(y.w3cEnabled){var ue=new m().toString();D.request.setHeader(u.traceparentHeader,ue)}if(Q.operation.tracestate){var Te=Q.operation.tracestate.toString();Te&&D.request.setHeader(u.traceStateHeader,Te)}var Re=Q.customProperties.serializeToHeader();Re&&D.request.setHeader(u.correlationContextHeader,Re)}catch(xe){p.warn("Correlation headers could not be set. Correlation of requests may be lost.",xe)}}D.request.on&&(D.request.on("response",function(xe){x.onResponse(xe);var qe=x.getDependencyTelemetry(D,re);qe.contextObjects=qe.contextObjects||{},qe.contextObjects["http.RequestOptions"]=D.options,qe.contextObjects["http.ClientRequest"]=D.request,qe.contextObjects["http.ClientResponse"]=xe,C.trackDependency(qe)}),D.request.on("error",function(xe){x.onError(xe);var qe=x.getDependencyTelemetry(D,re);qe.contextObjects=qe.contextObjects||{},qe.contextObjects["http.RequestOptions"]=D.options,qe.contextObjects["http.ClientRequest"]=D.request,qe.contextObjects.Error=xe,C.trackDependency(qe)}),D.request.on("abort",function(){x.onError(new Error);var xe=x.getDependencyTelemetry(D,re);xe.contextObjects=xe.contextObjects||{},xe.contextObjects["http.RequestOptions"]=D.options,xe.contextObjects["http.ClientRequest"]=D.request,C.trackDependency(xe)}))},R.prototype.dispose=function(){R.INSTANCE=null,this.enable(!1),this._isInitialized=!1},R.disableCollectionRequestOption="disableAppInsightsAutoCollection",R.requestNumber=1,R.alreadyAutoCollectedFlag="_appInsightsAutoCollected",R}();k.exports=E}),Wl=O((s,k)=>{"use strict";var d=q(2087),v=Wn(),_=zr(),p=Vs(),l=hs(),u="http://169.254.169.254/metadata/instance/compute",h="api-version=2017-12-01",g="format=json",y="ENETUNREACH",m=function(){function w(E){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",w.INSTANCE||(w.INSTANCE=this),this._isInitialized=!1,this._client=E}return w.prototype.enable=function(E,R){var C=this;this._isEnabled=E,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),E?this._handle||(this._handle=setInterval(function(){return C.trackHeartBeat(R,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},w.prototype.isInitialized=function(){return this._isInitialized},w.isEnabled=function(){return w.INSTANCE&&w.INSTANCE._isEnabled},w.prototype.trackHeartBeat=function(E,R){var C=this,D=!1,x={},Q=p.sdkVersion;x.sdk=Q,x.osType=d.type(),process.env.WEBSITE_SITE_NAME?(x.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",x.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",x.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?x.azfunction_appId=process.env.WEBSITE_HOSTNAME:E&&(this._isVM===void 0?(D=!0,this._getAzureComputeMetadata(E,function(){C._isVM&&Object.keys(C._vmData).length>0&&(x.azInst_vmId=C._vmData.vmId||"",x.azInst_subscriptionId=C._vmData.subscriptionId||"",x.azInst_osType=C._vmData.osType||"",C._azInst_vmId=C._vmData.vmId||"",C._azInst_subscriptionId=C._vmData.subscriptionId||"",C._azInst_osType=C._vmData.osType||""),C._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:x}),R()})):this._isVM&&(x.azInst_vmId=this._azInst_vmId,x.azInst_subscriptionId=this._azInst_subscriptionId,x.azInst_osType=this._azInst_osType)),D||(this._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:x}),R())},w.prototype.dispose=function(){w.INSTANCE=null,this.enable(!1),this._isInitialized=!1},w.prototype._getAzureComputeMetadata=function(E,R){var C,D=this,x=u+"?"+h+"&"+g,Q=(C={method:"GET"},C[l.disableCollectionRequestOption]=!0,C.headers={Metadata:"True"},C),re=_.makeRequest(E,x,Q,function(Y){if(Y.statusCode===200){D._isVM=!0;var ue="";Y.on("data",function(_e){ue+=_e}),Y.on("end",function(){D._vmData=D._isJSON(ue)?JSON.parse(ue):{},R()})}else R()});re&&(re.on("error",function(Y){Y&&Y.message&&Y.message.indexOf(y)>-1&&(D._isVM=!1),R()}),re.end())},w.prototype._isJSON=function(E){try{return JSON.parse(E)&&!!E}catch(R){return!1}},w}();k.exports=m}),Vo=O((s,k)=>{"use strict";var d=q(8605),v=q(7211),_=ce(),p=zr(),l=mi(),u=Us(),h=ji(),g=Gs(),y=function(){function m(w){if(m.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=w}return m.prototype.enable=function(w){this._isEnabled=w,(this._isAutoCorrelating||this._isEnabled||g.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},m.prototype.useAutoCorrelation=function(w,E){w&&!this._isAutoCorrelating?h.CorrelationContextManager.enable(E):!w&&this._isAutoCorrelating&&h.CorrelationContextManager.disable(),this._isAutoCorrelating=w},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},m.prototype._generateCorrelationContext=function(w){if(this._isAutoCorrelating)return h.CorrelationContextManager.generateContextObject(w.getOperationId(this._client.context.tags),w.getRequestId(),w.getOperationName(this._client.context.tags),w.getCorrelationContextHeader(),w.getTraceparent(),w.getTracestate())},m.prototype._initialize=function(){var w=this;this._isInitialized=!0;var E=function(x){if(x){if(typeof x!="function")throw new Error("onRequest handler must be a function");return function(Q,re){h.CorrelationContextManager.wrapEmitter(Q),h.CorrelationContextManager.wrapEmitter(re);var Y=Q&&!Q[m.alreadyAutoCollectedFlag];if(Q&&Y){var ue=new u(Q),_e=w._generateCorrelationContext(ue);h.CorrelationContextManager.runWithContext(_e,function(){w._isEnabled&&(Q[m.alreadyAutoCollectedFlag]=!0,m.trackRequest(w._client,{request:Q,response:re},ue)),typeof x=="function"&&x(Q,re)})}else typeof x=="function"&&x(Q,re)}}},R=function(x){var Q=x.addListener.bind(x);x.addListener=function(re,Y){switch(re){case"request":case"checkContinue":return Q(re,E(Y));default:return Q(re,Y)}},x.on=x.addListener},C=d.createServer;d.createServer=function(x,Q){if(Q&&typeof Q=="function"){var re=C(x,E(Q));return R(re),re}else{var re=C(E(x));return R(re),re}};var D=v.createServer;v.createServer=function(x,Q){var re=D(x,E(Q));return R(re),re}},m.trackRequestSync=function(w,E){if(!E.request||!E.response||!w){_.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!E.request,!E.response,!w);return}m.addResponseCorrelationIdHeader(w,E.response);var R=h.CorrelationContextManager.getCurrentContext(),C=new u(E.request,R&&R.operation.parentId);R&&(R.operation.id=C.getOperationId(w.context.tags)||R.operation.id,R.operation.name=C.getOperationName(w.context.tags)||R.operation.name,R.operation.parentId=C.getRequestId()||R.operation.parentId,R.customProperties.addHeaderData(C.getCorrelationContextHeader())),m.endRequest(w,C,E,E.duration,E.error)},m.trackRequest=function(w,E,R){if(!E.request||!E.response||!w){_.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!E.request,!E.response,!w);return}var C=h.CorrelationContextManager.getCurrentContext(),D=R||new u(E.request,C&&C.operation.parentId);p.canIncludeCorrelationHeader(w,D.getUrl())&&m.addResponseCorrelationIdHeader(w,E.response),C&&!R&&(C.operation.id=D.getOperationId(w.context.tags)||C.operation.id,C.operation.name=D.getOperationName(w.context.tags)||C.operation.name,C.operation.parentId=D.getOperationParentId(w.context.tags)||C.operation.parentId,C.customProperties.addHeaderData(D.getCorrelationContextHeader())),E.response.once&&E.response.once("finish",function(){m.endRequest(w,D,E,null,null)}),E.request.on&&E.request.on("error",function(x){m.endRequest(w,D,E,null,x)}),E.request.on&&E.request.on("aborted",function(){var x="The request has been aborted and the network socket has closed.";m.endRequest(w,D,E,null,x)})},m.addResponseCorrelationIdHeader=function(w,E){if(w.config&&w.config.correlationId&&E.getHeader&&E.setHeader&&!E.headersSent){var R=E.getHeader(l.requestContextHeader);p.safeIncludeCorrelationHeader(w,E,R)}},m.endRequest=function(w,E,R,C,D){D?E.onError(D,C):E.onResponse(R.response,C);var x=E.getRequestTelemetry(R);if(x.tagOverrides=E.getRequestTags(w.context.tags),R.tagOverrides)for(var Q in R.tagOverrides)x.tagOverrides[Q]=R.tagOverrides[Q];var re=E.getLegacyRootId();re&&(x.properties.ai_legacyRootId=re),x.contextObjects=x.contextObjects||{},x.contextObjects["http.ServerRequest"]=R.request,x.contextObjects["http.ServerResponse"]=R.response,w.trackRequest(x)},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1,h.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();k.exports=y}),Kl=O((s,k)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(y){for(var m,w=1,E=arguments.length;w<E;w++){m=arguments[w];for(var R in m)Object.prototype.hasOwnProperty.call(m,R)&&(y[R]=m[R])}return y},d.apply(this,arguments)},v=q(2087),_=_t(),p=Wn(),l=zr(),u=ce(),h=l.w3cTraceId(),g=function(){function y(){}return y.createQuickPulseEnvelope=function(m,w,E,R){var C=v&&typeof v.hostname=="function"&&v.hostname()||"Unknown",D=R.tags&&R.keys&&R.keys.cloudRoleInstance&&R.tags[R.keys.cloudRoleInstance]||C,x=R.tags&&R.keys&&R.keys.cloudRole&&R.tags[R.keys.cloudRole]||null,Q={Documents:w.length>0?w:null,InstrumentationKey:E.instrumentationKey||"",Metrics:m.length>0?m:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:R.tags[R.keys.internalSdkVersion],StreamId:h,MachineName:C,Instance:D,RoleName:x};return Q},y.createQuickPulseMetric=function(m){var w;return w={Name:m.name,Value:m.value,Weight:m.count||1},w},y.telemetryEnvelopeToQuickPulseDocument=function(m){switch(m.data.baseType){case _.TelemetryTypeString.Event:return y.createQuickPulseEventDocument(m);case _.TelemetryTypeString.Exception:return y.createQuickPulseExceptionDocument(m);case _.TelemetryTypeString.Trace:return y.createQuickPulseTraceDocument(m);case _.TelemetryTypeString.Dependency:return y.createQuickPulseDependencyDocument(m);case _.TelemetryTypeString.Request:return y.createQuickPulseRequestDocument(m)}return null},y.createQuickPulseEventDocument=function(m){var w=y.createQuickPulseDocument(m),E=m.data.baseData.name,R=d(d({},w),{Name:E});return R},y.createQuickPulseTraceDocument=function(m){var w=y.createQuickPulseDocument(m),E=m.data.baseData.severityLevel||0,R=d(d({},w),{Message:m.data.baseData.message,SeverityLevel:_.SeverityLevel[E]});return R},y.createQuickPulseExceptionDocument=function(m){var w=y.createQuickPulseDocument(m),E=m.data.baseData.exceptions,R="",C="",D="";E&&E.length>0&&(E[0].parsedStack&&E[0].parsedStack.length>0?E[0].parsedStack.forEach(function(Q){R+=Q.assembly+`
`}):E[0].stack&&E[0].stack.length>0&&(R=E[0].stack),C=E[0].message,D=E[0].typeName);var x=d(d({},w),{Exception:R,ExceptionMessage:C,ExceptionType:D});return x},y.createQuickPulseRequestDocument=function(m){var w=y.createQuickPulseDocument(m),E=m.data.baseData,R=d(d({},w),{Name:E.name,Success:E.success,Duration:E.duration,ResponseCode:E.responseCode,OperationName:E.name});return R},y.createQuickPulseDependencyDocument=function(m){var w=y.createQuickPulseDocument(m),E=m.data.baseData,R=d(d({},w),{Name:E.name,Target:E.target,Success:E.success,Duration:E.duration,ResultCode:E.resultCode,CommandName:E.data,OperationName:w.OperationId,DependencyTypeName:E.type});return R},y.createQuickPulseDocument=function(m){var w,E,R,C;m.data.baseType?(E=p.TelemetryTypeStringToQuickPulseType[m.data.baseType],w=p.TelemetryTypeStringToQuickPulseDocumentType[m.data.baseType]):u.warn("Document type invalid; not sending live metric document",m.data.baseType),R=m.tags[y.keys.operationId],C=y.aggregateProperties(m);var D={DocumentType:w,__type:E,OperationId:R,Version:"1.0",Properties:C};return D},y.aggregateProperties=function(m){var w=[],E=m.data.baseData.measurements||{};for(var R in E)if(E.hasOwnProperty(R)){var C=E[R],D={key:R,value:C};w.push(D)}var x=m.data.baseData.properties||{};for(var R in x)if(x.hasOwnProperty(R)){var C=x[R],D={key:R,value:C};w.push(D)}return w},y.keys=new _.ContextTagKeys,y}();k.exports=g}),Bo=O((s,k)=>{"use strict";var d=function(){return(Date.now()+621355968e5)*1e4};k.exports={getTransmissionTime:d}}),Ia=O((s,k)=>{"use strict";var d=s&&s.__awaiter||function(m,w,E,R){function C(D){return D instanceof E?D:new E(function(x){x(D)})}return new(E||(E=Promise))(function(D,x){function Q(ue){try{Y(R.next(ue))}catch(_e){x(_e)}}function re(ue){try{Y(R.throw(ue))}catch(_e){x(_e)}}function Y(ue){ue.done?D(ue.value):C(ue.value).then(Q,re)}Y((R=R.apply(m,w||[])).next())})},v=s&&s.__generator||function(m,w){var E={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},R,C,D,x;return x={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function Q(Y){return function(ue){return re([Y,ue])}}function re(Y){if(R)throw new TypeError("Generator is already executing.");for(;E;)try{if(R=1,C&&(D=Y[0]&2?C.return:Y[0]?C.throw||((D=C.return)&&D.call(C),0):C.next)&&!(D=D.call(C,Y[1])).done)return D;switch(C=0,D&&(Y=[Y[0]&2,D.value]),Y[0]){case 0:case 1:D=Y;break;case 4:return E.label++,{value:Y[1],done:!1};case 5:E.label++,C=Y[1],Y=[0];continue;case 7:Y=E.ops.pop(),E.trys.pop();continue;default:if(D=E.trys,!(D=D.length>0&&D[D.length-1])&&(Y[0]===6||Y[0]===2)){E=0;continue}if(Y[0]===3&&(!D||Y[1]>D[0]&&Y[1]<D[3])){E.label=Y[1];break}if(Y[0]===6&&E.label<D[1]){E.label=D[1],D=Y;break}if(D&&E.label<D[2]){E.label=D[2],E.ops.push(Y);break}D[2]&&E.ops.pop(),E.trys.pop();continue}Y=w.call(m,E)}catch(ue){Y=[6,ue],C=0}finally{R=D=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}},_=q(7211),p=hs(),l=ce(),u=Bo(),h=zr(),g={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},y=function(){function m(w){this._config=w,this._consecutiveErrors=0}return m.prototype.ping=function(w,E,R){var C=[{name:g.streamId,value:w.StreamId},{name:g.machineName,value:w.MachineName},{name:g.roleName,value:w.RoleName},{name:g.instanceName,value:w.Instance},{name:g.invariantVersion,value:w.InvariantVersion.toString()}];this._submitData(w,E,R,"ping",C)},m.prototype.post=function(w,E,R){return d(this,void 0,void 0,function(){return v(this,function(C){switch(C.label){case 0:return[4,this._submitData([w],E,R,"post")];case 1:return C.sent(),[2]}})})},m.prototype._submitData=function(w,E,R,C,D){return d(this,void 0,void 0,function(){var x,Q,re,Y,ue,_e=this;return v(this,function(Te){return x=JSON.stringify(w),Q=(Y={},Y[p.disableCollectionRequestOption]=!0,Y.host=E&&E.length>0?E:this._config.quickPulseHost,Y.method=g.method,Y.path="/QuickPulseService.svc/"+C+"?ikey="+this._config.instrumentationKey,Y.headers=(ue={Expect:"100-continue"},ue[g.time]=u.getTransmissionTime(),ue["Content-Type"]="application/json",ue["Content-Length"]=Buffer.byteLength(x),ue),Y),D&&D.length>0&&D.forEach(function(Re){return Q.headers[Re.name]=Re.value}),this._config.httpsAgent?Q.agent=this._config.httpsAgent:Q.agent=h.tlsRestrictedAgent,re=_.request(Q,function(Re){if(Re.statusCode==200){var xe=Re.headers[g.subscribed]==="true",qe=Re.headers[g.endpointRedirect]?Re.headers[g.endpointRedirect].toString():null,He=Re.headers[g.pollingIntervalHint]?parseInt(Re.headers[g.pollingIntervalHint].toString()):null;_e._consecutiveErrors=0,R(xe,Re,qe,He)}else _e._onError("StatusCode:"+Re.statusCode+" StatusMessage:"+Re.statusMessage),R()}),re.on("error",function(Re){_e._onError(Re),R()}),re.write(x),re.end(),[2]})})},m.prototype._onError=function(w){this._consecutiveErrors++;var E="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%m.MAX_QPS_FAILURES_BEFORE_WARN==0?(E="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",l.warn(m.TAG,E,w)):l.info(m.TAG,E,w)},m.TAG="QuickPulseSender",m.MAX_QPS_FAILURES_BEFORE_WARN=25,m}();k.exports=y}),Yl=O((s,k)=>{"use strict";var d=s&&s.__awaiter||function(y,m,w,E){function R(C){return C instanceof w?C:new w(function(D){D(C)})}return new(w||(w=Promise))(function(C,D){function x(Y){try{re(E.next(Y))}catch(ue){D(ue)}}function Q(Y){try{re(E.throw(Y))}catch(ue){D(ue)}}function re(Y){Y.done?C(Y.value):R(Y.value).then(x,Q)}re((E=E.apply(y,m||[])).next())})},v=s&&s.__generator||function(y,m){var w={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},E,R,C,D;return D={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function x(re){return function(Y){return Q([re,Y])}}function Q(re){if(E)throw new TypeError("Generator is already executing.");for(;w;)try{if(E=1,R&&(C=re[0]&2?R.return:re[0]?R.throw||((C=R.return)&&C.call(R),0):R.next)&&!(C=C.call(R,re[1])).done)return C;switch(R=0,C&&(re=[re[0]&2,C.value]),re[0]){case 0:case 1:C=re;break;case 4:return w.label++,{value:re[1],done:!1};case 5:w.label++,R=re[1],re=[0];continue;case 7:re=w.ops.pop(),w.trys.pop();continue;default:if(C=w.trys,!(C=C.length>0&&C[C.length-1])&&(re[0]===6||re[0]===2)){w=0;continue}if(re[0]===3&&(!C||re[1]>C[0]&&re[1]<C[3])){w.label=re[1];break}if(re[0]===6&&w.label<C[1]){w.label=C[1],C=re;break}if(C&&w.label<C[2]){w.label=C[2],w.ops.push(re);break}C[2]&&w.ops.pop(),w.trys.pop();continue}re=m.call(y,w)}catch(Y){re=[6,Y],R=0}finally{E=C=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}},_=ce(),p=Kl(),l=Ia(),u=Wn(),h=Vs(),g=function(){function y(m,w){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=m,this.context=w||new h,this._sender=new l(this.config),this._isEnabled=!1}return y.prototype.addCollector=function(m){this._collectors.push(m)},y.prototype.trackMetric=function(m){this._addMetric(m)},y.prototype.addDocument=function(m){var w=p.telemetryEnvelopeToQuickPulseDocument(m);w&&this._documents.push(w)},y.prototype.enable=function(m){m&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!m&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},y.prototype.enableCollectors=function(m){this._collectors.forEach(function(w){w.enable(m)})},y.prototype._addMetric=function(m){var w=m.value,E=m.count||1,R=u.PerformanceToQuickPulseCounter[m.name];R&&(this._metrics[R]?(this._metrics[R].Value=(this._metrics[R].Value*this._metrics[R].Weight+w*E)/(this._metrics[R].Weight+E),this._metrics[R].Weight+=E):(this._metrics[R]=p.createQuickPulseMetric(m),this._metrics[R].Name=R,this._metrics[R].Weight=1))},y.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},y.prototype._goQuickPulse=function(){return d(this,void 0,void 0,function(){var m,w,E,R,C=this;return v(this,function(D){switch(D.label){case 0:return m=Object.keys(this._metrics).map(function(x){return C._metrics[x]}),w=p.createQuickPulseEnvelope(m,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(w)]:[3,2];case 1:return D.sent(),[3,3];case 2:this._ping(w),D.label=3;case 3:return E=this._pollingIntervalHint>0?this._pollingIntervalHint:y.PING_INTERVAL,R=this._isCollectingData?y.POST_INTERVAL:E,this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,R=y.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(R=y.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),R),this._handle.unref(),[2]}})})},y.prototype._ping=function(m){this._sender.ping(m,this._redirectedHost,this._quickPulseDone.bind(this))},y.prototype._post=function(m){return d(this,void 0,void 0,function(){return v(this,function(w){switch(w.label){case 0:return[4,this._sender.post(m,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return w.sent(),[2]}})})},y.prototype._quickPulseDone=function(m,w,E,R){m!=null?(this._isCollectingData!==m&&(_.info("Live Metrics sending data",m),this.enableCollectors(m)),this._isCollectingData=m,E&&E.length>0&&(this._redirectedHost=E,_.info("Redirecting endpoint to: ",E)),R&&R>0&&(this._pollingIntervalHint=R),w&&w.statusCode<300&&w.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},y.MAX_POST_WAIT_TIME=2e4,y.MAX_PING_WAIT_TIME=6e4,y.FALLBACK_INTERVAL=6e4,y.PING_INTERVAL=5e3,y.POST_INTERVAL=1e3,y}();k.exports=g}),jo=O((s,k)=>{"use strict";var d=Wn(),v=function(){function _(){}return _.parse=function(p){if(!p)return{};var l=p.split(_._FIELDS_SEPARATOR),u=l.reduce(function(g,y){var m=y.split(_._FIELD_KEY_VALUE_SEPARATOR);if(m.length===2){var w=m[0].toLowerCase(),E=m[1];g[w]=E}return g},{});if(Object.keys(u).length>0){if(u.endpointsuffix){var h=u.location?u.location+".":"";u.ingestionendpoint=u.ingestionendpoint||"https://"+h+"dc."+u.endpointsuffix,u.liveendpoint=u.liveendpoint||"https://"+h+"live."+u.endpointsuffix}u.ingestionendpoint=u.ingestionendpoint||d.DEFAULT_BREEZE_ENDPOINT,u.liveendpoint=u.liveendpoint||d.DEFAULT_LIVEMETRICS_ENDPOINT}return u},_._FIELDS_SEPARATOR=";",_._FIELD_KEY_VALUE_SEPARATOR="=",_}();k.exports=v}),zo=O((s,k)=>{"use strict";var d=$i(),v=jo(),_=ce(),p=Wn(),l=q(8835),u=function(){function h(g){var y=this;this.endpointBase=p.DEFAULT_BREEZE_ENDPOINT;var m=process.env[h.ENV_connectionString],w=v.parse(g),E=v.parse(m),R=!w.instrumentationkey&&Object.keys(w).length>0?null:g;this.instrumentationKey=w.instrumentationkey||R||E.instrumentationkey||h._getInstrumentationKey(),h._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(w.ingestionendpoint||E.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(C){return y.correlationId=C},this.proxyHttpUrl=process.env[h.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[h.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=w.ingestionendpoint||E.ingestionendpoint||process.env[h.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=w.liveendpoint||E.liveendpoint||process.env[h.ENV_quickPulseHost]||p.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=l.parse(this._quickPulseHost).host)}return Object.defineProperty(h.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(g){d.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=g,this.correlationId=d.correlationIdPrefix,d.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(g){this._quickPulseHost=g},enumerable:!1,configurable:!0}),h._getInstrumentationKey=function(){var g=process.env[h.ENV_iKey]||process.env[h.ENV_azurePrefix+h.ENV_iKey]||process.env[h.legacy_ENV_iKey]||process.env[h.ENV_azurePrefix+h.legacy_ENV_iKey];if(!g||g=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return g},h._validateInstrumentationKey=function(g){var y="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",m=new RegExp(y);return m.test(g)},h.ENV_azurePrefix="APPSETTING_",h.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",h.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",h.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",h.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",h.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",h.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",h.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",h.ENV_http_proxy="http_proxy",h.ENV_https_proxy="https_proxy",h}();k.exports=u}),Xl=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(l){for(var u,h=1,g=arguments.length;h<g;h++){u=arguments[h];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AutoCollectNativePerformance=void 0;var d=zo(),v=Vs(),_=ce(),p=function(){function l(u){this._disabledMetrics={},l.INSTANCE&&l.INSTANCE.dispose(),l.INSTANCE=this,this._client=u}return l.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>=6},l.prototype.enable=function(u,h,g){var y=this;if(h===void 0&&(h={}),g===void 0&&(g=6e4),!!l.isNodeVersionCompatible()){if(l._metricsAvailable==null&&u&&!this._isInitialized)try{var m=q(6591);l._emitter=new m,l._metricsAvailable=!0,_.info("Native metrics module successfully loaded!")}catch(w){l._metricsAvailable=!1;return}this._isEnabled=u,this._disabledMetrics=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&l._emitter?(l._emitter.enable(!0,g),this._handle||(this._handle=setInterval(function(){return y._trackNativeMetrics()},g),this._handle.unref())):l._emitter&&(l._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},l.prototype.dispose=function(){this.enable(!1)},l.parseEnabled=function(u){var h=process.env[d.ENV_nativeMetricsDisableAll],g=process.env[d.ENV_nativeMetricsDisablers];if(h)return{isEnabled:!1,disabledMetrics:{}};if(g){var y=g.split(","),m={};if(y.length>0)for(var w=0,E=y;w<E.length;w++){var R=E[w];m[R]=!0}return typeof u=="object"?{isEnabled:!0,disabledMetrics:k(k({},u),m)}:{isEnabled:u,disabledMetrics:m}}return typeof u=="boolean"?{isEnabled:u,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:u}},l.prototype._trackNativeMetrics=function(){var u=!0;typeof this._isEnabled!="object"&&(u=this._isEnabled),u&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},l.prototype._trackGarbageCollection=function(){var u;if(!this._disabledMetrics.gc){var h=l._emitter.getGCData();for(var g in h){var y=h[g].metrics,m=g+" Garbage Collection Duration",w=Math.sqrt(y.sumSquares/y.count-Math.pow(y.total/y.count,2))||0;this._client.trackMetric({name:m,value:y.total,count:y.count,max:y.max,min:y.min,stdDev:w,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,u)})}}},l.prototype._trackEventLoop=function(){var u;if(!this._disabledMetrics.loop){var h=l._emitter.getLoopData(),g=h.loopUsage;if(g.count!=0){var y="Event Loop CPU Time",m=Math.sqrt(g.sumSquares/g.count-Math.pow(g.total/g.count,2))||0;this._client.trackMetric({name:y,value:g.total,count:g.count,min:g.min,max:g.max,stdDev:m,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,u)})}}},l.prototype._trackHeapUsage=function(){var u,h,g;if(!this._disabledMetrics.heap){var y=process.memoryUsage(),m=y.heapUsed,w=y.heapTotal,E=y.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:m,count:1,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,u)}),this._client.trackMetric({name:"Memory Total (Heap)",value:w,count:1,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:E-w,count:1,tagOverrides:(g={},g[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,g)})}},l}();s.AutoCollectNativePerformance=p}),Da=O((s,k)=>{"use strict";var d=ce(),v=function(){function _(p,l,u,h){this._buffer=[],this._lastSend=0,this._isDisabled=p,this._getBatchSize=l,this._getBatchIntervalMs=u,this._sender=h}return _.prototype.setUseDiskRetryCaching=function(p,l,u){this._sender.setDiskRetryMode(p,l,u)},_.prototype.send=function(p){var l=this;if(!this._isDisabled()){if(!p){d.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(p),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){l._timeoutHandle=null,l.triggerSend(!1)},this._getBatchIntervalMs()))}},_.prototype.triggerSend=function(p,l){var u=this._buffer.length<1;u||(p?(this._sender.saveOnCrash(this._buffer),typeof l=="function"&&l("data saved on crash")):this._sender.send(this._buffer,l)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,u&&typeof l=="function"&&l("no data to send")},_}();k.exports=v}),Qo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.azureRoleEnvironmentTelemetryProcessor=void 0;function k(d,v){process.env.WEBSITE_SITE_NAME&&(d.tags[v.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}s.azureRoleEnvironmentTelemetryProcessor=k}),Wo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSamplingHashCode=s.samplingTelemetryProcessor=void 0;var k=_t();function d(_,p){var l=_.sampleRate,u=!1;return l==null||l>=100||_.data&&k.TelemetryType.Metric===k.baseTypeToTelemetryType(_.data.baseType)?!0:(p.correlationContext&&p.correlationContext.operation?u=v(p.correlationContext.operation.id)<l:u=Math.random()*100<l,u)}s.samplingTelemetryProcessor=d;function v(_){var p=-2147483648,l=2147483647,u=5381;if(!_)return 0;for(;_.length<8;)_=_+_;for(var h=0;h<_.length;h++)u=((u<<5)+u|0)+_.charCodeAt(h)|0;return u=u<=p?l:Math.abs(u),u/l*100}s.getSamplingHashCode=v}),Sd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.performanceMetricsTelemetryProcessor=void 0;var k=Gs(),d=_t();function v(_,p){switch(p&&p.addDocument(_),_.data.baseType){case d.TelemetryTypeString.Exception:k.countException();break;case d.TelemetryTypeString.Request:var l=_.data.baseData;k.countRequest(l.duration,l.success);break;case d.TelemetryTypeString.Dependency:var u=_.data.baseData;k.countDependency(u.duration,u.success);break}return!0}s.performanceMetricsTelemetryProcessor=v}),Jl=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(l){for(var u,h=1,g=arguments.length;h<g;h++){u=arguments[h];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.preAggregatedMetricsTelemetryProcessor=void 0;var d=_t(),v=Go(),_=_t();function p(l,u){if(v.isEnabled())switch(l.data.baseType){case _.TelemetryTypeString.Exception:var h=l.data.baseData;h.properties=k(k({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var g={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole]};v.countException(g);break;case _.TelemetryTypeString.Trace:var y=l.data.baseData;y.properties=k(k({},y.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var m={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole],traceSeverityLevel:d.SeverityLevel[y.severity]};v.countTrace(m);break;case _.TelemetryTypeString.Request:var w=l.data.baseData;w.properties=k(k({},w.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var E={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole],operationSynthetic:l.tags[u.keys.operationSyntheticSource],requestSuccess:w.success,requestResultCode:w.responseCode};v.countRequest(w.duration,E);break;case _.TelemetryTypeString.Dependency:var R=l.data.baseData;R.properties=k(k({},R.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var C={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole],operationSynthetic:l.tags[u.keys.operationSyntheticSource],dependencySuccess:R.success,dependencyType:R.type,dependencyTarget:R.target,dependencyResultCode:R.resultCode};v.countDependency(R.duration,C);break}return!0}s.preAggregatedMetricsTelemetryProcessor=p}),kd=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),d=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),d(Qo(),s),d(Wo(),s),d(Sd(),s),d(Jl(),s)}),Ko=O((s,k)=>{"use strict";var d=s&&s.__awaiter||function(E,R,C,D){function x(Q){return Q instanceof C?Q:new C(function(re){re(Q)})}return new(C||(C=Promise))(function(Q,re){function Y(Te){try{_e(D.next(Te))}catch(Re){re(Re)}}function ue(Te){try{_e(D.throw(Te))}catch(Re){re(Re)}}function _e(Te){Te.done?Q(Te.value):x(Te.value).then(Y,ue)}_e((D=D.apply(E,R||[])).next())})},v=s&&s.__generator||function(E,R){var C={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},D,x,Q,re;return re={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function Y(_e){return function(Te){return ue([_e,Te])}}function ue(_e){if(D)throw new TypeError("Generator is already executing.");for(;C;)try{if(D=1,x&&(Q=_e[0]&2?x.return:_e[0]?x.throw||((Q=x.return)&&Q.call(x),0):x.next)&&!(Q=Q.call(x,_e[1])).done)return Q;switch(x=0,Q&&(_e=[_e[0]&2,Q.value]),_e[0]){case 0:case 1:Q=_e;break;case 4:return C.label++,{value:_e[1],done:!1};case 5:C.label++,x=_e[1],_e=[0];continue;case 7:_e=C.ops.pop(),C.trys.pop();continue;default:if(Q=C.trys,!(Q=Q.length>0&&Q[Q.length-1])&&(_e[0]===6||_e[0]===2)){C=0;continue}if(_e[0]===3&&(!Q||_e[1]>Q[0]&&_e[1]<Q[3])){C.label=_e[1];break}if(_e[0]===6&&C.label<Q[1]){C.label=Q[1],Q=_e;break}if(Q&&C.label<Q[2]){C.label=Q[2],C.ops.push(_e);break}Q[2]&&C.ops.pop(),C.trys.pop();continue}_e=R.call(E,C)}catch(Te){_e=[6,Te],x=0}finally{D=Q=0}if(_e[0]&5)throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}},_=q(5747),p=q(2087),l=q(5622),u=q(8761),h=q(3129),g=ce(),y=hs(),m=zr(),w=function(){function E(R,C,D){if(this._redirectedHost=null,this._config=R,this._onSuccess=C,this._onError=D,this._enableDiskRetryMode=!1,this._resendInterval=E.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=E.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=l.join(p.tmpdir(),E.TEMPDIR_PREFIX+this._config.instrumentationKey),!E.OS_PROVIDES_FILE_PROTECTION)if(E.USE_ICACLS){try{E.OS_PROVIDES_FILE_PROTECTION=_.existsSync(E.ICACLS_PATH)}catch(x){}E.OS_PROVIDES_FILE_PROTECTION||g.warn(E.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else E.OS_PROVIDES_FILE_PROTECTION=!0}return E.prototype.setDiskRetryMode=function(R,C,D){var x=this;this._enableDiskRetryMode=E.OS_PROVIDES_FILE_PROTECTION&&R,typeof C=="number"&&C>=0&&(this._resendInterval=Math.floor(C)),typeof D=="number"&&D>=0&&(this._maxBytesOnDisk=Math.floor(D)),R&&!E.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,g.warn(E.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){x._fileCleanupTask()},E.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},E.prototype.send=function(R,C){return d(this,void 0,void 0,function(){var D,x,Q,re,Y=this;return v(this,function(ue){return R&&(D=this._redirectedHost||this._config.endpointUrl,x={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},Q="",R.forEach(function(_e){var Te=Y._stringify(_e);typeof Te=="string"&&(Q+=Te+`
`)}),Q.length>0&&(Q=Q.substring(0,Q.length-1)),re=Buffer.from?Buffer.from(Q):new Buffer(Q),u.gzip(re,function(_e,Te){var Re=Te;_e?(g.warn(_e),Re=re,x.headers["Content-Length"]=re.length.toString()):(x.headers["Content-Encoding"]="gzip",x.headers["Content-Length"]=Te.length.toString()),g.info(E.TAG,x),x[y.disableCollectionRequestOption]=!0;var xe=function(He){He.setEncoding("utf-8");var Qe="";He.on("data",function(ut){Qe+=ut}),He.on("end",function(){if(Y._numConsecutiveFailures=0,Y._enableDiskRetryMode){if(He.statusCode===200)Y._resendTimer||(Y._resendTimer=setTimeout(function(){Y._resendTimer=null,Y._sendFirstFileOnDisk()},Y._resendInterval),Y._resendTimer.unref());else if(Y._isRetriable(He.statusCode))try{var ut=JSON.parse(Qe),at=[];ut.errors.forEach(function(tt){Y._isRetriable(tt.statusCode)&&at.push(R[tt.index])}),at.length>0&&Y._storeToDisk(at)}catch(tt){Y._storeToDisk(R)}}if(He.statusCode===307||He.statusCode===308)if(Y._numConsecutiveRedirects++,Y._numConsecutiveRedirects<10){var Pt=He.headers.location?He.headers.location.toString():null;Pt&&(Y._redirectedHost=Pt,Y.send(R,C))}else typeof C=="function"&&C("Error sending telemetry because of circular redirects.");else Y._numConsecutiveRedirects=0,typeof C=="function"&&C(Qe),g.info(E.TAG,Qe),typeof Y._onSuccess=="function"&&Y._onSuccess(Qe)})},qe=m.makeRequest(Y._config,D,x,xe);qe.on("error",function(He){if(Y._numConsecutiveFailures++,!Y._enableDiskRetryMode||Y._numConsecutiveFailures>0&&Y._numConsecutiveFailures%E.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var Qe="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";Y._enableDiskRetryMode&&(Qe="Ingestion endpoint could not be reached "+Y._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),g.warn(E.TAG,Qe,m.dumpObj(He))}else{var Qe="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";g.info(E.TAG,Qe,m.dumpObj(He))}Y._onErrorHelper(He),typeof C=="function"&&(He&&C(m.dumpObj(He)),C("Error sending telemetry")),Y._enableDiskRetryMode&&Y._storeToDisk(R)}),qe.write(Re),qe.end()})),[2]})})},E.prototype.saveOnCrash=function(R){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(R))},E.prototype._isRetriable=function(R){return R===206||R===408||R===429||R===439||R===500||R===503},E.prototype._runICACLS=function(R,C){var D=h.spawn(E.ICACLS_PATH,R,{windowsHide:!0});D.on("error",function(x){return C(x)}),D.on("close",function(x,Q){return C(x===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+x+")"))})},E.prototype._runICACLSSync=function(R){if(h.spawnSync){var C=h.spawnSync(E.ICACLS_PATH,R,{windowsHide:!0});if(C.error)throw C.error;if(C.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+C.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},E.prototype._getACLIdentity=function(R){if(E.ACL_IDENTITY)return R(null,E.ACL_IDENTITY);var C=h.spawn(E.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),D="";C.stdout.on("data",function(x){return D+=x}),C.on("error",function(x){return R(x,null)}),C.on("close",function(x,Q){return E.ACL_IDENTITY=D&&D.trim(),R(x===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+x+")"),E.ACL_IDENTITY)})},E.prototype._getACLIdentitySync=function(){if(E.ACL_IDENTITY)return E.ACL_IDENTITY;if(h.spawnSync){var R=h.spawnSync(E.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(R.error)throw R.error;if(R.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+R.status+")");return E.ACL_IDENTITY=R.stdout&&R.stdout.toString().trim(),E.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},E.prototype._getACLArguments=function(R,C){return[R,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",C+":(OI)(CI)F","/inheritance:r"]},E.prototype._applyACLRules=function(R,C){var D=this;if(!E.USE_ICACLS)return C(null);if(E.ACLED_DIRECTORIES[R]===void 0)E.ACLED_DIRECTORIES[R]=!1,this._getACLIdentity(function(x,Q){if(x)return E.ACLED_DIRECTORIES[R]=!1,C(x);D._runICACLS(D._getACLArguments(R,Q),function(re){return E.ACLED_DIRECTORIES[R]=!re,C(re)})});else return C(E.ACLED_DIRECTORIES[R]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},E.prototype._applyACLRulesSync=function(R){if(E.USE_ICACLS){if(E.ACLED_DIRECTORIES[R]===void 0){this._runICACLSSync(this._getACLArguments(R,this._getACLIdentitySync())),E.ACLED_DIRECTORIES[R]=!0;return}else if(!E.ACLED_DIRECTORIES[R])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},E.prototype._confirmDirExists=function(R,C){var D=this;_.lstat(R,function(x,Q){x&&x.code==="ENOENT"?_.mkdir(R,function(re){re&&re.code!=="EEXIST"?C(re):D._applyACLRules(R,C)}):!x&&Q.isDirectory()?D._applyACLRules(R,C):C(x||new Error("Path existed but was not a directory"))})},E.prototype._getShallowDirectorySize=function(R,C){_.readdir(R,function(D,x){if(D)return C(D,-1);var Q=null,re=0,Y=0;if(x.length===0){C(null,0);return}for(var ue=0;ue<x.length;ue++)_.stat(l.join(R,x[ue]),function(_e,Te){Y++,_e?Q=_e:Te.isFile()&&(re+=Te.size),Y===x.length&&(Q?C(Q,-1):C(Q,re))})})},E.prototype._getShallowDirectorySizeSync=function(R){for(var C=_.readdirSync(R),D=0,x=0;x<C.length;x++)D+=_.statSync(l.join(R,C[x])).size;return D},E.prototype._storeToDisk=function(R){var C=this;g.info(E.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(D){if(D){g.warn(E.TAG,"Error while checking/creating directory: "+(D&&D.message)),C._onErrorHelper(D);return}C._getShallowDirectorySize(C._tempDir,function(x,Q){if(x||Q<0){g.warn(E.TAG,"Error while checking directory size: "+(x&&x.message)),C._onErrorHelper(x);return}else if(Q>C._maxBytesOnDisk){g.warn(E.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+Q);return}var re=new Date().getTime()+".ai.json",Y=l.join(C._tempDir,re);g.info(E.TAG,"saving data to disk at: "+Y),_.writeFile(Y,C._stringify(R),{mode:384},function(ue){return C._onErrorHelper(ue)})})})},E.prototype._storeToDiskSync=function(R){try{g.info(E.TAG,"Checking existence of data storage directory: "+this._tempDir),_.existsSync(this._tempDir)||_.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var C=this._getShallowDirectorySizeSync(this._tempDir);if(C>this._maxBytesOnDisk){g.info(E.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+C);return}var D=new Date().getTime()+".ai.json",x=l.join(this._tempDir,D);g.info(E.TAG,"saving data before crash to disk at: "+x),_.writeFileSync(x,R,{mode:384})}catch(Q){g.warn(E.TAG,"Error while saving data to disk: "+(Q&&Q.message)),this._onErrorHelper(Q)}},E.prototype._sendFirstFileOnDisk=function(){var R=this;_.exists(this._tempDir,function(C){C&&_.readdir(R._tempDir,function(D,x){if(D)R._onErrorHelper(D);else if(x=x.filter(function(Y){return l.basename(Y).indexOf(".ai.json")>-1}),x.length>0){var Q=x[0],re=l.join(R._tempDir,Q);_.readFile(re,function(Y,ue){Y?R._onErrorHelper(Y):_.unlink(re,function(_e){if(_e)R._onErrorHelper(_e);else try{var Te=JSON.parse(ue.toString());R.send(Te)}catch(Re){g.warn("Failed to read persisted file",Re)}})})}})})},E.prototype._onErrorHelper=function(R){typeof this._onError=="function"&&this._onError(R)},E.prototype._stringify=function(R){try{return JSON.stringify(R)}catch(C){g.warn("Failed to serialize payload",C,R)}},E.prototype._fileCleanupTask=function(){var R=this;_.exists(this._tempDir,function(C){C&&_.readdir(R._tempDir,function(D,x){D?R._onErrorHelper(D):(x=x.filter(function(Q){return l.basename(Q).indexOf(".ai.json")>-1}),x.length>0&&x.forEach(function(Q){var re=new Date(parseInt(Q.split(".ai.json")[0])),Y=new Date(+new Date-E.FILE_RETEMPTION_PERIOD)>re;if(Y){var ue=l.join(R._tempDir,Q);_.unlink(ue,function(_e){_e&&R._onErrorHelper(_e)})}}))})})},E.TAG="Sender",E.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",E.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",E.ACLED_DIRECTORIES={},E.ACL_IDENTITY=null,E.WAIT_BETWEEN_RESEND=60*1e3,E.MAX_BYTES_ON_DISK=50*1024*1024,E.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,E.CLEANUP_TIMEOUT=60*60*1e3,E.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,E.TEMPDIR_PREFIX="appInsights-node",E.OS_PROVIDES_FILE_PROTECTION=!1,E.USE_ICACLS=p.type()==="Windows_NT",E}();k.exports=w}),Zl=O((s,k)=>{"use strict";var d=_t(),v=zr(),_=ji(),p=function(){function u(){}return u.createEnvelope=function(h,g,y,m,w){var E=null;switch(g){case d.TelemetryType.Trace:E=u.createTraceData(h);break;case d.TelemetryType.Dependency:E=u.createDependencyData(h);break;case d.TelemetryType.Event:E=u.createEventData(h);break;case d.TelemetryType.Exception:E=u.createExceptionData(h);break;case d.TelemetryType.Request:E=u.createRequestData(h);break;case d.TelemetryType.Metric:E=u.createMetricData(h);break;case d.TelemetryType.Availability:E=u.createAvailabilityData(h);break;case d.TelemetryType.PageView:E=u.createPageViewData(h);break}if(y&&d.domainSupportsProperties(E.baseData)){if(E&&E.baseData)if(!E.baseData.properties)E.baseData.properties=y;else for(var R in y)E.baseData.properties[R]||(E.baseData.properties[R]=y[R]);E.baseData.properties=v.validateStringMap(E.baseData.properties)}var C=w&&w.instrumentationKey||"",D=new d.Envelope;return D.data=E,D.iKey=C,D.name="Microsoft.ApplicationInsights."+C.replace(/-/g,"")+"."+E.baseType.substr(0,E.baseType.length-4),D.tags=this.getTags(m,h.tagOverrides),D.time=new Date().toISOString(),D.ver=1,D.sampleRate=w?w.samplingPercentage:100,g===d.TelemetryType.Metric&&(D.sampleRate=100),D},u.createTraceData=function(h){var g=new d.MessageData;g.message=h.message,g.properties=h.properties,isNaN(h.severity)?g.severityLevel=d.SeverityLevel.Information:g.severityLevel=h.severity;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Trace),y.baseData=g,y},u.createDependencyData=function(h){var g=new d.RemoteDependencyData;typeof h.name=="string"&&(g.name=h.name.length>1024?h.name.slice(0,1021)+"...":h.name),g.data=h.data,g.target=h.target,g.duration=v.msToTimeSpan(h.duration),g.success=h.success,g.type=h.dependencyTypeName,g.properties=h.properties,g.resultCode=h.resultCode?h.resultCode+"":"",h.id?g.id=h.id:g.id=v.w3cTraceId();var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Dependency),y.baseData=g,y},u.createEventData=function(h){var g=new d.EventData;g.name=h.name,g.properties=h.properties,g.measurements=h.measurements;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Event),y.baseData=g,y},u.createExceptionData=function(h){var g=new d.ExceptionData;g.properties=h.properties,isNaN(h.severity)?g.severityLevel=d.SeverityLevel.Error:g.severityLevel=h.severity,g.measurements=h.measurements,g.exceptions=[];var y=h.exception.stack,m=new d.ExceptionDetails;m.message=h.exception.message,m.typeName=h.exception.name,m.parsedStack=this.parseStack(y),m.hasFullStack=v.isArray(m.parsedStack)&&m.parsedStack.length>0,g.exceptions.push(m);var w=new d.Data;return w.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Exception),w.baseData=g,w},u.createRequestData=function(h){var g=new d.RequestData;h.id?g.id=h.id:g.id=v.w3cTraceId(),g.name=h.name,g.url=h.url,g.source=h.source,g.duration=v.msToTimeSpan(h.duration),g.responseCode=h.resultCode?h.resultCode+"":"",g.success=h.success,g.properties=h.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Request),y.baseData=g,y},u.createMetricData=function(h){var g=new d.MetricData;g.metrics=[];var y=new d.DataPoint;y.count=isNaN(h.count)?1:h.count,y.kind=d.DataPointType.Aggregation,y.max=isNaN(h.max)?h.value:h.max,y.min=isNaN(h.min)?h.value:h.min,y.name=h.name,y.stdDev=isNaN(h.stdDev)?0:h.stdDev,y.value=h.value,g.metrics.push(y),g.properties=h.properties;var m=new d.Data;return m.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Metric),m.baseData=g,m},u.createAvailabilityData=function(h){var g=new d.AvailabilityData;h.id?g.id=h.id:g.id=v.w3cTraceId(),g.name=h.name,g.duration=v.msToTimeSpan(h.duration),g.success=h.success,g.runLocation=h.runLocation,g.message=h.message,g.measurements=h.measurements,g.properties=h.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Availability),y.baseData=g,y},u.createPageViewData=function(h){var g=new d.PageViewData;g.name=h.name,g.duration=v.msToTimeSpan(h.duration),g.url=h.url,g.measurements=h.measurements,g.properties=h.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.PageView),y.baseData=g,y},u.getTags=function(h,g){var y=_.CorrelationContextManager.getCurrentContext(),m={};if(h&&h.tags)for(var w in h.tags)m[w]=h.tags[w];if(g)for(var w in g)m[w]=g[w];return y&&(m[h.keys.operationId]=m[h.keys.operationId]||y.operation.id,m[h.keys.operationName]=m[h.keys.operationName]||y.operation.name,m[h.keys.operationParentId]=m[h.keys.operationParentId]||y.operation.parentId),m},u.parseStack=function(h){var g=void 0;if(typeof h=="string"){var y=h.split(`
`);g=[];for(var m=0,w=0,E=0;E<=y.length;E++){var R=y[E];if(l.regex.test(R)){var C=new l(y[E],m++);w+=C.sizeInBytes,g.push(C)}}var D=32*1024;if(w>D)for(var x=0,Q=g.length-1,re=0,Y=x,ue=Q;x<Q;){var _e=g[x].sizeInBytes,Te=g[Q].sizeInBytes;if(re+=_e+Te,re>D){var Re=ue-Y+1;g.splice(Y,Re);break}Y=x,ue=Q,x++,Q--}}return g},u}(),l=function(){function u(h,g){this.sizeInBytes=0,this.level=g,this.method="<no_method>",this.assembly=v.trim(h);var y=h.match(u.regex);y&&y.length>=5&&(this.method=v.trim(y[2])||this.method,this.fileName=v.trim(y[4])||"<no_filename>",this.line=parseInt(y[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=u.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return u.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,u.baseSize=58,u}();k.exports=p}),ec=O((s,k)=>{"use strict";var d=q(8835),v=zo(),_=Vs(),p=_t(),l=Da(),u=kd(),h=ji(),g=Ko(),y=zr(),m=ce(),w=Zl(),E=function(){function R(C){this._telemetryProcessors=[],this._enableAzureProperties=!1;var D=new v(C);this.config=D,this.context=new _,this.commonProperties={};var x=new g(this.config);this.channel=new l(function(){return D.disableAppInsights},function(){return D.maxBatchSize},function(){return D.maxBatchIntervalMs},x)}return R.prototype.trackAvailability=function(C){this.track(C,p.TelemetryType.Availability)},R.prototype.trackPageView=function(C){this.track(C,p.TelemetryType.PageView)},R.prototype.trackTrace=function(C){this.track(C,p.TelemetryType.Trace)},R.prototype.trackMetric=function(C){this.track(C,p.TelemetryType.Metric)},R.prototype.trackException=function(C){C&&C.exception&&!y.isError(C.exception)&&(C.exception=new Error(C.exception.toString())),this.track(C,p.TelemetryType.Exception)},R.prototype.trackEvent=function(C){this.track(C,p.TelemetryType.Event)},R.prototype.trackRequest=function(C){this.track(C,p.TelemetryType.Request)},R.prototype.trackDependency=function(C){C&&!C.target&&C.data&&(C.target=d.parse(C.data).host),this.track(C,p.TelemetryType.Dependency)},R.prototype.flush=function(C){this.channel.triggerSend(C?!!C.isAppCrashing:!1,C?C.callback:void 0)},R.prototype.track=function(C,D){if(C&&p.telemetryTypeToBaseType(D)){var x=w.createEnvelope(C,D,this.commonProperties,this.context,this.config);C.time&&(x.time=C.time.toISOString()),this._enableAzureProperties&&u.azureRoleEnvironmentTelemetryProcessor(x,this.context);var Q=this.runTelemetryProcessors(x,C.contextObjects);Q=Q&&u.samplingTelemetryProcessor(x,{correlationContext:h.CorrelationContextManager.getCurrentContext()}),u.preAggregatedMetricsTelemetryProcessor(x,this.context),Q&&(u.performanceMetricsTelemetryProcessor(x,this.quickPulseClient),this.channel.send(x))}else m.warn("track() requires telemetry object and telemetryType to be specified.")},R.prototype.setAutoPopulateAzureProperties=function(C){this._enableAzureProperties=C},R.prototype.addTelemetryProcessor=function(C){this._telemetryProcessors.push(C)},R.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},R.prototype.runTelemetryProcessors=function(C,D){var x=!0,Q=this._telemetryProcessors.length;if(Q===0)return x;D=D||{},D.correlationContext=h.CorrelationContextManager.getCurrentContext();for(var re=0;re<Q;++re)try{var Y=this._telemetryProcessors[re];if(Y&&Y.apply(null,[C,D])===!1){x=!1;break}}catch(ue){x=!0,m.warn("One of telemetry processors failed, telemetry item will be sent.",ue,C)}return x&&(C&&C.tags&&(C.tags=y.validateStringMap(C.tags)),C&&C.data&&C.data.baseData&&C.data.baseData.properties&&(C.data.baseData.properties=y.validateStringMap(C.data.baseData.properties))),x},R}();k.exports=E}),tc=O((s,k)=>{"use strict";var d=s&&s.__extends||function(){var h=function(g,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(m[E]=w[E])},h(g,y)};return function(g,y){h(g,y);function m(){this.constructor=g}g.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),v=ec(),_=Vo(),p=hs(),l=ce(),u=function(h){d(g,h);function g(){return h!==null&&h.apply(this,arguments)||this}return g.prototype.trackNodeHttpRequestSync=function(y){y&&y.request&&y.response&&y.duration?_.trackRequestSync(this,y):l.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},g.prototype.trackNodeHttpRequest=function(y){(y.duration||y.error)&&l.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),y&&y.request&&y.response?_.trackRequest(this,y):l.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},g.prototype.trackNodeHttpDependency=function(y){y&&y.request?p.trackRequest(this,y):l.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},g}(v);k.exports=u}),rc=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Yo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.Configuration=s.wrapWithCorrelationContext=s.startOperation=s.getCorrelationContext=s.start=s.setup=s.liveMetricsClient=s.defaultClient=s.DistributedTracingModes=void 0;var k=ji(),d=ds(),v=Vl(),_=Gs(),p=Go(),l=Wl(),u=hs(),h=Vo(),g=$i(),y=ce(),m=Yl(),w=Xl();s.TelemetryClient=tc(),s.Contracts=_t(),s.azureFunctionsTypes=rc();var E;(function(et){et[et.AI=0]="AI",et[et.AI_AND_W3C=1]="AI_AND_W3C"})(E=s.DistributedTracingModes||(s.DistributedTracingModes={}));var R=!0,C=!1,D=!0,x=!0,Q=!0,re=!1,Y=!0,ue=!0,_e=!0,Te=!0,Re,xe=!1,qe=!0,He,Qe=void 0,ut=void 0,at,Pt,tt,Fe,Be,Ve,Xe,rt,lt=!1,Je;function kt(et){return s.defaultClient?y.info("The default client is already setup"):(s.defaultClient=new s.TelemetryClient(et),at=new d(s.defaultClient),Pt=new v(s.defaultClient),tt=new _(s.defaultClient),Fe=new p(s.defaultClient),Be=new l(s.defaultClient),Xe=new h(s.defaultClient),rt=new u(s.defaultClient),Ve||(Ve=new w.AutoCollectNativePerformance(s.defaultClient))),s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(_e,Qe,ut),er}s.setup=kt;function qt(){return s.defaultClient?(lt=!0,at.enable(R,C),Pt.enable(D),tt.enable(x),Fe.enable(Q),Be.enable(re,s.defaultClient.config),Ve.enable(qe,He),Xe.useAutoCorrelation(Te,Re),Xe.enable(Y),rt.enable(ue),s.liveMetricsClient&&xe&&s.liveMetricsClient.enable(xe)):y.warn("Start cannot be called before setup"),er}s.start=qt;function At(){return Te?k.CorrelationContextManager.getCurrentContext():null}s.getCorrelationContext=At;function Tt(et,Ze){return k.CorrelationContextManager.startOperation(et,Ze)}s.startOperation=Tt;function vt(et,Ze){return k.CorrelationContextManager.wrapCallback(et,Ze)}s.wrapWithCorrelationContext=vt;var er=function(){function et(){}return et.setDistributedTracingMode=function(Ze){return g.w3cEnabled=Ze===E.AI_AND_W3C,et},et.setAutoCollectConsole=function(Ze,ot){return ot===void 0&&(ot=!1),R=Ze,C=ot,lt&&at.enable(Ze,ot),et},et.setAutoCollectExceptions=function(Ze){return D=Ze,lt&&Pt.enable(Ze),et},et.setAutoCollectPerformance=function(Ze,ot){ot===void 0&&(ot=!0),x=Ze;var Et=w.AutoCollectNativePerformance.parseEnabled(ot);return qe=Et.isEnabled,He=Et.disabledMetrics,lt&&(tt.enable(Ze),Ve.enable(Et.isEnabled,Et.disabledMetrics)),et},et.setAutoCollectPreAggregatedMetrics=function(Ze){return Q=Ze,lt&&Fe.enable(Ze),et},et.setAutoCollectHeartbeat=function(Ze){return re=Ze,lt&&Be.enable(Ze,s.defaultClient.config),et},et.setAutoCollectRequests=function(Ze){return Y=Ze,lt&&Xe.enable(Ze),et},et.setAutoCollectDependencies=function(Ze){return ue=Ze,lt&&rt.enable(Ze),et},et.setAutoDependencyCorrelation=function(Ze,ot){return Te=Ze,Re=ot,lt&&Xe.useAutoCorrelation(Ze,ot),et},et.setUseDiskRetryCaching=function(Ze,ot,Et){return _e=Ze,Qe=ot,ut=Et,s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(Ze,ot,Et),et},et.setInternalLogging=function(Ze,ot){return Ze===void 0&&(Ze=!1),ot===void 0&&(ot=!0),y.enableDebug=Ze,y.disableWarnings=!ot,et},et.setSendLiveMetrics=function(Ze){return Ze===void 0&&(Ze=!1),s.defaultClient?(!s.liveMetricsClient&&Ze?(s.liveMetricsClient=new m(s.defaultClient.config,null),Je=new _(s.liveMetricsClient,1e3,!0),s.liveMetricsClient.addCollector(Je),s.defaultClient.quickPulseClient=s.liveMetricsClient):s.liveMetricsClient&&s.liveMetricsClient.enable(Ze),xe=Ze,et):(y.warn("Live metrics client cannot be setup without the default client"),et)},et.start=qt,et}();s.Configuration=er;function or(){g.w3cEnabled=!0,s.defaultClient=null,lt=!1,at&&at.dispose(),Pt&&Pt.dispose(),tt&&tt.dispose(),Fe&&Fe.dispose(),Be&&Be.dispose(),Ve&&Ve.dispose(),Xe&&Xe.dispose(),rt&&rt.dispose(),s.liveMetricsClient&&(s.liveMetricsClient.enable(!1),xe=!1,s.liveMetricsClient=void 0)}s.dispose=or});V(ne,{default:()=>Kn});var Oa=j(q(2087)),zi=j(q(7549)),Lt=j(q(7549)),Zr=j(q(7549)),Le;(function(s){s.ON="on",s.OFF="off"})(Le||(Le={}));function ps(){let s="telemetry",k="enableTelemetry";return Zr.env.isTelemetryEnabled!==void 0?Zr.env.isTelemetryEnabled?Le.ON:Le.OFF:Zr.workspace.getConfiguration(s).get(k)?Le.ON:Le.OFF}var Td=class{constructor(s,k,d,v,_){this.extensionId=s,this.extensionVersion=k,this.telemetryAppender=d,this.osShim=v,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!_,this.updateUserOptStatus(),Lt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(Lt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(Lt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(Lt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let s=ps();this.userOptIn=s===Le.ON,this.errorOptIn=s===Le.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(s){if(!s)return"none";let k="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(d=>{s.indexOf(`${d}+`)===0&&(k=d)}),k}get extension(){return this._extension===void 0&&(this._extension=Lt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(s,k){if(s===null||typeof s!="object"||typeof k!="function")return s;let d={};for(let v in s)d[v]=k(v,s[v]);return d}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(Lt.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===Lt.ExtensionKind.Workspace||Lt.env.uiKind===Lt.UIKind.Web):!0}getCommonProperties(){let s=Object.create(null);if(s["common.os"]=this.osShim.platform,s["common.nodeArch"]=this.osShim.architecture,s["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),s["common.extname"]=this.extensionId,s["common.extversion"]=this.extensionVersion,Lt&&Lt.env){switch(s["common.vscodemachineid"]=Lt.env.machineId,s["common.vscodesessionid"]=Lt.env.sessionId,s["common.vscodeversion"]=Lt.version,s["common.isnewappinstall"]=Lt.env.isNewAppInstall?Lt.env.isNewAppInstall.toString():"false",s["common.product"]=Lt.env.appHost,Lt.env.uiKind){case Lt.UIKind.Web:s["common.uikind"]="web";break;case Lt.UIKind.Desktop:s["common.uikind"]="desktop";break;default:s["common.uikind"]="unknown"}s["common.remotename"]=this.cleanRemoteName(Lt.env.remoteName)}return s}anonymizeFilePaths(s,k){let d;if(s==null)return"";let v=[];Lt.env.appRoot!==""&&v.push(new RegExp(Lt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&v.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let _=s;if(k){let p=[];for(let g of v)for(;(d=g.exec(s))&&d;)p.push([d.index,g.lastIndex]);let l=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,u=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,h=0;for(_="";(d=u.exec(s))&&d;)d[0]&&!l.test(d[0])&&p.every(([g,y])=>d.index<g||d.index>=y)&&(_+=s.substring(h,d.index)+"<REDACTED: user-file-path>",h=u.lastIndex);h<s.length&&(_+=s.substr(h))}for(let p of v)_=_.replace(p,"");return _}removePropertiesWithPossibleUserInfo(s){if(typeof s!="object")return;let k=Object.create(null);for(let d of Object.keys(s)){let v=s[d];if(!v)continue;let _=/@[a-zA-Z0-9-.]+/;/(key|token|sig|signature|password|passwd|pwd)[="':\s]/.test(v.toLowerCase())?k[d]="<REDACTED: secret>":_.test(v)?k[d]="<REDACTED: email>":k[d]=v}return k}sendTelemetryEvent(s,k,d){if(this.userOptIn&&s!==""){k=G(G({},k),this.getCommonProperties());let v=this.cloneAndChange(k,(_,p)=>this.anonymizeFilePaths(p,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:d})}}sendRawTelemetryEvent(s,k,d){this.userOptIn&&s!==""&&(k=G(G({},k),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:k,measurements:d}))}sendTelemetryErrorEvent(s,k,d,v){if(this.errorOptIn&&s!==""){k=G(G({},k),this.getCommonProperties());let _=this.cloneAndChange(k,(p,l)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(l,this.firstParty):v===void 0||v.indexOf(p)!==-1?"REDACTED":this.anonymizeFilePaths(l,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(_),measurements:d})}}sendTelemetryException(s,k,d){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&s){k=G(G({},k),this.getCommonProperties());let v=this.cloneAndChange(k,(_,p)=>this.anonymizeFilePaths(p,this.firstParty));s.stack&&(s.stack=this.anonymizeFilePaths(s.stack,this.firstParty)),this.telemetryAppender.logException(s,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:d})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(s=>s.dispose()))}},Rd=class{constructor(s,k){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=k,this._key=s,ps()!==Le.OFF&&this.instantiateAppender()}logEvent(s,k){if(!this._telemetryClient){!this._isInstantiated&&ps()===Le.ON&&this._eventQueue.push({eventName:s,data:k});return}this._telemetryClient.logEvent(s,k)}logException(s,k){if(!this._telemetryClient){!this._isInstantiated&&ps()!==Le.OFF&&this._exceptionQueue.push({exception:s,data:k});return}this._telemetryClient.logException(s,k)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:s,data:k})=>this.logEvent(s,k)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:s,data:k})=>this.logException(s,k)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(s=>{this._telemetryClient=s,this._isInstantiated=!0,this._flushQueues()}).catch(s=>{console.error(s)})}},Cd=async s=>{let k;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let d=await Promise.resolve().then(()=>j(Yo()));d.defaultClient?(k=new d.TelemetryClient(s),k.channel.setUseDiskRetryCaching(!0)):(d.setup(s).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),k=d.defaultClient),zi&&zi.env&&(k.context.tags[k.context.keys.userId]=zi.env.machineId,k.context.tags[k.context.keys.sessionId]=zi.env.sessionId,k.context.tags[k.context.keys.cloudRole]=zi.env.appName,k.context.tags[k.context.keys.cloudRoleInstance]=zi.env.appName),s&&s.indexOf("AIF-")===0&&(k.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(d){return Promise.reject(d)}return{logEvent:(d,v)=>{k==null||k.trackEvent({name:d,properties:v==null?void 0:v.properties,measurements:v==null?void 0:v.measurements})},logException:(d,v)=>{k==null||k.trackException({exception:d,properties:v==null?void 0:v.properties,measurements:v==null?void 0:v.measurements})},flush:async()=>{k==null||k.flush()}}},Kn=class extends Td{constructor(s,k,d,v){let _=new Rd(d,Cd);d&&d.indexOf("AIF-")===0&&(v=!0),super(s,k,_,{release:Oa.release(),platform:Oa.platform(),architecture:Oa.arch()},v)}}},3255:c=>{function ne(q){var W=new Error("Cannot find module '"+q+"'");throw W.code="MODULE_NOT_FOUND",W}ne.keys=()=>[],ne.resolve=ne,ne.id=3255,c.exports=ne},9118:c=>{function ne(q){var W=new Error("Cannot find module '"+q+"'");throw W.code="MODULE_NOT_FOUND",W}ne.keys=()=>[],ne.resolve=ne,ne.id=9118,c.exports=ne},9035:(c,ne,q)=>{"use strict";var W;W={value:!0};var Z=q(5654);ne.X7=Z.getExperimentationService,W=Z.getExperimentationServiceAsync;var ie=q(2560);ne.aU=ie.TargetPopulation},5708:(c,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(Z){this.mementoGlobalStorage=Z}async getValue(Z,ie){return await this.mementoGlobalStorage.get(Z)||ie}setValue(Z,ie){this.mementoGlobalStorage.update(Z,ie)}}ne.MementoKeyValueStorage=q},2560:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(7549);class Z{constructor(L,I,P){this.extensionName=L,this.extensionVersion=I,this.targetPopulation=P}static trimVersionSuffix(L){const I=/\-[a-zA-Z0-9]+$/;return L.split(I)[0]}getFilterValue(L){switch(L){case ie.ApplicationVersion:return Z.trimVersionSuffix(W.version);case ie.Build:return W.env.appName;case ie.ClientId:return W.env.machineId;case ie.ExtensionName:return this.extensionName;case ie.ExtensionVersion:return Z.trimVersionSuffix(this.extensionVersion);case ie.Language:return W.env.language;case ie.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let L=new Map,I=Object.values(ie);for(let P of I)L.set(P,this.getFilterValue(P));return L}}ne.VSCodeFilterProvider=Z;var ie;(function(M){M.Market="X-MSEdge-Market",M.CorpNet="X-FD-Corpnet",M.ApplicationVersion="X-VSCode-AppVersion",M.Build="X-VSCode-Build",M.ClientId="X-MSEdge-ClientId",M.ExtensionName="X-VSCode-ExtensionName",M.ExtensionVersion="X-VSCode-ExtensionVersion",M.Language="X-VSCode-Language",M.TargetPopulation="X-VSCode-TargetPopulation"})(ie=ne.Filters||(ne.Filters={}));var U;(function(M){M.Team="team",M.Internal="internal",M.Insiders="insider",M.Public="public"})(U=ne.TargetPopulation||(ne.TargetPopulation={}))},5654:(c,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(2560),Z=q(4802),ie=q(5708),U="https://default.exp-tas.com/vscode/ab",M="query-expfeature",L="VSCode.ABExp.Features",I="abexp.assignmentcontext",P="VSCode.ABExp.FeatureData",$=1e3*60*30;function G(O,V,B,j,ce,...te){if(!ce)throw new Error("Memento storage was not provided.");const me=[new W.VSCodeFilterProvider(O,V,B),...te],De=new ie.MementoKeyValueStorage(ce);return new Z.ExperimentationService({filterProviders:me,telemetry:j,storageKey:P,keyValueStorage:De,featuresTelemetryPropertyName:L,assignmentContextTelemetryPropertyName:I,telemetryEventName:M,endpoint:U,refetchInterval:$})}ne.getExperimentationService=G;async function z(O,V,B,j,ce,...te){const Se=G(O,V,B,j,ce,...te);return await Se.initializePromise,Se}ne.getExperimentationServiceAsync=z},2479:c=>{c.exports=ne;function ne(q,W){if(q&&W)return ne(q)(W);if(typeof q!="function")throw new TypeError("need wrapper function");return Object.keys(q).forEach(function(ie){Z[ie]=q[ie]}),Z;function Z(){for(var ie=new Array(arguments.length),U=0;U<ie.length;U++)ie[U]=arguments[U];var M=q.apply(this,ie),L=ie[ie.length-1];return typeof M=="function"&&M!==L&&Object.keys(L).forEach(function(I){M[I]=L[I]}),M}}},9602:c=>{"use strict";c.exports=function(ne){ne.prototype[Symbol.iterator]=function*(){for(let q=this.head;q;q=q.next)yield q.value}}},4411:(c,ne,q)=>{"use strict";c.exports=W,W.Node=M,W.create=W;function W(L){var I=this;if(I instanceof W||(I=new W),I.tail=null,I.head=null,I.length=0,L&&typeof L.forEach=="function")L.forEach(function(G){I.push(G)});else if(arguments.length>0)for(var P=0,$=arguments.length;P<$;P++)I.push(arguments[P]);return I}W.prototype.removeNode=function(L){if(L.list!==this)throw new Error("removing node which does not belong to this list");var I=L.next,P=L.prev;return I&&(I.prev=P),P&&(P.next=I),L===this.head&&(this.head=I),L===this.tail&&(this.tail=P),L.list.length--,L.next=null,L.prev=null,L.list=null,I},W.prototype.unshiftNode=function(L){if(L!==this.head){L.list&&L.list.removeNode(L);var I=this.head;L.list=this,L.next=I,I&&(I.prev=L),this.head=L,this.tail||(this.tail=L),this.length++}},W.prototype.pushNode=function(L){if(L!==this.tail){L.list&&L.list.removeNode(L);var I=this.tail;L.list=this,L.prev=I,I&&(I.next=L),this.tail=L,this.head||(this.head=L),this.length++}},W.prototype.push=function(){for(var L=0,I=arguments.length;L<I;L++)ie(this,arguments[L]);return this.length},W.prototype.unshift=function(){for(var L=0,I=arguments.length;L<I;L++)U(this,arguments[L]);return this.length},W.prototype.pop=function(){if(!!this.tail){var L=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,L}},W.prototype.shift=function(){if(!!this.head){var L=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,L}},W.prototype.forEach=function(L,I){I=I||this;for(var P=this.head,$=0;P!==null;$++)L.call(I,P.value,$,this),P=P.next},W.prototype.forEachReverse=function(L,I){I=I||this;for(var P=this.tail,$=this.length-1;P!==null;$--)L.call(I,P.value,$,this),P=P.prev},W.prototype.get=function(L){for(var I=0,P=this.head;P!==null&&I<L;I++)P=P.next;if(I===L&&P!==null)return P.value},W.prototype.getReverse=function(L){for(var I=0,P=this.tail;P!==null&&I<L;I++)P=P.prev;if(I===L&&P!==null)return P.value},W.prototype.map=function(L,I){I=I||this;for(var P=new W,$=this.head;$!==null;)P.push(L.call(I,$.value,this)),$=$.next;return P},W.prototype.mapReverse=function(L,I){I=I||this;for(var P=new W,$=this.tail;$!==null;)P.push(L.call(I,$.value,this)),$=$.prev;return P},W.prototype.reduce=function(L,I){var P,$=this.head;if(arguments.length>1)P=I;else if(this.head)$=this.head.next,P=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var G=0;$!==null;G++)P=L(P,$.value,G),$=$.next;return P},W.prototype.reduceReverse=function(L,I){var P,$=this.tail;if(arguments.length>1)P=I;else if(this.tail)$=this.tail.prev,P=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var G=this.length-1;$!==null;G--)P=L(P,$.value,G),$=$.prev;return P},W.prototype.toArray=function(){for(var L=new Array(this.length),I=0,P=this.head;P!==null;I++)L[I]=P.value,P=P.next;return L},W.prototype.toArrayReverse=function(){for(var L=new Array(this.length),I=0,P=this.tail;P!==null;I++)L[I]=P.value,P=P.prev;return L},W.prototype.slice=function(L,I){I=I||this.length,I<0&&(I+=this.length),L=L||0,L<0&&(L+=this.length);var P=new W;if(I<L||I<0)return P;L<0&&(L=0),I>this.length&&(I=this.length);for(var $=0,G=this.head;G!==null&&$<L;$++)G=G.next;for(;G!==null&&$<I;$++,G=G.next)P.push(G.value);return P},W.prototype.sliceReverse=function(L,I){I=I||this.length,I<0&&(I+=this.length),L=L||0,L<0&&(L+=this.length);var P=new W;if(I<L||I<0)return P;L<0&&(L=0),I>this.length&&(I=this.length);for(var $=this.length,G=this.tail;G!==null&&$>I;$--)G=G.prev;for(;G!==null&&$>L;$--,G=G.prev)P.push(G.value);return P},W.prototype.splice=function(L,I,...P){L>this.length&&(L=this.length-1),L<0&&(L=this.length+L);for(var $=0,G=this.head;G!==null&&$<L;$++)G=G.next;for(var z=[],$=0;G&&$<I;$++)z.push(G.value),G=this.removeNode(G);G===null&&(G=this.tail),G!==this.head&&G!==this.tail&&(G=G.prev);for(var $=0;$<P.length;$++)G=Z(this,G,P[$]);return z},W.prototype.reverse=function(){for(var L=this.head,I=this.tail,P=L;P!==null;P=P.prev){var $=P.prev;P.prev=P.next,P.next=$}return this.head=I,this.tail=L,this};function Z(L,I,P){var $=I===L.head?new M(P,null,I,L):new M(P,I,I.next,L);return $.next===null&&(L.tail=$),$.prev===null&&(L.head=$),L.length++,$}function ie(L,I){L.tail=new M(I,L.tail,null,L),L.head||(L.head=L.tail),L.length++}function U(L,I){L.head=new M(I,null,L.head,L),L.tail||(L.tail=L.head),L.length++}function M(L,I,P,$){if(!(this instanceof M))return new M(L,I,P,$);this.list=$,this.value=L,I?(I.next=this,this.prev=I):this.prev=null,P?(P.prev=this,this.next=P):this.next=null}try{q(9602)(W)}catch(L){}},9329:(c,ne,q)=>{c.exports=q(516).Observable},516:(c,ne)=>{"use strict";var q;q={value:!0},ne.Observable=void 0;function W(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")}function Z(ee,J){for(var X=0;X<J.length;X++){var he=J[X];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ee,he.key,he)}}function ie(ee,J,X){return J&&Z(ee.prototype,J),X&&Z(ee,X),ee}var U=function(){return typeof Symbol=="function"},M=function(ee){return U()&&Boolean(Symbol[ee])},L=function(ee){return M(ee)?Symbol[ee]:"@@"+ee};U()&&!M("observable")&&(Symbol.observable=Symbol("observable"));var I=L("iterator"),P=L("observable"),$=L("species");function G(ee,J){var X=ee[J];if(X!=null){if(typeof X!="function")throw new TypeError(X+" is not a function");return X}}function z(ee){var J=ee.constructor;return J!==void 0&&(J=J[$],J===null&&(J=void 0)),J!==void 0?J:oe}function O(ee){return ee instanceof oe}function V(ee){V.log?V.log(ee):setTimeout(function(){throw ee})}function B(ee){Promise.resolve().then(function(){try{ee()}catch(J){V(J)}})}function j(ee){var J=ee._cleanup;if(J!==void 0&&(ee._cleanup=void 0,!!J))try{if(typeof J=="function")J();else{var X=G(J,"unsubscribe");X&&X.call(J)}}catch(he){V(he)}}function ce(ee){ee._observer=void 0,ee._queue=void 0,ee._state="closed"}function te(ee){var J=ee._queue;if(!!J){ee._queue=void 0,ee._state="ready";for(var X=0;X<J.length&&(Se(ee,J[X].type,J[X].value),ee._state!=="closed");++X);}}function Se(ee,J,X){ee._state="running";var he=ee._observer;try{var be=G(he,J);switch(J){case"next":be&&be.call(he,X);break;case"error":if(ce(ee),be)be.call(he,X);else throw X;break;case"complete":ce(ee),be&&be.call(he);break}}catch(Ee){V(Ee)}ee._state==="closed"?j(ee):ee._state==="running"&&(ee._state="ready")}function me(ee,J,X){if(ee._state!=="closed"){if(ee._state==="buffering"){ee._queue.push({type:J,value:X});return}if(ee._state!=="ready"){ee._state="buffering",ee._queue=[{type:J,value:X}],B(function(){return te(ee)});return}Se(ee,J,X)}}var De=function(){function ee(J,X){W(this,ee),this._cleanup=void 0,this._observer=J,this._queue=void 0,this._state="initializing";var he=new pe(this);try{this._cleanup=X.call(void 0,he)}catch(be){he.error(be)}this._state==="initializing"&&(this._state="ready")}return ie(ee,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(ce(this),j(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),ee}(),pe=function(){function ee(J){W(this,ee),this._subscription=J}return ie(ee,[{key:"next",value:function(X){me(this._subscription,"next",X)}},{key:"error",value:function(X){me(this._subscription,"error",X)}},{key:"complete",value:function(){me(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),ee}(),oe=function(){function ee(J){if(W(this,ee),!(this instanceof ee))throw new TypeError("Observable cannot be called as a function");if(typeof J!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=J}return ie(ee,[{key:"subscribe",value:function(X){return(typeof X!="object"||X===null)&&(X={next:X,error:arguments[1],complete:arguments[2]}),new De(X,this._subscriber)}},{key:"forEach",value:function(X){var he=this;return new Promise(function(be,Ee){if(typeof X!="function"){Ee(new TypeError(X+" is not a function"));return}function Pe(){ke.unsubscribe(),be()}var ke=he.subscribe({next:function(ze){try{X(ze,Pe)}catch(je){Ee(je),ke.unsubscribe()}},error:Ee,complete:be})})}},{key:"map",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var be=z(this);return new be(function(Ee){return he.subscribe({next:function(Pe){try{Pe=X(Pe)}catch(ke){return Ee.error(ke)}Ee.next(Pe)},error:function(Pe){Ee.error(Pe)},complete:function(){Ee.complete()}})})}},{key:"filter",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var be=z(this);return new be(function(Ee){return he.subscribe({next:function(Pe){try{if(!X(Pe))return}catch(ke){return Ee.error(ke)}Ee.next(Pe)},error:function(Pe){Ee.error(Pe)},complete:function(){Ee.complete()}})})}},{key:"reduce",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var be=z(this),Ee=arguments.length>1,Pe=!1,ke=arguments[1],ze=ke;return new be(function(je){return he.subscribe({next:function(ct){var pt=!Pe;if(Pe=!0,!pt||Ee)try{ze=X(ze,ct)}catch($t){return je.error($t)}else ze=ct},error:function(ct){je.error(ct)},complete:function(){if(!Pe&&!Ee)return je.error(new TypeError("Cannot reduce an empty sequence"));je.next(ze),je.complete()}})})}},{key:"concat",value:function(){for(var X=this,he=arguments.length,be=new Array(he),Ee=0;Ee<he;Ee++)be[Ee]=arguments[Ee];var Pe=z(this);return new Pe(function(ke){var ze,je=0;function ct(pt){ze=pt.subscribe({next:function($t){ke.next($t)},error:function($t){ke.error($t)},complete:function(){je===be.length?(ze=void 0,ke.complete()):ct(Pe.from(be[je++]))}})}return ct(X),function(){ze&&(ze.unsubscribe(),ze=void 0)}})}},{key:"flatMap",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var be=z(this);return new be(function(Ee){var Pe=[],ke=he.subscribe({next:function(je){if(X)try{je=X(je)}catch(pt){return Ee.error(pt)}var ct=be.from(je).subscribe({next:function(pt){Ee.next(pt)},error:function(pt){Ee.error(pt)},complete:function(){var pt=Pe.indexOf(ct);pt>=0&&Pe.splice(pt,1),ze()}});Pe.push(ct)},error:function(je){Ee.error(je)},complete:function(){ze()}});function ze(){ke.closed&&Pe.length===0&&Ee.complete()}return function(){Pe.forEach(function(je){return je.unsubscribe()}),ke.unsubscribe()}})}},{key:P,value:function(){return this}}],[{key:"from",value:function(X){var he=typeof this=="function"?this:ee;if(X==null)throw new TypeError(X+" is not an object");var be=G(X,P);if(be){var Ee=be.call(X);if(Object(Ee)!==Ee)throw new TypeError(Ee+" is not an object");return O(Ee)&&Ee.constructor===he?Ee:new he(function(Pe){return Ee.subscribe(Pe)})}if(M("iterator")&&(be=G(X,I),be))return new he(function(Pe){B(function(){if(!Pe.closed){var ke=!0,ze=!1,je=void 0;try{for(var ct=be.call(X)[Symbol.iterator](),pt;!(ke=(pt=ct.next()).done);ke=!0){var $t=pt.value;if(Pe.next($t),Pe.closed)return}}catch(Xt){ze=!0,je=Xt}finally{try{!ke&&ct.return!=null&&ct.return()}finally{if(ze)throw je}}Pe.complete()}})});if(Array.isArray(X))return new he(function(Pe){B(function(){if(!Pe.closed){for(var ke=0;ke<X.length;++ke)if(Pe.next(X[ke]),Pe.closed)return;Pe.complete()}})});throw new TypeError(X+" is not observable")}},{key:"of",value:function(){for(var X=arguments.length,he=new Array(X),be=0;be<X;be++)he[be]=arguments[be];var Ee=typeof this=="function"?this:ee;return new Ee(function(Pe){B(function(){if(!Pe.closed){for(var ke=0;ke<he.length;++ke)if(Pe.next(he[ke]),Pe.closed)return;Pe.complete()}})})}},{key:$,get:function(){return this}}]),ee}();ne.Observable=oe,U()&&Object.defineProperty(oe,Symbol("extensions"),{value:{symbol:P,hostReportError:V},configurable:!0})},6591:c=>{"use strict";c.exports=require("applicationinsights-native-metrics")},2357:c=>{"use strict";c.exports=require("assert")},7303:c=>{"use strict";c.exports=require("async_hooks")},3129:c=>{"use strict";c.exports=require("child_process")},7082:c=>{"use strict";c.exports=require("console")},7619:c=>{"use strict";c.exports=require("constants")},6417:c=>{"use strict";c.exports=require("crypto")},881:c=>{"use strict";c.exports=require("dns")},8614:c=>{"use strict";c.exports=require("events")},5747:c=>{"use strict";c.exports=require("fs")},8605:c=>{"use strict";c.exports=require("http")},7211:c=>{"use strict";c.exports=require("https")},2282:c=>{"use strict";c.exports=require("module")},1631:c=>{"use strict";c.exports=require("net")},2087:c=>{"use strict";c.exports=require("os")},5622:c=>{"use strict";c.exports=require("path")},630:c=>{"use strict";c.exports=require("perf_hooks")},2413:c=>{"use strict";c.exports=require("stream")},8213:c=>{"use strict";c.exports=require("timers")},4016:c=>{"use strict";c.exports=require("tls")},3867:c=>{"use strict";c.exports=require("tty")},8835:c=>{"use strict";c.exports=require("url")},1669:c=>{"use strict";c.exports=require("util")},7549:c=>{"use strict";c.exports=require("vscode")},8761:c=>{"use strict";c.exports=require("zlib")}},gd={};function it(c){var ne=gd[c];if(ne!==void 0)return ne.exports;var q=gd[c]={id:c,loaded:!1,exports:{}};return qp[c].call(q.exports,q,q.exports,it),q.loaded=!0,q.exports}(()=>{it.n=c=>{var ne=c&&c.__esModule?()=>c.default:()=>c;return it.d(ne,{a:ne}),ne}})(),(()=>{it.d=(c,ne)=>{for(var q in ne)it.o(ne,q)&&!it.o(c,q)&&Object.defineProperty(c,q,{enumerable:!0,get:ne[q]})}})(),(()=>{it.hmd=c=>(c=Object.create(c),c.children||(c.children=[]),Object.defineProperty(c,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+c.id)}}),c)})(),(()=>{it.o=(c,ne)=>Object.prototype.hasOwnProperty.call(c,ne)})(),(()=>{it.r=c=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}})();var ju={};(()=>{"use strict";it.r(ju),it.d(ju,{activate:()=>ay,deactivate:()=>uy});var c=it(7549),ne=it(8361),q=it.n(ne),W=Object.defineProperty,Z=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ie;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(ie||(ie={}));const U="githubPullRequests",M="logLevel";class L{constructor(){Z(this,"_outputChannel"),Z(this,"_logLevel"),Z(this,"_disposable"),Z(this,"_activePerfMarkers",new Map),this._outputChannel=c.window.createOutputChannel("GitHub Pull Request"),this._disposable=c.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}startPerfMarker(e){const r=new Date().getTime();this._outputChannel.appendLine(`PERF_MARKER> Start ${e}`),this._activePerfMarkers.set(e,r)}endPerfMarker(e){const r=new Date().getTime();this._outputChannel.appendLine(`PERF_MARKER> End ${e}: ${r-this._activePerfMarkers.get(e)} ms`),this._activePerfMarkers.delete(e)}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,a=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${a}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(c.workspace.getConfiguration(U).get(M)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const P=new L;var $=it(5622),G=it(7484),z=it.n(G),O=it(4110),V=it.n(O),B=it(660),j=it.n(B),ce=Object.defineProperty,te=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);z().extend(V(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),z().extend(j()),z().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function Se(t,e){const r=Object.create(null);return t.filter(n=>{const i=e(n);return r[i]?!1:(r[i]=!0,!0)})}function me(t){return t.forEach(e=>e.dispose()),[]}function De(t){return{dispose:t}}function pe(t){return De(()=>me(t))}function oe(...t){return(e,r=null,n)=>{const i=pe(t.map(a=>a(o=>e.call(r,o))));return n&&n.push(i),i}}function ee(t,e){return(r,n=null,i)=>t(a=>e(a)&&r.call(n,a),null,i)}function J(t){return(e,r=null,n)=>{const i=t(a=>(i.dispose(),e.call(r,a)),null,n);return i}}function X(t){return/^[a-zA-Z]:\\/.test(t)}function he(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),X(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function be(t,e){return t.reduce((r,n)=>{const i=e(n);return r[i]=[...r[i]||[],n],r},Object.create(null))}function Ee(t){return!!t.errors}function Pe(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function ke(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:t.stderr?`${t.stderr}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&Pe(t))r=t.errors.map(n=>`Value "${n.value}" cannot be set for field ${n.field} (code: ${n.code})`).join(", ");else if(Ee(t)&&t.errors)return t.errors.map(n=>typeof n=="string"?n:n.message).join(", ");return r&&(e=`${e}: ${r}`),e}const ze=(t,e)=>e(t);async function je(t,e=ze){let r;return new Promise((n,i)=>r=t(a=>{try{Promise.resolve(e(a,n,i)).catch(i)}catch(o){i(o)}})).then(n=>(r.dispose(),n),n=>{throw r.dispose(),n})}function ct(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var pt;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(pt||(pt={}));function $t(t,e){return t<e?-1:t>e?1:0}function Xt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){const S=t.charCodeAt(r),T=e.charCodeAt(i);if(S<T)return-1;if(S>T)return 1}const o=n-r,f=a-i;return o<f?-1:o>f?1:0}function nr(t,e){return Jt(t,e,0,t.length,0,e.length)}function Jt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){let S=t.charCodeAt(r),T=e.charCodeAt(i);if(S===T)continue;const A=S-T;if(!(A===32&&Ur(T))&&!(A===-32&&Ur(S)))return Or(S)&&Or(T)?A:Xt(t.toLowerCase(),e.toLowerCase(),r,n,i,a)}const o=n-r,f=a-i;return o<f?-1:o>f?1:0}function Or(t){return t>=97&&t<=122}function Ur(t){return t>=65&&t<=90}class Sn{constructor(){te(this,"_value",""),te(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}class Rs{constructor(e=!0){this._caseSensitive=e,te(this,"_value"),te(this,"_from"),te(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Xt(e,this._value,0,e.length,this._from,this._to):Jt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ui{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,te(this,"_value"),te(this,"_from"),te(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Xt(e,this._value,0,e.length,this._from,this._to):Jt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var ts;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(ts||(ts={}));class li{constructor(e){this._ignorePathCasing=e,te(this,"_pathIterator"),te(this,"_value"),te(this,"_states",[]),te(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ui(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return nr(e,this._value.scheme);if(this._states[this._stateIdx]===2)return nr(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return $t(e,this._value.query);if(this._states[this._stateIdx]===5)return $t(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class $n{constructor(){te(this,"segment"),te(this,"value"),te(this,"key"),te(this,"left"),te(this,"mid"),te(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class Gt{constructor(e){te(this,"_iter"),te(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new Gt(new li(e))}static forPaths(){return new Gt(new ui)}static forStrings(){return new Gt(new Sn)}static forConfigKeys(){return new Gt(new Rs)}clear(){this._root=void 0}set(e,r){const n=this._iter.reset(e);let i;for(this._root||(this._root=new $n,this._root.segment=n.value()),i=this._root;;){const o=n.cmp(i.segment);if(o>0)i.left||(i.left=new $n,i.left.segment=n.value()),i=i.left;else if(o<0)i.right||(i.right=new $n,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new $n,i.mid.segment=n.value()),i=i.mid;else break}const a=i.value;return i.value=r,i.key=e,a}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),i=[];let a=this._root;for(;a;){const o=n.cmp(a.segment);if(o>0)i.push([1,a]),a=a.left;else if(o<0)i.push([-1,a]),a=a.right;else if(n.hasNext())n.next(),i.push([0,a]),a=a.mid;else{for(r?(a.left=void 0,a.mid=void 0,a.right=void 0):a.value=void 0;i.length>0&&a.isEmpty();){let[f,S]=i.pop();switch(f){case 1:S.left=void 0;break;case 0:S.mid=void 0;break;case-1:S.right=void 0;break}a=S}break}}}findSubstr(e){const r=this._iter.reset(e);let n=this._root,i;for(;n;){const a=r.cmp(n.segment);if(a>0)n=n.left;else if(a<0)n=n.right;else if(r.hasNext())r.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var ci=Object.defineProperty,Zt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ci(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),wt;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(wt||(wt={}));var fr;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(fr||(fr={}));const Gn=class{constructor(){Zt(this,"_providers",new Map),Zt(this,"_onDidOpenRepository",new c.EventEmitter),Zt(this,"onDidOpenRepository",this._onDidOpenRepository.event),Zt(this,"_onDidCloseRepository",new c.EventEmitter),Zt(this,"onDidCloseRepository",this._onDidCloseRepository.event),Zt(this,"_onDidChangeState",new c.EventEmitter),Zt(this,"onDidChangeState",this._onDidChangeState.event),Zt(this,"_onDidPublish",new c.EventEmitter),Zt(this,"onDidPublish",this._onDidPublish.event),Zt(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}_updateReposContext(){const t=Array.from(this._providers.values()).reduce((e,r)=>e+r.repositories.length,0);c.commands.executeCommand("setContext","gitHubOpenRepositoryCount",t)}registerGitProvider(t){P.appendLine("Registering git provider");const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>{P.appendLine(`Repository ${r.rootUri} has been opened`),this._updateReposContext(),this._onDidOpenRepository.fire(r)})),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),this._updateReposContext(),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(n=>this._onDidCloseRepository.fire(n)),this._providers.delete(e)}}}getGitProvider(t){const e=Gt.forUris();return this._providers.forEach(r=>{const n=r.repositories;if(n&&n.length>0)for(const i of n)e.set(i.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return Gn._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let di=Gn;Zt(di,"_handlePool",0);const hi=new Map;function rs(t,e){hi.set(t,e)}function ns(t){hi.delete(t)}function sr(t){for(const e of hi.values())if(e.hasCommentThread(t))return e;P.appendLine(`Unable to find handler for comment thread ${t.gitHubThreadId}`)}var zu=Object.defineProperty,uo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);let Hn;class Cs extends c.Disposable{constructor(e){super(()=>this.disposables.forEach(r=>r.dispose()));this._storageUri=e,uo(this,"SUBPATH","temp"),uo(this,"disposables",[])}get path(){return c.Uri.joinPath(this._storageUri,this.SUBPATH)}addDisposable(e){if(this.disposables.length>30){const r=this.disposables.shift();r==null||r.dispose()}this.disposables.push(e)}async writeState(e,r,n){let i=this.path;const a=c.workspace.workspaceFolders&&c.workspace.workspaceFolders.length>0?c.workspace.workspaceFolders[0].name:void 0;a&&(i=c.Uri.joinPath(i,a)),e&&(i=c.Uri.joinPath(i,e)),await c.workspace.fs.createDirectory(i);const o=c.Uri.joinPath(i,r);await c.workspace.fs.writeFile(o,n);const f={dispose:()=>c.workspace.fs.delete(o,{recursive:!0})};return this.addDisposable(f),o}static async init(e){if(e.globalStorageUri&&!Hn){Hn=new Cs(e.globalStorageUri);try{await c.workspace.fs.delete(Hn.path,{recursive:!0})}catch(r){P.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}try{await c.workspace.fs.createDirectory(Hn.path)}catch(r){P.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}return e.subscriptions.push(Hn),Hn}}static async write(e,r,n){if(!!Hn)return Hn.writeState(e,r,n)}}function Fi(t){return JSON.parse(t)}function Cr(t){try{return JSON.parse(t.query)}catch(e){}}function Qu(t){try{return JSON.parse(t.query)}catch(e){}}const Wu=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],lo=c.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function pa(t,e){try{const{commit:r,baseCommit:n,headCommit:i,isBase:a,path:o}=JSON.parse(t.query),f=t.scheme==="review"?r:a?n:i,{object:S}=await e.getObjectDetails(f,t.fsPath),{mimetype:T}=await e.detectObjectType(S);if(T==="text/plain")return;if(Wu.indexOf(T)>-1){const A=await e.buffer(f,t.fsPath);return Cs.write($.dirname(o),$.basename(o),A)}}catch(r){return}}function cn(t,e,r,n,i,a,o){const f={path:e||t.path,ref:r,commit:n,base:a.base,isOutdated:i,rootPath:o.path};let S=t.path;return a.replaceFileExtension&&(S=`${S}.git`),t.with({scheme:"review",path:S,query:JSON.stringify(f)})}function co(t,e,r,n){const i={prNumber:e,fileName:r,status:n};return t.with({scheme:"filechange",query:JSON.stringify(i)})}function Ft(t){try{return t.query?JSON.parse(t.query):void 0}catch(e){}}function Vn(t,e,r,n,i,a,o){const f={baseCommit:r,headCommit:n,isBase:a,fileName:i,prNumber:e.number,status:o,remoteName:e.githubRepository.remote.remoteName},S=t.path;return t.with({scheme:"pr",path:S,query:JSON.stringify(f)})}var Ps;(function(t){t.file="file"})(Ps||(Ps={}));function Bn(t,e){return t.scheme===Ps.file?$.resolve(t.fsPath,e):$.posix.resolve(t.path,e)}class Ku extends c.EventEmitter{handleUri(e){this.fire(e)}}const Yu=new Ku,jn="GitHub.vscode-pull-request-github",Ns="git",ma="ghpr",fa="initialize",ho="statechange",Li="github:focusedReview",po=require("buffer");var Xu=it(4063),ga=it.n(Xu),Ht;(function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"})(Ht||(Ht={}));var $r;(function(t){t.DISMISSED="DISMISSED",t.VIEWED="VIEWED",t.UNVIEWED="UNVIEWED"})($r||($r={}));var nt;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(nt||(nt={}));class mo{constructor(e,r,n,i,a,o,f,S){this.baseCommit=e,this.status=r,this.fileName=n,this.previousFileName=i,this.patch=a,this.diffHunks=o,this.isPartial=f,this.blobUrl=S}}class qi{constructor(e,r,n,i,a){this.baseCommit=e,this.blobUrl=r,this.status=n,this.fileName=i,this.previousFileName=a}}var Ju=Object.defineProperty,Zu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Gr;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(Gr||(Gr={}));class va{constructor(e,r,n,i,a,o=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=n,this.positionInHunk=i,this._raw=a,this.endwithLineBreak=o}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function el(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class tl{constructor(e,r,n,i,a){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=n,this.newLength=i,this.positionInHunk=a,Zu(this,"diffLines",[])}}const fo=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function rl(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*nl(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(r,i)}}function*Ui(t){const e=nl(t);let r=e.next(),n,i=-1,a=-1,o=-1;for(;!r.done;){const f=r.value;if(fo.test(f)){n&&(yield n,n=void 0),i===-1&&(i=0);const S=fo.exec(f),T=a=Number(S[1]),A=Number(S[3])||1,H=o=Number(S[5]),K=Number(S[7])||1;n=new tl(T,A,H,K,i),n.diffLines.push(new va(3,-1,-1,i,f))}else if(n){const S=el(f);if(S===3)n.diffLines&&n.diffLines.length&&(n.diffLines[n.diffLines.length-1].endwithLineBreak=!1);else{n.diffLines.push(new va(S,S!==1?a:-1,S!==2?o:-1,i,f));const T=1+rl(f);switch(S){case 0:a+=T,o+=T;break;case 2:a+=T;break;case 1:o+=T;break}}}i!==-1&&++i,r=e.next()}n&&(yield n)}function go(t){const e=Ui(t);let r=e.next();const n=[],i=[];for(;!r.done;){const a=r.value;n.push(a);for(let o=0;o<a.diffLines.length;o++){const f=a.diffLines[o];if(!(f.type===2||f.type===3))if(f.type===1)i.push(f.text);else{const S=f.text;i.push(S)}}r=e.next()}return n}function il(t,e){const r=t.split(/\r?\n/),n=Ui(e);let i=n.next();const a=[],o=[];let f=0;for(;!i.done;){const S=i.value;a.push(S);const T=S.oldLineNumber;for(let A=f+1;A<T;A++)o.push(r[A-1]);f=T+S.oldLength-1;for(let A=0;A<S.diffLines.length;A++){const H=S.diffLines[A];if(!(H.type===2||H.type===3))if(H.type===1)o.push(H.text);else{const K=H.text;o.push(K)}}i=n.next()}if(f<r.length)for(let S=f+1;S<=r.length;S++)o.push(r[S-1]);return o.join(`
`)}function ya(t){switch(t){case"removed":return nt.DELETE;case"added":return nt.ADD;case"renamed":return nt.RENAME;case"modified":return nt.MODIFY;default:return nt.UNKNOWN}}async function As(t,e,r){const n=[];for(let i=0;i<t.length;i++){const a=t[i],o=ya(a.status);if(!a.patch){n.push(new qi(r,a.blob_url,o,a.filename,a.previous_filename));continue}let f=!1;switch(o){case nt.DELETE:case nt.MODIFY:try{await e.getObjectDetails(r,a.filename),f=!0}catch(A){}break;case nt.RENAME:try{await e.getObjectDetails(r,a.previous_filename),f=!0}catch(A){}break}const S=go(a.patch),T=!f&&o!==nt.ADD;n.push(new mo(r,o,a.filename,a.previous_filename,a.patch,S,T,a.blob_url))}return n}var vo=it(5747),sl=it(2087),al=it(6200),ol=Object.defineProperty,yo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Xr=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,ul=/^([a-z-]+):\/\//,ba=t=>{const e=ul.exec(t);if(e){const[o,f]=e;if(f==="ssh")t=t.slice(o.length);else return}const r=Xr.exec(t);if(!r)return;const[,n,i,a]=r;return{User:n,Host:i,path:a}},ll=(t,e=Ea.current)=>{const r=ba(t);return r&&e(r)};function Is(t){return{...t,Hostname:t.Host}}function wa(...t){const e=t.filter(r=>!!r);return r=>e.reduce((n,i)=>({...n,...i(n)}),r)}function _a(t){const e=(0,al.parse)(t);return r=>e.compute(r.Host)}const bo=class{static fromConfig(t){return wa(Is,_a(t))}};let Ea=bo;yo(Ea,"default",Is),yo(Ea,"current",bo.default);var cl=Object.defineProperty,wo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const _o=class{static fromConfig(t){return wa(Is,_a(t))}};let Ds=_o;wo(Ds,"default",wa(Is,dl())),wo(Ds,"current",_o.default);const Eo=(t,e=Ds.current)=>{const r=ba(t);return r&&e(r)};function dl(t=(0,$.join)((0,sl.homedir)(),".ssh","config")){try{const e=(0,vo.readFileSync)(t).toString();return _a(e)}catch(e){P.appendLine(`${t}: ${e.message}`)}}var hl=Object.defineProperty,pi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Sa;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(Sa||(Sa={}));class kn{constructor(e){if(pi(this,"type",4),pi(this,"host",""),pi(this,"owner",""),pi(this,"repositoryName",""),pi(this,"url"),!this.parseSshProtocol(e))try{this.url=c.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){P.appendLine(`Failed to parse '${e}'`),c.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=Eo(e);if(!r)return!1;const{Hostname:n,HostName:i,path:a}=r;return this.host=i||n,this.owner=this.getOwnerName(a)||"",this.repositoryName=this.getRepositoryName(a)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.lastIndexOf("/"),i=r.substr(n+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.split("/");if(n.length>1)return n[n.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return c.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const n=e.normalizeUri();return n?r.toString().toLocaleLowerCase()===n.toString().toLocaleLowerCase():!1}}var pl=Object.defineProperty,ml=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class So{constructor(e,r,n,i){this.ref=e,this.label=r,this.sha=n,ml(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new kn(i)}}var ar;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(ar||(ar={}));function Os(t){return t.event===4}function fl(t){return t.event===0}function gl(t){return t.event===3}function vd(t){return t.event===9}function yd(t){return t.event===7}function bd(t){return t.event===8}function vl(t){return t.__typename==="CheckRun"}var cr;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(cr||(cr={}));var Tn;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(Tn||(Tn={}));var Vt;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(Vt||(Vt={}));var Rn;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(Rn||(Rn={}));var ka=it(6417),yl=it.n(ka),bl=Object.defineProperty,wl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ko=class{static initialize(t){ko.icons={reactions:{THUMBS_UP:t.asAbsolutePath($.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath($.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath($.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath($.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath($.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath($.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath($.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath($.join("resources","icons","reactions","rocket.png"))}}}};let dn=ko;wl(dn,"icons");function xs(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var _l=it(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function To(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ro(t){var e,r;return To(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(To(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function El(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function Co(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{Ro(e[n])?n in t?r[n]=Co(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function Ms(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function mi(t,e,r){if(typeof e=="string"){let[i,a]=e.split(" ");r=Object.assign(a?{method:i,url:a}:{url:i},r)}else r=Object.assign({},e);r.headers=El(r.headers),Ms(r),Ms(r.headers);const n=Co(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function zr(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const $i=/\{[^}]+\}/g;function Fs(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Po(t){const e=t.match($i);return e?e.map(Fs).reduce((r,n)=>r.concat(n),[]):[]}function Cn(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}function No(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function fi(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function is(t,e,r){return e=t==="+"||t==="#"?No(e):fi(e),r?fi(r)+"="+e:e}function Gi(t){return t!=null}function Ls(t){return t===";"||t==="&"||t==="?"}function Sl(t,e,r,n){var i=t[r],a=[];if(Gi(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),a.push(is(e,i,Ls(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Gi).forEach(function(o){a.push(is(e,o,Ls(e)?r:""))}):Object.keys(i).forEach(function(o){Gi(i[o])&&a.push(is(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(Gi).forEach(function(f){o.push(is(e,f))}):Object.keys(i).forEach(function(f){Gi(i[f])&&(o.push(fi(f)),o.push(is(e,i[f].toString())))}),Ls(e)?a.push(fi(r)+"="+o.join(",")):o.length!==0&&a.push(o.join(","))}else e===";"?Gi(i)&&a.push(fi(r)):i===""&&(e==="&"||e==="?")?a.push(fi(r)+"="):i===""&&a.push("");return a}function kl(t){return{expand:Ao.bind(null,t)}}function Ao(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,a){if(i){let f="";const S=[];if(r.indexOf(i.charAt(0))!==-1&&(f=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(T){var A=/([^:\*]*)(?::(\d+)|(\*))?/.exec(T);S.push(Sl(e,f,A[1],A[2]||A[3]))}),f&&f!=="+"){var o=",";return f==="?"?o="&":f!=="#"&&(o=f),(S.length!==0?f:"")+S.join(o)}else return S.join(",")}else return No(a)})}function Io(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,a=Cn(t,["method","baseUrl","url","headers","request","mediaType"]);const o=Po(r);r=kl(r).expand(a),/^http/.test(r)||(r=t.baseUrl+r);const f=Object.keys(t).filter(A=>o.includes(A)).concat("baseUrl"),S=Cn(a,f);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(A=>A.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const A=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=A.concat(t.mediaType.previews).map(H=>{const K=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${H}-preview${K}`}).join(",")}return["GET","HEAD"].includes(e)?r=zr(r,S):"data"in S?i=S.data:Object.keys(S).length?i=S:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function Tl(t,e,r){return Io(mi(t,e,r))}function Do(t,e){const r=mi(t,e),n=Tl.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:Do.bind(null,r),merge:mi.bind(null,r),parse:Io})}const Rl=`octokit-endpoint.js/6.0.11 ${xs()}`,Cl=Do(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Rl},mediaType:{format:"",previews:[]}});var Nt=it(2413),gi=it(8605),vi=it(8835),qs=it(7211),Hr=it(8761);const Pl=Nt.Readable,Pn=Symbol("buffer"),Ta=Symbol("type");class Hi{constructor(){this[Ta]="";const e=arguments[0],r=arguments[1],n=[];let i=0;if(e){const o=e,f=Number(o.length);for(let S=0;S<f;S++){const T=o[S];let A;T instanceof Buffer?A=T:ArrayBuffer.isView(T)?A=Buffer.from(T.buffer,T.byteOffset,T.byteLength):T instanceof ArrayBuffer?A=Buffer.from(T):T instanceof Hi?A=T[Pn]:A=Buffer.from(typeof T=="string"?T:String(T)),i+=A.length,n.push(A)}}this[Pn]=Buffer.concat(n);let a=r&&r.type!==void 0&&String(r.type).toLowerCase();a&&!/[^\u0020-\u007E]/.test(a)&&(this[Ta]=a)}get size(){return this[Pn].length}get type(){return this[Ta]}text(){return Promise.resolve(this[Pn].toString())}arrayBuffer(){const e=this[Pn],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new Pl;return e._read=function(){},e.push(this[Pn]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let i,a;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?a=e:n<0?a=Math.max(e+n,0):a=Math.min(n,e);const o=Math.max(a-i,0),S=this[Pn].slice(i,i+o),T=new Hi([],{type:arguments[2]});return T[Pn]=S,T}}Object.defineProperties(Hi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Hi.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function Pr(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Pr.prototype=Object.create(Error.prototype),Pr.prototype.constructor=Pr,Pr.prototype.name="FetchError";let Ra;try{Ra=require("encoding").convert}catch(t){}const Nn=Symbol("Body internals"),Oo=Nt.PassThrough;function dr(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var a=r.timeout;let o=a===void 0?0:a;t==null?t=null:xo(t)?t=Buffer.from(t.toString()):ss(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Nt||(t=Buffer.from(String(t)))),this[Nn]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof Nt&&t.on("error",function(f){const S=f.name==="AbortError"?f:new Pr(`Invalid response body while trying to fetch ${e.url}: ${f.message}`,"system",f);e[Nn].error=S})}dr.prototype={get body(){return this[Nn].body},get bodyUsed(){return this[Nn].disturbed},arrayBuffer(){return Vi.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return Vi.call(this).then(function(e){return Object.assign(new Hi([],{type:t.toLowerCase()}),{[Pn]:e})})},json(){var t=this;return Vi.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return dr.Promise.reject(new Pr(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return Vi.call(this).then(function(t){return t.toString()})},buffer(){return Vi.call(this)},textConverted(){var t=this;return Vi.call(this).then(function(e){return Nl(e,t.headers)})}},Object.defineProperties(dr.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),dr.mixIn=function(t){for(const e of Object.getOwnPropertyNames(dr.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(dr.prototype,e);Object.defineProperty(t,e,r)}};function Vi(){var t=this;if(this[Nn].disturbed)return dr.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Nn].disturbed=!0,this[Nn].error)return dr.Promise.reject(this[Nn].error);let e=this.body;if(e===null)return dr.Promise.resolve(Buffer.alloc(0));if(ss(e)&&(e=e.stream()),Buffer.isBuffer(e))return dr.Promise.resolve(e);if(!(e instanceof Nt))return dr.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new dr.Promise(function(a,o){let f;t.timeout&&(f=setTimeout(function(){i=!0,o(new Pr(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(S){S.name==="AbortError"?(i=!0,o(S)):o(new Pr(`Invalid response body while trying to fetch ${t.url}: ${S.message}`,"system",S))}),e.on("data",function(S){if(!(i||S===null)){if(t.size&&n+S.length>t.size){i=!0,o(new Pr(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=S.length,r.push(S)}}),e.on("end",function(){if(!i){clearTimeout(f);try{a(Buffer.concat(r,n))}catch(S){o(new Pr(`Could not create Buffer from response body for ${t.url}: ${S.message}`,"system",S))}}})})}function Nl(t,e){if(typeof Ra!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",i,a;return r&&(i=/charset=([^;]*)/i.exec(r)),a=t.slice(0,1024).toString(),!i&&a&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(a)),!i&&a&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(a),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&a&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),Ra(t,"UTF-8",n).toString()}function xo(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function ss(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function Mo(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof Nt&&typeof n.getBoundary!="function"&&(e=new Oo,r=new Oo,n.pipe(e),n.pipe(r),t[Nn].body=e,n=r),n}function Fo(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":xo(t)?"application/x-www-form-urlencoded;charset=UTF-8":ss(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof Nt?null:"text/plain;charset=UTF-8"}function Lo(t){const e=t.body;return e===null?0:ss(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function Al(t,e){const r=e.body;r===null?t.end():ss(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}dr.Promise=global.Promise;const qo=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Ca=/[^\t\x20-\x7e\x80-\xff]/;function as(t){if(t=`${t}`,qo.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function Uo(t){if(t=`${t}`,Ca.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function Bi(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const _t=Symbol("map");class Qr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[_t]=Object.create(null),e instanceof Qr){const r=e.raw(),n=Object.keys(r);for(const i of n)for(const a of r[i])this.append(i,a);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(e)){const i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,as(e);const r=Bi(this[_t],e);return r===void 0?null:this[_t][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=Us(this),i=0;for(;i<n.length;){var a=n[i];const o=a[0],f=a[1];e.call(r,f,o,this),n=Us(this),i++}}set(e,r){e=`${e}`,r=`${r}`,as(e),Uo(r);const n=Bi(this[_t],e);this[_t][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,as(e),Uo(r);const n=Bi(this[_t],e);n!==void 0?this[_t][n].push(r):this[_t][e]=[r]}has(e){return e=`${e}`,as(e),Bi(this[_t],e)!==void 0}delete(e){e=`${e}`,as(e);const r=Bi(this[_t],e);r!==void 0&&delete this[_t][r]}raw(){return this[_t]}keys(){return os(this,"key")}values(){return os(this,"value")}[Symbol.iterator](){return os(this,"key+value")}}Qr.prototype.entries=Qr.prototype[Symbol.iterator],Object.defineProperty(Qr.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Qr.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function Us(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[_t]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[_t][n].join(", ")}:function(n){return[n.toLowerCase(),t[_t][n].join(", ")]})}const Pa=Symbol("internal");function os(t,e){const r=Object.create(us);return r[Pa]={target:t,kind:e,index:0},r}const us=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==us)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[Pa];const e=t.target,r=t.kind,n=t.index,i=Us(e,r),a=i.length;return n>=a?{value:void 0,done:!0}:(this[Pa].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(us,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Il(t){const e=Object.assign({__proto__:null},t[_t]),r=Bi(t[_t],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Dl(t){const e=new Qr;for(const r of Object.keys(t))if(!qo.test(r))if(Array.isArray(t[r]))for(const n of t[r])Ca.test(n)||(e[_t][r]===void 0?e[_t][r]=[n]:e[_t][r].push(n));else Ca.test(t[r])||(e[_t][r]=[t[r]]);return e}const zn=Symbol("Response internals"),Ol=gi.STATUS_CODES;class Jr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dr.call(this,e,r);const n=r.status||200,i=new Qr(r.headers);if(e!=null&&!i.has("Content-Type")){const a=Fo(e);a&&i.append("Content-Type",a)}this[zn]={url:r.url,status:n,statusText:r.statusText||Ol[n],headers:i,counter:r.counter}}get url(){return this[zn].url||""}get status(){return this[zn].status}get ok(){return this[zn].status>=200&&this[zn].status<300}get redirected(){return this[zn].counter>0}get statusText(){return this[zn].statusText}get headers(){return this[zn].headers}clone(){return new Jr(Mo(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}dr.mixIn(Jr.prototype),Object.defineProperties(Jr.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Jr.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const An=Symbol("Request internals"),$s=vi.parse,xl=vi.format,Ml="destroy"in Nt.Readable.prototype;function ls(t){return typeof t=="object"&&typeof t[An]=="object"}function Fl(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class yi{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;ls(e)?n=$s(e.url):(e&&e.href?n=$s(e.href):n=$s(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||ls(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body!=null?r.body:ls(e)&&e.body!==null?Mo(e):null;dr.call(this,a,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new Qr(r.headers||e.headers||{});if(a!=null&&!o.has("Content-Type")){const S=Fo(a);S&&o.append("Content-Type",S)}let f=ls(e)?e.signal:null;if("signal"in r&&(f=r.signal),f!=null&&!Fl(f))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[An]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:f},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[An].method}get url(){return xl(this[An].parsedURL)}get headers(){return this[An].headers}get redirect(){return this[An].redirect}get signal(){return this[An].signal}clone(){return new yi(this)}}dr.mixIn(yi.prototype),Object.defineProperty(yi.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(yi.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Ll(t){const e=t[An].parsedURL,r=new Qr(t[An].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof Nt.Readable&&!Ml)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const a=Lo(t);typeof a=="number"&&(n=String(a))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:Il(r),agent:i})}function cs(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}cs.prototype=Object.create(Error.prototype),cs.prototype.constructor=cs,cs.prototype.name="AbortError";const $o=Nt.PassThrough,ql=vi.resolve;function Qn(t,e){if(!Qn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return dr.Promise=Qn.Promise,new Qn.Promise(function(r,n){const i=new yi(t,e),a=Ll(i),o=(a.protocol==="https:"?qs:gi).request,f=i.signal;let S=null;const T=function(){let we=new cs("The user aborted a request.");n(we),i.body&&i.body instanceof Nt.Readable&&i.body.destroy(we),!(!S||!S.body)&&S.body.emit("error",we)};if(f&&f.aborted){T();return}const A=function(){T(),de()},H=o(a);let K;f&&f.addEventListener("abort",A);function de(){H.abort(),f&&f.removeEventListener("abort",A),clearTimeout(K)}i.timeout&&H.once("socket",function(fe){K=setTimeout(function(){n(new Pr(`network timeout at: ${i.url}`,"request-timeout")),de()},i.timeout)}),H.on("error",function(fe){n(new Pr(`request to ${i.url} failed, reason: ${fe.message}`,"system",fe)),de()}),H.on("response",function(fe){clearTimeout(K);const we=Dl(fe.headers);if(Qn.isRedirect(fe.statusCode)){const Ge=we.get("Location"),Ke=Ge===null?null:ql(i.url,Ge);switch(i.redirect){case"error":n(new Pr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),de();return;case"manual":if(Ke!==null)try{we.set("Location",Ke)}catch(Dt){n(Dt)}break;case"follow":if(Ke===null)break;if(i.counter>=i.follow){n(new Pr(`maximum redirect reached at: ${i.url}`,"max-redirect")),de();return}const Ct={headers:new Qr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(fe.statusCode!==303&&i.body&&Lo(i)===null){n(new Pr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),de();return}(fe.statusCode===303||(fe.statusCode===301||fe.statusCode===302)&&i.method==="POST")&&(Ct.method="GET",Ct.body=void 0,Ct.headers.delete("content-length")),r(Qn(new yi(Ke,Ct))),de();return}}fe.once("end",function(){f&&f.removeEventListener("abort",A)});let Ne=fe.pipe(new $o);const Ae={url:i.url,status:fe.statusCode,statusText:fe.statusMessage,headers:we,size:i.size,timeout:i.timeout,counter:i.counter},Ue=we.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Ue===null||fe.statusCode===204||fe.statusCode===304){S=new Jr(Ne,Ae),r(S);return}const $e={flush:Hr.Z_SYNC_FLUSH,finishFlush:Hr.Z_SYNC_FLUSH};if(Ue=="gzip"||Ue=="x-gzip"){Ne=Ne.pipe(Hr.createGunzip($e)),S=new Jr(Ne,Ae),r(S);return}if(Ue=="deflate"||Ue=="x-deflate"){fe.pipe(new $o).once("data",function(Ke){(Ke[0]&15)==8?Ne=Ne.pipe(Hr.createInflate()):Ne=Ne.pipe(Hr.createInflateRaw()),S=new Jr(Ne,Ae),r(S)});return}if(Ue=="br"&&typeof Hr.createBrotliDecompress=="function"){Ne=Ne.pipe(Hr.createBrotliDecompress()),S=new Jr(Ne,Ae),r(S);return}S=new Jr(Ne,Ae),r(S)}),Al(H,i)})}Qn.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},Qn.Promise=global.Promise;const Ul=Qn;class ji extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var $l=it(778),Gl=it.n($l);const Hl=Gl()(t=>console.warn(t));class ds extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return Hl(new ji("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const Vl="5.4.14";function Wn(t){return t.arrayBuffer()}function Gs(t){(Ro(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,n;return(t.request&&t.request.fetch||Ul)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(a=>{n=a.url,r=a.status;for(const f of a.headers)e[f[0]]=f[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new ds(a.statusText,r,{headers:e,request:t})}if(r===304)throw new ds("Not modified",r,{headers:e,request:t});if(r>=400)return a.text().then(f=>{const S=new ds(f,r,{headers:e,request:t});try{let T=JSON.parse(S.message);Object.assign(S,T);let A=T.errors;S.message=S.message+": "+A.map(JSON.stringify).join(", ")}catch(T){}throw S});const o=a.headers.get("content-type");return/application\/json/.test(o)?a.json():!o||/^text\/|charset=utf-8$/.test(o)?a.text():Wn(a)}).then(a=>({status:r,url:n,headers:e,data:a})).catch(a=>{throw a instanceof ds?a:new ds(a.message,500,{headers:e,request:t})})}function Na(t,e){const r=t.defaults(e);return Object.assign(function(i,a){const o=r.merge(i,a);if(!o.request||!o.request.hook)return Gs(r.parse(o));const f=(S,T)=>Gs(r.parse(r.merge(S,T)));return Object.assign(f,{endpoint:r,defaults:Na.bind(null,r)}),o.request.hook(f,o)},{endpoint:r,defaults:Na.bind(null,r)})}const Hs=Na(Cl,{headers:{"user-agent":`octokit-request.js/${Vl} ${xs()}`}}),Go="4.6.1";class Vs extends Error{constructor(e,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const Bl=["method","baseUrl","url","headers","request","query","mediaType"],jl=["query","method","url"],Ho=/\/api\/v3\/?$/;function zl(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in r)if(!!jl.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((o,f)=>Bl.includes(f)?(o[f]=n[f],o):(o.variables||(o.variables={}),o.variables[f]=n[f],o),{}),a=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return Ho.test(a)&&(i.url=a.replace(Ho,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const f={};for(const S of Object.keys(o.headers))f[S]=o.headers[S];throw new Vs(i,{headers:f,data:o.data})}return o.data.data})}function Aa(t,e){const r=t.defaults(e);return Object.assign((i,a)=>zl(r,i,a),{defaults:Aa.bind(null,r),endpoint:Hs.endpoint})}const Ed=Aa(Hs,{headers:{"user-agent":`octokit-graphql.js/${Go} ${xs()}`},method:"POST",url:"/graphql"});function Ql(t){return Aa(t,{method:"POST",url:"/graphql"})}async function hs(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function Wl(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function Vo(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=Wl(t),e(i)}const Kl=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(hs.bind(null,e),{hook:Vo.bind(null,e)})},Bo="3.3.1";class Ia{constructor(e={}){const r=new _l.Collection,n={baseUrl:Hs.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${Bo} ${xs()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=Hs.defaults(n),this.graphql=Ql(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:a,...o}=e,f=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",f.hook),this.auth=f}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const a=Kl(e.auth);r.wrap("request",a.hook),this.auth=a}this.constructor.plugins.forEach(a=>{Object.assign(this,a(this,e))})}static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(e.filter(a=>!n.includes(a))),r}}Ia.VERSION=Bo,Ia.plugins=[];const Yl="1.0.3";function jo(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),a=i.url.replace(r.baseUrl,"");return e(r).then(o=>(t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o)).catch(o=>{throw t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o})})}jo.VERSION=Yl;const zo="2.13.2";function Xl(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const a=Object.keys(t.data)[0],o=t.data[a];return t.data=o,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof n!="undefined"&&(t.data.repository_selection=n),t.data.total_count=i,t}function Da(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,a=n.method,o=n.headers;let f=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!f)return{done:!0};const S=await i({method:a,url:f,headers:o}),T=Xl(S);return f=((T.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:T}}})}}function Qo(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),Wo(t,[],Da(t,e,r)[Symbol.asyncIterator](),n)}function Wo(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let a=!1;function o(){a=!0}return e=e.concat(n?n(i.value,o):i.value.data),a?e:Wo(t,e,r,n)})}const Sd=Object.assign(Qo,{iterator:Da}),Jl=null;function kd(t){return typeof t=="string"?Jl.includes(t):!1}function Ko(t){return{paginate:Object.assign(Qo.bind(null,t),{iterator:Da.bind(null,t)})}}Ko.VERSION=zo;const Zl={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},ec="4.12.0";function tc(t,e){const r={};for(const[n,i]of Object.entries(e))for(const[a,o]of Object.entries(i)){const[f,S,T]=o,[A,H]=f.split(/ /),K=Object.assign({method:A,url:H},S);r[n]||(r[n]={});const de=r[n];if(T){de[a]=rc(t,n,a,K,T);continue}de[a]=t.request.defaults(K)}return r}function rc(t,e,r,n,i){const a=t.request.defaults(n);function o(...f){let S=a.endpoint.merge(...f);if(i.mapToData)return S=Object.assign({},S,{data:S[i.mapToData],[i.mapToData]:void 0}),a(S);if(i.renamed){const[T,A]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${T}.${A}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const T=a.endpoint.merge(...f);for(const[A,H]of Object.entries(i.renamedParameters))A in T&&(t.log.warn(`"${A}" parameter is deprecated for "octokit.${e}.${r}()". Use "${H}" instead`),H in T||(T[H]=T[A]),delete T[A]);return a(T)}return a(...f)}return Object.assign(o,a)}function Yo(t){return tc(t,Zl)}Yo.VERSION=ec;const Oa="18.2.0",zi=Ia.plugin(jo,Yo,Ko).defaults({userAgent:`octokit-rest.js/${Oa}`});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lt=function(t,e){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Lt(t,e)};function Zr(t,e){Lt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Le=function(){return Le=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Le.apply(this,arguments)};function ps(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Td(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function Rd(t,e){return function(r,n){e(r,n,t)}}function Cd(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Kn(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function f(A){try{T(n.next(A))}catch(H){o(H)}}function S(A){try{T(n.throw(A))}catch(H){o(H)}}function T(A){A.done?a(A.value):i(A.value).then(f,S)}T((n=n.apply(t,e||[])).next())})}function s(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(T){return function(A){return S([T,A])}}function S(T){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=T[0]&2?i.return:T[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,T[1])).done)return a;switch(i=0,a&&(T=[T[0]&2,a.value]),T[0]){case 0:case 1:a=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,i=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!a||T[1]>a[0]&&T[1]<a[3])){r.label=T[1];break}if(T[0]===6&&r.label<a[1]){r.label=a[1],a=T;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(T);break}a[2]&&r.ops.pop(),r.trys.pop();continue}T=e.call(t,r)}catch(A){T=[6,A],i=0}finally{n=a=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function k(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function d(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function v(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_(arguments[e]));return t}function l(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,f=a.length;o<f;o++,i++)n[i]=a[o];return n}function u(t){return this instanceof u?(this.v=t,this):new u(t)}function h(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(K){n[K]&&(i[K]=function(de){return new Promise(function(fe,we){a.push([K,de,fe,we])>1||f(K,de)})})}function f(K,de){try{S(n[K](de))}catch(fe){H(a[0][3],fe)}}function S(K){K.value instanceof u?Promise.resolve(K.value.v).then(T,A):H(a[0][2],K)}function T(K){f("next",K)}function A(K){f("throw",K)}function H(K,de){K(de),a.shift(),a.length&&f(a[0][0],a[0][1])}}function g(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:u(t[i](o)),done:i==="return"}:a?a(o):o}:a}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof v=="function"?v(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(f,S){o=t[a](o),i(f,S,o.done,o.value)})}}function i(a,o,f,S){Promise.resolve(S).then(function(T){a({value:T,done:f})},o)}}function m(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var D=it(285),x="Invariant Violation",Q=Object.setPrototypeOf,re=Q===void 0?function(t,e){return t.__proto__=e,t}:Q,Y=function(t){Zr(e,t);function e(r){r===void 0&&(r=x);var n=t.call(this,typeof r=="number"?x+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=x,re(n,e.prototype),n}return e}(Error);function ue(t,e){if(!t)throw new Y(e)}function _e(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=_e("warn"),t.error=_e("error")})(ue||(ue={}));var Te={env:{}};if(typeof process=="object")Te=process;else try{Function("stub","process = stub")(Te)}catch(t){}var Re=null;const xe=null;var qe=it(5035),He=it.n(qe),Qe=Object.prototype,ut=Qe.toString,at=Qe.hasOwnProperty,Pt=new Map;function tt(t,e){try{return Fe(t,e)}finally{Pt.clear()}}function Fe(t,e){if(t===e)return!0;var r=ut.call(t),n=ut.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(Be(t,e))return!0;var i=Object.keys(t),a=Object.keys(e),o=i.length;if(o!==a.length)return!1;for(var f=0;f<o;++f)if(!at.call(e,i[f]))return!1;for(var f=0;f<o;++f){var S=i[f];if(!Fe(t[S],e[S]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(Be(t,e))return!0;for(var T=t.entries(),A=r==="[object Map]";;){var H=T.next();if(H.done)break;var K=H.value,de=K[0],fe=K[1];if(!e.has(de)||A&&!Fe(fe,e.get(de)))return!1}return!0}}return!1}function Be(t,e){var r=Pt.get(t);if(r){if(r.has(e))return!0}else Pt.set(t,r=new Set);return r.add(e),!1}const Ve=null;function Xe(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function rt(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function lt(t){return t.kind==="StringValue"}function Je(t){return t.kind==="BooleanValue"}function kt(t){return t.kind==="IntValue"}function qt(t){return t.kind==="FloatValue"}function At(t){return t.kind==="Variable"}function Tt(t){return t.kind==="ObjectValue"}function vt(t){return t.kind==="ListValue"}function er(t){return t.kind==="EnumValue"}function or(t){return t.kind==="NullValue"}function et(t,e,r,n){if(kt(r)||qt(r))t[e.value]=Number(r.value);else if(Je(r)||lt(r))t[e.value]=r.value;else if(Tt(r)){var i={};r.fields.map(function(o){return et(i,o.name,o.value,n)}),t[e.value]=i}else if(At(r)){var a=(n||{})[r.name.value];t[e.value]=a}else if(vt(r))t[e.value]=r.values.map(function(o){var f={};return et(f,e,o,n),f[e.value]});else if(er(r))t[e.value]=r.value;else if(or(r))t[e.value]=null;else throw new Y(17)}function Ze(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(a){var o=a.name,f=a.value;return et(r[i.name.value],o,f,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var a=i.name,o=i.value;return et(n,a,o,e)})),Et(t.name.value,n,r)}var ot=["connection","include","skip","client","rest","export"];function Et(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,a={};return n.forEach(function(S){a[S]=i[S]}),r.connection.key+"("+JSON.stringify(a)+")"}else return r.connection.key;var o=t;if(e){var f=He()(e);o+="("+f+")"}return r&&Object.keys(r).forEach(function(S){ot.indexOf(S)===-1&&(r[S]&&Object.keys(r[S]).length?o+="@"+S+"("+JSON.stringify(r[S])+")":o+="@"+S)}),o}function In(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,a=n.value;return et(r,i,a,e)}),r}return null}function en(t){return t.alias?t.alias.value:t.name.value}function Ie(t){return t.kind==="Field"}function hn(t){return t.kind==="InlineFragment"}function pn(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function wr(t,e){return e===void 0&&(e=!1),Le({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Bt(t){return t!=null&&typeof t=="object"&&t.type==="json"}function mn(t){throw new InvariantError(18)}function _r(t,e){switch(e===void 0&&(e=mn),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(o){return _r(o,e)});case"ObjectValue":{for(var r={},n=0,i=t.fields;n<i.length;n++){var a=i[n];r[a.name.value]=_r(a.value,e)}return r}default:return t.value}}function Yn(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(n){r[n.name.value]=In(n,e)}),r}return null}function fn(t,e){return e===void 0&&(e={}),Jn(t.directives).every(function(r){var n=r.directive,i=r.ifArgument,a=!1;return i.value.kind==="Variable"?(a=e[i.value.name.value],ue(a!==void 0,13)):a=i.value.value,n.name.value==="skip"?!a:a})}function Rt(t){var e=[];return(0,D.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function gn(t,e){return Rt(e).some(function(r){return t.indexOf(r)>-1})}function vn(t){return t&&gn(["client"],t)&&gn(["export"],t)}function Xn(t){var e=t.name.value;return e==="skip"||e==="include"}function Jn(t){return t?t.filter(Xn).map(function(e){var r=e.arguments,n=e.name.value;ue(r&&r.length===1,14);var i=r[0];ue(i.name&&i.name.value==="if",15);var a=i.value;return ue(a&&(a.kind==="Variable"||a.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function tr(t,e){var r=e,n=[];t.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw new Y(11);a.kind==="FragmentDefinition"&&n.push(a)}),typeof r=="undefined"&&(ue(n.length===1,12),r=n[0].name.value);var i=Le(Le({},t),{definitions:l([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return i}function ur(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(n){typeof n=="undefined"||n===null||Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function Vr(t){Er(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function Er(t){ue(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new Y(3);return r});return ue(e.length<=1,4),t}function hr(t){return Er(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function pr(t){var e=hr(t);return invariant(e,5),e}function rr(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function dt(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function ir(t){var e=hr(t);return ue(e&&e.operation==="query",6),e}function We(t){ue(t.kind==="Document",7),ue(t.definitions.length<=1,8);var e=t.definitions[0];return ue(e.kind==="FragmentDefinition",9),e}function yn(t){Er(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var a=i.operation;if(a==="query"||a==="mutation"||a==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new Y(10)}function xr(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function st(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var n=r.defaultValue;return n}).map(function(r){var n=r.variable,i=r.defaultValue,a={};return et(a,n.name,i),a});return ur.apply(void 0,l([{}],e))}return{}}function Wr(t){var e=new Set;if(t.variableDefinitions)for(var r=0,n=t.variableDefinitions;r<n.length;r++){var i=n[r];e.add(i.variable.name.value)}return e}function Zn(t,e,r){var n=0;return t.forEach(function(i,a){e.call(this,i,a,t)&&(t[n++]=i)},r),t.length=n,t}var bi={kind:"Field",name:{kind:"Name",value:"__typename"}};function ei(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&ei(e[r.name.value],e)})}function bn(t){return ei(hr(t)||We(t),xr(dt(t)))?null:t}function Dn(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function Sr(t,e){var r=Object.create(null),n=[],i=Object.create(null),a=[],o=bn((0,D.visit)(e,{Variable:{enter:function(f,S,T){T.kind!=="VariableDefinition"&&(r[f.name.value]=!0)}},Field:{enter:function(f){if(t&&f.directives){var S=t.some(function(T){return T.remove});if(S&&f.directives&&f.directives.some(Dn(t)))return f.arguments&&f.arguments.forEach(function(T){T.value.kind==="Variable"&&n.push({name:T.value.name.value})}),f.selectionSet&&Mr(f.selectionSet).forEach(function(T){a.push({name:T.name.value})}),null}}},FragmentSpread:{enter:function(f){i[f.name.value]=!0}},Directive:{enter:function(f){if(Dn(t)(f))return null}}}));return o&&Zn(n,function(f){return!r[f.name]}).length&&(o=Si(n,o)),o&&Zn(a,function(f){return!i[f.name]}).length&&(o=ki(a,o)),o}function wi(t){return(0,D.visit)(Er(t),{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var a=i.some(function(f){return Ie(f)&&(f.name.value==="__typename"||f.name.value.lastIndexOf("__",0)===0)});if(!a){var o=n;if(!(Ie(o)&&o.directives&&o.directives.some(function(f){return f.name.value==="export"})))return Le(Le({},e),{selections:l(i,[bi])})}}}}}})}var _i={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function kr(t){return Sr([_i],Er(t))}function ti(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(n){return ri(t,n,r)})}function ri(t,e,r){return r===void 0&&(r=!0),Ie(e)?e.directives?e.directives.some(Dn(t))||r&&ti(t,e.selectionSet,r):!1:!0}function tn(t,e){Er(e);var r;return bn(visit(e,{SelectionSet:{enter:function(n,i,a,o){var f=o.join("-");if(!r||f===r||!f.startsWith(r))if(n.selections){var S=n.selections.filter(function(T){return ri(t,T)});return ti(t,n,!1)&&(r=f),__assign(__assign({},n),{selections:S})}else return null}}}))}function Ei(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function Si(t,e){var r=Ei(t);return bn((0,D.visit)(e,{OperationDefinition:{enter:function(n){return Le(Le({},n),{variableDefinitions:n.variableDefinitions.filter(function(i){return!t.some(function(a){return a.name===i.variable.name.value})})})}},Field:{enter:function(n){var i=t.some(function(o){return o.remove});if(i){var a=0;if(n.arguments.forEach(function(o){r(o)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function ki(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return bn((0,D.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function Mr(t){var e=[];return t.selections.forEach(function(r){(Ie(r)||hn(r))&&r.selectionSet?Mr(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function Ti(t){var e=yn(t),r=e.operation;if(r==="query")return t;var n=(0,D.visit)(t,{OperationDefinition:{enter:function(i){return Le(Le({},i),{operation:"query"})}}});return n}function Kr(t){Er(t);var e=Sr([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,D.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return Ie(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var On=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),b=Object.prototype.toString;function N(t){return F(t,new Map)}function F(t,e){switch(b.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,a){r[a]=F(i,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=F(t[i],e)}),n}default:return t}}function ae(){return typeof process!="undefined"?"production":"development"}function le(t){return ae()===t}function ge(){return le("production")===!0}function ye(){return le("development")===!0}function Me(){return le("test")===!0}function Oe(t){try{return t()}catch(e){console.error&&console.error(e)}}function mt(t){return t.errors&&t.errors.length}function yt(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&yt(t[e])}),t}function ft(t){if(ye()||Me()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return yt(t)}return t}var ht=Object.prototype.hasOwnProperty;function It(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xa(t)}function xa(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=Fa(e,n);for(var i=1;i<r;++i)e=Xo(e,t[i],n)}return e}function Ma(t){return t!==null&&typeof t=="object"}function Xo(t,e,r){return Ma(e)&&Ma(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=Fa(t,r)),Object.keys(e).forEach(function(n){var i=e[n];if(ht.call(t,n)){var a=t[n];i!==a&&(t[n]=Xo(Fa(a,r),i,r))}else t[n]=i}),t):e}function Fa(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=Le({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var Jo=Object.create({});function Pd(t,e){e===void 0&&(e="warn"),!ge()&&!Jo[t]&&(Me()||(Jo[t]=!0),e==="error"?console.error(t):console.warn(t))}function Nd(t){return JSON.parse(JSON.stringify(t))}var nc=it(9329),ic=it.n(nc),sc=ic();const Nr=sc;function ac(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new Y(2)}return t}var La=function(t){Zr(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error);function Qi(t){return t.request.length<=1}function Ad(t){var e=!1;return new Promise(function(r,n){t.subscribe({next:function(i){e||(e=!0,r(i))},error:n})})}var Id=null;function oc(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function Zo(t){return new Nr(function(e){e.error(t)})}function uc(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?rr(e.query):""),e}function lc(t,e){var r=Le({},t),n=function(a){typeof a=="function"?r=Le({},r,a(r)):r=Le({},r,a)},i=function(){return Le({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return eu(e)}}),e}function eu(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}function tu(t,e){return e?e(t):Nr.of()}function ms(t){return typeof t=="function"?new rn(t):t}function ru(){return new rn(function(){return Nr.of()})}function qa(t){return t.length===0?ru():t.map(ms).reduce(function(e,r){return e.concat(r)})}function nu(t,e,r){var n=ms(e),i=ms(r||new rn(tu));return Qi(n)&&Qi(i)?new rn(function(a){return t(a)?n.request(a)||Nr.of():i.request(a)||Nr.of()}):new rn(function(a,o){return t(a)?n.request(a,o)||Nr.of():i.request(a,o)||Nr.of()})}var cc=function(t,e){var r=ms(t);if(Qi(r))return r;var n=ms(e);return Qi(n)?new rn(function(i){return r.request(i,function(a){return n.request(a)||Nr.of()})||Nr.of()}):new rn(function(i,a){return r.request(i,function(o){return n.request(o,a)||Nr.of()})||Nr.of()})},rn=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,n){return this.concat(nu(e,r,n||new t(tu)))},t.prototype.concat=function(e){return cc(this,e)},t.prototype.request=function(e,r){throw new Y(1)},t.empty=ru,t.from=qa,t.split=nu,t.execute=Ri,t}();function Ri(t,e){return t.request(lc(e.context,uc(ac(e))))||Nr.of()}var Ua=it(7121),jt;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(jt||(jt={}));function Bs(t){return t<7}var fs=function(t){Zr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[Ua.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(Nr);function Ci(t){return Array.isArray(t)&&t.length>0}function $a(t){return t.hasOwnProperty("graphQLErrors")}var iu=function(t){var e="";return Ci(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var n=r?r.message:"Error message not found.";e+="GraphQL error: "+n+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Fr=function(t){Zr(e,t);function e(r){var n=r.graphQLErrors,i=r.networkError,a=r.errorMessage,o=r.extraInfo,f=t.call(this,a)||this;return f.graphQLErrors=n||[],f.networkError=i||null,a?f.message=a:f.message=iu(f),f.extraInfo=o,f.__proto__=e.prototype,f}return e}(Error),nn;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(nn||(nn={}));var dc=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&Ci(t.graphQLErrors))},su=function(t){Zr(e,t);function e(r){var n=r.queryManager,i=r.options,a=r.shouldSubscribe,o=a===void 0?!0:a,f=t.call(this,function(T){return f.onSubscribe(T)})||this;f.observers=new Set,f.subscriptions=new Set,f.isTornDown=!1,f.options=i,f.variables=i.variables||{},f.queryId=n.generateQueryId(),f.shouldSubscribe=o;var S=hr(i.query);return f.queryName=S&&S.name&&S.name.value,f.queryManager=n,f}return e.prototype.result=function(){var r=this;return new Promise(function(n,i){var a={next:function(f){n(f),r.observers.delete(a),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=r.subscribe(a)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:jt.error}}var n=this.queryManager.getCurrentQueryResult(this),i=n.data,a=n.partial,o=this.queryManager.queryStore.get(this.queryId),f,S=this.options.fetchPolicy,T=S==="network-only"||S==="no-cache";if(o){var A=o.networkStatus;if(dc(o,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:A,error:new Fr({graphQLErrors:o.graphQLErrors,networkError:o.networkError})};o.variables&&(this.options.variables=Le(Le({},this.options.variables),o.variables),this.variables=this.options.variables),f={data:i,loading:Bs(A),networkStatus:A},o.graphQLErrors&&this.options.errorPolicy==="all"&&(f.errors=o.graphQLErrors)}else{var H=T||a&&S!=="cache-only";f={data:i,loading:H,networkStatus:H?jt.loading:jt.ready}}return a||this.updateLastResult(Le(Le({},f),{stale:!1})),Le(Le({},f),{partial:a})},e.prototype.isDifferentFromLastResult=function(r){var n=this.lastResultSnapshot;return!(n&&r&&n.networkStatus===r.networkStatus&&n.stale===r.stale&&tt(n.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var n=this.options.fetchPolicy;return n==="cache-only"?Promise.reject(new Y(1)):(n!=="no-cache"&&n!=="cache-and-network"&&(n="network-only"),tt(this.variables,r)||(this.variables=Le(Le({},this.variables),r)),tt(this.options.variables,this.variables)||(this.options.variables=Le(Le({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,Le(Le({},this.options),{fetchPolicy:n}),nn.refetch))},e.prototype.fetchMore=function(r){var n=this;ue(r.updateQuery,2);var i=Le(Le({},r.query?r:Le(Le(Le({},this.options),r),{variables:Le(Le({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),a=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(a,i,nn.normal,this.queryId).then(function(o){return n.updateQuery(function(f){return r.updateQuery(f,{fetchMoreResult:o.data,variables:i.variables})}),n.queryManager.stopQuery(a),o},function(o){throw n.queryManager.stopQuery(a),o})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(a){var o=r.updateQuery;o&&n.updateQuery(function(f,S){var T=S.variables;return o(f,{subscriptionData:a,variables:T})})},error:function(a){if(r.onError){r.onError(a);return}}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){var n=this.options.fetchPolicy;this.options=Le(Le({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var i=r.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&(n==="cache-only"||n==="standby"||i==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,n,i){return n===void 0&&(n=!1),i===void 0&&(i=!0),this.isTornDown=!1,r=r||this.variables,!n&&tt(r,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),a=i.previousResult,o=i.variables,f=i.document,S=Oe(function(){return r(a,{variables:o})});S&&(n.dataStore.markUpdateQueryResult(f,o,S),n.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){au(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var n=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:N(r),n},e.prototype.onSubscribe=function(r){var n=this;try{var i=r._subscription._observer;i&&!i.error&&(i.error=hc)}catch(o){}var a=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),a&&this.setUpQuery(),function(){n.observers.delete(r)&&!n.observers.size&&n.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,n=this,i=n.queryManager,a=n.queryId;this.shouldSubscribe&&i.addObservableQuery(a,this),this.options.pollInterval&&(au(this),i.startPollingQuery(this.options,a));var o=function(f){r.updateLastResult(Le(Le({},r.lastResult),{errors:f.graphQLErrors,networkStatus:jt.error,loading:!1})),js(r.observers,"error",r.lastError=f)};i.observeQuery(a,this.options,{next:function(f){if(r.lastError||r.isDifferentFromLastResult(f)){var S=r.updateLastResult(f),T=r.options,A=T.query,H=T.variables,K=T.fetchPolicy;i.transform(A).hasClientExports?i.getLocalState().addExportedVariables(A,H).then(function(de){var fe=r.variables;r.variables=r.options.variables=de,!f.loading&&S&&K!=="cache-only"&&i.transform(A).serverQuery&&!tt(fe,de)?r.refetch():js(r.observers,"next",f)}):js(r.observers,"next",f)}},error:o}).catch(o)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(fs);function hc(t){}function js(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function au(t){var e=t.options.fetchPolicy;ue(e!=="cache-first"&&e!=="cache-only",3)}var pc=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,n){this.store[e]={mutation:r,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var n=this.store[e];n&&(n.loading=!1,n.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),ou=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];ue(!r||r.document===e.document||tt(r.document,e.document),19);var n=!1,i=null;e.storePreviousVariables&&r&&r.networkStatus!==jt.loading&&(tt(r.variables,e.variables)||(n=!0,i=r.variables));var a;n?a=jt.setVariables:e.isPoll?a=jt.poll:e.isRefetch?a=jt.refetch:a=jt.loading;var o=[];r&&r.graphQLErrors&&(o=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:o,networkStatus:a,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=jt.fetchMore)},t.prototype.markQueryResult=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=Ci(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=jt.ready,typeof n=="string"&&this.store[n]&&(this.store[n].networkStatus=jt.ready))},t.prototype.markQueryError=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=jt.error,typeof n=="string"&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(e,r){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,r&&(n.networkStatus=jt.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(n){e.indexOf(n)<0?r.stopQuery(n):r.store[n].networkStatus=jt.loading})},t}();function mc(t){return t.charAt(0).toUpperCase()+t.slice(1)}var se=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,a=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),a&&this.setFragmentMatcher(a)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=It(r.resolvers,n)}):this.resolvers=It(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,a=e.variables,o=e.onlyRunForcedResolvers,f=o===void 0?!1:o;return Kn(this,void 0,void 0,function(){return s(this,function(S){return r?[2,this.resolveDocument(r,n.data,i,a,this.fragmentMatcher,f).then(function(T){return Le(Le({},n),{data:T.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return gn(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?Kr(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,n=Le(Le({},e),{cache:r,getCacheKey:function(i){if(r.config)return r.config.dataIdFromObject(i);ue(!1,6)}});return n},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),Kn(this,void 0,void 0,function(){return s(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(a){return Le(Le({},r),a.exportedVariables)})]:[2,Le({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,D.visit)(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return D.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:Ti(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,a,o){return n===void 0&&(n={}),i===void 0&&(i={}),a===void 0&&(a=function(){return!0}),o===void 0&&(o=!1),Kn(this,void 0,void 0,function(){var f,S,T,A,H,K,de,fe,we;return s(this,function(Ne){return f=yn(e),S=dt(e),T=xr(S),A=f.operation,H=A?mc(A):"Query",K=this,de=K.cache,fe=K.client,we={fragmentMap:T,context:Le(Le({},n),{cache:de,client:fe}),variables:i,fragmentMatcher:a,defaultOperationType:H,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(f.selectionSet,r,we).then(function(Ae){return{result:Ae,exportedVariables:we.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return Kn(this,void 0,void 0,function(){var i,a,o,f,S,T=this;return s(this,function(A){return i=n.fragmentMap,a=n.context,o=n.variables,f=[r],S=function(H){return Kn(T,void 0,void 0,function(){var K,de;return s(this,function(fe){return fn(H,o)?Ie(H)?[2,this.resolveField(H,r,n).then(function(we){var Ne;typeof we!="undefined"&&f.push((Ne={},Ne[en(H)]=we,Ne))})]:(hn(H)?K=H:(K=i[H.name.value],ue(K,7)),K&&K.typeCondition&&(de=K.typeCondition.name.value,n.fragmentMatcher(r,de,a))?[2,this.resolveSelectionSet(K.selectionSet,r,n).then(function(we){f.push(we)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(S)).then(function(){return xa(f)})]})})},t.prototype.resolveField=function(e,r,n){return Kn(this,void 0,void 0,function(){var i,a,o,f,S,T,A,H,K,de=this;return s(this,function(fe){return i=n.variables,a=e.name.value,o=en(e),f=a!==o,S=r[o]||r[a],T=Promise.resolve(S),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(A=r.__typename||n.defaultOperationType,H=this.resolvers&&this.resolvers[A],H&&(K=H[f?a:o],K&&(T=Promise.resolve(K(r,In(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}))))),[2,T.then(function(we){if(we===void 0&&(we=S),e.directives&&e.directives.forEach(function(Ne){Ne.name.value==="export"&&Ne.arguments&&Ne.arguments.forEach(function(Ae){Ae.name.value==="as"&&Ae.value.kind==="StringValue"&&(n.exportedVariables[Ae.value.value]=we)})}),!e.selectionSet||we==null)return we;if(Array.isArray(we))return de.resolveSubSelectedArray(e,we,n);if(e.selectionSet)return de.resolveSelectionSet(e.selectionSet,we,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(a){if(a===null)return null;if(Array.isArray(a))return i.resolveSubSelectedArray(e,a,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,a,n)}))},t}();function ve(t){var e=new Set,r=null;return new fs(function(n){return e.add(n),r=r||t.subscribe({next:function(i){e.forEach(function(a){return a.next&&a.next(i)})},error:function(i){e.forEach(function(a){return a.error&&a.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(n)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function Ce(t,e){return new fs(function(r){var n=r.next,i=r.error,a=r.complete,o=0,f=!1,S={next:function(A){++o,new Promise(function(H){H(e(A))}).then(function(H){--o,n&&n.call(r,H),f&&S.complete()},function(H){--o,i&&i.call(r,H)})},error:function(A){i&&i.call(r,A)},complete:function(){f=!0,o||a&&a.call(r)}},T=t.subscribe(S);return function(){return T.unsubscribe()}})}var Ye=Object.prototype.hasOwnProperty,St=function(){function t(e){var r=e.link,n=e.queryDeduplication,i=n===void 0?!1:n,a=e.store,o=e.onBroadcast,f=o===void 0?function(){}:o,S=e.ssrMode,T=S===void 0?!1:S,A=e.clientAwareness,H=A===void 0?{}:A,K=e.localState,de=e.assumeImmutableResults;this.mutationStore=new pc,this.queryStore=new ou,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(On?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=i,this.dataStore=a,this.onBroadcast=f,this.clientAwareness=H,this.localState=K||new se({cache:a.getCache()}),this.ssrMode=T,this.assumeImmutableResults=!!de}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(r){r(new Y(8))})},t.prototype.mutate=function(e){var r=e.mutation,n=e.variables,i=e.optimisticResponse,a=e.updateQueries,o=e.refetchQueries,f=o===void 0?[]:o,S=e.awaitRefetchQueries,T=S===void 0?!1:S,A=e.update,H=e.errorPolicy,K=H===void 0?"none":H,de=e.fetchPolicy,fe=e.context,we=fe===void 0?{}:fe;return Kn(this,void 0,void 0,function(){var Ne,Ae,Ue,$e=this;return s(this,function(Ge){switch(Ge.label){case 0:return ue(r,9),ue(!de||de==="no-cache",10),Ne=this.generateQueryId(),r=this.transform(r).document,this.setQuery(Ne,function(){return{document:r}}),n=this.getVariables(r,n),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,n,we)]:[3,2];case 1:n=Ge.sent(),Ge.label=2;case 2:return Ae=function(){var Ke={};return a&&$e.queries.forEach(function(Ct,Dt){var Kt=Ct.observableQuery;if(Kt){var xt=Kt.queryName;xt&&Ye.call(a,xt)&&(Ke[Dt]={updater:a[xt],query:$e.queryStore.get(Dt)})}}),Ke},this.mutationStore.initMutation(Ne,r,n),this.dataStore.markMutationInit({mutationId:Ne,document:r,variables:n,updateQueries:Ae(),update:A,optimisticResponse:i}),this.broadcastQueries(),Ue=this,[2,new Promise(function(Ke,Ct){var Dt,Kt;Ue.getObservableFromLink(r,Le(Le({},we),{optimisticResponse:i}),n,!1).subscribe({next:function(xt){if(mt(xt)&&K==="none"){Kt=new Fr({graphQLErrors:xt.errors});return}Ue.mutationStore.markMutationResult(Ne),de!=="no-cache"&&Ue.dataStore.markMutationResult({mutationId:Ne,result:xt,document:r,variables:n,updateQueries:Ae(),update:A}),Dt=xt},error:function(xt){Ue.mutationStore.markMutationError(Ne,xt),Ue.dataStore.markMutationComplete({mutationId:Ne,optimisticResponse:i}),Ue.broadcastQueries(),Ue.setQuery(Ne,function(){return{document:null}}),Ct(new Fr({networkError:xt}))},complete:function(){if(Kt&&Ue.mutationStore.markMutationError(Ne,Kt),Ue.dataStore.markMutationComplete({mutationId:Ne,optimisticResponse:i}),Ue.broadcastQueries(),Kt){Ct(Kt);return}typeof f=="function"&&(f=f(Dt));var xt=[];Ci(f)&&f.forEach(function(es){if(typeof es=="string")Ue.queries.forEach(function(Un){var qr=Un.observableQuery;qr&&qr.queryName===es&&xt.push(qr.refetch())});else{var ao={query:es.query,variables:es.variables,fetchPolicy:"network-only"};es.context&&(ao.context=es.context),xt.push(Ue.query(ao))}}),Promise.all(T?xt:[]).then(function(){Ue.setQuery(Ne,function(){return{document:null}}),K==="ignore"&&Dt&&mt(Dt)&&delete Dt.errors,Ke(Dt)})}})})]}})})},t.prototype.fetchQuery=function(e,r,n,i){return Kn(this,void 0,void 0,function(){var a,o,f,S,T,A,H,K,de,fe,we,Ne,Ae,Ue,$e,Ge,Ke,Ct,Dt=this;return s(this,function(Kt){switch(Kt.label){case 0:return a=r.metadata,o=a===void 0?null:a,f=r.fetchPolicy,S=f===void 0?"cache-first":f,T=r.context,A=T===void 0?{}:T,H=this.transform(r.query).document,K=this.getVariables(H,r.variables),this.transform(H).hasClientExports?[4,this.localState.addExportedVariables(H,K,A)]:[3,2];case 1:K=Kt.sent(),Kt.label=2;case 2:if(r=Le(Le({},r),{variables:K}),fe=S==="network-only"||S==="no-cache",we=fe,fe||(Ne=this.dataStore.getCache().diff({query:H,variables:K,returnPartialData:!0,optimistic:!1}),Ae=Ne.complete,Ue=Ne.result,we=!Ae||S==="cache-and-network",de=Ue),$e=we&&S!=="cache-only"&&S!=="standby",gn(["live"],H)&&($e=!0),Ge=this.idCounter++,Ke=S!=="no-cache"?this.updateQueryWatch(e,H,r):void 0,this.setQuery(e,function(){return{document:H,lastRequestId:Ge,invalidated:!0,cancel:Ke}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:H,storePreviousVariables:$e,variables:K,isPoll:n===nn.poll,isRefetch:n===nn.refetch,metadata:o,fetchMoreForQueryId:i}),this.broadcastQueries(),$e){if(Ct=this.fetchRequest({requestId:Ge,queryId:e,document:H,options:r,fetchMoreForQueryId:i}).catch(function(xt){throw $a(xt)?xt:(Ge>=Dt.getQuery(e).lastRequestId&&(Dt.queryStore.markQueryError(e,xt,i),Dt.invalidate(e),Dt.invalidate(i),Dt.broadcastQueries()),new Fr({networkError:xt}))}),S!=="cache-and-network")return[2,Ct];Ct.catch(function(){})}return this.queryStore.markQueryResultClient(e,!$e),this.invalidate(e),this.invalidate(i),this.transform(H).hasForcedResolvers?[2,this.localState.runResolvers({document:H,remoteResult:{data:de},context:A,variables:K,onlyRunForcedResolvers:!0}).then(function(xt){return Dt.markQueryResult(e,xt,r,i),Dt.broadcastQueries(),xt})]:(this.broadcastQueries(),[2,{data:de}])}})})},t.prototype.markQueryResult=function(e,r,n,i){var a=n.fetchPolicy,o=n.variables,f=n.errorPolicy;a==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,o,i,f==="ignore"||f==="all")},t.prototype.queryListenerForObserver=function(e,r,n){var i=this;function a(o,f){if(n[o])try{n[o](f)}catch(S){}}return function(o,f){if(i.invalidate(e,!1),!!o){var S=i.getQuery(e),T=S.observableQuery,A=S.document,H=T?T.options.fetchPolicy:r.fetchPolicy;if(H!=="standby"){var K=Bs(o.networkStatus),de=T&&T.getLastResult(),fe=!!(de&&de.networkStatus!==o.networkStatus),we=r.returnPartialData||!f&&o.previousVariables||fe&&r.notifyOnNetworkStatusChange||H==="cache-only"||H==="cache-and-network";if(!(K&&!we)){var Ne=Ci(o.graphQLErrors),Ae=T&&T.options.errorPolicy||r.errorPolicy||"none";if(Ae==="none"&&Ne||o.networkError)return a("error",new Fr({graphQLErrors:o.graphQLErrors,networkError:o.networkError}));try{var Ue=void 0,$e=void 0;if(f)H!=="no-cache"&&H!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),Ue=f.result,$e=!f.complete;else{var Ge=T&&T.getLastError(),Ke=Ae!=="none"&&(Ge&&Ge.graphQLErrors)!==o.graphQLErrors;if(de&&de.data&&!Ke)Ue=de.data,$e=!1;else{var Ct=i.dataStore.getCache().diff({query:A,variables:o.previousVariables||o.variables,returnPartialData:!0,optimistic:!0});Ue=Ct.result,$e=!Ct.complete}}var Dt=$e&&!(r.returnPartialData||H==="cache-only"),Kt={data:Dt?de&&de.data:Ue,loading:K,networkStatus:o.networkStatus,stale:Dt};Ae==="all"&&Ne&&(Kt.errors=o.graphQLErrors),a("next",Kt)}catch(xt){a("error",new Fr({networkError:xt}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),a=kr(n.transformForLink(i)),o=this.localState.clientQuery(i),f=this.localState.serverQuery(a),S={document:i,hasClientExports:vn(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:f,defaultVars:st(hr(i))},T=function(A){A&&!r.has(A)&&r.set(A,S)};T(e),T(i),T(o),T(f)}return r.get(e)},t.prototype.getVariables=function(e,r){return Le(Le({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),ue(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=Le({},e);return new su({queryManager:this,options:n,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return ue(e.query,12),ue(e.query.kind==="Document",13),ue(!e.returnPartialData,14),ue(!e.pollInterval,15),new Promise(function(n,i){var a=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+a.queryId,i),a.result().then(n,i).then(function(){return r.fetchQueryRejectFns.delete("query:"+a.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(n){var i=n.listeners;return i.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,n){var i=this,a=this.getQuery(e).cancel;a&&a();var o=function(){var f=null,S=i.getQuery(e).observableQuery;if(S){var T=S.getLastResult();T&&(f=T.data)}return f};return this.dataStore.getCache().watch({query:r,variables:n.variables,optimistic:!0,previousResult:o,callback:function(f){i.setQuery(e,function(){return{invalidated:!0,newData:f}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new Y(16))});var e=[];return this.queries.forEach(function(r,n){var i=r.observableQuery;i&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.queries.forEach(function(i,a){var o=i.observableQuery;if(o){var f=o.options.fetchPolicy;o.resetLastResults(),f!=="cache-only"&&(e||f!=="standby")&&n.push(o.refetch()),r.setQuery(a,function(){return{newData:null}}),r.invalidate(a)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(e,r,n){return this.addQueryListener(e,this.queryListenerForObserver(e,r,n)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,n){return this.addQueryListener(e,n),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,a=e.variables;n=this.transform(n).document,a=this.getVariables(n,a);var o=function(S){return r.getObservableFromLink(n,{},S,!1).map(function(T){if((!i||i!=="no-cache")&&(r.dataStore.markSubscriptionResult(T,n,S),r.broadcastQueries()),mt(T))throw new Fr({graphQLErrors:T.errors});return T})};if(this.transform(n).hasClientExports){var f=this.localState.addExportedVariables(n,a).then(o);return new fs(function(S){var T=null;return f.then(function(A){return T=A.subscribe(S)},S.error),function(){return T&&T.unsubscribe()}})}return o(a)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var n=e.options,i=n.variables,a=n.query,o=n.fetchPolicy,f=n.returnPartialData,S=e.getLastResult(),T=this.getQuery(e.queryId).newData;if(T&&T.complete)return{data:T.result,partial:!1};if(o==="no-cache"||o==="network-only")return{data:void 0,partial:!1};var A=this.dataStore.getCache().diff({query:a,variables:i,previousResult:S?S.data:void 0,returnPartialData:!0,optimistic:r}),H=A.result,K=A.complete;return{data:K||f?H:void 0,partial:!K}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var n=this.getQuery(e).observableQuery;ue(n,17),r=n}else r=e;var i=r.options,a=i.variables,o=i.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:a,document:o}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,n){r.invalidated&&r.listeners.forEach(function(i){i&&i(e.queryStore.get(n),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var a=this;i===void 0&&(i=this.queryDeduplication);var o,f=this.transform(e).serverQuery;if(f){var S=this,T=S.inFlightLinkObservables,A=S.link,H={query:f,variables:n,operationName:rr(f)||void 0,context:this.prepareContext(Le(Le({},r),{forceFetch:!i}))};if(r=H.context,i){var K=T.get(f)||new Map;T.set(f,K);var de=JSON.stringify(n);if(o=K.get(de),!o){K.set(de,o=ve(Ri(A,H)));var fe=function(){K.delete(de),K.size||T.delete(f),we.unsubscribe()},we=o.subscribe({next:fe,error:fe,complete:fe})}}else o=ve(Ri(A,H))}else o=fs.of({data:{}}),r=this.prepareContext(r);var Ne=this.transform(e).clientQuery;return Ne&&(o=Ce(o,function(Ae){return a.localState.runResolvers({document:Ne,remoteResult:Ae,context:r,variables:n})})),o},t.prototype.fetchRequest=function(e){var r=this,n=e.requestId,i=e.queryId,a=e.document,o=e.options,f=e.fetchMoreForQueryId,S=o.variables,T=o.errorPolicy,A=T===void 0?"none":T,H=o.fetchPolicy,K,de;return new Promise(function(fe,we){var Ne=r.getObservableFromLink(a,o.context,S),Ae="fetchRequest:"+i;r.fetchQueryRejectFns.set(Ae,we);var Ue=function(){r.fetchQueryRejectFns.delete(Ae),r.setQuery(i,function(Ge){var Ke=Ge.subscriptions;Ke.delete($e)})},$e=Ne.map(function(Ge){if(n>=r.getQuery(i).lastRequestId&&(r.markQueryResult(i,Ge,o,f),r.queryStore.markQueryResult(i,Ge,f),r.invalidate(i),r.invalidate(f),r.broadcastQueries()),A==="none"&&Ci(Ge.errors))return we(new Fr({graphQLErrors:Ge.errors}));if(A==="all"&&(de=Ge.errors),f||H==="no-cache")K=Ge.data;else{var Ke=r.dataStore.getCache().diff({variables:S,query:a,optimistic:!1,returnPartialData:!0}),Ct=Ke.result,Dt=Ke.complete;(Dt||o.returnPartialData)&&(K=Ct)}}).subscribe({error:function(Ge){Ue(),we(Ge)},complete:function(){Ue(),fe({data:K,errors:de,loading:!1,networkStatus:jt.ready,stale:!1})}});r.setQuery(i,function(Ge){var Ke=Ge.subscriptions;Ke.add($e)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var n=this.getQuery(e),i=Le(Le({},n),r(n));this.queries.set(e,i)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return Le(Le({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==jt.ready&&r.networkStatus!==jt.error},t.prototype.startPollingQuery=function(e,r,n){var i=this,a=e.pollInterval;if(ue(a,18),!this.ssrMode){var o=this.pollingInfoByQueryId.get(r);o||this.pollingInfoByQueryId.set(r,o={}),o.interval=a,o.options=Le(Le({},e),{fetchPolicy:"network-only"});var f=function(){var T=i.pollingInfoByQueryId.get(r);T&&(i.checkInFlight(r)?S():i.fetchQuery(r,T.options,nn.poll).then(S,S))},S=function(){var T=i.pollingInfoByQueryId.get(r);T&&(clearTimeout(T.timeout),T.timeout=setTimeout(f,T.interval))};n&&this.addQueryListener(r,n),S()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),Mt=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,n,i,a){a===void 0&&(a=!1);var o=!mt(e);a&&mt(e)&&e.data&&(o=!0),!i&&o&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:n})},t.prototype.markSubscriptionResult=function(e,r,n){mt(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:n})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var n;typeof e.optimisticResponse=="function"?n=e.optimisticResponse(e.variables):n=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var a=r.cache;r.cache=i;try{r.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=a}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!mt(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(a){var o=i[a],f=o.query,S=o.updater,T=r.cache.diff({query:f.document,variables:f.variables,returnPartialData:!0,optimistic:!1}),A=T.result,H=T.complete;if(H){var K=Oe(function(){return S(A,{mutationResult:e.result,queryName:rr(f.document)||void 0,queryVariables:f.variables})});K&&n.push({result:K,dataId:"ROOT_QUERY",query:f.document,variables:f.variables})}}),this.cache.performTransaction(function(a){n.forEach(function(f){return a.write(f)});var o=e.update;o&&Oe(function(){return o(a,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,n=e.optimisticResponse;n&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),zt="2.6.10",bt=!1,Qt=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,a=i===void 0?!1:i,o=e.ssrForceFetchDelay,f=o===void 0?0:o,S=e.connectToDevTools,T=e.queryDeduplication,A=T===void 0?!0:T,H=e.defaultOptions,K=e.assumeImmutableResults,de=K===void 0?!1:K,fe=e.resolvers,we=e.typeDefs,Ne=e.fragmentMatcher,Ae=e.name,Ue=e.version,$e=e.link;if(!$e&&fe&&($e=rn.empty()),!$e||!n)throw new Y(4);this.link=$e,this.cache=n,this.store=new Mt(n),this.disableNetworkFetches=a||f>0,this.queryDeduplication=A,this.defaultOptions=H||{},this.typeDefs=we,f&&setTimeout(function(){return r.disableNetworkFetches=!1},f),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var Ge=!1;(typeof S=="undefined"?Ge:S&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=zt,this.localState=new se({cache:n,client:this,resolvers:fe,fragmentMatcher:Ne}),this.queryManager=new St({link:this.link,store:this.store,queryDeduplication:A,ssrMode:a,clientAwareness:{name:Ae,version:Ue},localState:this.localState,assumeImmutableResults:de,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Le(Le({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=Le(Le({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=Le(Le({},this.defaultOptions.query),e)),ue(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=Le(Le({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Le(Le({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Ri(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const sn=null;function Br(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Wi(t)},r={kind:"Document",definitions:[e]};return r}function gs(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Wi(t)},n={kind:"Document",definitions:[r]};return n}function Wi(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return Wi(t[0]);var e=[];Object.keys(t).forEach(function(n){var i=Wi(t[n]),a={kind:"Field",name:{kind:"Name",value:n},selectionSet:i||void 0};e.push(a)});var r={kind:"SelectionSet",selections:e};return r}var Ga={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},uu=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:tr(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:tr(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,n=e.data;if(typeof r!="undefined"){var i=null;try{i=this.read({rootId:r,optimistic:!1,query:Ga})}catch(f){}var a=i&&i.__typename||"__ClientData",o=Object.assign({__typename:a},n);this.writeFragment({id:r,fragment:gs(o,a),data:o})}else this.writeQuery({query:Br(n),data:n})},t}(),Dd;(function(t){})(Dd||(Dd={}));var Ar=null,Od={},Up=1,$p=function(){return function(){function t(){this.id=["slot",Up++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Ar;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===Od)break;return e!==Ar&&(Ar.slots[this.id]=r),!0}return Ar&&(Ar.slots[this.id]=Od),!1},t.prototype.getValue=function(){if(this.hasValue())return Ar.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),f=Ar;Ar={parent:f,slots:o};try{return r.apply(i,n)}finally{Ar=f}},t.bind=function(e){var r=Ar;return function(){var n=Ar;try{return Ar=r,e.apply(this,arguments)}finally{Ar=n}}},t.noContext=function(e,r,n){if(Ar){var i=Ar;try{return Ar=null,e.apply(n,r)}finally{Ar=i}}else return e.apply(n,r)},t}()},fc="@wry/context:Slot",gc=Array,vc=gc[fc]||function(){var t=$p();try{Object.defineProperty(gc,fc,{value:gc[fc]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),yc=vc.bind,Gp=vc.noContext;function ly(t,e){return setTimeout(yc(t),e)}function cy(t){return function(){var e=t.apply(this,arguments),r=yc(e.next),n=yc(e.throw);return new Promise(function(i,a){function o(T,A){try{var H=T.call(e,A)}catch(de){return a(de)}var K=H.done?i:f;Hp(H.value)?H.value.then(K,H.done?a:S):K(H.value)}var f=function(T){return o(r,T)},S=function(T){return o(n,T)};f()})}}function Hp(t){return t&&typeof t.then=="function"}var xd=null;function dy(t){if(xd.indexOf(t)<0){var e=function(r,n){var i=r[n];r[n]=function(){return Gp(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),xd.push(t)}return t}function Vp(){}var Bp=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Vp),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getEntry(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),lu=new vc,jp=[],bc=[],zp=100;function zs(t,e){if(!t)throw new Error(e||"assertion failure")}function Qp(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function Md(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Wp(t){return t.slice(0)}var Kp=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(zs(!this.recomputing,"already recomputing"),!(!Yp(this)&&wc(this)))return Qs(this)?Xp(this):Md(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Fd(this),_c(this))},t.prototype.dispose=function(){var e=this;Gd(this).forEach(wc),_c(this),this.parents.forEach(function(r){r.setDirty(),Hd(r,e)})},t.count=0,t}();function Yp(t){var e=lu.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Qs(t)?qd(e,t):Ud(e,t),e}function Xp(t){var e=Gd(t);return lu.withValue(t,Jp,[t]),em(t)&&Zp(t),e.forEach(wc),Md(t.value)}function Jp(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function Qs(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Zp(t){t.dirty=!1,!Qs(t)&&Ld(t)}function Fd(t){t.parents.forEach(function(e){return qd(e,t)})}function Ld(t){t.parents.forEach(function(e){return Ud(e,t)})}function qd(t,e){if(zs(t.childValues.has(e)),zs(Qs(e)),!t.dirtyChildren)t.dirtyChildren=bc.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),Fd(t)}function Ud(t,e){zs(t.childValues.has(e)),zs(!Qs(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,Wp(e.value)):Qp(r,e.value)||t.setDirty(),$d(t,e),!Qs(t)&&Ld(t)}function $d(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(bc.length<zp&&bc.push(r),t.dirtyChildren=null))}function wc(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function Gd(t){var e=jp;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,n){Hd(t,n),e.push(n)})),zs(t.dirtyChildren===null),e}function Hd(t,e){e.parents.delete(t),t.childValues.delete(e),$d(t,e)}function em(t){if(typeof t.subscribe=="function")try{_c(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function _c(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var Ec=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(n){return r=r.getChildTrie(n)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&tm(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();function tm(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var rm=new Ec(typeof WeakMap=="function");function nm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return rm.lookupArray(t)}var Sc=new Set;function Ha(t,e){e===void 0&&(e=Object.create(null));var r=new Bp(e.max||Math.pow(2,16),function(o){return o.dispose()}),n=!!e.disposable,i=e.makeCacheKey||nm;function a(){if(!(n&&!lu.hasValue())){var o=i.apply(null,arguments);if(o===void 0)return t.apply(null,arguments);var f=Array.prototype.slice.call(arguments),S=r.get(o);S?S.args=f:(S=new Kp(t,f),r.set(o,S),S.subscribe=e.subscribe,n&&(S.reportOrphan=function(){return r.delete(o)}));var T=S.recompute();return r.set(o,S),Sc.add(r),lu.hasValue()||(Sc.forEach(function(A){return A.clean()}),Sc.clear()),n?void 0:T}}return a.dirty=function(){var o=i.apply(null,arguments),f=o!==void 0&&r.get(o);f&&f.setDirty()},a}var Vd=!1;function Bd(){var t=!Vd;return Me()||(Vd=!0),t}var im=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,n){var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,f=o===void 0?a&&"Query":o;return f&&f===r?!0:(Bd(),"heuristic")},t}(),hy=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,n){ue(this.isReady,1);var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,f=o===void 0?a&&"Query":o;if(ue(f,2),f===r)return!0;var S=this.possibleTypesMap[r];return!!(f&&S&&S.indexOf(f)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(n){(n.kind==="UNION"||n.kind==="INTERFACE")&&(r[n.name]=n.possibleTypes.map(function(i){return i.name}))}),r},t}(),jd=Object.prototype.hasOwnProperty,Ws=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Ha(function(n){return r.data[n]},{disposable:!0,makeCacheKey:function(n){return n}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var n=this.data[e];r!==n&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){jd.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(n){r.set(n,e[n])}),Object.keys(this.data).forEach(function(n){jd.call(e,n)||r.delete(n)})):Object.keys(this.data).forEach(function(n){r.delete(n)})},t}();function zd(t){return new Ws(t)}var sm=function(){function t(e){var r=this,n=e===void 0?{}:e,i=n.cacheKeyRoot,a=i===void 0?new Ec(On):i,o=n.freezeResults,f=o===void 0?!1:o,S=this,T=S.executeStoreQuery,A=S.executeSelectionSet,H=S.executeSubSelectedArray;this.freezeResults=f,this.executeStoreQuery=Ha(function(K){return T.call(r,K)},{makeCacheKey:function(K){var de=K.query,fe=K.rootValue,we=K.contextValue,Ne=K.variableValues,Ae=K.fragmentMatcher;if(we.store instanceof Ws)return a.lookup(we.store,de,Ae,JSON.stringify(Ne),fe.id)}}),this.executeSelectionSet=Ha(function(K){return A.call(r,K)},{makeCacheKey:function(K){var de=K.selectionSet,fe=K.rootValue,we=K.execContext;if(we.contextValue.store instanceof Ws)return a.lookup(we.contextValue.store,de,we.fragmentMatcher,JSON.stringify(we.variableValues),fe.id)}}),this.executeSubSelectedArray=Ha(function(K){return H.call(r,K)},{makeCacheKey:function(K){var de=K.field,fe=K.array,we=K.execContext;if(we.contextValue.store instanceof Ws)return a.lookup(we.contextValue.store,de,fe,JSON.stringify(we.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(Le(Le({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.variables,a=e.previousResult,o=e.returnPartialData,f=o===void 0?!0:o,S=e.rootId,T=S===void 0?"ROOT_QUERY":S,A=e.fragmentMatcherFunction,H=e.config,K=ir(n);i=ur({},st(K),i);var de={store:r,dataIdFromObject:H&&H.dataIdFromObject,cacheRedirects:H&&H.cacheRedirects||{}},fe=this.executeStoreQuery({query:n,rootValue:{type:"id",id:T,generated:!0,typename:"Query"},contextValue:de,variableValues:i,fragmentMatcher:A}),we=fe.missing&&fe.missing.length>0;return we&&!f&&fe.missing.forEach(function(Ne){if(!Ne.tolerable)throw new Y(8)}),a&&tt(a,fe.result)&&(fe.result=a),{result:fe.result,complete:!we}},t.prototype.executeStoreQuery=function(e){var r=e.query,n=e.rootValue,i=e.contextValue,a=e.variableValues,o=e.fragmentMatcher,f=o===void 0?am:o,S=yn(r),T=dt(r),A=xr(T),H={query:r,fragmentMap:A,contextValue:i,variableValues:a,fragmentMatcher:f};return this.executeSelectionSet({selectionSet:S.selectionSet,rootValue:n,execContext:H})},t.prototype.executeSelectionSet=function(e){var r=this,n=e.selectionSet,i=e.rootValue,a=e.execContext,o=a.fragmentMap,f=a.contextValue,S=a.variableValues,T={result:null},A=[],H=f.store.get(i.id),K=H&&H.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function de(fe){var we;return fe.missing&&(T.missing=T.missing||[],(we=T.missing).push.apply(we,fe.missing)),fe.result}return n.selections.forEach(function(fe){var we;if(!!fn(fe,S))if(Ie(fe)){var Ne=de(r.executeField(H,K,fe,a));typeof Ne!="undefined"&&A.push((we={},we[en(fe)]=Ne,we))}else{var Ae=void 0;if(hn(fe))Ae=fe;else if(Ae=o[fe.name.value],!Ae)throw new Y(9);var Ue=Ae.typeCondition&&Ae.typeCondition.name.value,$e=!Ue||a.fragmentMatcher(i,Ue,f);if($e){var Ge=r.executeSelectionSet({selectionSet:Ae.selectionSet,rootValue:i,execContext:a});$e==="heuristic"&&Ge.missing&&(Ge=Le(Le({},Ge),{missing:Ge.missing.map(function(Ke){return Le(Le({},Ke),{tolerable:!0})})})),A.push(de(Ge))}}}),T.result=xa(A),this.freezeResults,T},t.prototype.executeField=function(e,r,n,i){var a=i.variableValues,o=i.contextValue,f=n.name.value,S=In(n,a),T={resultKey:en(n),directives:Yn(n,a)},A=om(e,r,f,S,o,T);return Array.isArray(A.result)?this.combineExecResults(A,this.executeSubSelectedArray({field:n,array:A.result,execContext:i})):n.selectionSet?A.result==null?A:this.combineExecResults(A,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:A.result,execContext:i})):(Qd(n,A.result),this.freezeResults,A)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e.forEach(function(i){i.missing&&(n=n||[],n.push.apply(n,i.missing))}),{result:e.pop().result,missing:n}},t.prototype.executeSubSelectedArray=function(e){var r=this,n=e.field,i=e.array,a=e.execContext,o;function f(S){return S.missing&&(o=o||[],o.push.apply(o,S.missing)),S.result}return i=i.map(function(S){return S===null?null:Array.isArray(S)?f(r.executeSubSelectedArray({field:n,array:S,execContext:a})):n.selectionSet?f(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:S,execContext:a})):(Qd(n,S),S)}),this.freezeResults,{result:i,missing:o}},t}();function Qd(t,e){if(!t.selectionSet&&pn(e))throw new Y(10)}function am(){return!0}function py(t){invariant(isIdValue(t),11)}function om(t,e,r,n,i,a){var o=a.resultKey,f=a.directives,S=r;(n||f)&&(S=Et(S,n,f));var T=void 0;if(t&&(T=t[S],typeof T=="undefined"&&i.cacheRedirects&&typeof e=="string")){var A=i.cacheRedirects[e];if(A){var H=A[r];H&&(T=H(t,n,{getCacheKey:function(K){var de=i.dataIdFromObject(K);return de&&wr({id:de,typename:K.__typename})}}))}}return typeof T=="undefined"?{result:T,missing:[{object:t,fieldName:S,tolerable:!1}]}:(Bt(T)&&(T=T.json),{result:T})}var cu=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function my(t){return new cu(t)}var um=function(t){Zr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function lm(t,e){var r=new um(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var cm=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,n=e.result,i=e.store,a=i===void 0?zd():i,o=e.variables,f=e.dataIdFromObject,S=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:r,store:a,variables:o,dataIdFromObject:f,fragmentMatcherFunction:S})},t.prototype.writeResultToStore=function(e){var r=e.dataId,n=e.result,i=e.document,a=e.store,o=a===void 0?zd():a,f=e.variables,S=e.dataIdFromObject,T=e.fragmentMatcherFunction,A=hr(i);try{return this.writeSelectionSetToStore({result:n,dataId:r,selectionSet:A.selectionSet,context:{store:o,processedData:{},variables:ur({},st(A),f),dataIdFromObject:S,fragmentMap:xr(dt(i)),fragmentMatcherFunction:T}})}catch(H){throw lm(H,i)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,n=e.result,i=e.dataId,a=e.selectionSet,o=e.context,f=o.variables,S=o.store,T=o.fragmentMap;return a.selections.forEach(function(A){var H;if(!!fn(A,f))if(Ie(A)){var K=en(A),de=n[K];if(typeof de!="undefined")r.writeFieldToStore({dataId:i,value:de,field:A,context:o});else{var fe=!1,we=!1;A.directives&&A.directives.length&&(fe=A.directives.some(function(Ct){return Ct.name&&Ct.name.value==="defer"}),we=A.directives.some(function(Ct){return Ct.name&&Ct.name.value==="client"})),!fe&&!we&&o.fragmentMatcherFunction}}else{var Ne=void 0;hn(A)?Ne=A:(Ne=(T||{})[A.name.value],ue(Ne,3));var Ae=!0;if(o.fragmentMatcherFunction&&Ne.typeCondition){var Ue=i||"self",$e=wr({id:Ue,typename:void 0}),Ge={store:new cu((H={},H[Ue]=n,H)),cacheRedirects:{}},Ke=o.fragmentMatcherFunction($e,Ne.typeCondition.name.value,Ge);!ge()&&Ke==="heuristic",Ae=!!Ke}Ae&&r.writeSelectionSetToStore({result:n,selectionSet:Ne.selectionSet,dataId:i,context:o})}}),S},t.prototype.writeFieldToStore=function(e){var r,n=e.field,i=e.value,a=e.dataId,o=e.context,f=o.variables,S=o.dataIdFromObject,T=o.store,A,H,K=Ze(n,f);if(!n.selectionSet||i===null)A=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var de=a+"."+K;A=this.processArrayValue(i,de,n.selectionSet,o)}else{var fe=a+"."+K,we=!0;if(kc(fe)||(fe="$"+fe),S){var Ne=S(i);ue(!Ne||!kc(Ne),4),(Ne||typeof Ne=="number"&&Ne===0)&&(fe=Ne,we=!1)}Kd(fe,n,o.processedData)||this.writeSelectionSetToStore({dataId:fe,result:i,selectionSet:n.selectionSet,context:o});var Ae=i.__typename;A=wr({id:fe,typename:Ae},we),H=T.get(a);var Ue=H&&H[K];if(Ue!==A&&pn(Ue)){var $e=Ue.typename!==void 0,Ge=Ae!==void 0,Ke=$e&&Ge&&Ue.typename!==Ae;ue(!we||Ue.generated||Ke,5),ue(!$e||Ge,6),Ue.generated&&(Ke?we||T.delete(Ue.id):Wd(Ue.id,A.id,T))}}H=T.get(a),(!H||!tt(A,H[K]))&&T.set(a,Le(Le({},H),(r={},r[K]=A,r)))},t.prototype.processArrayValue=function(e,r,n,i){var a=this;return e.map(function(o,f){if(o===null)return null;var S=r+"."+f;if(Array.isArray(o))return a.processArrayValue(o,S,n,i);var T=!0;if(i.dataIdFromObject){var A=i.dataIdFromObject(o);A&&(S=A,T=!1)}return Kd(S,n,i.processedData)||a.writeSelectionSetToStore({dataId:S,result:o,selectionSet:n,context:i}),wr({id:S,typename:o.__typename},T)})},t}();function kc(t){return t[0]==="$"}function Wd(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),a=!1;Object.keys(n).forEach(function(f){var S=n[f],T=i[f];pn(S)&&kc(S.id)&&pn(T)&&!tt(S,T)&&Wd(S.id,T.id,r)&&(a=!0)}),r.delete(t);var o=Le(Le({},n),i);return tt(o,i)?a:(r.set(e,o),!0)}function Kd(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var dm={fragmentMatcher:new im,dataIdFromObject:hm,addTypename:!0,resultCaching:!0,freezeResults:!1};function hm(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var pm=Object.prototype.hasOwnProperty,Yd=function(t){Zr(e,t);function e(r,n,i){var a=t.call(this,Object.create(null))||this;return a.optimisticId=r,a.parent=n,a.transaction=i,a}return e.prototype.toObject=function(){return Le(Le({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return pm.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(cu),mm=function(t){Zr(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new Ec(On),n.silenceBroadcast=!1,n.config=Le(Le({},dm),r),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new Ws:new cu,n.optimisticData=n.data,n.storeWriter=new cm,n.storeReader=new sm({cacheKeyRoot:n.cacheKeyRoot,freezeResults:r.freezeResults});var i=n,a=i.maybeBroadcastWatch;return n.maybeBroadcastWatch=Ha(function(o){return a.call(n,o)},{makeCacheKey:function(o){if(!o.optimistic&&!o.previousResult&&i.data instanceof Ws)return i.cacheKeyRoot.lookup(o.query,JSON.stringify(o.variables))}}),n}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:i,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(r){var n=this;return this.watches.add(r),function(){n.watches.delete(r)}},e.prototype.evict=function(r){throw new Y(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var n=[],i=0,a=this.optimisticData;a instanceof Yd;)a.optimisticId===r?++i:n.push(a),a=a.parent;if(i>0){for(this.optimisticData=a;n.length>0;){var o=n.pop();this.performTransaction(o.transaction,o.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,n){var i=this,a=i.data,o=i.silenceBroadcast;this.silenceBroadcast=!0,typeof n=="string"&&(this.data=this.optimisticData=new Yd(n,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=o,this.data=a}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,n){return this.performTransaction(r,n)},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=wi(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(uu);function fm(t){return new rn(function(e,r){var n=ps(e,[]);return new Nr(function(i){var a;return Promise.resolve(n).then(function(o){return t(o,e.getContext())}).then(e.setContext).then(function(){a=r(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){a&&a.unsubscribe()}})})}var gm=it(3033),vm={includeQuery:!0,includeExtensions:!1},ym={accept:"*/*","content-type":"application/json"},bm={method:"POST"},wm={http:vm,headers:ym,options:bm},Xd=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n},_m=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=r,Promise.reject(n)}}).then(function(r){return e.status>=300&&Xd(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Xd(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName)+"'."),r})}},Em=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new Y(1)}},Sm=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},km=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Le({},e.options,{headers:e.headers,credentials:e.credentials}),a=e.http;r.forEach(function(H){i=Le({},i,H.options,{headers:Le({},i.headers,H.headers)}),H.credentials&&(i.credentials=H.credentials),a=Le({},a,H.http)});var o=t.operationName,f=t.extensions,S=t.variables,T=t.query,A={operationName:o,variables:S};return a.includeExtensions&&(A.extensions=f),a.includeQuery&&(A.query=(0,gm.S)(T)),{options:i,body:A}},Tc=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=new Y(2);throw n.parseError=i,n}return r},Tm=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")},Jd=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.includeExtensions,a=t.useGETForQueries,o=ps(t,["uri","fetch","includeExtensions","useGETForQueries"]);Em(n),n||(n=fetch);var f={http:{includeExtensions:i},options:o.fetchOptions,credentials:o.credentials,headers:o.headers};return new rn(function(S){var T=Tm(S,r),A=S.getContext(),H={};if(A.clientAwareness){var K=A.clientAwareness,de=K.name,fe=K.version;de&&(H["apollographql-client-name"]=de),fe&&(H["apollographql-client-version"]=fe)}var we=Le({},H,A.headers),Ne={http:A.http,options:A.fetchOptions,credentials:A.credentials,headers:we},Ae=km(S,wm,f,Ne),Ue=Ae.options,$e=Ae.body,Ge;if(!Ue.signal){var Ke=Sm(),Ct=Ke.controller,Dt=Ke.signal;Ge=Ct,Ge&&(Ue.signal=Dt)}var Kt=function(Un){return Un.kind==="OperationDefinition"&&Un.operation==="mutation"};if(a&&!S.query.definitions.some(Kt)&&(Ue.method="GET"),Ue.method==="GET"){var xt=Rm(T,$e),es=xt.newURI,ao=xt.parseError;if(ao)return Zo(ao);T=es}else try{Ue.body=Tc($e,"Payload")}catch(Un){return Zo(Un)}return new Nr(function(Un){return n(T,Ue).then(function(qr){return S.setContext({response:qr}),qr}).then(_m(S)).then(function(qr){return Un.next(qr),Un.complete(),qr}).catch(function(qr){qr.name!=="AbortError"&&(qr.result&&qr.result.errors&&qr.result.data&&Un.next(qr.result),Un.error(qr))}),function(){Ge&&Ge.abort()}})})};function Rm(t,e){var r=[],n=function(H,K){r.push(H+"="+encodeURIComponent(K))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=Tc(e.variables,"Variables map")}catch(H){return{parseError:H}}n("variables",i)}if(e.extensions){var a=void 0;try{a=Tc(e.extensions,"Extensions map")}catch(H){return{parseError:H}}n("extensions",a)}var o="",f=t,S=t.indexOf("#");S!==-1&&(o=t.substr(S),f=t.substr(0,S));var T=f.indexOf("?")===-1?"?":"&",A=f+T+r.join("&")+o;return{newURI:A}}var fy=function(t){Zr(e,t);function e(r){return t.call(this,Jd(r).request)||this}return e}(rn),Cm=it(5175),du=it(1669),Pm=it(6030);class hu extends Error{constructor(e,r){super(e);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Pi extends hu{constructor(e,r,n){super(e,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const pu=Symbol.toStringTag,Zd=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[pu]==="URLSearchParams",Ki=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[pu]);function Rc(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[pu]==="FormData"}const Nm=t=>typeof t=="object"&&t[pu]==="AbortSignal",Ks=`\r
`,Cc="-".repeat(2),Am=Buffer.byteLength(Ks),eh=t=>`${Cc}${t}${Cc}${Ks.repeat(2)}`;function th(t,e,r){let n="";return n+=`${Cc}${t}${Ks}`,n+=`Content-Disposition: form-data; name="${e}"`,Ki(r)&&(n+=`; filename="${r.name}"${Ks}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${Ks.repeat(2)}`}const Im=()=>(0,ka.randomBytes)(8).toString("hex");async function*Dm(t,e){for(const[r,n]of t)yield th(e,r,n),Ki(n)?yield*n.stream():yield n,yield Ks;yield eh(e)}function Om(t,e){let r=0;for(const[n,i]of t)r+=Buffer.byteLength(th(e,n,i)),Ki(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=Am;return r+=Buffer.byteLength(eh(e)),r}const an=Symbol("Body internals");class Pc{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Zd(e)?e=Buffer.from(e.toString()):Ki(e)||Buffer.isBuffer(e)||(du.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Nt||(Rc(e)?(n=`NodeFetchFormDataBoundary${Im()}`,e=Nt.Readable.from(Dm(e,n))):e=Buffer.from(String(e)))),this[an]={body:e,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Nt&&e.on("error",i=>{const a=i instanceof hu?i:new Pi(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[an].error=a})}get body(){return this[an].body}get bodyUsed(){return this[an].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:r,byteLength:n}=await mu(this);return e.slice(r,r+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[an].body&&this[an].body.type||"",r=await this.buffer();return new Pm([r],{type:e})}async json(){const e=await mu(this);return JSON.parse(e.toString())}async text(){return(await mu(this)).toString()}buffer(){return mu(this)}}Object.defineProperties(Pc.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function mu(t){if(t[an].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[an].disturbed=!0,t[an].error)throw t[an].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(Ki(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof Nt))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){if(t.size>0&&n+i.length>t.size){const a=new Pi(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(a),a}n+=i.length,r.push(i)}}catch(i){throw i instanceof hu?i:new Pi(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new Pi(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Pi(`Premature close of server response while trying to fetch ${t.url}`)}const rh=(t,e)=>{let r,n,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Nt&&typeof i.getBoundary!="function"&&(r=new Nt.PassThrough({highWaterMark:e}),n=new Nt.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[an].body=r,i=n),i},nh=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Zd(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ki(t)?t.type||null:Buffer.isBuffer(t)||du.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:Rc(t)?`multipart/form-data; boundary=${e[an].boundary}`:t instanceof Nt?null:"text/plain;charset=UTF-8",xm=t=>{const{body:e}=t;return e===null?0:Ki(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:Rc(e)?Om(t[an].boundary):null},Mm=(t,{body:e})=>{e===null?t.end():Ki(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},fu=typeof gi.validateHeaderName=="function"?gi.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Nc=typeof gi.validateHeaderValue=="function"?gi.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Yi extends URLSearchParams{constructor(e){let r=[];if(e instanceof Yi){const n=e.raw();for(const[i,a]of Object.entries(n))r.push(...a.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!du.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||du.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(fu(n),Nc(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,a){switch(i){case"append":case"set":return(o,f)=>(fu(o),Nc(o,String(f)),URLSearchParams.prototype[i].call(a,String(o).toLowerCase(),String(f)));case"delete":case"has":case"getAll":return o=>(fu(o),URLSearchParams.prototype[i].call(a,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e){for(const r of this.keys())e(this.get(r),r)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{const n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}}Object.defineProperties(Yi.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Fm(t=[]){return new Yi(t.reduce((e,r,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return fu(e),Nc(e,String(r)),!0}catch{return!1}}))}const Lm=new Set([301,302,303,307,308]),ih=t=>Lm.has(t),Ni=Symbol("Response internals");class ni extends Pc{constructor(e=null,r={}){super(e,r);const n=r.status||200,i=new Yi(r.headers);if(e!==null&&!i.has("Content-Type")){const a=nh(e);a&&i.append("Content-Type",a)}this[Ni]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[Ni].url||""}get status(){return this[Ni].status}get ok(){return this[Ni].status>=200&&this[Ni].status<300}get redirected(){return this[Ni].counter>0}get statusText(){return this[Ni].statusText}get headers(){return this[Ni].headers}get highWaterMark(){return this[Ni].highWaterMark}clone(){return new ni(rh(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,r=302){if(!ih(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new ni(null,{headers:{location:new URL(e).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(ni.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const qm=t=>{if(t.search)return t.search;const e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""},Ai=Symbol("Request internals"),gu=t=>typeof t=="object"&&typeof t[Ai]=="object";class Va extends Pc{constructor(e,r={}){let n;gu(e)?n=new URL(e.url):(n=new URL(e),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||gu(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const a=r.body?r.body:gu(e)&&e.body!==null?rh(e):null;super(a,{size:r.size||e.size||0});const o=new Yi(r.headers||e.headers||{});if(a!==null&&!o.has("Content-Type")){const S=nh(a,this);S&&o.append("Content-Type",S)}let f=gu(e)?e.signal:null;if("signal"in r&&(f=r.signal),f!==null&&!Nm(f))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Ai]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:f},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[Ai].method}get url(){return(0,vi.format)(this[Ai].parsedURL)}get headers(){return this[Ai].headers}get redirect(){return this[Ai].redirect}get signal(){return this[Ai].signal}clone(){return new Va(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Va.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const Um=t=>{const{parsedURL:e}=t[Ai],r=new Yi(t[Ai].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){const f=xm(t);typeof f=="number"&&!Number.isNaN(f)&&(n=String(f))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");const a=qm(e);return{path:e.pathname+a,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class $m extends hu{constructor(e,r="aborted"){super(e,r)}}const Gm=new Set(["data:","http:","https:"]);async function vu(t,e){return new Promise((r,n)=>{const i=new Va(t,e),a=Um(i);if(!Gm.has(a.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${a.protocol.replace(/:$/,"")}" is not supported.`);if(a.protocol==="data:"){const de=Cm(i.url),fe=new ni(de,{headers:{"Content-Type":de.typeFull}});r(fe);return}const o=(a.protocol==="https:"?qs:gi).request,{signal:f}=i;let S=null;const T=()=>{const de=new $m("The operation was aborted.");n(de),i.body&&i.body instanceof Nt.Readable&&i.body.destroy(de),!(!S||!S.body)&&S.body.emit("error",de)};if(f&&f.aborted){T();return}const A=()=>{T(),K()},H=o(a);f&&f.addEventListener("abort",A);const K=()=>{H.abort(),f&&f.removeEventListener("abort",A)};H.on("error",de=>{n(new Pi(`request to ${i.url} failed, reason: ${de.message}`,"system",de)),K()}),H.on("response",de=>{H.setTimeout(0);const fe=Fm(de.rawHeaders);if(ih(de.statusCode)){const $e=fe.get("Location"),Ge=$e===null?null:new URL($e,i.url);switch(i.redirect){case"error":n(new Pi(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),K();return;case"manual":if(Ge!==null)try{fe.set("Location",Ge)}catch(Ke){n(Ke)}break;case"follow":{if(Ge===null)break;if(i.counter>=i.follow){n(new Pi(`maximum redirect reached at: ${i.url}`,"max-redirect")),K();return}const Ke={headers:new Yi(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(de.statusCode!==303&&i.body&&e.body instanceof Nt.Readable){n(new Pi("Cannot follow redirect with body being a readable stream","unsupported-redirect")),K();return}(de.statusCode===303||(de.statusCode===301||de.statusCode===302)&&i.method==="POST")&&(Ke.method="GET",Ke.body=void 0,Ke.headers.delete("content-length")),r(vu(new Va(Ge,Ke))),K();return}default:}}de.once("end",()=>{f&&f.removeEventListener("abort",A)});let we=(0,Nt.pipeline)(de,new Nt.PassThrough,$e=>{n($e)});process.version<"v12.10"&&de.on("aborted",A);const Ne={url:i.url,status:de.statusCode,statusText:de.statusMessage,headers:fe,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},Ae=fe.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Ae===null||de.statusCode===204||de.statusCode===304){S=new ni(we,Ne),r(S);return}const Ue={flush:Hr.Z_SYNC_FLUSH,finishFlush:Hr.Z_SYNC_FLUSH};if(Ae==="gzip"||Ae==="x-gzip"){we=(0,Nt.pipeline)(we,Hr.createGunzip(Ue),$e=>{n($e)}),S=new ni(we,Ne),r(S);return}if(Ae==="deflate"||Ae==="x-deflate"){(0,Nt.pipeline)(de,new Nt.PassThrough,Ge=>{n(Ge)}).once("data",Ge=>{(Ge[0]&15)==8?we=(0,Nt.pipeline)(we,Hr.createInflate(),Ke=>{n(Ke)}):we=(0,Nt.pipeline)(we,Hr.createInflateRaw(),Ke=>{n(Ke)}),S=new ni(we,Ne),r(S)});return}if(Ae==="br"){we=(0,Nt.pipeline)(we,Hr.createBrotliDecompress(),$e=>{n($e)}),S=new ni(we,Ne),r(S);return}S=new ni(we,Ne),r(S)}),Mm(H,i)})}let Ba;const Hm={};function Vm(t){Ba=t.globalState}const sh=(t,e)=>{if(!Ba)throw new Error("Persistent store not initialized.");return Ba.get(t+":"+e,Hm)},ah=(t,e,r)=>{if(!Ba)throw new Error("Persistent store not initialized.");return Ba.update(t+":"+e,r)};var Bm=it(6149);const oh=jm();function jm(t=process.env.HTTPS_PROXY){if(!t)return qs.globalAgent;try{const{hostname:e,port:r,username:n,password:i}=new vi.URL(t),a=n&&i&&`${n}:${i}`;return(0,Bm.httpsOverHttp)({proxy:{host:e,port:r,proxyAuth:a}})}catch(e){return c.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),qs.globalAgent}}var zm=Object.defineProperty,vs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const uh="Try again?",Qm="Cancel",lh="Sign in",Wm="Don't show again",ch="prompt for sign in",dh="login",hh=["read:user","user:email","repo"];var Ot;(function(t){t.github="github",t["github-enterprise"]="github-enterprise"})(Ot||(Ot={}));class Km{constructor(e){this._telemetry=e,vs(this,"_githubAPI"),vs(this,"_sessionId"),vs(this,"_githubEnterpriseAPI"),vs(this,"_enterpriseSessionId"),vs(this,"_disposables"),vs(this,"_onDidInitialize",new c.EventEmitter),vs(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(c.authentication.onDidChangeSessions(()=>{this.isAuthenticated(Ot.github)||this.initialize(Ot.github),!this.isAuthenticated(Ot["github-enterprise"])&&Ou()&&this.initialize(Ot["github-enterprise"])}))}async initialize(e,r){if(e===Ot["github-enterprise"]&&!Ou()){P.debug("GitHub Enterprise provider selected without URI.","Authentication");return}r={...r,createIfNone:!1};let n;try{n=await c.authentication.getSession(e,hh,r)}catch(i){if(!(r.forceNewSession&&i.message==="User did not consent to login."))throw i}if(n){e===Ot.github?this._sessionId=n.id:this._enterpriseSessionId=n.id;const i=await this.createHub(n.accessToken,e);e===Ot.github?this._githubAPI=i:this._githubEnterpriseAPI=i,await this.setCurrentUser(i),this._onDidInitialize.fire()}else P.debug(`No GitHub${Ac(e)} token found.`,"Authentication")}async doCreate(e){await this.initialize(Ot.github,e),Ou()&&await this.initialize(Ot["github-enterprise"],e)}async create(e={}){return this.doCreate(e)}async recreate(e){return this.doCreate({forceNewSession:e?{detail:e}:!0})}async reset(){return this._githubAPI=void 0,this._githubEnterpriseAPI=void 0,this.create()}isAnyAuthenticated(){return this.isAuthenticated(Ot.github)||this.isAuthenticated(Ot["github-enterprise"])}isAuthenticated(e){return e===Ot.github?!!this._githubAPI:!!this._githubEnterpriseAPI}getHub(e){return e===Ot.github?this._githubAPI:this._githubEnterpriseAPI}async getHubOrLogin(e){var r,n;return e===Ot.github?(r=this._githubAPI)!=null?r:await this.login(e):(n=this._githubEnterpriseAPI)!=null?n:await this.login(e)}async showSignInNotification(e){if(sh(ch,dh)===!1)return;if(await c.window.showInformationMessage(`In order to use the Pull Requests functionality, you must sign in to GitHub${Ac(e)}`,lh,Wm)===lh)return await this.login(e);ah(ch,dh,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async login(e){this._telemetry.sendTelemetryEvent("auth.start");const r=`Error signing in to GitHub${Ac(e)}`;let n=!0,i;for(;n;){try{const a=await this.getSessionOrLogin(e);i=await this.createHub(a,e)}catch(a){P.appendLine(`${r}: ${a}`),a instanceof Error&&a.stack&&P.appendLine(a.stack)}i?n=!1:n=await c.window.showErrorMessage(r,uh,Qm)===uh}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}async showSamlMessageAndAuth(){return this.recreate("GitHub Pull Requests and Issues requires that you provide SAML access to your organization when you sign in.")}isCurrentUser(e){var r,n,i,a;return((n=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:n.login)===e||((a=(i=this._githubEnterpriseAPI)==null?void 0:i.currentUser)==null?void 0:a.login)==e}getCurrentUser(e){const r=this.getHub(e);return(r==null?void 0:r.octokit)&&(r==null?void 0:r.currentUser)}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(e){const r=await c.authentication.getSession(e,hh,{createIfNone:!0});return e===Ot.github?this._sessionId=r.id:this._enterpriseSessionId=r.id,r.accessToken}async createHub(e,r){let n="https://api.github.com",i;r===Ot["github-enterprise"]&&(i=Wc()),i&&(n=`${i.scheme}://${i.authority}/api/v3`);let a;c.env.uiKind===c.UIKind.Web&&(a=(T,A)=>{if(A.headers!==void 0){const{"user-agent":H,...K}=A.headers;H&&(A.headers=K)}return vu(T,A)});const o=new zi({request:{agent:oh,fetch:a},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`,baseUrl:n});i&&(n=`${i.scheme}://${i.authority}/api`);const f=new Qt({link:Ym(n,e||""),cache:new mm,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),S={octokit:o,graphql:f};return await this.setCurrentUser(S),S}dispose(){this._disposables.forEach(e=>e.dispose())}}const Ym=(t,e)=>fm((r,{headers:n})=>({headers:{...n,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Jd({uri:`${t}/graphql`,fetch:vu}));function Ac(t){return t===Ot.github?"":" Enterprise"}let ph=!1;const mh=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(ph)return c.Uri.parse(e);if(await c.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return ph=!0,c.Uri.parse(e)}const r=t instanceof c.Uri?t:c.Uri.parse(t.host);return r.authority==="github.com"?c.Uri.parse("https://api.github.com"):c.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof c.Uri?t:c.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var Xm=Object.defineProperty,Jm=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ic{constructor(){Jm(this,"_servers",new Map().set("github.com",!0).set("ssh.github.com",!0))}async isGitHub(e){if(e===null||e.path.endsWith(".wiki")||e.authority.match(/gist[.]github[.]com/))return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,n]=await Ic.getOptions(e,"HEAD","/rate_limit");let i=!1;try{const o=(await vu(r.toString(),n)).headers.get("x-github-request-id");return i=o!=null,i}catch(a){return P.appendLine(`No response from host ${e}: ${a.message}`,"GitHubServer"),i}finally{P.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,r="GET",n,i){const a={"user-agent":"GitHub VSCode Pull Requests"};i&&(a.authorization=`token ${i}`);const o=c.Uri.joinPath(await mh.getApiHost(e),mh.getApiPath(e,n));return[o,{hostname:o.authority,port:443,method:r,headers:a,agent:oh}]}}class yu{constructor(e,r,n){this.remoteName=e,this.url=r,this.gitProtocol=n}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}get authProviderId(){var e;return this.host===((e=Wc())==null?void 0:e.authority)?Ot["github-enterprise"]:Ot.github}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function fh(t,e,r){if(!e)return null;const n=new kn(e);return r&&n.update({type:r.type}),n.host?new yu(t,e,n):null}function Ys(t){const e=[];for(const r of t.state.remotes){const n=[];r.fetchUrl&&n.push(r.fetchUrl),r.pushUrl&&r.pushUrl!==r.fetchUrl&&n.push(r.pushUrl),n.forEach(i=>{const a=fh(r.name,i);a&&e.push(a)})}return e}const Dc="github.pullRequest.pullNotification.show",ja="github.pullRequest.repos";function Zm(t){t.globalState.setKeysForSync([Dc])}var ef=it(9593),tf=it.n(ef),bu=it(7228);const gh=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function vh(t){return t.match(gh)}function rf(t){return!!vh(t.body)}async function yh(t,e,r=!0){const n=t[2],i=t[3],a=t[5],o=Number(t[6])-1,f=t[8]?Number(t[8])-1:o;let S;for(const A of e.folderManagers){const H=A.getGitHubRemotes();for(const K of H)if(n.toLowerCase()===K.owner.toLowerCase()&&i.toLowerCase()===K.repositoryName.toLowerCase()){S=A;break}if(S)break}if(!S)return;const T=c.Uri.joinPath(S.repository.rootUri,a);try{await c.workspace.fs.stat(T)}catch(A){return}return{file:T,start:o,end:f}}async function nf(t,e){const r=vh(t.body);if(!r){c.window.showInformationMessage("Issue has no link.");return}const n=await yh(r,e,!1);if(!n)return c.env.openExternal(c.Uri.parse(r[0]));const i=await c.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=new c.Range(n.start,0,n.end,a.text.length);return c.window.showTextDocument(n.file,{selection:o})}var sf=Object.defineProperty,bh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const gy=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,za=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Oc=/\@([^\s]+)/,af=150,gr="githubIssues",Xs="queries",of="default",wh="issueBranchTitle",_h="useBranchForIssues",uf="workingIssueFormatScm";function xc(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function lf(t,e,r,n){var i;const a=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(r);if(a)return a;{let o,f,S;const T=e.getGitHubRemotes();for(const A of T){if(n)o=n.owner?n.owner:A.owner,f=n.name?n.name:A.repositoryName,S=n.issueNumber;else{const H=xc(r.match(za));H&&(!H.name||!H.owner)&&(o=A.owner,f=A.repositoryName)}if(o&&f&&S!==void 0){let H=await e.resolveIssue(o,f,S,!!n.commentNumber);if(H||(H=await e.resolvePullRequest(o,f,S)),H){let K;return t.resolvedIssues.has(e.repository.rootUri.path)?K=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,K=new(tf())(50)),K.set(r,H),H}}}}}function cf(t,e){let r;return t.commitContributions.forEach(n=>{e.toLowerCase()===n.repoNameWithOwner.toLowerCase()&&(r=n.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class df extends c.CompletionItem{constructor(){super(...arguments);bh(this,"login"),bh(this,"uri")}}function Mc(t,e){const r=new c.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const n=cf(e,t.owner+"/"+t.repo);return(e.location||n)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),n&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${n}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function hf(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function pf(t,e){const r=hf(t);let n="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(n="000000"),`<span style="color:#${n};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function Eh(t,e,r){let n=t.search(e),i=0;for(;n>=0&&n<t.length;){let a;if(n===0||t.charAt(n-1)!=="&"){const f=t.substring(n).match(e);if(f){const S=await r(f);S&&(a=t.slice(0,n)+S,t=a+t.slice(n+f[0].length))}}i=a?a.length:n+1;const o=t.substring(i).search(e);n=o>0?i+o:o}return t}function Sh(t,e){return Eh(t,za,async r=>{const n=xc(r);if(n){const i=Ch(n);return(!n.owner||!n.name)&&(n.owner=e.remote.owner,n.name=e.remote.repositoryName),`[${i}](https://github.com/${n.owner}/${n.name}/issues/${n.issueNumber})`}})}async function mf(t,e){return Eh(t,gh,async r=>{const n=await yh(r,e);if(n){const i=await c.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=[n.file,{selection:{start:{line:n.start,character:0},end:{line:n.end,character:a.text.length}}}],f=c.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(o))}`);return`[${r[0]}](${f} "Open ${n.file.fsPath}")`}})}const wu=200;async function Fc(t,e,r,n){const i=new c.MarkdownString(void 0,!0);i.isTrusted=!0;const a=new Date(t.createdAt),o=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${o}](https://github.com/${o}) on ${a.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const f=bu.parse(t.title,{renderer:new $c}).trim();i.appendMarkdown(`${gf(t)} **${f}** [#${t.number}](${t.html_url})  
`);let S=bu.parse(t.body,{renderer:new $c});if(i.appendMarkdown(`  
`),S=S.length>wu?S.substr(0,wu)+"...":S,S=await Sh(S,t),S=await mf(S,r),i.appendMarkdown(S+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(T=>{i.appendMarkdown(`[${pf(T.color,T.name)}](https://github.com/${o}/labels/${encodeURIComponent(T.name)}) `)}),t.item.comments&&n){for(const T of t.item.comments)if(T.databaseId===n){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${T.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${T.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let A=bu.parse(T.body.length>wu?T.body.substr(0,wu)+"...":T.body,{renderer:new $c});A=await Sh(A,t),i.appendMarkdown(A)}}return i}function ff(t){switch(t.state){case Vt.Open:return t instanceof Di?"$(git-pull-request)":"$(issues)";case Vt.Closed:return t instanceof Di?"$(git-pull-request)":"$(issue-closed)";case Vt.Merged:return"$(git-merge)"}}function gf(t){if(t instanceof Di)return ff(t);switch(t.state){case Vt.Open:return'<span style="color:#22863a;">$(issues)</span>';case Vt.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const kh="HEAD",vf=1,yf=2,bf=3,Th=4,_u=new Map([["upstream",vf],["ups",yf],["origin",bf]]);async function wf(t,e){var r,n,i;const a=((r=t.state.HEAD)==null?void 0:r.upstream)&&!_u.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let o;const f=t.state.remotes.map(H=>({name:H.name,remote:H})).filter(H=>(H.name===a&&(o=H.remote),_u.has(H.name))).sort((H,K)=>{var de,fe;const we=(de=_u.get(H.name))!=null?de:Th,Ne=(fe=_u.get(K.name))!=null?fe:Th;return we-Ne});a&&f.push({name:a,remote:o});const S=[kh];((n=t.state.HEAD)==null?void 0:n.name)&&t.state.HEAD.name!==kh&&S.unshift((i=t.state.HEAD)==null?void 0:i.name);let T,A;for(let H=0;H<S.length&&!T;H++)for(let K=0;K<f.length&&!T;K++){const de=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${f[K].name}/${S[H]}`,count:1})).filter(fe=>fe.remote&&fe.name);de&&de.length>0&&(T=de[0],A=f[K].remote)}return A}async function Lc(t,e,r){var n,i;let a,o;if(r)a=r,((n=c.window.activeTextEditor)==null?void 0:n.document.uri.fsPath)===a.fsPath&&(o=c.window.activeTextEditor.selection);else if(!e&&c.window.activeTextEditor)a=c.window.activeTextEditor.document.uri,o=c.window.activeTextEditor.selection;else if(e)a=e.document.uri,o=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from.",originalFile:void 0};const f=zc(t,a);if(!f)return{permalink:void 0,error:"The current file isn't part of repository.",originalFile:a};let S,T;try{const fe=await f.log({maxEntries:1,path:a.fsPath});if(fe.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file.",originalFile:a};S=fe[0],T=fe[0].hash}catch(fe){T=(i=f.state.HEAD)==null?void 0:i.commit}const A=new Promise(fe=>{var we;if((we=f.state.HEAD)==null?void 0:we.upstream)for(const Ne of f.state.remotes)f.state.HEAD.upstream.remote===Ne.name&&fe(Ne);fe(void 0)});let H=S?await Promise.race([wf(f,S),new Promise(fe=>{setTimeout(()=>{fe(A)},1500)})]):await A;if((!H||!H.fetchUrl)&&(H=await A,!H||!H.fetchUrl))return{permalink:void 0,error:"The selection may not exist on any remote.",originalFile:a};const K=a.path.substring(f.rootUri.path.length),de=()=>{if(!o)return"";let fe=`#L${o.start.line+1}`;return o.start.line!==o.end.line&&(fe+=`-L${o.end.line+1}`),fe};return{permalink:`https://github.com/${new kn(H.fetchUrl).nameWithOwner}/blob/${T}${K}${de()}`,error:void 0,originalFile:a}}function Rh(t){const e=/[~^:;'".,~#?%*[\]@\\{}()]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const _f=/\$\{(.*?)\}/g;async function Eu(t,e,r,n){return t.replace(_f,(i,a)=>{switch(a){case"user":return n||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${Js(e,r)}`:i;case"issueTitle":return e?e.title:i;case"repository":return r?r.repo:i;case"owner":return r?r.owner:i;case"sanitizedIssueTitle":return e?Rh(e.title):i;case"sanitizedLowercaseIssueTitle":return e?Rh(e.title).toLowerCase():i;default:return i}})}function Js(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),Ch(r)}function Ch(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function Ph(t,e,r){var n;const i=await((n=e.currentIssue(t.repository.rootUri))==null?void 0:n.getCommitMessage());if(i)return t.repository.commit(i,{all:r})}const Nh="Commit Staged",Ah="Commit All";async function Ef(t,e,r){var n,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const a=[];switch(t.repository.state.indexChanges&&a.push(Nh),t.repository.state.workingTreeChanges&&a.push(Ah),await c.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...a)){case Nh:{await Ph(t,r,!1);break}case Ah:{await Ph(t,r,!0);break}default:return!1}}if((n=t.repository.state.HEAD)==null?void 0:n.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let a;return t.repository.state.remotes.length===1?a=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(a=await c.window.showQuickPick(t.repository.state.remotes.map(o=>o.name),{placeHolder:"Remote to push to"})),a?(await t.repository.push(a,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(c.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function qc(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await c.languages.getTokenInformationAtPosition(t,e)).type!==c.StandardTokenType.Comment)}async function Ih(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:qc(t,e)}function Uc(t){const e=new vi.URLSearchParams(t.query).get("rootUri");return e?c.Uri.parse(e):void 0}class $c extends bu.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,n,i){return e+" "}hr(){return""}list(e,r,n){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,n){return""}text(e){return e}link(e,r,n){return n+" "}}var Sf=Object.defineProperty,Dh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Su extends Error{constructor(e){super(e);this.message=e,Dh(this,"name"),Dh(this,"stack")}}function kf(t){var e;return!!((e=t.message)==null?void 0:e.startsWith("Resource protected by organization SAML enforcement."))}const ku=new Uint8Array(256);let Tu=ku.length;function Tf(){return Tu>ku.length-16&&(yl().randomFillSync(ku),Tu=0),ku.slice(Tu,Tu+=16)}const Rf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Cf(t){return typeof t=="string"&&Rf.test(t)}const Pf=Cf,Ir=[];for(let t=0;t<256;++t)Ir.push((t+256).toString(16).substr(1));function Nf(t,e=0){const r=(Ir[t[e+0]]+Ir[t[e+1]]+Ir[t[e+2]]+Ir[t[e+3]]+"-"+Ir[t[e+4]]+Ir[t[e+5]]+"-"+Ir[t[e+6]]+Ir[t[e+7]]+"-"+Ir[t[e+8]]+Ir[t[e+9]]+"-"+Ir[t[e+10]]+Ir[t[e+11]]+Ir[t[e+12]]+Ir[t[e+13]]+Ir[t[e+14]]+Ir[t[e+15]]).toLowerCase();if(!Pf(r))throw TypeError("Stringified UUID is invalid");return r}const Af=Nf;function If(t,e,r){t=t||{};const n=t.random||(t.rng||Tf)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Af(n)}const Oh=If;var Df=Object.defineProperty,lr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Df(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ru=class{constructor(t,e,r,n,i){lr(this,"commentId"),lr(this,"id"),lr(this,"parent"),lr(this,"body"),lr(this,"originalBody"),lr(this,"mode"),lr(this,"author"),lr(this,"label"),lr(this,"commentReactions"),lr(this,"contextValue"),this.parent=t,this.body=new c.MarkdownString(e),this.mode=c.CommentMode.Preview,this.author={name:n.login,iconPath:n.avatarUrl?c.Uri.parse(`${n.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=Ru.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Ru&&t.id===this.id&&(t.mode=c.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Ru&&t.id===this.id&&(t.mode=c.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let on=Ru;lr(on,"idPool",0);class vr{constructor(e,r){lr(this,"commentId"),lr(this,"parent"),lr(this,"body"),lr(this,"mode"),lr(this,"author"),lr(this,"label"),lr(this,"reactions"),lr(this,"_rawComment"),lr(this,"contextValue"),lr(this,"timestamp"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new c.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?c.Uri.parse(e.user.avatarUrl):void 0},Jf(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const n=[];e.canEdit&&n.push("canEdit"),e.canDelete&&n.push("canDelete"),this.contextValue=n.join(","),this.parent=r,this.timestamp=new Date(e.createdAt)}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof vr&&e.commentId===this.commentId&&(e.mode=c.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof vr&&e.commentId===this.commentId&&(e.mode=c.CommentMode.Preview,e.body=e._rawComment.body),e))}}var Of=Object.defineProperty,ys=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Of(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Gc(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class xh{constructor(){ys(this,"_webview"),ys(this,"_disposables",[]),ys(this,"_waitForReady"),ys(this,"_onIsReady",new c.EventEmitter),ys(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;const r=(e=this._webview)==null?void 0:e.onDidReceiveMessage(async n=>{await this._onDidReceiveMessage(n)},null,this._disposables);r&&this._disposables.push(r)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var n;const i={seq:e.req,res:r};(n=this._webview)==null||n.postMessage(i)}async _throwError(e,r){var n;const i={seq:e.req,err:r};(n=this._webview)==null||n.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class Mh extends xh{constructor(e){super();this._extensionUri=e,ys(this,"viewType"),ys(this,"_view")}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},this._disposables.push(this._view.onDidDispose(()=>{this._webview=void 0,this._view=void 0}))}show(){this._view?this._view.show():c.commands.executeCommand(`${this.viewType}.focus`)}}var xf=Object.defineProperty,Ii=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ii=class extends xh{constructor(t,e,r,n,i=ii._viewType){super();this._extensionUri=t,Ii(this,"_panel"),Ii(this,"_disposables",[]),Ii(this,"_descriptionNode"),Ii(this,"_item"),Ii(this,"_folderRepositoryManager"),Ii(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=n,this._panel=c.window.createWebviewPanel(i,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[c.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(a=>{if(this._folderRepositoryManager&&this._item){const o=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:o})}},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?c.ViewColumn.Beside:c.window.activeTextEditor?c.window.activeTextEditor.viewColumn:c.ViewColumn.One;if(ii.currentPanel)ii.currentPanel._panel.reveal(i,!0);else{const a=`Issue #${r.number.toString()}`;ii.currentPanel=new ii(t,i||c.ViewColumn.Active,a,e)}await ii.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,n,i]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,P.debug("pr.initialize",ii.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:n,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{c.window.showErrorMessage(ke(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":c.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(i,a){return e=(await i.getLabels(a)).filter(f=>!a.item.labels.some(S=>S.name===f.name)),e.map(f=>({label:f.name}))}const n=await c.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(n&&n.length){await this._item.addLabels(n.map(a=>a.label));const i=n.map(a=>e.find(o=>o.name===a.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){c.window.showErrorMessage(ke(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){c.window.showErrorMessage(ke(e))}}webviewDebug(t){P.debug(t.args,ii.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),c.window.showErrorMessage(`Editing description failed: ${ke(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),c.window.showErrorMessage(`Editing title failed: ${ke(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),c.window.showErrorMessage(ke(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){c.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),c.window.showErrorMessage(ke(r))})})}close(t){c.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){ii.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose(),this._webview=void 0;this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=Gc(),r=c.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let Cu=ii;Ii(Cu,"ID","PullRequestOverviewPanel"),Ii(Cu,"currentPanel"),Ii(Cu,"_viewType","IssueOverview");var Mf=Object.defineProperty,Zs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Ff(t){return!!t.id&&!!t.milestone}const si=class extends Cu{constructor(t,e,r,n){super(t,e,r,n,si._viewType);Zs(this,"_repositoryDefaultBranch"),Zs(this,"_existingReviewers",[]),Zs(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),gp(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(n.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Vt.Merged})}))}static async createOrShow(t,e,r,n=!1){const i=n?c.ViewColumn.Beside:c.window.activeTextEditor?c.window.activeTextEditor.viewColumn:c.ViewColumn.One;if(si.currentPanel)si.currentPanel._panel.reveal(i,!0);else{const a=`Pull Request #${r.number.toString()}`;si.currentPanel=new si(t,i||c.ViewColumn.Active,a,e)}await si.currentPanel.update(e,r)}set _currentPanel(t){si.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}static scrollToReview(){this.currentPanel&&this.currentPanel._postMessage({command:"pr.scrollToPendingReview"})}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}getCurrentUserReviewState(t,e){const r=t.find(n=>n.reviewer.login===e.login);return r==null?void 0:r.state}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t),this._folderRepositoryManager.getBranchNameForPullRequest(t)]).then(e=>{var r,n;const[i,a,o,f,S,T,A]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=o,this._panel.title=`Pull Request #${t.number.toString()}`;const H=t.equals(this._folderRepositoryManager.activePullRequest),K=T.hasWritePermission,de=T.mergeMethodsAvailability,fe=K||this._item.canEdit(),we=c.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Ne=Fh(de,we);this._existingReviewers=ip(S,a,i.author);const Ae=this._folderRepositoryManager.getCurrentUser(this._item),$e=i.base&&i.head&&!i.base.repositoryCloneUrl.equals(i.head.repositoryCloneUrl)&&Qc(),Ge=this.getCurrentUserReviewState(this._existingReviewers,Ae);P.debug("pr.initialize",si.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:a,isCurrentlyCheckedOut:H,isRemoteBaseDeleted:i.isRemoteBaseDeleted,base:i.base.label,isRemoteHeadDeleted:i.isRemoteHeadDeleted,isLocalHeadDeleted:!A,head:(n=(r=i.head)==null?void 0:r.label)!=null?n:"",repositoryDefaultBranch:o,canEdit:fe,hasWritePermission:K,status:f||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:de,defaultMergeMethod:Ne,isIssue:!1,milestone:i.milestone,assignees:i.assignees,continueOnGitHub:$e,isAuthor:Ae.login===i.author.login,currentUserReviewState:Ge}})}).catch(e=>{c.window.showErrorMessage(ke(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergeability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink();case"pr.openOnGitHub":return Za(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){var e;if(!t)return[];const n=(e=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName])!=null?e:[],i=new Set([this._item.author.login,...this._existingReviewers.map(o=>o.reviewer.login)]),a=[];for(const o of t){const{login:f,name:S,isAuthor:T,isCommenter:A}=o;if(i.has(f))continue;const H=T&&A?"Recently edited and reviewed changes to these files":T?"Recently edited these files":A?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:f,description:S,detail:H,reviewer:o}),i.add(f)}for(const o of n)i.has(o.login)||a.push({label:o.login,description:o.name,reviewer:o});return a.length===0&&a.push({label:"No reviewers available for this repository"}),a}getAssigneesQuickPickItems(t,e){var r,n;if(!e)return[];t=t!=null?t:[];const i=new Set([...(n=(r=this._item.assignees)==null?void 0:r.map(o=>o.login))!=null?n:[]]),a=[];for(const o of e){const{login:f,name:S,isAuthor:T,isCommenter:A}=o;if(i.has(f))continue;const H=T&&A?"Recently edited and reviewed changes to these files":T?"Recently edited these files":A?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:f,description:S,detail:H,assignee:o}),i.add(f)}for(const o of t)i.has(o.login)||a.push({label:o.login,description:o.name,assignee:o});return a.length===0&&a.push({label:"No assignees available for this repository"}),a}async addReviewers(t){var e;try{const r=(e=await c.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0}))==null?void 0:e.filter(n=>n.reviewer);if(r){await this._item.requestReview(r.map(i=>i.label));const n=r.map(i=>({reviewer:i.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(n),this._replyMessage(t,{added:n})}}catch(r){c.window.showErrorMessage(ke(r))}}async addMilestone(t){try{async function e(n){const i=await n.getMilestones();return i.items.length?i.items.map(a=>({label:a.milestone.title,id:a.milestone.id,milestone:a.milestone})):[{label:"No milestones created for this repository."}]}const r=await c.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&Ff(r)&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){c.window.showErrorMessage(ke(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){c.window.showErrorMessage(ke(e))}}async addAssignees(t){var e,r;try{const i=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],a=(e=await c.window.showQuickPick(this.getAssigneesQuickPickItems(i,[]),{canPickMany:!0,matchOnDescription:!0}))==null?void 0:e.filter(o=>o.assignee);if(a){const o=a.map(f=>f.assignee);this._item.assignees=(r=this._item.assignees)==null?void 0:r.concat(o),await this._item.updateAssignees(o.map(f=>f.login)),this._replyMessage(t,{added:o})}}catch(n){c.window.showErrorMessage(ke(n))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){c.window.showErrorMessage(ke(e))}}async removeAssignee(t){var e,r,n;try{await this._item.deleteAssignees(t.args);const i=(r=(e=this._item.assignees)==null?void 0:e.findIndex(a=>a.login===t.args))!=null?r:-1;(n=this._item.assignees)==null||n.splice(i,1),this._replyMessage(t,{})}catch(i){c.window.showErrorMessage(ke(i))}}async applyPatch(t){try{const e=t.args.comment,n=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=$.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),a=new TextEncoder,o=c.Uri.parse(i);await c.workspace.fs.writeFile(o,a.encode(n[1])),await this._folderRepositoryManager.repository.apply(i,!0),await c.workspace.fs.delete(o)}catch(e){P.appendLine(`Applying patch failed: ${e}`),c.window.showErrorMessage(`Applying patch failed: ${ke(e)}`)}}async openDiff(t){try{const e=t.args.comment;return Di.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){P.appendLine(`Open diff view failed: ${ke(e)}`,si.ID)}}checkoutPullRequest(t){c.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:n}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,n).then(i=>{c.commands.executeCommand("pr.refreshList"),i.merged||c.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?Vt.Merged:Vt.Open})}).catch(i=>{c.window.showErrorMessage(`Unable to merge pull request. ${ke(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const a=this._item.head.ref;!(this._repositoryDefaultBranch===this._item.head.ref)&&!this._item.isRemoteHeadDeleted&&r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${a}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const a=c.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!a});const o=c.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!o})}if(c.env.remoteName==="codespaces"&&r.push({label:"Suspend Codespace",type:"suspend"}),!r.length){c.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const n=await c.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0}),i=[];if(n){const a=this._item.equals(this._folderRepositoryManager.activePullRequest),o=n.map(async f=>{switch(f.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),i.push(f.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(a){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await c.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await c.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0),i.push(f.type);case"remote":return i.push(f.type),this._folderRepositoryManager.repository.removeRemote(e.remote);case"suspend":return i.push(f.type),c.commands.executeCommand("github.codespaces.disconnectSuspend")}});await Promise.all(o),this.refreshPanel(),c.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:i})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{c.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{c.window.showErrorMessage(`Unable to set PR ready for review. ${ke(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),c.commands.executeCommand("pr.refreshList")},e=>{c.window.showErrorMessage(`Approving pull request failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{c.window.showErrorMessage(`Requesting changes failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}submitReview(t){this._item.submitReview(Tn.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{c.window.showErrorMessage(`Submitting review failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}async copyPrLink(){await c.env.clipboard.writeText(this._item.html_url),c.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let wn=si;Zs(wn,"ID","PullRequestOverviewPanel"),Zs(wn,"currentPanel"),Zs(wn,"_viewType","PullRequestOverview");function Fh(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(n=>t[n])}var Lf=Object.defineProperty,ea=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class qf{constructor(e,r,n,i){if(this.pullRequestModel=e,this._folderReposManager=r,this._commentController=n,this._sessionState=i,ea(this,"_pendingCommentThreadAdds",[]),ea(this,"_commentHandlerId"),ea(this,"_commentThreadCache",{}),ea(this,"_openPREditors",[]),ea(this,"_closedEditorCachedThreads",new Set),ea(this,"_disposables",[]),this._commentHandlerId=Oh(),rs(this._commentHandlerId,this),this.pullRequestModel.reviewThreadsCacheReady)this.initializeThreadsInOpenEditors(),this.registerListeners();else{const a=this.pullRequestModel.onDidChangeReviewThreads(()=>{a.dispose(),this.initializeThreadsInOpenEditors(),this.registerListeners()})}}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangeReviewThreads(e=>this.onDidChangeReviewThreads(e))),this._disposables.push(c.window.onDidChangeVisibleTextEditors(async e=>{this.onDidChangeOpenEditors(e)})),this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(e=>{for(const r in this._commentThreadCache)this._commentThreadCache[r].forEach(n=>{Kh(n,e)})})),this._disposables.push(c.window.onDidChangeActiveTextEditor(e=>{this.refreshContextKey(e)})),this._disposables.push(this._sessionState.onDidChangeCommentsExpandState(e=>{for(const r of this.pullRequestModel.reviewThreadsCache){const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Ht.LEFT),i=this._commentThreadCache[n];if(!i){P.appendLine(`PullRequestCommentController> Thread with ID ${n} is no longer in cache`);continue}const a=i.findIndex(o=>o.gitHubThreadId===r.id);if(a>-1){const o=i[a];Nu(o,r,e)}}}))}refreshContextKey(e){if(!e)return;const r=e.document.uri;if(r.scheme!=="pr")return;const n=Cr(r);!n||n.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}getPREditors(e){return e.filter(r=>{if(r.document.uri.scheme!=="pr")return!1;const n=Cr(r.document.uri);return!(!n||n.prNumber!==this.pullRequestModel.number)})}getCommentThreadCacheKey(e,r){return`${e}-${r?"original":"modified"}`}tryUsedCachedEditor(e){const r=[];return e.forEach(n=>{const{fileName:i,isBase:a}=Cr(n.document.uri),o=this.getCommentThreadCacheKey(i,a);this._closedEditorCachedThreads.has(o)?(this._closedEditorCachedThreads.delete(o),this._closedEditorCachedThreads.add(o)):r.push(n)}),r}addThreadsForEditors(e){const r=this.tryUsedCachedEditor(e),n=this.pullRequestModel.reviewThreadsCache,i=be(n,a=>a.path);r.forEach(a=>{const{fileName:o,isBase:f}=Cr(a.document.uri);i[o]&&(this._commentThreadCache[this.getCommentThreadCacheKey(o,f)]=i[o].filter(S=>S.diffSide===Ht.LEFT&&f||S.diffSide===Ht.RIGHT&&!f).map(S=>{const T=new c.Range(new c.Position(S.line-1,0),new c.Position(S.line-1,0));return Wa(a.document.uri,T,S,this._commentController)}))})}initializeThreadsInOpenEditors(){const e=this.getPREditors(c.window.visibleTextEditors);this._openPREditors=e,this.addThreadsForEditors(e)}cleanCachedEditors(){if(this._closedEditorCachedThreads.size>4){const e=Array.from(this._closedEditorCachedThreads.keys());for(let r=0;r<this._closedEditorCachedThreads.size-4;r++){const n=e[r];this.cleanCachedEditor(n),this._closedEditorCachedThreads.delete(n)}}}cleanCachedEditor(e){(this._commentThreadCache[e]||[]).forEach(n=>n.dispose()),delete this._commentThreadCache[e]}addCachedEditors(e){e.forEach(r=>{const{fileName:n,isBase:i}=Cr(r.document.uri),a=this.getCommentThreadCacheKey(n,i);this._closedEditorCachedThreads.has(a)&&this._closedEditorCachedThreads.delete(a),this._closedEditorCachedThreads.add(a)})}onDidChangeOpenEditors(e){const r=this.getPREditors(e),n=this._openPREditors.filter(a=>!r.includes(a));this.addCachedEditors(n),this.cleanCachedEditors();const i=r.filter(a=>!this._openPREditors.includes(a));this._openPREditors=r,i.length&&this.addThreadsForEditors(i)}onDidChangeReviewThreads(e){e.added.forEach(r=>{const n=r.path,i=this._pendingCommentThreadAdds.findIndex(f=>{const S=this.gitRelativeRootPath(f.uri.path)===r.path,T=f.range.start.line+1===r.line;return S&&T});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(f=>new vr(f,a)),this._pendingCommentThreadAdds.splice(i,1);else{const S=this.getPREditors(c.window.visibleTextEditors).find(T=>{const A=Cr(T.document.uri),H=r.diffSide===Ht.RIGHT&&!(A==null?void 0:A.isBase)||r.diffSide===Ht.LEFT&&(A==null?void 0:A.isBase);return(A==null?void 0:A.fileName)===n&&H});if(S){const T=new c.Range(new c.Position(r.line-1,0),new c.Position(r.line-1,0));a=Wa(S.document.uri,T,r,this._commentController)}}if(!a)return;const o=this.getCommentThreadCacheKey(r.path,r.diffSide===Ht.LEFT);this._commentThreadCache[o]?this._commentThreadCache[o].push(a):this._commentThreadCache[o]=[a]}),e.changed.forEach(r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Ht.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];Nu(a,r)}}),e.removed.forEach(async r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Ht.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];this._commentThreadCache[n].splice(i,1),a.dispose()}})}hasCommentThread(e){if(e.uri.scheme!=="pr")return!1;const r=Cr(e.uri);return!(!r||r.prNumber!==this.pullRequestModel.number)}getCommentSide(e){const r=Cr(e.uri);return(r==null?void 0:r.isBase)?Ht.LEFT:Ht.RIGHT}async createOrReplyComment(e,r,n,i){var a;const o=e.comments.length,f=n?!1:i!==void 0?i:this.pullRequestModel.hasPendingReview,S=this.optimisticallyAddComment(e,r,f);try{if(o)await this.reply(e,r,n);else{const T=this.gitRelativeRootPath(e.uri.path),A=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,T,e.range.start.line+1,A,n)}n&&await this.pullRequestModel.submitReview()}catch(T){((a=T.graphQLErrors)==null?void 0:a.length)&&T.graphQLErrors[0].type==="NOT_FOUND"?c.window.showWarningMessage("The comment that you're replying to was deleted. Refresh to update.","Refresh").then(A=>{A==="Refresh"&&this.pullRequestModel.invalidate()}):c.window.showErrorMessage(`Creating comment failed: ${T}`),e.comments=e.comments.map(A=>(A instanceof on&&A.id===S&&(A.mode=c.CommentMode.Editing),A))}}reply(e,r,n){const i=e.comments[0];if(i instanceof vr)return this.pullRequestModel.createCommentReply(r,i._rawComment.graphNodeId,n);throw new Error("Cannot respond to temporary comment")}optimisticallyEditComment(e,r){const n=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new on(e,r.body instanceof c.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof vr&&a.commentId===r.commentId?i:a),i.id}async editComment(e,r){if(r instanceof vr){const n=this.optimisticallyEditComment(e,r);try{await this.pullRequestModel.editReviewComment(r._rawComment,r.body instanceof c.MarkdownString?r.body.value:r.body)}catch(i){c.window.showErrorMessage(`Editing comment failed ${i}`),e.comments=e.comments.map(a=>a instanceof on&&a.id===n?new vr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof c.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){r instanceof vr?await this.pullRequestModel.deleteReviewComment(r.commentId):e.comments=e.comments.filter(n=>!(n instanceof on&&n.id===r.id)),await this.pullRequestModel.validateDraftMode()}gitRelativeRootPath(e){return $.relative(this._folderReposManager.repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n)await this.reply(e,r,!1);else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,a,e.range.start.line+1,o)}this.setContextKey(!0)}catch(a){c.window.showErrorMessage(`Starting a review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof on&&o.id===i&&(o.mode=c.CommentMode.Editing),o))}}async openReview(){await wn.createOrShow(this._folderReposManager.context.extensionUri,this._folderReposManager,this.pullRequestModel),wn.scrollToReview(),this._folderReposManager.telemetry.sendTelemetryEvent("pr.openDescription")}optimisticallyAddComment(e,r,n){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),a=new on(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,ia(e)}async createCommentOnResolve(e,r){const n=await this.pullRequestModel.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.resolveReviewThread(e.gitHubThreadId)}catch(n){c.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.unresolveReviewThread(e.gitHubThreadId)}catch(n){c.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async toggleReaction(e,r){e.parent.uri.scheme==="pr"&&(e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this.pullRequestModel.addCommentReaction(e._rawComment.graphNodeId,r):await this.pullRequestModel.deleteCommentReaction(e._rawComment.graphNodeId,r))}setContextKey(e){c.commands.executeCommand("setContext","prInDraft",e)}dispose(){Object.keys(this._commentThreadCache).forEach(e=>{this._commentThreadCache[e].forEach(r=>r.dispose())}),ns(this._commentHandlerId),this._disposables.forEach(e=>e.dispose())}}var Uf=Object.defineProperty,Lh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $f{constructor(e,r){this.commentsController=e,this._sessionState=r,Lh(this,"_prCommentHandlers",{}),Lh(this,"_prCommentingRangeProviders",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const n=e.uri,i=Cr(n);return!i||!this._prCommentingRangeProviders[i.prNumber]?void 0:this._prCommentingRangeProviders[i.prNumber].provideCommentingRanges.bind(this._prCommentingRangeProviders[i.prNumber])(e,r)}async toggleReaction(e,r){const n=e.parent.uri,i=Cr(n);return!i||!this._prCommentHandlers[i.prNumber]||!this._prCommentHandlers[i.prNumber].handler.toggleReaction?void 0:this._prCommentHandlers[i.prNumber].handler.toggleReaction.bind(this._prCommentHandlers[i.prNumber].handler)(e,r)}registerCommentController(e,r,n){if(this._prCommentHandlers[e])return this._prCommentHandlers[e].refCount+=1,this._prCommentHandlers[e];const i=new qf(r,n,this.commentsController,this._sessionState);return this._prCommentHandlers[e]={handler:i,refCount:1,dispose:()=>{!this._prCommentHandlers[e]||(this._prCommentHandlers[e].refCount-=1,this._prCommentHandlers[e].refCount===0&&(this._prCommentHandlers[e].handler.dispose(),delete this._prCommentHandlers[e]))}},this._prCommentHandlers[e]}registerCommentingRangeProvider(e,r){return this._prCommentingRangeProviders[e]=r,{dispose:()=>{delete this._prCommentingRangeProviders[e]}}}dispose(){Object.keys(this._prCommentHandlers).forEach(e=>{this._prCommentHandlers[e].handler.dispose()}),this._prCommentingRangeProviders={},this._prCommentHandlers={}}}var Gf=it(9967),Hf=it.n(Gf),Vf=Object.defineProperty,xn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const qh=20,ta="GraphQL";var Yr;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(Yr||(Yr={}));const gt=class{constructor(t,e,r,n){this.remote=t,this._credentialStore=e,this._telemetry=r,this._sessionState=n,xn(this,"_initialized",!1),xn(this,"_hub"),xn(this,"_metadata"),xn(this,"_toDispose",[]),xn(this,"commentsController"),xn(this,"commentsHandler"),xn(this,"_pullRequestModels",new Map),xn(this,"isGitHubDotCom"),xn(this,"query",async i=>{var a;const o=this.hub&&this.hub.graphql;if(!o)return P.debug(`Not available for query: ${i}`,ta),{data:null,loading:!1,networkStatus:jt.error,stale:!1};P.debug(`Request: ${JSON.stringify(i,null,2)}`,ta);let f;try{f=await o.query(i)}catch(S){if(i.query!==this.schema.GetChecks&&((a=S.message)==null?void 0:a.startsWith("GraphQL error: Resource protected by organization SAML enforcement.")))await this._credentialStore.recreate(),f=await o.query(i);else throw S}return P.debug(`Response: ${JSON.stringify(f,null,2)}`,ta),f}),xn(this,"mutate",async i=>{const a=this.hub&&this.hub.graphql;if(!a)return P.debug(`Not available for query: ${i}`,ta),{data:null,loading:!1,networkStatus:jt.error,stale:!1};P.debug(`Request: ${JSON.stringify(i,null,2)}`,ta);const o=await a.mutate(i);return P.debug(`Response: ${JSON.stringify(o,null,2)}`,ta),o}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new Su("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=c.comments.createCommentController(`github-browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new $f(this.commentsController,this._sessionState),this._toDispose.push(this.commentsHandler),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return Hf()}async getMetadata(){var t;if(P.debug("Fetch metadata - enter",gt.ID),this._metadata)return P.debug(`Fetch metadata ${(t=this._metadata.owner)==null?void 0:t.login}/${this._metadata.name} - done`,gt.ID),this._metadata;const{octokit:e,remote:r}=await this.ensure(),n=await e.repos.get({owner:r.owner,repo:r.repositoryName});return P.debug(`Fetch metadata ${r.owner}/${r.repositoryName} - done`,gt.ID),this._metadata={...n.data,currentUser:e.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=fh(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){if(P.appendLine(`Unable to resolve remote: ${t}`),kf(t))return!1}return!0}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated(this.remote.authProviderId)?this._hub=this._credentialStore.getHub(this.remote.authProviderId):(await this._credentialStore.create(),this._credentialStore.isAuthenticated(this.remote.authProviderId)||(this._hub=await this._credentialStore.showSignInNotification(this.remote.authProviderId))),this}async getDefaultBranch(){try{P.debug("Fetch default branch - enter",gt.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return P.debug("Fetch default branch - done",gt.ID),r.default_branch}catch(t){P.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,n,i;try{P.debug("Fetch repo permissions and available merge methods - enter",gt.ID);const{octokit:a,remote:o}=await this.ensure(),{data:f}=await a.repos.get({owner:o.owner,repo:o.repositoryName});return P.debug("Fetch repo permissions and available merge methods - done",gt.ID),{hasWritePermission:(e=(t=f.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=f.allow_merge_commit)!=null?r:!1,squash:(n=f.allow_squash_merge)!=null?n:!1,rebase:(i=f.allow_rebase_merge)!=null?i:!1}}}catch(a){P.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${a}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{P.debug("Fetch all pull requests - enter",gt.ID);const{octokit:e,remote:r}=await this.ensure(),n=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:qh,page:t||1}),i=!!n.headers.link&&n.headers.link.indexOf('rel="next"')>-1;if(!n.data)return P.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${n.status}`),{items:[],hasMorePages:!1};const a=n.data.map(o=>o.head.repo?this.createOrUpdatePullRequestModel(bs(o,this)):(P.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(o=>o!==null);return P.debug("Fetch all pull requests - done",gt.ID),{items:a,hasMorePages:i}}catch(e){if(P.appendLine(`Fetching all pull requests failed: ${e}`,gt.ID),e.code===404)c.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{P.debug("Fetch pull requests for branch - enter",gt.ID);const{octokit:e,remote:r}=await this.ensure(),i=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:t})).data.map(a=>this.createOrUpdatePullRequestModel(bs(a,this))).filter(a=>a!==null);return P.debug("Fetch pull requests for branch - done",gt.ID),i}catch(e){if(P.appendLine(`Fetching pull requests for branch failed: ${e}`,gt.ID),e.code===404)c.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new yu(e.repositoryName,e.repositoryUrl,new kn(e.repositoryUrl));t=new gt(r,this._credentialStore,this._telemetry,this._sessionState)}return t}async getIssuesForUserByMilestone(t){var e;try{P.debug("Fetch all issues - enter",gt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.GetMilestones,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});P.debug("Fetch all issues - done",gt.ID);const o=[];let f=this;return a&&a.repository.milestones&&a.repository.milestones.nodes&&a.repository.milestones.nodes.forEach(S=>{const T=Vc(S);if(T){const A=[];S.issues.edges.forEach(H=>{const K=jc(H.node,this);f=this.getRepoForIssue(f,K),A.push(new Dr(f,f.remote,K))}),o.push({milestone:T,issues:A})}}),{items:o,hasMorePages:a.repository.milestones.pageInfo.hasNextPage}}catch(r){P.appendLine(`GithubRepository> Unable to fetch issues: ${r}`);return}}async getIssuesWithoutMilestone(t){var e;try{P.debug("Fetch issues without milestone- enter",gt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.IssuesWithoutMilestone,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});P.debug("Fetch issues without milestone - done",gt.ID);const o=[];let f=this;return a&&a.repository.issues.edges&&a.repository.issues.edges.forEach(S=>{if(S.node.id){const T=jc(S.node,this);f=this.getRepoForIssue(f,T),o.push(new Dr(f,f.remote,T))}}),{items:o,hasMorePages:a.repository.issues.pageInfo.hasNextPage}}catch(r){P.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${r}`);return}}async getIssues(t,e){try{P.debug("Fetch issues with query - enter",gt.ID);const{query:r,schema:n}=await this.ensure(),{data:i}=await r({query:n.Issues,variables:{query:`${e} type:issue`}});P.debug("Fetch issues with query - done",gt.ID);const a=[];let o=this;return i&&i.search.edges&&i.search.edges.forEach(f=>{if(f.node.id){const S=jc(f.node,this);o=this.getRepoForIssue(o,S),a.push(new Dr(o,o.remote,S))}}),{items:a,hasMorePages:i.search.pageInfo.hasNextPage}}catch(r){P.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{P.debug("Fetch max issue - enter",gt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return P.debug("Fetch max issue - done",gt.ID),n&&n.repository.issues.edges.length===1?n.repository.issues.edges[0].node.number:void 0}catch(t){P.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{P.debug("Fetch viewer permission - enter",gt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return P.debug("Fetch viewer permission - done",gt.ID),og(n)}catch(t){return P.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),Yr.Unknown}}async fork(){try{P.debug("Fork repository",gt.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){P.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{P.debug("Fetch repository fork details - enter",gt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetRepositoryForkDetails,variables:{owner:e.owner,name:e.repositoryName}});return P.debug("Fetch repository fork details - done",gt.ID),n.repository}catch(t){P.appendLine(`GithubRepository> Unable to fetch repository fork details: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{P.debug(`Fetch pull request category ${t} - enter`,gt.ID);const{octokit:r,remote:n}=await this.ensure(),i=await r.users.getAuthenticated({}),a=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:o,headers:f}=await r.search.issuesAndPullRequests({q:ug(a.data.full_name,i.data.login,t),per_page:qh,page:e||1}),S=[];o.items.forEach(K=>{S.push(new Promise(async(de,fe)=>{const we=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:K.number});de(we)}))});const T=!!f.link&&f.link.indexOf('rel="next"')>-1,H=(await Promise.all(S)).map(K=>K.data.head.repo?this.createOrUpdatePullRequestModel(bs(K.data,this)):(P.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(K=>K!==null);return P.debug(`Fetch pull request category ${t} - done`,gt.ID),{items:H,hasMorePages:T}}catch(r){if(P.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)c.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new Di(this._telemetry,this,this.remote,t),e.onDidInvalidate(()=>this.getPullRequest(t.number)),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(bs(r,this))}async getPullRequest(t){try{P.debug(`Fetch pull request ${t} - enter`,gt.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return P.debug(`Fetch pull request ${t} - done`,gt.ID),this.createOrUpdatePullRequestModel(ep(i,this))}catch(e){P.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{P.debug(`Fetch issue ${t} - enter`,gt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:e?i.IssueWithComments:i.Issue,variables:{owner:n.owner,name:n.repositoryName,number:t}});return P.debug(`Fetch issue ${t} - done`,gt.ID),new Dr(this,n,ep(a,this))}catch(r){P.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();P.debug(`List branches for ${t}/${e} - enter`,gt.ID);try{let n=[];const i=new Date().getTime();for await(const a of r.paginate.iterator("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100}))if(n.push(...a.data.map(o=>o.name)),new Date().getTime()-i>5e3)break;return P.debug(`List branches for ${t}/${e} - done`,gt.ID),n}catch(n){throw P.debug(`List branches for ${t}/${e} failed`,gt.ID),n}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){P.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){P.debug("Fetch mentionable users - enter",gt.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.mentionableUsers.nodes.map(f=>({login:f.login,avatarUrl:f.avatarUrl,name:f.name,url:f.url,email:f.email}))),i=o.data.repository.mentionableUsers.pageInfo.hasNextPage,n=o.data.repository.mentionableUsers.pageInfo.endCursor}catch(o){return P.debug(`Unable to fetch mentionable users: ${o}`,gt.ID),a}while(i);return a}async getAssignableUsers(){P.debug("Fetch assignable users - enter",gt.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.assignableUsers.nodes.map(f=>({login:f.login,avatarUrl:f.avatarUrl,name:f.name,url:f.url,email:f.email}))),i=o.data.repository.assignableUsers.pageInfo.hasNextPage,n=o.data.repository.assignableUsers.pageInfo.endCursor}catch(o){return P.debug(`Unable to fetch assignable users: ${o}`,gt.ID),o.graphQLErrors&&o.graphQLErrors.length>0&&o.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&c.window.showWarningMessage(`GitHub user features will not work. ${o.graphQLErrors[0].message}`),a}while(i);return a}async compareCommits(t,e){const{remote:r,octokit:n}=await this.ensure(),{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let Uh=gt;xn(Uh,"ID","GitHubRepository");var Bf=Object.defineProperty,jf=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const $h="github-pr-remote",Gh="github-pr-owner-number",Hh=/branch\.(.+)\.github-pr-owner-number/,zf=/branch\.(.+)\.remote/,Wt=class{static async checkoutFromFork(t,e,r){const n=await Wt.calculateUniqueBranchNameForPR(t,e);r||(P.appendLine(`Branch ${n} is from a fork. Create a remote first.`,Wt.ID),r=await Wt.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${n}`;P.debug(`Fetch ${r}/${e.head.ref}:${n} - start`,Wt.ID),await t.fetch(r,i,1),P.debug(`Fetch ${r}/${e.head.ref}:${n} - done`,Wt.ID),await t.checkout(n),await t.setBranchUpstream(n,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),await Wt.associateBranchWithPullRequest(t,e,n)}static async fetchAndCheckout(t,e,r){var n;if(!r.validatePullRequestModel("Checkout pull request failed"))return;const i=Wt.getHeadRemoteForPullRequest(e,r),a=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!i||a)return Wt.checkoutFromFork(t,r,i&&i.remoteName);const o=r.head.ref,f=i.remoteName;let S;try{if(S=await t.getBranch(o),((n=t.state.HEAD)==null?void 0:n.name)===S.name){P.appendLine(`Tried to checkout ${o}, but branch is already checked out.`,Wt.ID);return}if(P.debug(`Checkout ${o}`,Wt.ID),await t.checkout(o),!S.upstream){const T=`refs/remotes/${f}/${o}`;await t.setBranchUpstream(o,T)}S.behind!==void 0&&S.behind>0&&S.ahead===0&&(P.debug("Pull from upstream",Wt.ID),await t.pull())}catch(T){P.appendLine(`Branch ${f}/${o} doesn't exist on local disk yet.`,Wt.ID);const A=`refs/remotes/${f}/${o}`;P.appendLine(`Fetch tracked branch ${A}`,Wt.ID),await t.fetch(f,o,1);const H=await t.getBranch(A);await t.createBranch(o,!0,H.commit),await t.setBranchUpstream(o,A),await this.unshallow(t)}await Wt.associateBranchWithPullRequest(t,r,o)}static async unshallow(t){try{await t.pull(!0)}catch(e){P.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`);try{await t.pull(!1)}catch(r){throw P.appendLine(`Pull after failed unshallow still failed: ${r}`),r}}}static async checkoutExistingPullRequestBranch(t,e){const r=Wt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=o=>n.filter(({key:f})=>o===f).map(({value:f})=>f)[0],a=n.map(o=>{const f=Hh.exec(o.key);return{branch:f&&f.length?f[1]:null,value:o.value}}).filter(o=>o.branch&&o.value===r);if(a&&a.length){const o=a[0].branch;await t.checkout(o);const f=i(`branch.${o}.remote`),S=i(`branch.${o}.merge`);await t.fetch(f,S);const T=await t.getBranch(a[0].branch);return T.behind!==void 0&&T.behind>0&&T.ahead===0&&(P.debug("Pull from upstream",Wt.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=Wt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=n.map(a=>{const o=Hh.exec(a.key);return{branch:o&&o.length?o[1]:null,value:a.value}}).find(a=>!!a.branch&&a.value===r);if(i){const a=i.branch;try{const o=`branch.${a}.remote`,f=n.filter(H=>H.key===o).map(H=>H.value);let S;f.length&&(S=f[0]);let T=!1;if(S){const H=`remote.${S}.github-pr-remote`;n.filter(de=>de.key===H&&de.value).length&&(T=!0)}let A;return T&&(A=n.some(H=>!!(zf.exec(H.key)&&H.key!==`branch.${a}.remote`&&H.value===S))),{branch:a,remote:S,createdForPullRequest:T,remoteInUse:A}}catch(o){return{branch:a}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,n,i]=e;return{owner:r,repositoryName:n,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Gh}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),n=await t.getConfig(r);return Wt.parsePullRequestMetadata(n)}catch(r){return}}static async createRemote(t,e,r){P.appendLine(`create remote for ${r}.`,Wt.ID);const n=Ys(t);for(const a of n)if(new kn(a.url).equals(r))return a.remoteName;const i=Wt.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(i,r.toString()),await t.setConfig(`remote.${i}.${$h}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{P.debug(`Check if remote '${e}' is created for pull request - start`,Wt.ID);const r=await t.getConfig(`remote.${e}.${$h}`);return P.debug(`Check if remote '${e}' is created for pull request - end`,Wt.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let n=r,i=1;for(;;)try{await t.getBranch(n),n=`${r}-${i++}`}catch(a){break}return n}static getUniqueRemoteName(t,e){let r=e,n=1;const i=Ys(t);for(;i.find(a=>a.remoteName===r);)r=`${e}${n++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){P.appendLine(`associate ${r} with Pull Request #${e.number}`,Wt.ID);const n=`branch.${r}.${Gh}`;await t.setConfig(n,Wt.buildPullRequestMetadata(e))}};let Mn=Wt;jf(Mn,"ID","PullRequestGitHelper");var Qf=Object.defineProperty,Ut=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Wf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Vh extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Kf extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Tr="githubPullRequests",Qa="remotes",Bh="ReposManagerStateContext";var _n;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(_n||(_n={}));const jh="No Milestone";var zh;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(zh||(zh={}));const En=class{constructor(t,e,r,n,i,a){this.context=t,this._repository=e,this.telemetry=r,this._git=n,this._credentialStore=i,this._sessionState=a,Ut(this,"_subs"),Ut(this,"_activePullRequest"),Ut(this,"_activeIssue"),Ut(this,"_githubRepositories"),Ut(this,"_allGitHubRemotes",[]),Ut(this,"_mentionableUsers"),Ut(this,"_fetchMentionableUsersPromise"),Ut(this,"_assignableUsers"),Ut(this,"_fetchAssignableUsersPromise"),Ut(this,"_gitBlameCache",{}),Ut(this,"_githubManager"),Ut(this,"_repositoryPageInformation",new Map),Ut(this,"_onDidMergePullRequest",new c.EventEmitter),Ut(this,"onDidMergePullRequest",this._onDidMergePullRequest.event),Ut(this,"_onDidChangeActivePullRequest",new c.EventEmitter),Ut(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),Ut(this,"_onDidChangeActiveIssue",new c.EventEmitter),Ut(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),Ut(this,"_onDidLoadRepositories",new c.EventEmitter),Ut(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),Ut(this,"_onDidChangeRepositories",new c.EventEmitter),Ut(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),Ut(this,"_onDidChangeAssignableUsers",new c.EventEmitter),Ut(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),Ut(this,"_updatingRepositories"),Ut(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new Ic,this._subs.push(c.workspace.onDidChangeConfiguration(async o=>{o.affectsConfiguration(`${Tr}.${Qa}`)&&await this.updateRepositories()})),this._subs.push(i.onDidInitialize(()=>this.updateRepositories())),this.setUpCompletionItemProvider(),this.cleanStoredRepoState()}cleanStoredRepoState(){const t=new Date().valueOf()-30*864e5,e=this.context.globalState.get(ja);if(e==null?void 0:e.repos){let r=!1;Object.keys(e.repos).forEach(n=>{var i;((i=e.repos[n].stateModifiedTime)!=null?i:0)<t&&(r=!0,delete e.repos[n])}),r&&this.context.globalState.update(ja,e)}}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Ys(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((n,i,a)=>r[i])).catch(r=>(P.appendLine(`Resolving GitHub remotes failed: ${r}`),c.window.showErrorMessage(`Resolving GitHub remotes failed: ${ke(r)}`),[]))}async getActiveGitHubRemotes(t){const e=c.workspace.getConfiguration(Tr).get(Qa);if(!e)return P.appendLine("Unable to read remotes setting"),Promise.resolve([]);const r=e.filter(n=>!t.some(i=>i.remoteName===n));return r.length===e.length?P.appendLine(`No remotes found. The following remotes are missing: ${r.join(", ")}`):P.debug(`Not all remotes found. The following remotes are missing: ${r.join(", ")}`,En.ID),P.debug(`Displaying configured remotes: ${e.join(", ")}`,En.ID),e.map(n=>t.find(i=>i.remoteName===n)).filter(n=>!!n)}setUpCompletionItemProvider(){let t,e=[],r=[];c.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(n,i,a)=>{try{const o=JSON.parse(n.uri.query);if(nr(o.extensionId,jn)!==0)return;const f=n.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!f||f.isEmpty)return;let S=[];const T={};let A={},H,K;const de=c.window.visibleTextEditors;if(de.length){const $e=de.find(Ge=>Ge.document.uri.scheme==="pr");if($e){const Ge=Cr($e.document.uri);H=Ge.prNumber,K=Ge.remoteName}else this._activePullRequest&&(H=this._activePullRequest.number,K=this._activePullRequest.remote.remoteName);if(t&&H&&H===t.number)return r}const fe=new Promise(async $e=>{if(H&&K){if(P.debug("get Timeline Events and parse users",En.ID),t&&t.number===H)return e;const Ge=this._githubRepositories.find(Ke=>Ke.remote.remoteName===K);Ge&&(t=await Ge.getPullRequest(H),e=await t.getTimelineEvents()),S=ag(e),$e()}$e()}),we=new Promise(async $e=>{if(de.length)try{P.debug("git blame and parse users",En.ID);const Ge=$.resolve(de[0].document.uri.fsPath);let Ke;this._gitBlameCache[Ge]?Ke=this._gitBlameCache[Ge]:(Ke=await this.repository.blame(Ge),this._gitBlameCache[Ge]=Ke);const Ct=Ke.split(`
`);for(const Dt of Ct){const Kt=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(Dt);if(Kt&&Kt.length===2){const xt=Kt[1].trim();T[xt]=!0}}}catch(Ge){P.debug(Ge,En.ID)}$e()}),Ne=new Promise(async $e=>{P.debug("get mentionable users",En.ID),A=await this.getMentionableUsers(),$e()});await Promise.all([fe,we,Ne]),r=[];const Ae={};P.debug("prepare user suggestions",En.ID),S.forEach($e=>{Ae[$e.login]||(Ae[$e.login]=$e)});const Ue={};for(const $e in A)for(const Ge of A[$e])if(!Ae[Ge.login]&&!Ue[Ge.login]){Ue[Ge.login]=!0;let Ke=2;(T[Ge.login]||Ge.name&&T[Ge.name])&&(Ke=1),Ae[Ge.login]&&(Ke=0),r.push({label:Ge.login,insertText:Ge.login,filterText:`${Ge.login}`+(Ge.name&&Ge.name!==Ge.login?`_${Ge.name.toLowerCase().replace(" ","_")}`:""),sortText:`${Ke}_${Ge.login}`,detail:Ge.name,kind:c.CompletionItemKind.User,login:Ge.login,uri:this.repository.rootUri})}for(const $e in Ae)Ue[$e]||r.push({label:Ae[$e].login,insertText:`${Ae[$e].login}`,filterText:`${Ae[$e].login}`+(Ae[$e].name&&Ae[$e].name!==Ae[$e].login?`_${Ae[$e].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${Ae[$e].login}`,detail:Ae[$e].name,kind:c.CompletionItemKind.User,login:Ae[$e].login,uri:this.repository.rootUri});return P.debug("done",En.ID),r}catch(o){return[]}},resolveCompletionItem:async(n,i)=>{try{const a=await this.getPullRequestDefaults(),o=await this.resolveUser(a.owner,a.repo,typeof n.label=="string"?n.label:n.label.label);o&&(n.documentation=Mc(a,o))}catch(a){}return n}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async loginAndUpdate(){if(!this._credentialStore.isAnyAuthenticated()){const t=new Promise(e=>{const r=this.onDidChangeRepositories(()=>{r.dispose(),e()})});await this._credentialStore.login(Ot.github),await t}}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await c.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),P.appendLine("Found GitHub remote")):(await c.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),P.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){return this._updatingRepositories&&await this._updatingRepositories,this._updatingRepositories=this.doUpdateRepositories(t),this._updatingRepositories}async doUpdateRepositories(t){if(this._git.state==="uninitialized"){P.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated(Ot.github)||this._credentialStore.isAuthenticated(Ot["github-enterprise"]);c.commands.executeCommand("setContext","github:authenticated",r);const n=[],i=[],a=[];return this._githubRepositories.forEach(f=>a.push(f)),e.filter(f=>this._credentialStore.isAuthenticated(f.authProviderId)).forEach(f=>{const S=this.createGitHubRepository(f,this._credentialStore);i.push(S.resolveRemote()),n.push(S)}),Promise.all(i).then(async f=>{if(f.some(T=>!T))return this._credentialStore.showSamlMessageAndAuth();this._githubRepositories=n,a.filter(T=>this._githubRepositories.indexOf(T)<0).forEach(T=>T.dispose());const S=a.length!==this._githubRepositories.length||!a.every(T=>this._githubRepositories.some(A=>A.remote.equals(T.remote)));if(this._githubRepositories.length&&S&&await this.checkIfMissingUpstream()){this.updateRepositories(t);return}this.activePullRequest&&this.getMentionableUsers(S,!0),this.getAssignableUsers(S),r&&e.length?this._onDidLoadRepositories.fire(_n.RepositoriesLoaded):r||this._onDidLoadRepositories.fire(_n.NeedsAuthentication),t||this._onDidChangeRepositories.fire()})}async checkIfMissingUpstream(){var t;try{const r=await(await this.getOrigin()).getMetadata();if(r.fork&&r.parent){const n=new kn(r.parent.git_url);if(!this._githubRepositories.some(a=>a.remote.owner===n.owner&&a.remote.repositoryName===n.repositoryName)){const o=!this.repository.state.remotes.some(f=>f.name==="upstream")?"upstream":(t=r.parent.owner)==null?void 0:t.login;if(o)return this.gitHubRepositories[0].remote.gitProtocol.type===Sa.SSH?await this.repository.addRemote(o,r.parent.git_url):await this.repository.addRemote(o,r.parent.clone_url),!0}}}catch(e){P.appendLine(`Missing upstream check failed: ${e}`)}return!1}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}getMentionableUsersFromGlobalState(){P.appendLine("Trying to use globalState for mentionable users.");const t=this.context.globalState.get(ja);if(t){const e={};if(this._githubRepositories.every(n=>{var i;const a=`${n.remote.owner}/${n.remote.repositoryName}`;return t.repos[a]?(e[n.remote.repositoryName]=(i=t.repos[a].mentionableUsers)!=null?i:[],!0):!1}))return P.appendLine(`Using globalState mentionable users for ${Object.keys(e).length}.`),e}P.appendLine("No globalState for mentionable users.")}createFetchMentionableUsersPromise(){const t={};return new Promise(e=>{const r=this._githubRepositories.map(async n=>{const i=await n.getMentionableUsers();t[n.remote.remoteName]=i});Promise.all(r).then(()=>{this._mentionableUsers=t,this._fetchMentionableUsersPromise=void 0;const n=this.context.globalState.get(ja,{repos:{}});this._githubRepositories.forEach(i=>{const a=`${i.remote.owner}/${i.remote.repositoryName}`;n.repos[a]||(n.repos[a]={}),n.repos[a].mentionableUsers=t[i.remote.remoteName],n.repos[a].stateModifiedTime=new Date().valueOf()}),this.context.globalState.update(ja,n),e(t)})})}async getMentionableUsers(t,e){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;let r=this.getMentionableUsersFromGlobalState();return e&&!this._fetchMentionableUsersPromise&&r?r:this._fetchMentionableUsersPromise?this._fetchMentionableUsersPromise:(this._fetchMentionableUsersPromise=this.createFetchMentionableUsersPromise(),r!=null?r:this._fetchMentionableUsersPromise)}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(n=>{const i=this._githubRepositories.map(async a=>{const o=await a.getAssignableUsers();e[a.remote.remoteName]=o.sort(rp),r.push(...o)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,n(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(n=>n.type===wt.Head&&n.name!==void 0).map(n=>n.name).map(async n=>{const i=await Mn.getMatchingPullRequestMetadataForBranch(this.repository,n);if(i){const{owner:a,prNumber:o}=i,f=t.find(S=>S.remote.owner.toLocaleLowerCase()===a.toLocaleLowerCase());if(f){const S=await f.getPullRequest(o);if(S)return S.localBranchName=n,S}}return Promise.resolve(null)});return Promise.all(r).then(n=>n.filter(i=>i!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(S=>S.remote.owner===(e==null?void 0:e.owner)&&S.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:n,octokit:i}=await r.ensure();let a=!1,o=1,f=[];do{const S=await i.issues.listLabelsForRepo({owner:n.owner,repo:n.repositoryName,per_page:100,page:o});f=f.concat(S.data.map(T=>({name:T.name,color:T.color}))),f=f.sort((T,A)=>T.name.localeCompare(A.name)),a=!!S.headers.link&&S.headers.link.indexOf('rel="next"')>-1,o+=1}while(a);return f}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!r)return;await Mn.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:o,value:f})=>/^branch.*\.remote$/.test(o)&&f===r)||await this.repository.removeRemote(r)),this.telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,n=cr.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const a=()=>this.totalFetchedPages.get(e)||0,o=H=>this.totalFetchedPages.set(e,H);for(const H of this._githubRepositories){const K=H.remote.url.toString()+e;this._repositoryPageInformation.get(K)||this._repositoryPageInformation.set(K,{pullRequestPage:0,hasMorePages:null})}let f=0;const S={hasMorePages:!1,items:[]},T=H=>{f++,H&&(S.items=S.items.concat(H.items),S.hasMorePages=H.hasMorePages)},A=this._githubRepositories.filter(H=>{const K=this._repositoryPageInformation.get(H.remote.url.toString()+e);return K&&(t.fetchNextPage===!1||K.hasMorePages!==!1)});for(let H=0;H<A.length;H++){const K=A[H],de=K.remote.url.toString()+e,fe=this._repositoryPageInformation.get(de),we=async Ne=>{switch(r){case 0:return n===cr.All?K.getAllPullRequests(Ne):K.getPullRequestsForCategory(i||"",Ne);case 1:return K.getIssuesForUserByMilestone(fe.pullRequestPage);case 2:return K.getIssuesWithoutMilestone(fe.pullRequestPage);case 3:return K.getIssues(fe.pullRequestPage,i)}};if(t.fetchNextPage?(fe.pullRequestPage++,T(await we(fe.pullRequestPage)),o(a()+1)):(fe.pullRequestPage===0&&(fe.pullRequestPage=1),(await Promise.all(Array.from({length:fe.pullRequestPage}).map((Ae,Ue)=>we(Ue+1)))).forEach(Ae=>T(Ae))),fe.hasMorePages=S.hasMorePages,S.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&f>=a()))return a()===0&&o(f),{items:S.items,hasMorePages:fe.hasMorePages,hasUnsearchedRepositories:H<A.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const n=t.toString()+(r||"");return this.fetchPagedData(e,n,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const n=await this.fetchPagedData(t,"issuesKey",1,cr.All,r);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,cr.All,r);n.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:jh},issues:i.items})}return n}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,cr.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t="{pull_request_template,PULL_REQUEST_TEMPLATE}.md",e=await c.workspace.findFiles(new c.RelativePattern(this._repository.rootUri,t)),r="{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md",n=await c.workspace.findFiles(new c.RelativePattern(this._repository.rootUri,r),null),i="PULL_REQUEST_TEMPLATE/*.md",a=await c.workspace.findFiles(new c.RelativePattern(this._repository.rootUri,i)),o="{docs,.github}/PULL_REQUEST_TEMPLATE/*.md",f=await c.workspace.findFiles(new c.RelativePattern(this._repository.rootUri,o),null),S=[...e,...n,...a,...f];function T(H,K){return H.length?`"${K}"`:""}const A=[T(e,t),T(n,r),T(a,i),T(f,o)].filter(H=>H).join(", ");return P.appendLine(`Found ${S.length} templates${A?` using pattern(s) ${A}`:""}`),S}async getPullRequestDefaults(t){var e;if(!t&&!this.repository.state.HEAD)throw new Vh(this.repository);const r=await this.getOrigin(t),n=await r.getMetadata(),i=(e=c.workspace.getConfiguration(Tr).inspect(Qa))==null?void 0:e.defaultValue,a=c.workspace.getConfiguration(Tr).get(Qa),o=!a||(i==null?void 0:i.every((S,T)=>a[T]===S)),f=n.fork&&n.parent&&o?n.parent:await(this.findRepo(na("upstream"))||r).getMetadata();return{owner:f.owner.login,repo:f.name,base:f.default_branch}}async getMetadata(t){const e=this.findRepo(na(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:n}=await e.getCommit(r);return n}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new Wf(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(na(e.remote));if(!i){const a=(await this.getAllGitHubRemotes()).find(o=>o.remoteName===e.remote);if(a)return this.createAndAddGitHubRepository(a,this._credentialStore);throw P.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new Kf(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[r,...n]=this._githubRepositories;return n.length&&(this.findRepo(na("origin"))||this.findRepo(Yf))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const n=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!n)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await n.createPullRequest(t),a=t.head.indexOf(":"),o=t.head.slice(a+1);return await Mn.associateBranchWithPullRequest(this._repository,i,o),this.telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await c.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await c.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await c.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await c.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(n.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw P.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this.telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(ke(i))}}async createIssue(t){try{const e=this._githubRepositories.find(a=>a.remote.owner===t.owner&&a.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),n=Zf(r,e),i=new Dr(e,e.remote,n);return this.telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){P.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this.telemetry.sendTelemetryErrorEvent("issue.create.failure"),c.window.showWarningMessage(`Creating issue failed: ${ke(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const n={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(n),this.telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){P.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this.telemetry.sendTelemetryErrorEvent("issue.assign.failure"),c.window.showWarningMessage(`Assigning issue failed: ${ke(r)}`)}}getCurrentUser(t){return Xi(this._credentialStore.getCurrentUser(t.githubRepository.remote.authProviderId),t.githubRepository)}async mergePullRequest(t,e,r,n){const{octokit:i,remote:a}=await t.githubRepository.ensure(),o=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,f=this.repository.state.HEAD&&this.repository.state.HEAD.commit,S=t.head&&t.head.sha,T=this.repository.state.workingTreeChanges.length>0;if(o===S){if(f!==S){const{ahead:A}=this.repository.state.HEAD;if(A&&await c.window.showWarningMessage(`You have ${A} unpushed ${A>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(T&&await c.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:r,commit_title:e,merge_method:n||c.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:a.owner,repo:a.repositoryName,pull_number:t.number}).then(A=>(this.telemetry.sendTelemetryEvent("pr.merge.success"),this._onDidMergePullRequest.fire(),A.data)).catch(A=>{throw this.telemetry.sendTelemetryErrorEvent("pr.merge.failure"),A})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const a=i.key,o=/^branch\.(.*)\.(.*)$/.exec(a);if(o&&o.length===3){const f=o[1];e.has(f)||e.set(f,{});const S=e.get(f);if(o[2]==="remote"&&(S.remote=i.value),o[2]==="github-pr-owner-number"){const T=Mn.parsePullRequestMetadata(i.value);S.metadata=T}e.set(f,S)}});const r=[];e.forEach((i,a)=>{if(i.metadata){const o=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(o?o.owner===i.metadata.owner&&o.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||r.push({label:`${a}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const n=await Promise.all(r.map(async i=>{const a=i.metadata,o=this._githubRepositories.find(A=>A.remote.owner.toLowerCase()===a.owner.toLowerCase()&&A.remote.repositoryName.toLowerCase()===a.repositoryName.toLowerCase());if(!o)return i;const{remote:f,query:S,schema:T}=await o.ensure();try{const{data:A}=await S({query:T.PullRequestState,variables:{owner:f.owner,name:f.repositoryName,number:a.prNumber}});i.legacy=A.repository.pullRequest.state!=="OPEN"}catch{}return i}));return n.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),n}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const i=n.key;let a=/^branch\.(.*)\.(.*)$/.exec(i);if(a&&a.length===3){const o=a[1];if(a[2]==="remote"){const f=n.value;e.has(f)||e.set(f,{branches:new Set}),e.get(f).branches.add(o)}}if(a=/^remote\.(.*)\.(.*)$/.exec(i),a&&a.length===3){const o=a[1];e.has(o)||e.set(o,{branches:new Set});const f=e.get(o);a[2]==="github-pr-remote"&&(f.createdForPullRequest=n.value==="true"),a[2]==="url"&&(f.url=n.value)}});const r=[];return e.forEach((n,i)=>{if(n.branches.size===0){let a=n.createdForPullRequest?"":"Not created by GitHub Pull Request extension";n.url&&(a=a?a+" "+n.url:n.url),r.push({label:i,description:a,picked:n.createdForPullRequest,remote:i})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=c.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(i=>i.picked),e.busy=!1;let n=!0;e.onDidAccept(async()=>{if(n){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async o=>{await this.repository.deleteBranch(o.label,!0)})),e.busy=!1}catch(o){e.hide(),c.window.showErrorMessage(`Deleting branches failed: ${o}`)}}n=!1,e.busy=!0;const a=await this.getRemoteDeletionItems();a?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=a,e.selectedItems=a.filter(o=>o.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async a=>{await this.repository.removeRemote(a.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fulfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;P.debug("Fulfill pull request missing info - start",En.ID);const e=t.githubRepository,{octokit:r,remote:n}=await e.ensure();if(!t.base){const{data:i}=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:t.number});t.update(bs(i,e))}if(!t.mergeBase){const{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){c.window.showErrorMessage(`Fetching Pull Request merge base failed: ${ke(e)}`)}P.debug("Fulfill pull request missing info - done",En.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(n=>n.remote.owner.toLowerCase()===t.toLowerCase()&&n.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const n=await this.resolveItem(t,e);if(n)return n.getPullRequest(r)}async resolveIssue(t,e,r,n=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(r,n)}async resolveUser(t,e,r){var n;P.debug(`Fetch user ${r}`,En.ID);const i=this.createGitHubRepositoryFromOwnerName(t,e),{query:a,schema:o}=await i.ensure();try{const{data:f}=await a({query:o.GetUser,variables:{login:r}});return ig(f,i)}catch(f){((n=f.message)==null?void 0:n.startsWith("GraphQL error: Could not resolve to a User with the login of"))||P.appendLine(f.message)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await Mn.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;const t=this.gitHubRepositories.find(e=>{var r,n;return e.remote.remoteName===((n=(r=this.repository.state.HEAD)==null?void 0:r.upstream)==null?void 0:n.remote)});for(const e of this.gitHubRepositories)if(e.remote.remoteName===this.repository.state.HEAD.upstream.remote){const r=await e.getPullRequestForBranch(`${t==null?void 0:t.remote.owner}:${this.repository.state.HEAD.upstream.name}`);if(r&&r.length>0)return{owner:e.remote.owner,repositoryName:e.remote.repositoryName,prNumber:r[0].number,model:r[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await Mn.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await Mn.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await Mn.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async fetchById(t,e){const r=await t.getPullRequest(e);if(r)return r;c.window.showErrorMessage(`Pull request number ${e} does not exist in ${t.remote.owner}/${t.remote.repositoryName}`,{modal:!0})}async checkoutDefaultBranch(t){var e;try{const r=await this.repository.getBranch(t);if(((e=this.repository.state.HEAD)==null?void 0:e.name)===r.name){const i="Choose a branch";c.window.showInformationMessage("The default branch is already checked out.","Choose a branch").then(a=>{if(a===i)return c.commands.executeCommand("git.checkout")});return}r.upstream&&t===r.upstream.name?await this.repository.checkout(t):await c.commands.executeCommand("git.checkout")}catch(r){if(r.gitErrorCode&&r.gitErrorCode===fr.DirtyWorkTree){c.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}c.window.showErrorMessage(`Exiting failed: ${r}`)}}findExistingGitHubRepository(t){return this._githubRepositories.find(e=>e.remote.owner===t.owner&&e.remote.repositoryName===t.repositoryName&&(!t.remoteName||e.remote.remoteName===t.remoteName))}createAndAddGitHubRepository(t,e){const r=new Uh(t,e,this.telemetry,this._sessionState);return this._githubRepositories.push(r),r}createGitHubRepository(t,e){var r;return(r=this.findExistingGitHubRepository(t))!=null?r:this.createAndAddGitHubRepository(t,e)}createGitHubRepositoryFromOwnerName(t,e){const r=this.findExistingGitHubRepository({owner:t,repositoryName:e});if(r)return r;const n=`https://github.com/${t}/${e}`;return this.createAndAddGitHubRepository(new yu(e,n,new kn(n)),this._credentialStore)}async findUpstreamForItem(t){let e,r;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const a=await i.getRepositoryForkDetails();if(a&&a.isFork&&a.parent.owner.login===t.remote.owner&&a.parent.name===t.remote.repositoryName){const o=await i.getViewerPermission();if(o===Yr.Admin||o===Yr.Maintain||o===Yr.Write){r=i.remote;break}}}let n=!1;if(e&&!r){const i=await t.githubRepository.getViewerPermission();(i===Yr.Read||i===Yr.Triage||i===Yr.Unknown)&&(n=!0)}return{needsFork:n,upstream:e,remote:r}}async forkWithProgress(t,e,r,n){t.report({message:`Forking ${r}...`});const i=await e.fork();if(t.report({increment:50}),!i){c.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const a=n.state.remotes.length>1?"origin":n.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await n.renameRemote(a,"upstream"),await n.addRemote(a,i),await new Promise(o=>{if(this.gitHubRepositories.length===0){const f=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(f.dispose(),o())})}else o()}),t.report({increment:50}),a}async doFork(t,e,r){return c.window.withProgress({location:c.ProgressLocation.Notification,title:"Creating Fork"},async n=>{try{return this.forkWithProgress(n,t,e,r)}catch(i){c.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",n="Don't Fork";switch(await c.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,n)){case r:return this.doFork(t,e,this.repository);case n:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let ra=En;Ut(ra,"ID","FolderRepositoryManager");function vy(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const Yf=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},na=t=>({remote:{remoteName:e}})=>e===t,Qh=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};function Wa(t,e,r,n){const i=n.createCommentThread(t,e,[]);return i.gitHubThreadId=r.id,i.comments=r.comments.map(a=>new vr(a,i)),i.isResolved=r.isResolved,r.viewerCanResolve&&!r.isResolved?i.contextValue="canResolve":r.viewerCanUnresolve&&r.isResolved&&(i.contextValue="canUnresolve"),ia(i),i.collapsibleState=Wh(r.isResolved),i}const Pu="commentExpandState",yy="collapseAll",Hc="expandUnresolved";function Wh(t,e){var r;return t?c.CommentThreadCollapsibleState.Collapsed:(e===void 0&&(e=((r=c.workspace.getConfiguration(Tr))==null?void 0:r.get(Pu))===Hc),e?c.CommentThreadCollapsibleState.Expanded:c.CommentThreadCollapsibleState.Collapsed)}function Nu(t,e,r){e.viewerCanResolve&&!e.isResolved?t.contextValue="canResolve":e.viewerCanUnresolve&&e.isResolved&&(t.contextValue="canUnresolve"),t.isResolved!==e.isResolved&&(t.isResolved=e.isResolved),t.collapsibleState=Wh(e.isResolved,r),t.comments=e.comments.map(n=>new vr(n,t)),ia(t)}function ia(t){if(t.isResolved){t.label="This thread has been marked as resolved";return}if(t.comments.length){const e=Se(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Xf(t){return Du().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(n=>n.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function Jf(t,e){t.reactions=Xf(e)}function Kh(t,e){e||(t.comments=t.comments.map(r=>(r instanceof vr&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function Xi(t,e){var r;return{login:t.login,url:t.html_url,avatarUrl:Kc(t.avatar_url,(r=t.gravatar_id)!=null?r:void 0,e.remote.authProviderId)}}function Yh(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function bs(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:f,assignees:S,created_at:T,updated_at:A,head:H,base:K,labels:de,node_id:fe,id:we,draft:Ne}=t;return{id:we,graphNodeId:fe,number:r,body:n!=null?n:"",title:i,url:a,user:Xi(o,e),state:f,merged:t.merged||!1,assignees:S?S.map(Ue=>Xi(Ue,e)):void 0,createdAt:T,updatedAt:A,head:Yh(H),base:Yh(K),mergeable:t.mergeable?Rn.Mergeable:Rn.NotMergeable,labels:de.map(Ue=>({name:"",color:"",...Ue})),isDraft:Ne,suggestedReviewers:[]}}function Zf(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:f,assignees:S,created_at:T,updated_at:A,labels:H,node_id:K,id:de}=t;return{id:de,graphNodeId:K,number:r,body:n!=null?n:"",title:i,url:a,user:Xi(o,e),state:f,assignees:S?S.map(we=>Xi(we,e)):void 0,createdAt:T,updatedAt:A,labels:H.map(we=>{var Ne,Ae;return typeof we=="string"?{name:we,color:""}:{name:(Ne=we.name)!=null?Ne:"",color:(Ae=we.color)!=null?Ae:""}}),suggestedReviewers:[]}}function eg(t,e){return{event:ar.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Xi(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Xh(t){const e=[],r=Ui(t.diffHunk);let n=r.next();for(;!n.done;){const i=n.value;e.push(i),n=r.next()}return e}function by(t,e){var r;const n={url:t.url,id:t.id,pullRequestReviewId:(r=t.pull_request_review_id)!=null?r:void 0,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Xi(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=Xh(n);return n.diffHunks=i,n}function tg(t){switch(t){case"PullRequestCommit":return ar.Committed;case"LabeledEvent":return ar.Labeled;case"MilestonedEvent":return ar.Milestoned;case"AssignedEvent":return ar.Assigned;case"HeadRefDeletedEvent":return ar.HeadRefDeleted;case"IssueComment":return ar.Commented;case"PullRequestReview":return ar.Reviewed;case"MergedEvent":return ar.Merged;default:return ar.Other}}function Au(t){return{id:t.id,isResolved:t.isResolved,viewerCanResolve:t.viewerCanResolve,viewerCanUnresolve:t.viewerCanUnresolve,path:t.path,line:t.line,originalLine:t.originalLine,diffSide:t.diffSide,isOutdated:t.isOutdated,comments:t.comments.nodes.map(e=>sa(e,t.isResolved))}}function sa(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Zh(t.reactionGroups),isResolved:e},n=Xh(r);return r.diffHunks=n,r}function Jh(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Zh(t){const e=Du().reduce((n,i)=>(n[i.title]=i,n),{});return t.filter(n=>n.users.totalCount>0).map(n=>({label:e[n.content].label,count:n.users.totalCount,icon:e[n.content].icon,viewerHasReacted:n.viewerHasReacted}))}function Iu(t,e,r){if(!!r)return{label:`${r.owner.login}:${t}`,ref:t,sha:e,repo:{cloneUrl:r.url}}}function Fn(t,e){return t?{login:t.login,url:t.url,avatarUrl:Kc(t.avatarUrl,void 0,e.remote.authProviderId),email:t.email}:{login:"",url:""}}function Vc(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function Bc(t){switch(t){case"UNKNOWN":return Rn.Unknown;case"MERGEABLE":return Rn.Mergeable;case"CONFLICTING":return Rn.NotMergeable}}function ep(t,e){var r,n,i,a,o,f;const S=t.repository.pullRequest;return{id:S.databaseId,graphNodeId:S.id,url:S.url,number:S.number,state:S.state,body:S.body,bodyHTML:S.bodyHTML,title:S.title,createdAt:S.createdAt,updatedAt:S.updatedAt,isRemoteHeadDeleted:!S.headRef,head:Iu((n=(r=S.headRef)==null?void 0:r.name)!=null?n:S.headRefName,S.headRefOid,S.headRepository),isRemoteBaseDeleted:!S.baseRef,base:Iu((a=(i=S.baseRef)==null?void 0:i.name)!=null?a:S.baseRefName,S.baseRefOid,S.baseRepository),user:Fn(S.author,e),merged:S.merged,mergeable:Bc(S.mergeable),labels:S.labels.nodes,isDraft:S.isDraft,suggestedReviewers:tp(S.suggestedReviewers),comments:rg((o=S.comments)==null?void 0:o.nodes,e),milestone:Vc(S.milestone),assignees:(f=S.assignees)==null?void 0:f.nodes.map(T=>Fn(T,e))}}function rg(t,e){if(!t)return;const r=[];for(const n of t)r.push({author:Fn(n.author,e),body:n.body,databaseId:n.databaseId});return r}function jc(t,e){var r,n,i,a;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:(r=t.assignees)==null?void 0:r.nodes.map(o=>Fn(o,e)),user:Fn(t.author,e),labels:t.labels.nodes,repositoryName:(n=t.repository)==null?void 0:n.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(a=t.repository)==null?void 0:a.url}}function wy(t,e){var r,n,i,a;const o=t;return{id:o.databaseId,graphNodeId:o.id,url:o.url,number:o.number,state:o.state,body:o.body,bodyHTML:o.bodyHTML,title:o.title,createdAt:o.createdAt,updatedAt:o.updatedAt,isRemoteHeadDeleted:!o.headRef,head:Iu((n=(r=o.headRef)==null?void 0:r.name)!=null?n:o.headRefName,o.headRefOid,o.headRepository),isRemoteBaseDeleted:!o.baseRef,base:Iu((a=(i=o.baseRef)==null?void 0:i.name)!=null?a:o.baseRefName,o.baseRefOid,o.baseRepository),user:Fn(o.author,e),merged:o.merged,mergeable:Bc(o.mergeable),labels:o.labels.nodes,isDraft:o.isDraft,suggestedReviewers:tp(o.suggestedReviewers),milestone:Vc(o.milestone)}}function tp(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(rp):[]}function rp(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function ng(t,e){return{event:ar.Reviewed,comments:t.comments.nodes.map(r=>sa(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:Fn(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function np(t,e){const r=[];return t.forEach(n=>{const i=tg(n.__typename);switch(i){case ar.Commented:const a=n;r.push({htmlUrl:a.url,body:a.body,bodyHTML:a.bodyHTML,user:Fn(a.author,e),event:i,canEdit:a.viewerCanUpdate,canDelete:a.viewerCanDelete,id:a.databaseId,graphNodeId:a.id,createdAt:a.createdAt});return;case ar.Reviewed:const o=n;r.push({event:i,comments:[],submittedAt:o.submittedAt,body:o.body,bodyHTML:o.bodyHTML,htmlUrl:o.url,user:Fn(o.author,e),authorAssociation:o.authorAssociation,state:o.state,id:o.databaseId});return;case ar.Committed:const f=n;r.push({id:f.id,event:i,sha:f.commit.oid,author:f.commit.author.user?Fn(f.commit.author.user,e):{login:f.commit.committer.name},htmlUrl:f.url,message:f.commit.message,authoredDate:new Date(f.commit.authoredDate)});return;case ar.Merged:const S=n;r.push({id:S.id,event:i,user:Fn(S.actor,e),createdAt:S.createdAt,mergeRef:S.mergeRef.name,sha:S.commit.oid,commitUrl:S.commit.commitUrl,url:S.url,graphNodeId:S.id});return;case ar.Assigned:const T=n;r.push({id:T.databaseId,event:i,user:T.user,actor:T.actor});return;case ar.HeadRefDeleted:const A=n;r.push({id:A.id,event:i,actor:A.actor,createdAt:A.createdAt,headRef:A.headRefName});return;default:break}}),r}function ig(t,e){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl?Kc(t.user.avatarUrl,void 0,e.remote.authProviderId):void 0,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:sg(t.user.contributionsCollection)}}function sg(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(n=>{e.push({createdAt:new Date(n.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function Du(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:dn.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:dn.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:dn.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:dn.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:dn.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:dn.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:dn.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:dn.icons.reactions.EYES}]}function ag(t){const e=[];return t.forEach(r=>{var n,i;fl(r)&&e.push({login:r.author.login,name:r.author.name||""}),Os(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login}),gl(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login})}),e}function og(t){return t&&t.repository.viewerPermission&&Object.values(Yr).includes(t.repository.viewerPermission)?t.repository.viewerPermission:Yr.Unknown}function zc(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function ip(t,e,r){const n=e.filter(Os).filter(o=>o.state!=="PENDING");let i=[];const a=new Map;a.set(r.login,!0);for(let o=n.length-1;o>=0;o--){const f=n[o].user;a.get(f.login)||(a.set(f.login,!0),i.push({reviewer:f,state:n[o].state}))}return t.forEach(o=>{if(!a.get(o.login))i.push({reviewer:o,state:"REQUESTED"});else{const f=i.find(S=>S.reviewer.login===o.login);f.state="REQUESTED"}}),i=i.sort((o,f)=>o.state==="REQUESTED"&&f.state!=="REQUESTED"?1:f.state==="REQUESTED"&&o.state!=="REQUESTED"||o.reviewer.login.toLowerCase()<f.reviewer.login.toLowerCase()?-1:1),i}function ug(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function Qc(){return c.env.remoteName==="codespaces"&&c.env.uiKind===c.UIKind.Web}function Wc(){const t=c.workspace.getConfiguration("github-enterprise").get("uri","");if(t)return c.Uri.parse(t,!0)}function Ou(){return!!Wc()}function lg(t,e=200){return t?`https://www.gravatar.com/avatar/${t}?s=${e}&d=retro`:void 0}function Kc(t,e,r){var n;return r===Ot.github?t:e?lg(ka.createHash("md5").update((n=e==null?void 0:e.trim())==null?void 0:n.toLowerCase()).digest("hex")):void 0}var cg=Object.defineProperty,Rr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const xu=class{constructor(t,e,r,n=!1){Rr(this,"id"),Rr(this,"graphNodeId"),Rr(this,"number"),Rr(this,"title"),Rr(this,"html_url"),Rr(this,"state",Vt.Open),Rr(this,"author"),Rr(this,"assignees"),Rr(this,"createdAt"),Rr(this,"updatedAt"),Rr(this,"milestone"),Rr(this,"githubRepository"),Rr(this,"remote"),Rr(this,"item"),Rr(this,"bodyHTML"),Rr(this,"_onDidInvalidate",new c.EventEmitter),Rr(this,"onDidInvalidate",this._onDidInvalidate.event),this.githubRepository=t,this.remote=e,this.item=r,n||this.update(r)}invalidate(){this._onDidInvalidate.fire()}get isOpen(){return this.state===Vt.Open}get isClosed(){return this.state===Vt.Closed}get isMerged(){return this.state===Vt.Merged}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=c.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(n){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=Vt.Open:this.state=Vt.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return(n==null?void 0:n.updatePullRequest.pullRequest)&&(this.item.body=n.updatePullRequest.pullRequest.body,this.bodyHTML=n.updatePullRequest.pullRequest.bodyHTML,this.title=n.updatePullRequest.pullRequest.title,this.invalidate()),n.updatePullRequest.pullRequest}catch(e){throw new Error(ke(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){P.debug(`Fetch issue comments of PR #${this.number} - enter`,xu.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return P.debug(`Fetch issue comments of PR #${this.number} - done`,xu.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return Jh(n.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return Jh(i.updateIssueComment.issueComment)}catch(r){throw new Error(ke(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(ke(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){P.debug(`Fetch timeline events of issue #${this.number} - enter`,xu.ID);const t=this.githubRepository,{query:e,remote:r,schema:n}=await t.ensure();try{const{data:i}=await e({query:n.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),a=i.repository.pullRequest.timelineItems.nodes;return np(a,t)}catch(i){return console.log(i),[]}}};let Dr=xu;Rr(Dr,"ID","IssueModel");var dg=Object.defineProperty,Yt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ln=class extends Dr{constructor(t,e,r,n,i){super(e,r,n,!0);Yt(this,"isDraft"),Yt(this,"localBranchName"),Yt(this,"mergeBase"),Yt(this,"suggestedReviewers"),Yt(this,"_hasPendingReview",!1),Yt(this,"_onDidChangePendingReviewState",new c.EventEmitter),Yt(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),Yt(this,"_reviewThreadsCache",[]),Yt(this,"_reviewThreadsCacheInitialized",!1),Yt(this,"_onDidChangeReviewThreads",new c.EventEmitter),Yt(this,"onDidChangeReviewThreads",this._onDidChangeReviewThreads.event),Yt(this,"_fileChangeViewedState",{}),Yt(this,"_onDidChangeFileViewedState",new c.EventEmitter),Yt(this,"onDidChangeFileViewedState",this._onDidChangeFileViewedState.event),Yt(this,"_comments"),Yt(this,"_onDidChangeComments",new c.EventEmitter),Yt(this,"onDidChangeComments",this._onDidChangeComments.event),Yt(this,"isActive"),Yt(this,"_telemetry"),Yt(this,"isRemoteHeadDeleted"),Yt(this,"head"),Yt(this,"isRemoteBaseDeleted"),Yt(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(n)}clear(){this.comments=[],this._reviewThreadsCacheInitialized=!1,this._reviewThreadsCache=[]}async initializeReviewThreadCache(){await this.getReviewThreads(),this._reviewThreadsCacheInitialized=!0}get reviewThreadsCache(){return this._reviewThreadsCache}get reviewThreadsCacheReady(){return this._reviewThreadsCacheInitialized}get isMerged(){return this.state===Vt.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}get comments(){var t;return(t=this._comments)!=null?t:[]}set comments(t){this._comments=t,this._onDidChangeComments.fire()}get fileChangeViewedState(){return this._fileChangeViewedState}updateState(t){t.toLowerCase()==="open"?this.state=Vt.Open:this.state=this.item.merged?Vt.Merged:Vt.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.isRemoteHeadDeleted!=null&&(this.isRemoteHeadDeleted=t.isRemoteHeadDeleted),t.head&&(this.head=new So(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.isRemoteBaseDeleted!=null&&(this.isRemoteBaseDeleted=t.isRemoteBaseDeleted),t.base&&(this.base=new So(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,c.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&c.commands.executeCommand("vscode.open",c.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(Tn.Approve,t):this.createReview(Tn.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(Tn.RequestChanges,t):this.createReview(Tn.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),bs(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:n}=await this.githubRepository.ensure(),{data:i}=await r.pulls.createReview({owner:n.owner,repo:n.repositoryName,pull_number:this.number,event:t,body:e});return eg(i,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:n,schema:i}=await this.githubRepository.ensure();if(r){const{data:a}=await n({mutation:i.SubmitReview,variables:{id:r,event:t||Tn.Comment,body:e}});this.hasPendingReview=!1,await this.updateDraftModeContext();const o=ng(a.submitPullRequestReview.pullRequestReview,this.githubRepository),f=this._reviewThreadsCache.find(S=>S.comments.length?S.comments[0].pullRequestReviewId===o.id:void 0);return f&&(f.comments=o.comments,this._onDidChangeReviewThreads.fire({added:[],changed:[f],removed:[]})),o}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),n=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:n}}})}catch(i){P.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:n}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return n.node.reviews.nodes.length>0?n.node.reviews.nodes[0].id:void 0}catch(n){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:a}=n.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),this.getReviewThreads(),{deletedReviewId:a,deletedReviewComments:i.nodes.map(o=>sa(o,!1))}}async startReview(t){var e;const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,commitOID:t||((e=this.head)==null?void 0:e.sha)}}});if(!i)throw new Error("Failed to start review");return i.addPullRequestReview.pullRequestReview.id}async createReviewThread(t,e,r,n,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const a=await this.getPendingReviewId(),{mutate:o,schema:f}=await this.githubRepository.ensure(),{data:S}=await o({mutation:f.AddReviewThread,variables:{input:{path:e,body:t,pullRequestId:this.graphNodeId,pullRequestReviewId:a,line:r,side:n}}});if(!S)throw new Error("Creating review thread failed.");i||(this.hasPendingReview=!0,await this.updateDraftModeContext());const T=S.addPullRequestReviewThread.thread,A=Au(T);return this._reviewThreadsCache.push(A),this._onDidChangeReviewThreads.fire({added:[A],changed:[],removed:[]}),A}async createCommentReply(t,e,r,n){var i;if(!this.validatePullRequestModel("Creating comment failed"))return;let a=await this.getPendingReviewId();a||(a=await this.startReview(n));const{mutate:o,schema:f}=await this.githubRepository.ensure(),{data:S}=await o({mutation:f.AddComment,variables:{input:{pullRequestReviewId:a,body:t,inReplyTo:e,commitOID:n||((i=this.head)==null?void 0:i.sha)}}});if(!S)throw new Error("Creating comment reply failed.");const{comment:T}=S.addPullRequestReviewComment,A=sa(T,!1);r&&(A.isDraft=!1);const H=this._reviewThreadsCache.find(K=>K.comments.some(de=>de.graphNodeId===e));return H&&(H.comments.push(A),this._onDidChangeReviewThreads.fire({added:[],changed:[H],removed:[]})),A}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await c.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}async editReviewComment(t,e){const{mutate:r,schema:n}=await this.githubRepository.ensure();let i=this._reviewThreadsCache.find(f=>f.comments.some(S=>S.graphNodeId===t.graphNodeId));if(!i)return this.editIssueComment(t,e);const{data:a}=await r({mutation:n.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});if(!a)throw new Error("Editing review comment failed.");const o=sa(a.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved);if(i){const f=i.comments.findIndex(S=>S.graphNodeId===t.graphNodeId);i.comments.splice(f,1,o),this._onDidChangeReviewThreads.fire({added:[],changed:[i],removed:[]})}return o}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure(),n=Number(t),i=this._reviewThreadsCache.findIndex(a=>a.comments.some(o=>o.id===n));if(i===-1)this.deleteIssueComment(t);else if(await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:n}),i>-1){const a=this._reviewThreadsCache[i],o=a.comments.findIndex(f=>f.id===n);a.comments.splice(o,1),a.comments.length===0?(this._reviewThreadsCache.splice(i,1),this._onDidChangeReviewThreads.fire({added:[],changed:[],removed:[a]})):this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}catch(e){throw new Error(ke(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>Xi(i,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}diffThreads(t){const e=[],r=[],n=[];t.forEach(i=>{const a=this._reviewThreadsCache.find(o=>o.id===i.id);a?ga()(i,a)||r.push(i):e.push(i)}),this._reviewThreadsCache.forEach(i=>{t.find(a=>a.id===i.id)||n.push(i)}),this._onDidChangeReviewThreads.fire({added:e,changed:r,removed:n})}async getReviewThreads(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=n.repository.pullRequest.reviewThreads.nodes.map(a=>Au(a));return this.diffThreads(i),this._reviewThreadsCache=i,i}catch(n){return P.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async initializeReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=n.repository.pullRequest.reviewThreads.nodes.map(a=>a.comments.nodes.map(o=>sa(o,a.isResolved),t)).reduce((a,o)=>a.concat(o),[]).sort((a,o)=>a.createdAt>o.createdAt?1:-1);this.comments=i}catch(n){P.appendLine(`Failed to get pull request review comments: ${n}`)}}async getCommits(){try{P.debug(`Fetch commits of PR #${this.number} - enter`,Ln.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return P.debug(`Fetch commits of PR #${this.number} - done`,Ln.ID),r.data}catch(t){return c.window.showErrorMessage(`Fetching commits failed: ${ke(t)}`),[]}}async getCommitChangedFiles(t){var e,r;try{P.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,Ln.ID);const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return P.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,Ln.ID),(r=(e=a.data.files)==null?void 0:e.filter(o=>!!o.patch))!=null?r:[]}catch(n){return c.window.showErrorMessage(`Fetching commit file changes failed: ${ke(n)}`),[]}}async getFile(t,e){var r;const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(a.data))throw new Error(`Unexpected array response when getting file ${t}`);const o=(r=a.data.content)!=null?r:"";return po.Buffer.from(o,a.data.encoding).toString()}async getTimelineEvents(){P.debug(`Fetch timeline events of PR #${this.number} - enter`,Ln.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=n.repository.pullRequest.timelineItems.nodes,a=np(i,this.githubRepository);return await this.addReviewTimelineEventComments(a),a}catch(n){return console.log(n),[]}}async addReviewTimelineEventComments(t){const e=t.filter(Os),n=(await this.getReviewThreads()).reduce((T,A)=>T.concat(A.comments),[]),i=e.reduce((T,A)=>(T[A.id]=A,A.comments=[],T),{}),a=n.reduce((T,A)=>(T[A.id]=A,T),{}),o=[];let f=n.length;for(;f-- >0;){const T=n[f];if(!T.inReplyToId){o.unshift(T);continue}const A=a[T.inReplyToId];A.childComments=A.childComments||[],A.childComments=[T,...T.childComments||[],...A.childComments]}o.forEach(T=>{const A=i[T.pullRequestReviewId];A&&(A.comments=A.comments.concat(T).concat(T.childComments||[]))});const S=e.filter(T=>T.state.toLowerCase()==="pending")[0];S&&(S.comments=n.filter(T=>T.isDraft))}async getStatusChecks(){var t;const{query:e,remote:r,schema:n}=await this.githubRepository.ensure();let i;try{i=await e({query:n.GetChecks,variables:{owner:r.owner,name:r.repositoryName,number:this.number}})}catch(o){if((t=o.message)==null?void 0:t.startsWith("GraphQL error: Resource protected by organization SAML enforcement."))return{state:"pending",statuses:[]}}const a=i.data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return a?{state:a.state.toLowerCase(),statuses:a.contexts.nodes.map(o=>{var f,S,T,A;return vl(o)?{id:o.id,url:(f=o.checkSuite.app)==null?void 0:f.url,avatar_url:(S=o.checkSuite.app)==null?void 0:S.logoUrl,state:((T=o.conclusion)==null?void 0:T.toLowerCase())||"pending",description:o.title,context:o.name,target_url:o.detailsUrl}:{id:o.id,url:o.targetUrl,avatar_url:o.avatarUrl,state:(A=o.state)==null?void 0:A.toLowerCase(),description:o.description,context:o.context,target_url:o.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const n=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,o=(await As(n,t.repository,i)).find(A=>A.fileName===r.path||A.previousFileName===r.path);if(!o)throw new Error("Can't find matching file");let f,S;if(e.equals(t.activePullRequest)){const A=c.Uri.file($.resolve(t.repository.rootUri.fsPath,o.fileName));f=o.status===nt.DELETE?cn(A,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):A,S=cn(A,o.status===nt.RENAME?o.previousFileName:o.fileName,void 0,o.status===nt.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const A=e.head.sha,H=o.status===nt.RENAME?o.previousFileName:o.fileName;f=Vn(c.Uri.file(Bn(t.repository.rootUri,o.fileName)),e,o.baseCommit,A,o.fileName,!1,o.status),S=Vn(c.Uri.file(Bn(t.repository.rootUri,H)),e,o.baseCommit,A,o.fileName,!0,o.status)}const T=r.path.split("/");c.commands.executeCommand("vscode.diff",S,f,`${T[T.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){P.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,Ln.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const o=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(bs(o.data,t))}if(this.item.merged){const o=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,o.data}const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=n.merge_base_commit.sha;const i=300;let a=[];return n.files.length>=i?(P.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,Ln.ID),a=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):a=n.files,P.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${a.length} `,Ln.ID),a}async getMergeability(){try{P.debug(`Fetch pull request mergeability ${this.number} - enter`,Ln.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return P.debug(`Fetch pull request mergeability ${this.number} - done`,Ln.ID),Bc(n.repository.pullRequest.mergeable)}catch(t){return P.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),Rn.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}updateCommentReactions(t,e){const r=this._reviewThreadsCache.find(n=>n.comments.some(i=>i.graphNodeId===t));if(r){const n=r.comments.find(i=>i.graphNodeId===t);n&&(n.reactions=Zh(e),this._onDidChangeReviewThreads.fire({added:[],changed:[r],removed:[]}))}}async addCommentReaction(t,e){const r=Du().reduce((f,S)=>(f[S.label]=S.title,f),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Add comment reaction failed.");const o=a.addReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async deleteCommentReaction(t,e){const r=Du().reduce((f,S)=>(f[S.label]=S.title,f),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Delete comment reaction failed.");const o=a.removeReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async resolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.ResolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Resolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Au(n.resolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async unresolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UnresolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Unresolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Au(n.unresolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async initializePullRequestFileViewState(){const{query:t,schema:e,remote:r}=await this.githubRepository.ensure(),n=[];let i=null,a=!1;do{const{data:o}=await t({query:e.PullRequestFiles,variables:{owner:r.owner,name:r.repositoryName,number:this.number,after:i}});o.repository.pullRequest.files.nodes.forEach(f=>{this._fileChangeViewedState[f.path]!==f.viewerViewedState&&n.push({fileName:f.path,viewed:f.viewerViewedState}),this._fileChangeViewedState[f.path]=f.viewerViewedState}),a=o.repository.pullRequest.files.pageInfo.hasNextPage,i=o.repository.pullRequest.files.pageInfo.endCursor}while(a);n.length&&this._onDidChangeFileViewedState.fire({changed:n})}async markFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.MarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this._fileChangeViewedState[t]=$r.VIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:$r.VIEWED}]})}async unmarkFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.UnmarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this._fileChangeViewedState[t]=$r.UNVIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:$r.UNVIEWED}]})}};let Di=Ln;Yt(Di,"ID","PullRequestModel");const Mu="githubPullRequests",sp="terminalLinksHandler",hg="useReviewMode",aa="fileListLayout";var pg=Object.defineProperty,Yc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class mg extends Mh{constructor(e,r,n){super(e);this._folderRepositoryManager=r,this._item=n,Yc(this,"viewType","github:activePullRequest"),Yc(this,"_existingReviewers",[]),Yc(this,"_prChangeListener"),this.registerFolderRepositoryListener(),gp(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(this._folderRepositoryManager.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Vt.Merged})}))}registerFolderRepositoryListener(){this._disposables.push(this._folderRepositoryManager.onDidChangeActivePullRequest(e=>{if(this._folderRepositoryManager&&this._item){const r=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:r})}}))}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":c.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return Za(this._item,this._item._telemetry);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(e)}}async checkoutDefaultBranch(e){try{const r=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.checkoutDefaultBranch(r)}finally{this._replyMessage(e,{})}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){var r;return(!this._prChangeListener||e.number!==this._item.number)&&((r=this._prChangeListener)==null||r.dispose(),this._prChangeListener=e.onDidInvalidate(()=>this.updatePullRequest(e))),Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests(),this._folderRepositoryManager.getBranchNameForPullRequest(e)]).then(n=>{var i,a;const[o,f,S,T,A]=n;if(!o)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(this._item=o,!this._view)return;this._view.title=`${o.title} #${e.number.toString()}`;const H=e.equals(this._folderRepositoryManager.activePullRequest),K=f.hasWritePermission,de=f.mergeMethodsAvailability,fe=K||this._item.canEdit(),we=c.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Ne=Fh(de,we),Ae=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=ip(T!=null?T:[],S!=null?S:[],o.author);const $e=o.base&&o.head&&!o.base.repositoryCloneUrl.equals(o.head.repositoryCloneUrl)&&Qc();this._postMessage({command:"pr.initialize",pullrequest:{number:o.number,title:o.title,url:o.html_url,createdAt:o.createdAt,body:o.body,bodyHTML:o.bodyHTML,labels:o.item.labels,author:{login:o.author.login,name:o.author.name,avatarUrl:o.userAvatar,url:o.author.url},state:o.state,isCurrentlyCheckedOut:H,isRemoteBaseDeleted:o.isRemoteBaseDeleted,base:o.base.label,isRemoteHeadDeleted:o.isRemoteHeadDeleted,isLocalHeadDeleted:!A,head:(a=(i=o.head)==null?void 0:i.label)!=null?a:"",canEdit:fe,hasWritePermission:K,mergeable:o.item.mergeable,isDraft:o.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:de,defaultMergeMethod:Ne,isIssue:!1,isAuthor:Ae.login===o.author.login,reviewers:this._existingReviewers,continueOnGitHub:$e}})}).catch(n=>{c.window.showErrorMessage(ke(n))})}close(e){c.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(n=>e.user.login===n.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),c.commands.executeCommand("pr.refreshList")},r=>{c.window.showErrorMessage(`Approving pull request failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{c.window.showErrorMessage(`Requesting changes failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}submitReview(e){this._item.submitReview(Tn.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{c.window.showErrorMessage(`Submitting review failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const o=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${o}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const o=c.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!o});const f=c.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&n.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!f})}if(c.env.remoteName==="codespaces"&&n.push({label:"Suspend Codespace",type:"suspend"}),!n.length){c.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await c.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0}),a=[];if(i){const o=this._item.equals(this._folderRepositoryManager.activePullRequest),f=i.map(async S=>{switch(S.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),a.push(S.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(o){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await c.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await c.commands.executeCommand("git.cleanAll");else return;const T=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(T)}return await this._folderRepositoryManager.repository.deleteBranch(r.branch,!0),a.push(S.type);case"remote":return await this._folderRepositoryManager.repository.removeRemote(r.remote),a.push(S.type);case"suspend":return await c.commands.executeCommand("github.codespaces.disconnectSuspend"),a.push(S.type)}});await Promise.all(f),c.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:a})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{c.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{c.window.showErrorMessage(`Unable to set PR ready for review. ${ke(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:n,method:i}=e.args;if(await c.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:Vt.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,n,i).then(o=>{c.commands.executeCommand("pr.refreshList"),o.merged||c.window.showErrorMessage(`Merging PR failed: ${o.message}`),this._replyMessage(e,{state:o.merged?Vt.Merged:Vt.Open})}).catch(o=>{c.window.showErrorMessage(`Unable to merge pull request. ${ke(o)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=Gc(),r=c.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class Fu{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}static getSettingsValue(){return c.workspace.getConfiguration(Mu).get(sp)}static registerProvider(e,r,n){e.push(c.window.registerTerminalLinkProvider(new Fu(r,n)))}provideTerminalLinks(e,r){var n;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const a=e.line.substring(i),o=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),f=a.match(o);if(f&&f.length===4){const S=f[1],T=f[2],A=f[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(K=>K.remote.owner===S&&K.remote.repositoryName===T)>-1&&((n=this.reviewManager.repository.state.HEAD)==null?void 0:n.name)===A)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:a}]}return[]}openLink(e){return c.env.openExternal(c.Uri.parse(e.url))}handleTerminalLink(e){const r=Fu.getSettingsValue();if(r==="github"){this.openLink(e);return}if(r==="vscode"){this.reviewManager.createPullRequest();return}const n="Yes",i="Don't show again";c.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?",n,"No, continue to github.com",i).then(a=>{switch(a){case n:{this.reviewManager.createPullRequest();break}case i:{c.workspace.getConfiguration(Mu).update(sp,"github",c.ConfigurationTarget.Global),this.openLink(e);break}default:this.openLink(e)}})}}var fg=Object.defineProperty,un=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gg extends Mh{constructor(e,r,n,i){super(e);this._folderRepositoryManager=r,this._pullRequestDefaults=n,un(this,"viewType","github:createPullRequest"),un(this,"_onDone",new c.EventEmitter),un(this,"onDone",this._onDone.event),un(this,"_onDidChangeBaseRemote",new c.EventEmitter),un(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),un(this,"_onDidChangeBaseBranch",new c.EventEmitter),un(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),un(this,"_onDidChangeCompareRemote",new c.EventEmitter),un(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),un(this,"_onDidChangeCompareBranch",new c.EventEmitter),un(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),un(this,"_firstLoad",!0),un(this,"_defaultCompareBranch"),this._defaultCompareBranch=i}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get defaultCompareBranch(){return this._defaultCompareBranch}set defaultCompareBranch(e){var r,n;e&&((e==null?void 0:e.name)!==this._defaultCompareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((n=this._defaultCompareBranch.upstream)==null?void 0:n.remote))&&(this._defaultCompareBranch=e,this.initializeParams(),this._onDidChangeCompareBranch.fire(this._defaultCompareBranch.name))}show(e){e&&(this.defaultCompareBranch=e),super.show()}async getTotalCommits(e){var r;const n=await this._folderRepositoryManager.getOrigin(e);if(e.upstream){const i=this._folderRepositoryManager.findRepo(na(e.upstream.remote));if(i){const a=`${i.remote.owner}:${(r=e.name)!=null?r:""}`,o=`${this._pullRequestDefaults.owner}:${this._pullRequestDefaults.base}`,{total_commits:f}=await n.compareCommits(o,a);return f}}else if(e.commit){const i=await this._folderRepositoryManager.repository.getBranch(this._pullRequestDefaults.base);if(i.commit)return(await this._folderRepositoryManager.repository.diffBetween(i.commit,e.commit)).length}return 0}async getTitle(e){const r=await this._folderRepositoryManager.getOrigin(e);let n=this._pullRequestDefaults.base===e.name;try{await this.getTotalCommits(e)>1&&(n=await r.getDefaultBranch()!==e.name)}catch(i){}if(n){const i=e.name;return i?`${i.charAt(0).toUpperCase()}${i.slice(1)}`:""}else return e.name?Qh(await this._folderRepositoryManager.getTipCommitMessage(e.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await c.workspace.fs.readFile(e[0])).toString()}catch(r){P.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(e){let r;try{await this.getTotalCommits(e)===1&&e.name&&(r=Qh(await this._folderRepositoryManager.getTipCommitMessage(e.name)).body)}catch(i){}const n=await this.getPullRequestTemplate();return n&&r?`${r}

${n}`:n||(r&&this._pullRequestDefaults.base!==e.name?r:"")}async initializeParams(e=!1){var r;if(!this.defaultCompareBranch)throw new Vh(this._folderRepositoryManager.repository);const n={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},i=await this._folderRepositoryManager.getOrigin(this.defaultCompareBranch),a={owner:i.remote.owner,repositoryName:i.remote.repositoryName},[o,f,S,T,A]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.getAllGitHubRemotes(),i.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(this.defaultCompareBranch),this.getDescription(this.defaultCompareBranch)]),H=o.map(we=>({owner:we.owner,repositoryName:we.repositoryName})),K=f.map(we=>({owner:we.owner,repositoryName:we.repositoryName}));let de=S;a.owner!==n.owner&&(de=await i.listBranches(a.owner,a.repositoryName)),this.defaultCompareBranch.name&&!de.includes(this.defaultCompareBranch.name)&&(de.push(this.defaultCompareBranch.name),de.sort());const fe={availableBaseRemotes:H,availableCompareRemotes:K,defaultBaseRemote:n,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:a,defaultCompareBranch:(r=this.defaultCompareBranch.name)!=null?r:"",branchesForRemote:S,branchesForCompare:de,defaultTitle:T,defaultDescription:A,isDraft:!1};this._postMessage({command:e?"reset":"pr.initialize",params:fe})}async changeRemote(e,r){var n,i;const{owner:a,repositoryName:o}=e.args;let f=this._folderRepositoryManager.findRepo(A=>a===A.remote.owner&&o===A.remote.repositoryName);if(f||(f=this._folderRepositoryManager.createGitHubRepositoryFromOwnerName(a,o)),!f)throw new Error("No matching GitHub repository found.");const S=await f.getDefaultBranch(),T=await f.listBranches(a,o);return!r&&((n=this.defaultCompareBranch)==null?void 0:n.name)&&!T.includes(this.defaultCompareBranch.name)&&(T.push(this.defaultCompareBranch.name),T.sort()),r?(this._onDidChangeBaseRemote.fire({owner:a,repositoryName:o}),this._onDidChangeBaseBranch.fire(S)):this._onDidChangeCompareRemote.fire({owner:a,repositoryName:o}),this._replyMessage(e,{branches:T,defaultBranch:r?S:(i=this.defaultCompareBranch)==null?void 0:i.name})}async create(e){try{const r=e.args.compareOwner,n=e.args.compareRepo,i=e.args.compareBranch,a=`${r}/${n}`;let f=(await this._folderRepositoryManager.repository.getBranch(i)).upstream?this._folderRepositoryManager.findRepo(H=>H.remote.owner===r&&H.remote.repositoryName===n):void 0,S=f==null?void 0:f.remote;if((!S||S.owner!==r||S.repositoryName!==n)&&await c.window.showInformationMessage(`There is no upstream branch for '${i}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"){let K;const de=this._folderRepositoryManager.repository.state.remotes.find(fe=>{if(!fe.pushUrl)return!1;const we=new yu(fe.name,fe.pushUrl,new kn(fe.pushUrl));return we.owner===r&&we.repositoryName===n?(K=we,!0):!1});de&&K?(await this._folderRepositoryManager.repository.push(de.name,i,!0),S=K,f=this._folderRepositoryManager.findRepo(na(S.remoteName))):this._throwError(e,`The current repository does not have a push remote for ${a}`)}if(!S){this._throwError(e,"No upstream for the compare branch.");return}if(!f)throw new Error(`Unable to find GitHub repository matching '${S.remoteName}'. You can add '${S.remoteName}' to the setting "githubPullRequests.remotes" to ensure '${S.remoteName}' is found.`);const T=`${f.remote.owner}:${i}`,A=await this._folderRepositoryManager.createPullRequest({...e.args,head:T});A?(await this._replyMessage(e,{}),await Mn.associateBranchWithPullRequest(this._folderRepositoryManager.repository,A,i),this._onDone.fire(A)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(r){this._throwError(e,r.message)}}async _onDidReceiveMessage(e){var r;if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":return c.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0),this._replyMessage(e,void 0);case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":return this._onDidChangeBaseBranch.fire(e.args),this._replyMessage(e,void 0);case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":try{const i=await this._folderRepositoryManager.repository.getBranch((r=e.args.name)!=null?r:e.args);this._onDidChangeCompareBranch.fire(i.name)}catch(i){c.window.showErrorMessage("Branch does not exist locally.")}return this._replyMessage(e,void 0);default:c.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=Gc(),r=c.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}var vg=Object.defineProperty,ap=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Xc{constructor(){ap(this,"_onDidChangeFile",new c.EventEmitter),ap(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){return{dispose:()=>{}}}stat(e){return{type:c.FileType.File,ctime:0,mtime:0,size:0}}readDirectory(e){return[]}createDirectory(e){}writeFile(e,r,n){}delete(e,r){}rename(e,r,n){}}var yg=Object.defineProperty,Jc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bg{constructor(){Jc(this,"fileViewedState",new Map),Jc(this,"_onDidChangeFileDecorations",new c.EventEmitter),Jc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileViewedState(e,r,n,i){this.fileViewedState.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e)}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==Oi)return;const n=Ft(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileViewedState.get(i)===$r.VIEWED)return{propagate:!1,badge:"\u2713",tooltip:"Viewed"}}}}const Zc=new bg;var wg=Object.defineProperty,ed=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _g{constructor(){ed(this,"fileHasComments",new Map),ed(this,"_onDidChangeFileDecorations",new c.EventEmitter),ed(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,n,i){const a=`${r}:${n}`;this.fileHasComments.get(a)!==i&&(this.fileHasComments.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const n=Ft(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u{1F4AC}"}}}}const op=new _g;var Eg=Object.defineProperty,Lu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Eg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class jr{constructor(){Lu(this,"childrenDisposables"),Lu(this,"parent"),Lu(this,"label"),Lu(this,"accessibilityInformation")}getParent(){if(this.parent instanceof jr)return this.parent}async reveal(e,r){try{await this.parent.reveal(e||this,r)}catch(n){P.appendLine(n,"TreeNode")}}refresh(e){return this.parent.refresh(e)}async getChildren(){return[]}dispose(){this.childrenDisposables&&(this.childrenDisposables.forEach(e=>e.dispose()),this.childrenDisposables=[])}}var Sg=Object.defineProperty,mr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function up(t){const e=c.window.activeTextEditor,r={preserveFocus:!0,viewColumn:c.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}async function td(t,e,r,n,i){let a=await pa(e,t.repository)||e,o=await pa(r,t.repository)||r;(a.scheme==="data"||o.scheme==="data")&&(i===nt.ADD&&(a=lo),i===nt.DELETE&&(o=lo));const f=r.path.split("/");return{command:"vscode.diff",arguments:[a,o,`${f[f.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}class Ka extends jr{constructor(e,r,n,i,a,o,f,S){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=a,this.blobUrl=o,this.filePath=f,this.parentFilePath=S,mr(this,"description"),mr(this,"iconPath"),mr(this,"command"),mr(this,"resourceUri"),mr(this,"contextValue"),mr(this,"childrenDisposables",[]),mr(this,"_viewed");var T;const A=(T=this.pullRequest.fileChangeViewedState[i])!=null?T:$r.UNVIEWED;this.contextValue=`filechange:${nt[n]}:${A===$r.VIEWED?"viewed":"unviewed"}`,this.label=$.basename(i),this.description=c.workspace.asRelativePath($.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=c.ThemeIcon.File,this.resourceUri=co(c.Uri.parse(this.blobUrl),r.number,i,n),this.updateViewed(A),this.command={command:"pr.openFileOnGitHub",title:"Open File on GitHub",arguments:[this]},this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(H=>{const K=H.changed.find(de=>de.fileName===this.fileName);K&&(this.updateViewed(K.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${nt[this.status]}:${e===$r.VIEWED?"viewed":"unviewed"}`,Zc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}getTreeItem(){return this}}class lp extends jr{constructor(e,r,n,i,a,o,f){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.change=i,this.filePath=a,this.parentFilePath=o,this.sha=f,mr(this,"iconPath"),mr(this,"resourceUri"),mr(this,"parentSha"),mr(this,"contextValue"),mr(this,"command"),mr(this,"opts"),mr(this,"childrenDisposables",[]),mr(this,"_viewed");var S;const T=(S=this.pullRequest.fileChangeViewedState[this.fileName])!=null?S:$r.UNVIEWED;this.contextValue=`filechange:${nt[this.status]}:${T===$r.VIEWED?"viewed":"unviewed"}`,this.label=$.basename(this.fileName),this.iconPath=c.ThemeIcon.File,this.opts={preserveFocus:!0},this.updateShowOptions(),this.resourceUri=co(c.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status),this.updateViewed(T),this.childrenDisposables.push(this.pullRequest.onDidChangeReviewThreads(A=>{[...A.added,...A.removed].some(H=>H.path===this.fileName)&&this.updateShowOptions()})),this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(A=>{const H=A.changed.find(K=>K.fileName===this.fileName);H&&(this.updateViewed(H.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}get status(){return this.change.status}get fileName(){return this.change.fileName}get blobUrl(){return this.change.blobUrl}async diffHunks(){var e;let r=[];if(this.change instanceof mo)r=this.change.diffHunks;else if(this.status!==nt.RENAME)try{const n=(e=this.sha)!=null?e:this.pullRequest.head.sha,i=await this.pullRequestManager.repository.diffBetween(this.pullRequest.base.sha,n,this.change.fileName);r=go(i)}catch(n){P.appendLine(`Failed to parse patch for outdated comments: ${n}`)}return r}get description(){if(c.workspace.getConfiguration(Tr).get(aa)==="flat"){let r=c.workspace.asRelativePath($.dirname(this.fileName),!1);return r==="."&&(r=""),r}else return""}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${nt[this.status]}:${e===$r.VIEWED?"viewed":"unviewed"}`,Zc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}updateShowOptions(){const e=this.pullRequest.reviewThreadsCache,n=(be(e,i=>i.path)[this.fileName]||[]).filter(i=>!i.isOutdated);op.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,n.length>0),n.length?(n.sort((i,a)=>i.line-a.line),this.opts.selection=new c.Range(n[0].line,0,n[0].line,0)):delete this.opts.selection}getTreeItem(){return this}openFileCommand(){return up(this.filePath)}async openDiff(e,r){var n;const i=await td(e,this.parentFilePath,this.filePath,{...this.opts,...r},this.status);c.commands.executeCommand(i.command,...(n=i.arguments)!=null?n:[])}}class qu extends lp{constructor(e,r,n,i,a,o,f,S,T,A){super(r,e,n,i,o,f,A);this.folderRepositoryManager=e,this.parent=r,this.pullRequest=n,this.previousFileName=a,this.filePath=o,this.parentFilePath=f,this.isPartial=S,this.patch=T,this.sha=A}get comments(){return this.pullRequest.comments.filter(e=>e.path===this.change.fileName&&e.position!==null)}getTreeItem(){return this}async resolve(){this.command=await td(this.folderRepositoryManager,this.parentFilePath,this.filePath,void 0,this.status)}}class oa extends lp{constructor(e,r,n,i,a,o,f,S,T){super(e,r,n,i,a,o,f);this.parent=e,this.pullRequest=n,this.filePath=a,this.parentFilePath=o,this.sha=f,this.isCurrent=S,this._comments=T,mr(this,"_useViewChangesCommand",!1)}get comments(){return this._comments?this._comments:this.pullRequest.comments.filter(e=>!this.sha||this.sha===this.pullRequest.head.sha?e.position&&e.path===this.change.fileName:e.path===this.change.fileName&&e.originalCommitId===this.sha)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===nt.DELETE||this.status===nt.ADD){const de=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===nt.DELETE?[this.parentFilePath,de,`${this.fileName}`,{preserveFocus:!0}]:[de,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:n,rootPath:i}=Fi(this.filePath.query),a=`${n}^`,o={path:e,ref:r,commit:a,base:!0,isOutdated:!0,rootPath:i},f=this.filePath.with({query:JSON.stringify(o)});let S=this.filePath;this.isCurrent&&(S=this.pullRequestManager.repository.rootUri.with({path:$.posix.join(o.rootPath,o.path)}));const T={preserveFocus:!0},A=this.pullRequest.reviewThreadsCache,K=(be(A,de=>de.path)[this.fileName]||[]).filter(de=>de.isOutdated).sort((de,fe)=>de.line-fe.line);return K.length&&(T.selection=new c.Range(K[0].originalLine,0,K[0].originalLine,0)),{command:"vscode.diff",arguments:[f,S,`${this.fileName} from ${(n||"").substr(0,8)}`,T],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():c.workspace.getConfiguration().get("git.openDiffOnClick",!0)?this.command=await td(this.pullRequestManager,this.parentFilePath,this.filePath,this.opts,this.status):this.command=this.openFileCommand()}}class kg extends jr{constructor(e,r,n,i,a,o){super();this.parent=e,this.fileName=r,this.previousFileName=n,this.status=i,this.baseBranch=a,this.headBranch=o,mr(this,"description"),mr(this,"iconPath"),mr(this,"resourceUri"),mr(this,"command"),this.label=r,this.iconPath=c.ThemeIcon.File,this.resourceUri=c.Uri.file(r).with({scheme:Oi,query:JSON.stringify({status:i,fileName:r})});let f=c.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:a})}),S=c.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:o})});switch(i){case nt.ADD:f=c.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:a,isEmpty:!0})});break;case nt.RENAME:f=c.Uri.file(n).with({scheme:Oi,query:JSON.stringify({fileName:n,branch:a,isEmpty:!0})});break;case nt.DELETE:S=c.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:o,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[f,S,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function rd(t){return t.filter(e=>e instanceof oa)}var Tg=Object.defineProperty,ua=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Oi="githubpr";class Rg{constructor(e,r,n,i,a,o,f){this.repository=e,this.baseOwner=r,this.baseBranchName=n,this._compareOwner=i,this.compareBranchName=a,this.compareHasUpstream=o,this.folderRepoManager=f,ua(this,"_view"),ua(this,"_onDidChangeTreeData",new c.EventEmitter),ua(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),ua(this,"_contentProvider"),ua(this,"_disposables",[]),ua(this,"_gitHubRepository"),this._view=c.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(S=>S.remote.owner===this._compareOwner),this._disposables.push(this._view)}get view(){return this._view}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async reveal(e,r){return this._view.reveal(e,r)}refresh(){this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const n=await this.repository.getBranch(e);this.compareHasUpstream=!!n.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)c.commands.executeCommand("setContext","github:noUpstream",!1);else return c.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new Cg(this._gitHubRepository),this._disposables.push(c.workspace.registerFileSystemProvider(Oi,this._contentProvider,{isReadonly:!0})));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return n.files.length?this._view.message=void 0:this._view.message=`There are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,n.files.map(i=>new kg(this,i.filename,i.previous_filename,ya(i.status),n.merge_base_commit.sha,this.compareBranchName))}catch(n){return P.appendLine(`Comparing changes failed: ${n}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose()),this._contentProvider=void 0}}class Cg extends Xc{constructor(e){super();this.gitHubRepository=e}async readFile(e){var r;const n=Qu(e);if(!n||n.isEmpty)return new TextEncoder().encode("");const{octokit:i,remote:a}=await this.gitHubRepository.ensure(),o=await i.repos.getContent({owner:a.owner,repo:a.repositoryName,path:n.fileName,ref:n.branch}),f=(r=o.data.content)!=null?r:"";return po.Buffer.from(f,o.data.encoding)}}var Pg=Object.defineProperty,Ya=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ng{constructor(e){this.repository=e,Ya(this,"_disposables",[]),Ya(this,"_createPRViewProvider"),Ya(this,"_treeView"),Ya(this,"_onDidCreate",new c.EventEmitter),Ya(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var n,i;c.commands.executeCommand("setContext","github:createPullRequest",!1),(n=this._createPRViewProvider)==null||n.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(a=>a.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var n;(n=this._treeView)==null||n.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var n;(n=this._treeView)==null||n.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var n;(n=this._treeView)==null||n.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.defaultCompareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repo))return r;{const n=await e.getOrigin(),i=await e.getMetadata(n.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,r,n){var i;await r.loginAndUpdate(),c.commands.executeCommand("setContext","github:createPullRequest",!0);const a=(i=n?await r.repository.getBranch(n):void 0)!=null?i:r.repository.state.HEAD;if(!this._createPRViewProvider){const o=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(a));this._createPRViewProvider=new gg(e,r,o,a);const f=await r.getOrigin(a);this._treeView=new Rg(this.repository,o.owner,o.base,f.remote.owner,a.name,!!a.upstream,r),this.registerListeners(!n),this._disposables.push(c.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(a)}}var Ag=Object.defineProperty,cp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class dp{constructor(e,r,n,i,a=`${e}:${r}`){this.owner=e,this.name=r,this.description=n,this.remote=i,this.label=a,cp(this,"detail"),cp(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}function Xa(t){return t===void 0||t===0?0:t-1}function _y(t,e){for(let r=0;r<t.length;r++){const n=t[r];for(let i=0;i<n.diffLines.length;i++)if(n.diffLines[i].positionInHunk===e)return n.diffLines[i]}}function nd(t,e){const r=Ui(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.oldLineNumber>e))if(a.oldLineNumber+a.oldLength-1<e)i+=a.newLength-a.oldLength;else return i+=a.newLength-a.oldLength,e+i;n=r.next()}return e+i}function id(t,e){const r=Ui(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.newLineNumber>e))if(a.newLineNumber+a.newLength-1<e)i+=a.oldLength-a.newLength;else return i+=a.oldLength-a.newLength,e+i;n=r.next()}return e+i}function hp(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];let a,o;if(e){let f;for(let S=0;S<i.diffLines.length;S++){const T=i.diffLines[S];T.type===Gr.Delete?(a!==void 0||(a=Xa(T.oldLineNumber)),f=Xa(T.oldLineNumber)):a!==void 0&&f!==void 0&&(r.push(new c.Range(a,0,f,0)),a=void 0,f=void 0)}a!==void 0&&f!==void 0&&(r.push(new c.Range(a,0,f,0)),a=void 0,f=void 0)}else i.newLineNumber&&(a=Xa(i.newLineNumber),o=Xa(i.newLength),r.push(new c.Range(a,0,a+o,0)))}return r}var Ig=Object.defineProperty,ai=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Dg{constructor(e,r,n,i,a){this._reviewManager=e,this._reposManager=r,this._repository=n,this._reviewModel=i,this._sessionState=a,ai(this,"_localToDispose",[]),ai(this,"_onDidChangeComments",new c.EventEmitter),ai(this,"onDidChangeComments",this._onDidChangeComments.event),ai(this,"_commentHandlerId"),ai(this,"_commentController"),ai(this,"_workspaceFileChangeCommentThreads",{}),ai(this,"_reviewSchemeFileChangeCommentThreads",{}),ai(this,"_obsoleteFileChangeCommentThreads",{}),ai(this,"_visibleNormalTextEditors",[]),ai(this,"_pendingCommentThreadAdds",[]),this._commentController=c.comments.createCommentController(`github-review-${r.activePullRequest.number}`,r.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=Oh(),rs(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=c.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this._reposManager.activePullRequest.validateDraftMode(),await this.initializeCommentThreads(),await this.registerListeners()}createOutdatedCommentThread(e,r){const n=r.comments[0].originalCommitId,i=c.Uri.file($.join(`commit~${n.substr(0,8)}`,e)),a=cn(i,e,void 0,n,!0,{base:r.diffSide===Ht.LEFT},this._repository.rootUri),o=new c.Range(new c.Position(r.originalLine-1,0),new c.Position(r.originalLine-1,0));return Wa(a,o,r,this._commentController)}async createWorkspaceCommentThread(e,r,n){let i=n.line;const a=await this._repository.diffWithHEAD(r);a&&(i=nd(a,n.line));const o=new c.Range(new c.Position(i-1,0),new c.Position(i-1,0));return Wa(e,o,n,this._commentController)}createReviewCommentThread(e,r,n){var i;if(!((i=this._reposManager.activePullRequest)==null?void 0:i.mergeBase))throw new Error("Cannot create review comment thread without an active pull request base.");const a=cn(e,r,void 0,this._reposManager.activePullRequest.mergeBase,!1,{base:!0},this._repository.rootUri),o=new c.Range(new c.Position(n.line-1,0),new c.Position(n.line-1,0));return Wa(a,o,n,this._commentController)}async doInitializeCommentThreads(e){const r=be(e,n=>n.path);Object.keys(r).forEach(n=>{const i=r[n],a=i[0];if(a){const o=$.join(this._repository.rootUri.path,a.path).replace(/\\/g,"/"),f=this._repository.rootUri.with({path:o});let S=[],T=[],A=[];const H=i.map(async K=>{K.isOutdated?A.push(this.createOutdatedCommentThread(n,K)):K.diffSide===Ht.RIGHT?S.push(await this.createWorkspaceCommentThread(f,n,K)):T.push(this.createReviewCommentThread(f,n,K))});Promise.all(H),this._workspaceFileChangeCommentThreads[n]=S,this._reviewSchemeFileChangeCommentThreads[n]=T,this._obsoleteFileChangeCommentThreads[n]=A}})}async initializeCommentThreads(){const e=this._reposManager.activePullRequest;if(!(!e||!e.isResolved()))return this.doInitializeCommentThreads(e.reviewThreadsCache)}async registerListeners(){this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads,this._reviewSchemeFileChangeCommentThreads].forEach(r=>{for(const n in r)r[n].forEach(i=>{Kh(i,e),ia(i)})})})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangeReviewThreads(e=>{e.added.forEach(async r=>{const{path:n}=r,i=this._pendingCommentThreadAdds.findIndex(async f=>{const S=this.gitRelativeRootPath(f.uri.path);if(S!==r.path)return!1;const T=await this.getContentDiff(f.uri,S);return id(T,f.range.start.line)+1===r.line});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(f=>new vr(f,a)),this._pendingCommentThreadAdds.splice(i,1);else{const f=$.join(this._repository.rootUri.path,n).replace(/\\/g,"/"),S=this._repository.rootUri.with({path:f});r.isOutdated?a=this.createOutdatedCommentThread(n,r):r.diffSide===Ht.RIGHT?a=await this.createWorkspaceCommentThread(S,n,r):a=this.createReviewCommentThread(S,n,r)}const o=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Ht.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads;o[n]?o[n].push(a):o[n]=[a]}),e.changed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Ht.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];Nu(a,r)}}),e.removed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Ht.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];n[r.path].splice(i,1),a.dispose()}})})),this._localToDispose.push(this._sessionState.onDidChangeCommentsExpandState(e=>{this.updateCommentExpandState(e)}))}updateCommentExpandState(e){if(!this._reposManager.activePullRequest)return;function r(o,f){if(f.size!==0)for(const S of f.keys()){const T=f.get(S),A=o[S];for(const H of A){const K=T.get(H.gitHubThreadId);Nu(H,K,e)}}}const n=new Map,i=new Map,a=new Map;for(const o of this._reposManager.activePullRequest.reviewThreadsCache){let f;o.isOutdated?f=n:o.diffSide===Ht.RIGHT?f=a:f=i,f.has(o.path)||f.set(o.path,new Map),f.get(o.path).set(o.id,o)}r(this._obsoleteFileChangeCommentThreads,n),r(this._reviewSchemeFileChangeCommentThreads,i),r(this._workspaceFileChangeCommentThreads,a)}visibleEditorsEqual(e,r){if(e=e.filter(n=>n.document.uri.scheme!=="comment"),r=r.filter(n=>n.document.uri.scheme!=="comment"),e=Se(e,n=>n.document.uri.toString()),r=Se(r,n=>n.document.uri.toString()),e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!r.find(a=>a.document.uri.toString()===e[n].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;const r=c.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}async provideCommentingRanges(e,r){let n=e.uri.query&&e.uri.query!==""?Fi(e.uri.query):void 0;if(n){const a=this.findMatchedFileChangeForReviewDiffView(this._reviewModel.localFileChanges,e.uri);if(a)return hp(await a.diffHunks(),n.base)}const i=c.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const a=this.gitRelativeRootPath(e.uri.path),o=rd(this._reviewModel.localFileChanges).find(S=>S.fileName===a),f=[];if(o){const S=await o.diffHunks();if(o.status===nt.RENAME&&S.length===0)return[];const T=await this.getContentDiff(e.uri,o.fileName);for(let A=0;A<S.length;A++){const H=S[A],K=nd(T,H.newLineNumber),de=nd(T,H.newLineNumber+H.newLength-1);K>0&&de>0&&f.push(new c.Range(K-1,0,de-1,0))}}return f}}async getContentDiff(e,r){var n;const i=c.window.visibleTextEditors.find(a=>a.document.uri.toString()===e.toString());if(!((n=this._reposManager.activePullRequest)==null?void 0:n.head))throw new Error("Cannot get content diff without an active pull request head.");if(i&&i.document.isDirty){const a=i.document.getText(),f=(await this._repository.getObjectDetails(this._reposManager.activePullRequest.head.sha,r)).object,S=await this._repository.hashObject(a);return await this._repository.diffBlobs(f,S)}else return await this._repository.diffWith(this._reposManager.activePullRequest.head.sha,r)}findMatchedFileChangeForReviewDiffView(e,r){const n=Fi(r.query),i=e.filter(a=>{if(a instanceof Ka||a.fileName!==n.path)return!1;if(a.filePath.scheme!=="review"&&a.sha===n.commit)return!0;const o=a.filePath.query?JSON.parse(a.filePath.query):void 0;if(o&&o.commit===n.commit)return!0;const f=a.parentFilePath.query?JSON.parse(a.parentFilePath.query):void 0;return!!(f&&f.commit===n.commit)});if(i&&i.length)return i[0]}gitRelativeRootPath(e){return $.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}getCommentSide(e){return e.uri.scheme==="review"&&Fi(e.uri.query).base?Ht.LEFT:Ht.RIGHT}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n){const a=e.comments[0];if(a instanceof vr)await this._reposManager.activePullRequest.createCommentReply(r,a._rawComment.graphNodeId,!1);else throw new Error("Cannot reply to temporary comment")}else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e);let f;if(o===Ht.RIGHT){const S=await this.getContentDiff(e.uri,a);f=id(S,e.range.start.line)}else f=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,a,f+1,o)}}catch(a){c.window.showErrorMessage(`Starting review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof on&&o.id===i&&(o.mode=c.CommentMode.Editing),o))}}async openReview(){await this._reviewManager.openDescription(),wn.scrollToReview()}optimisticallyAddComment(e,r,n){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),a=new on(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,ia(e)}optimisticallyEditComment(e,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new on(e,r.body instanceof c.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof vr&&a.commentId===r.commentId?i:a),i.id}async createOrReplyComment(e,r,n,i){var a;if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment without an active pull request.");const o=e.comments.length,f=n?!1:i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,S=this.optimisticallyAddComment(e,r,f);try{if(o){const T=e.comments[0];if(T instanceof vr)await this._reposManager.activePullRequest.createCommentReply(r,T._rawComment.graphNodeId,n);else throw new Error("Cannot reply to temporary comment")}else{const T=this.gitRelativeRootPath(e.uri.path);this._pendingCommentThreadAdds.push(e);const A=this.getCommentSide(e);let H;if(A===Ht.RIGHT){const K=await this.getContentDiff(e.uri,T);H=id(K,e.range.start.line)}else H=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,T,H+1,A,n)}n&&await this._reposManager.activePullRequest.submitReview()}catch(T){((a=T.graphQLErrors)==null?void 0:a.length)&&T.graphQLErrors[0].type==="NOT_FOUND"?c.window.showWarningMessage("The comment that you're replying to was deleted. Refresh to update.","Refresh").then(A=>{A==="Refresh"&&this._reviewManager.updateComments()}):c.window.showErrorMessage(`Creating comment failed: ${T}`),e.comments=e.comments.map(A=>(A instanceof on&&A.id===S&&(A.mode=c.CommentMode.Editing),A))}}async createCommentOnResolve(e,r){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment on resolve without an active pull request.");const n=await this._reposManager.activePullRequest.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.resolveReviewThread(e.gitHubThreadId)}catch(n){c.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.unresolveReviewThread(e.gitHubThreadId)}catch(n){c.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async editComment(e,r){if(r instanceof vr){const n=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof c.MarkdownString?r.body.value:r.body)}catch(i){c.window.showErrorMessage(ke(i)),e.comments=e.comments.map(a=>a instanceof on&&a.id===n?new vr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof c.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");r instanceof vr?await this._reposManager.activePullRequest.deleteReviewComment(r.commentId):e.comments=e.comments.filter(i=>!(i instanceof on&&i.id===r.id)),e.comments.length===0?e.dispose():ia(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update()}catch(n){throw new Error(ke(n))}}async update(){await this._reposManager.activePullRequest.validateDraftMode()}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r):await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)}catch(n){throw new Error(ke(n))}}dispose(){this._commentController&&this._commentController.dispose(),ns(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var Og=Object.defineProperty,Uu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class xg{constructor(){Uu(this,"_localFileChanges"),Uu(this,"_onDidChangeLocalFileChanges",new c.EventEmitter),Uu(this,"onDidChangeLocalFileChanges",this._onDidChangeLocalFileChanges.event),Uu(this,"_obsoleteFileChanges",[])}get hasLocalFileChanges(){return this._localFileChanges&&this._localFileChanges.length>0}get localFileChanges(){var e;return(e=this._localFileChanges)!=null?e:[]}set localFileChanges(e){this._localFileChanges=e,this._onDidChangeLocalFileChanges.fire()}get obsoleteFileChanges(){return this._obsoleteFileChanges}set obsoleteFileChanges(e){this._obsoleteFileChanges=e}clear(){this.obsoleteFileChanges=[],this._localFileChanges=void 0}}var Mg=Object.defineProperty,yr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const pp=class{constructor(t,e,r,n,i,a,o){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=n,this.changesInPrDataProvider=i,this._showPullRequest=a,this._sessionState=o,yr(this,"_localToDispose",[]),yr(this,"_disposables"),yr(this,"_reviewModel",new xg),yr(this,"_lastCommitSha"),yr(this,"_updateMessageShown",!1),yr(this,"_validateStatusInProgress"),yr(this,"_reviewCommentController"),yr(this,"_statusBarItem"),yr(this,"_prNumber"),yr(this,"_previousRepositoryState"),yr(this,"_webviewViewProvider"),yr(this,"_createPullRequestHelper"),yr(this,"_switchingToReviewMode"),yr(this,"justSwitchedToReviewMode",!1),yr(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Ys(this._repository)},this.registerListeners(),this.updateState(!0),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let n;!e||!r?n=!1:n=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const i=n&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,a=Ys(this._repository),o=this._previousRepositoryState.remotes.length===a.length&&this._previousRepositoryState.remotes.every(f=>a.some(S=>f.equals(S)));(!i||!o)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:a},this.updateState(!0))})),this._disposables.push(c.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),Fu.registerProvider(this._disposables,this,this._folderRepoManager)}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=c.window.createStatusBarItem("github.pullrequest.status",c.StatusBarAlignment.Left),this._statusBarItem.name="GitHub Active Pull Request"),this._statusBarItem}get repository(){return this._repository}get reviewModel(){return this._reviewModel}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e,r;const n=this._repository.state.HEAD;if(n){const i=n.upstream?n.upstream.remote:null;if(i&&(await this._repository.fetch(i,(e=this._repository.state.HEAD)==null?void 0:e.name),!this._context.globalState.get(Dc,!1)&&!this._updateMessageShown&&(this._lastCommitSha&&t.head.sha!==this._lastCommitSha||n.behind!==void 0&&n.behind>0))){this._updateMessageShown=!0;const o="Pull",f="Never show again";await c.window.showInformationMessage(`There are updates available for pull request ${t.number}: ${t.title}.`,{},o,f)===o?(((r=this._repository.state.HEAD)==null?void 0:r.name)===n.name&&await this._repository.pull(),this._updateMessageShown=!1):f&&await this._context.globalState.update(Dc,!0)}}}async updateState(t=!1,e=!0){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(P.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async r=>await this.validateStatueAndSetContext(t,e)),this._validateStatusInProgress):(P.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateStatueAndSetContext(t,e),this._validateStatusInProgress)}async validateStatueAndSetContext(t,e){await this.validateState(t,e),await c.commands.executeCommand("setContext","github:stateValidated",!0)}async validateState(t,e){P.appendLine("Review> Validating state...");const r=this._lastCommitSha;if(this._lastCommitSha=void 0,await this._folderRepoManager.updateRepositories(!1),!this._repository.state.HEAD){this.clear(!0);return}const n=this._repository.state.HEAD;let i=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!i){P.appendLine(`Review> no matching pull request metadata found for current branch ${n.name}`);const K=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();K&&(await Mn.associateBranchWithPullRequest(this._repository,K.model,n.name),i=K)}if(!i){P.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${n.name}`),this.clear(!0);return}const a=n.commit!==r&&n.ahead===0&&n.behind===0;if(this._prNumber===i.prNumber&&!a){c.commands.executeCommand("pr.refreshList");return}if(!(n.upstream?n.upstream.remote:null)){P.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}P.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${i.prNumber}`),this.clear(!1),this._prNumber=i.prNumber;const{owner:f,repositoryName:S}=i;P.appendLine("Review> Resolving pull request");const T=await this._folderRepoManager.resolvePullRequest(f,S,i.prNumber);if(!T||!T.isResolved()){this._prNumber=void 0,P.appendLine("Review> This PR is no longer valid");return}const A=c.workspace.getConfiguration(Mu).get(hg,{merged:!0,closed:!1});if(T.isClosed&&!A.closed){this.clear(!0),P.appendLine("Review> This PR is closed");return}if(T.isMerged&&!A.merged){this.clear(!0),P.appendLine("Review> This PR is merged");return}this._folderRepoManager.activePullRequest=T,this._lastCommitSha=T.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(T)),P.appendLine("Review> Fetching pull request data"),this.initializePullRequestData(T),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,T,this._reviewModel,this.justSwitchedToReviewMode),this.justSwitchedToReviewMode=!1,P.appendLine("Review> register comments provider"),await this.registerCommentController();const H=this._context.workspaceState.get(Li);if(this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(T):(this._webviewViewProvider=new mg(this._context.extensionUri,this._folderRepoManager,T),this._context.subscriptions.push(c.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(c.commands.registerCommand("pr.refreshActivePullRequest",K=>{var de;(de=this._webviewViewProvider)==null||de.refresh()}))),this.statusBarItem.text=`$(git-pull-request) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[T]},P.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),c.commands.executeCommand("pr.refreshList"),P.appendLine(`Review> using focus mode = ${H}.`),P.appendLine(`Review> state validation silent = ${t}.`),P.appendLine(`Review> PR show should show = ${this._showPullRequest.shouldShow}.`),(!t||this._showPullRequest.shouldShow)&&H)this._doFocusShow(e);else if(!this._showPullRequest.shouldShow&&H){const K=this._showPullRequest.onChangedShowValue(de=>{P.appendLine(`Review> PR show value changed = ${de}.`),de&&this._doFocusShow(e),K.dispose()});this._localToDispose.push(K)}this._validateStatusInProgress=void 0}openDiff(){if(this._reviewModel.localFileChanges.length){let t;for(const e of this._reviewModel.localFileChanges)if(e.status===nt.MODIFY){t=e;break}t=t!=null?t:this._reviewModel.localFileChanges[0],t.openDiff(this._folderRepoManager)}}_doFocusShow(t){var e;if((e=this._webviewViewProvider)==null||e.show(),t)if(this._reviewModel.localFileChanges.length)this.openDiff();else{const r=this._reviewModel.onDidChangeLocalFileChanges(()=>{r.dispose(),this.openDiff()})}}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const n=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!n||!n.isResolved()){P.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(n),await this.initializePullRequestData(n),await this._reviewCommentController.update(),Promise.resolve(void 0)}async getLocalChangeNodes(t,e){const r=[],n=t.mergeBase||t.base.sha,i=t.head.sha;for(let a=0;a<e.length;a++){const o=e[a],f=$.join(this._repository.rootUri.path,o.fileName).replace(/\\/g,"/"),S=this._repository.rootUri.with({path:f}),T=o.status===nt.DELETE?cn(S,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):S,A=cn(S,o.status===nt.RENAME?o.previousFileName:o.fileName,void 0,o.status===nt.ADD?"":n,!1,{base:!0},this._repository.rootUri),H=new oa(this.changesInPrDataProvider,this._folderRepoManager,t,o,T,A,i);r.push(H)}return r}async initializePullRequestData(t){try{const e=await t.getFileChangesInfo(),r=t.mergeBase||t.base.sha,n=await As(e,this._repository,r);this._reviewModel.localFileChanges=await this.getLocalChangeNodes(t,n),await Promise.all([t.initializeReviewComments(),t.initializeReviewThreadCache(),t.initializePullRequestFileViewState()]);const i=t.comments.filter(f=>!f.position),a=be(i,f=>f.originalCommitId),o=[];for(const f in a){const S=a[f],T=be(S,A=>A.path);for(const A in T){const H=T[A],K=c.Uri.file($.join(`commit~${f.substr(0,8)}`,A)),de=new oa(this.changesInPrDataProvider,this._folderRepoManager,t,{status:nt.MODIFY,fileName:A,blobUrl:void 0},cn(K,A,void 0,H[0].originalCommitId,!0,{base:!1},this._repository.rootUri),cn(K,A,void 0,H[0].originalCommitId,!0,{base:!0},this._repository.rootUri),f,!1,H);o.push(de)}}return this._reviewModel.obsoleteFileChanges=o,Promise.resolve(void 0)}catch(e){P.appendLine(`Review> ${e}`)}}async registerCommentController(){var t;if(((t=this._folderRepoManager.activePullRequest)==null?void 0:t.reviewThreadsCacheReady)&&this._reviewModel.hasLocalFileChanges)await this.doRegisterCommentController();else{const e=this._reviewModel.onDidChangeLocalFileChanges(async()=>{var r;((r=this._folderRepoManager.activePullRequest)==null?void 0:r.reviewThreadsCache)&&this._reviewModel.hasLocalFileChanges&&(e&&e.dispose(),await this.doRegisterCommentController())})}}async doRegisterCommentController(){this._reviewCommentController=new Dg(this,this._folderRepoManager,this._repository,this._reviewModel,this._sessionState),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._folderRepoManager.activePullRequest&&(this._folderRepoManager.activePullRequest.comments=t)}))}async switch(t){var e;P.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(r){P.appendLine(`Review> checkout failed #${JSON.stringify(r)}`),this.switchingToReviewMode=!1,r.message==="User aborted"||(r.gitErrorCode&&(r.gitErrorCode===fr.LocalChangesOverwritten||r.gitErrorCode===fr.DirtyWorkTree)?c.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches"):((e=r.stderr)==null?void 0:e.startsWith("fatal: couldn't find remote ref"))?c.window.showErrorMessage("The remote branch for this pull request has been deleted. The pull request cannot be checked out."):c.window.showErrorMessage(ke(r))),this._folderRepoManager.activePullRequest?this.setStatusForPr(this._folderRepoManager.activePullRequest):(this.statusBarItem.hide(),this.switchingToReviewMode=!1);return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fulfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),P.appendLine(`Review> switch to Pull Request #${t.number} - done`,pp.ID)}finally{this.setStatusForPr(t),await this._repository.status()}}setStatusForPr(t){this.switchingToReviewMode=!1,this.justSwitchedToReviewMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show()}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const n=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),i=await n.getViewerPermission();if(i===Yr.Read||i===Yr.Triage||i===Yr.Unknown){const o=await this._folderRepoManager.tryOfferToFork(n);if(!o)return;r=this._folderRepoManager.getGitHubRemotes().find(f=>f.remoteName===o)}if(!r)return;const a=r;return new Promise(async o=>{const f=c.window.createInputBox();f.value=t.name,f.ignoreFocusOut=!0,f.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const S=async function(T){try{f.busy=!0,await this._reposManager.getBranch(a,T)?f.validationMessage=`Branch ${T} already exists in ${a.owner}/${a.repositoryName}`:f.validationMessage=void 0}catch(A){f.validationMessage=void 0}f.busy=!1};await S(t.name),f.onDidChangeValue(S.bind(this)),f.onDidAccept(async()=>{f.validationMessage=void 0,f.hide();try{await this._repository.push(a.remoteName,`${t.name}:${f.value}`,!0)}catch(A){throw A.gitErrorCode===fr.PushRejected&&(c.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),o(void 0)),A.gitErrorCode===fr.RemoteConnectionError&&(c.window.showWarningMessage(`Could not read from remote repository '${a.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),o(void 0)),A}const T=await this._repository.getBranch(t.name);(!T||!T.upstream)&&o(void 0),o(T)}),f.show()})}async getRemote(t,e,r){if(!t.length){c.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return dp.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let n=!1;const i=t.map(o=>{const f=dp.fromRemote(o);if(r){const{owner:S,name:T}=r;f.picked=f.owner===S&&f.name===T,f.picked&&(n=!0)}return f});!n&&r&&i.unshift(r);const a=await c.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!a)return a}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new Ng(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState(!1,!1);const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await od(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}async openDescription(){const t=this._folderRepoManager.activePullRequest;if(!t)return;const e=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await od(this._context,this._telemetry,t,e,this._folderRepoManager)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){c.workspace.getConfiguration(Tr).get("focusedMode")?(c.commands.executeCommand("setContext",Li,!0),await this._context.workspaceState.update(Li,!0)):(c.commands.executeCommand("setContext",Li,!1),this._context.workspaceState.update(Li,!1))}clear(t){var e;this._updateMessageShown=!1,this._reviewModel.clear(),this._localToDispose.forEach(r=>r.dispose()),(e=this._folderRepoManager.activePullRequest)==null||e.clear(),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),c.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=Fi(t.query);let n=rd(this._reviewModel.localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r);if(n.length){const i=n[0],a=r===i.sha?Gr.Delete:Gr.Add;return(await i.diffHunks()).map(f=>f.diffLines.filter(S=>S.type!==a).map(S=>S.text)).reduce((f,S)=>f.concat(...S),[]).join(`
`)}if(n=rd(this._reviewModel.obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r),n.length){const i=n[0],a=r===i.sha?Gr.Delete:Gr.Add,o=[],f=be(i.comments,S=>String(S.originalPosition));for(const S in f){if(!f[S][0].diffHunks)continue;const T=f[S][0].diffHunks.map(A=>A.diffLines.filter(H=>H.type!==a).map(H=>H.text)).reduce((A,H)=>A.concat(...H),[]);o.push(...T)}return o.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(n=>n.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let xi=pp;yr(xi,"ID","Review");class Fg{constructor(){yr(this,"_shouldShow",!1),yr(this,"_onChangedShowValue",new c.EventEmitter),yr(this,"onChangedShowValue",this._onChangedShowValue.event)}get shouldShow(){return this._shouldShow}set shouldShow(e){const r=this._shouldShow;this._shouldShow=e,r!==this._shouldShow&&this._onChangedShowValue.fire(this._shouldShow)}}var Lg=Object.defineProperty,sd=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ws extends jr{constructor(e,r,n,i){super();this.parent=e,this.label=r,this.iconPath=n,this.pullRequestModel=i,sd(this,"command"),sd(this,"contextValue"),sd(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`,this.accessibilityInformation={label:`Pull request page of pull request number ${i.number}`,role:"button"}}getTreeItem(){return this}}var qg=Object.defineProperty,Ug=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?qg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $g extends Xc{constructor(){super(...arguments);Ug(this,"_prFileChangeContentProviders",{})}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}async readFile(e){const r=Cr(e);if(r&&r.prNumber){const n=this._prFileChangeContentProviders[r.prNumber];if(n){const i=await n(e);return new TextEncoder().encode(i)}}return new TextEncoder().encode("")}}const Gg=new $g;function mp(){return Gg}var Hg=Object.defineProperty,ad=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _s extends jr{constructor(e,r){super();this.parent=e,this.label=r,ad(this,"collapsibleState"),ad(this,"children",[]),ad(this,"pathToChild",new Map),this.collapsibleState=c.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof _s&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof _s&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(n=>{n instanceof _s?(n.sort(),e.push(n)):r.push(n)}),e.sort((n,i)=>n.label<i.label?-1:1),r.sort((n,i)=>n.label<i.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const n=e[0],i=e.slice(1);let a=this.pathToChild.get(n);a||(a=new _s(this,n),this.pathToChild.set(n,a),this.children.push(a)),a.addPathRecc(i,r)}getTreeItem(){return this}}var Vg=Object.defineProperty,la=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const fp=class extends jr{constructor(t,e,r,n){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=n,la(this,"_fileChanges"),la(this,"_commentController"),la(this,"_disposables",[]),la(this,"_inMemPRContentProvider"),la(this,"_command")}get command(){return this._command}set command(t){this._command=t}async getChildren(){P.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,fp.ID),this.pullRequestModel.onDidInvalidate(()=>this.refresh(this));try{this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(n=>n.dispose()),this.childrenDisposables=[]);const t=new ws(this,"Description",new c.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];await this.pullRequestModel.initializeReviewThreadCache(),await this.pullRequestModel.initializePullRequestFileViewState(),this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=mp().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this._commentController||await this.resolvePRCommentController(),await this.pullRequestModel.validateDraftMode();const e=[t];if(c.workspace.getConfiguration(Tr).get(aa)==="tree"){const n=new _s(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?e.push(...n.children):e.push(n)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return P.appendLine(t),[]}}async resolvePRCommentController(){await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentingRangeProvider(this.pullRequestModel.number,this)),this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this.pullRequestModel,this._folderReposManager)),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(e=>{e instanceof qu&&e.comments.forEach(r=>r.isDraft=t)})}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getFileChangesInfo(),e=this.pullRequestModel.mergeBase;return e?(await As(t,this._folderReposManager.repository,e)).map(n=>{const i=this.pullRequestModel.head.sha,a=n.status===nt.RENAME?n.previousFileName:n.fileName;return n instanceof qi?new Ka(this,this.pullRequestModel,n.status,n.fileName,n.previousFileName,n.blobUrl,Vn(c.Uri.file(Bn(this._folderReposManager.repository.rootUri,n.fileName)),this.pullRequestModel,n.baseCommit,i,n.fileName,!1,n.status),Vn(c.Uri.file(Bn(this._folderReposManager.repository.rootUri,a)),this.pullRequestModel,n.baseCommit,i,n.fileName,!0,n.status)):(console.log(c.Uri.file(Bn(this._folderReposManager.repository.rootUri,n.fileName))),new qu(this._folderReposManager,this,this.pullRequestModel,n,n.previousFileName,Vn(c.Uri.file(Bn(this._folderReposManager.repository.rootUri,n.fileName)),this.pullRequestModel,n.baseCommit,i,n.fileName,!1,n.status),Vn(c.Uri.file(Bn(this._folderReposManager.repository.rootUri,a)),this.pullRequestModel,n.baseCommit,i,n.fileName,!0,n.status),n.isPartial,n.patch))}):[]}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:n,isDraft:i,html_url:a}=this.pullRequestModel,{login:o}=n,f=t?"\u2713 ":"",S=t?"Current Branch * ":"",T=r.toString(),A=`${f}#${T}: ${i?"[DRAFT] ":""}${e}`,H=`${S}${e} by @${o}`,K=`by @${o}`;return{label:A,id:`${this.parent instanceof jr?this.parent.label:""}${a}`,tooltip:H,description:K,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new c.ThemeIcon("github"),accessibilityInformation:{label:`${i?"Draft ":""}Pull request number ${T}: ${e} by ${o}`}}}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=Cr(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const n=(await this.getFileChanges()).find(i=>i.fileName===r.fileName);return!n||n instanceof Ka?void 0:hp(await n.diffHunks(),r.isBase)}}async provideDocumentContent(t){const e=Cr(t);if(!e)return"";const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)return P.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===nt.ADD||!e.isBase&&r.status===nt.DELETE)return"";if(r instanceof Ka||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(n){return P.appendLine(`PR> Fetching file content failed: ${n}`),c.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&r.blobUrl&&c.commands.executeCommand("vscode.open",c.Uri.parse(r.blobUrl))}),""}if(r instanceof qu)if(r.status===nt.ADD||r.status===nt.DELETE)if(e.isBase){const i=[],a=await r.diffHunks();for(let o=0;o<a.length;o++)for(let f=0;f<a[o].diffLines.length;f++){const S=a[o].diffLines[f];S.type===Gr.Add||(S.type===Gr.Delete?i.push(S.text):S.type===Gr.Control||i.push(S.text))}return i.join(`
`)}else{const i=[],a=await r.diffHunks();for(let o=0;o<a.length;o++)for(let f=0;f<a[o].diffLines.length;f++){const S=a[o].diffLines[f];S.type===Gr.Add?i.push(S.text):S.type===Gr.Delete||S.type===Gr.Control||i.push(S.text)}return i.join(`
`)}else{const i=r.status===nt.RENAME?r.previousFileName:r.fileName,a=c.Uri.joinPath(this._folderReposManager.repository.rootUri,i),o=await this._folderReposManager.repository.show(e.baseCommit,a.fsPath);return e.isBase?o:il(o,r.patch)}return""}dispose(){super.dispose(),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose()),this._disposables=[]}};let ca=fp;la(ca,"ID","PRNode");const $u=new c.EventEmitter,gp=$u.event;function Ja(t,e){if(e)return e instanceof ca?e.pullRequestModel:e;if(!t.activePullRequest)throw c.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function od(t,e,r,n,i){const a=Ja(i,r);n==null||n.reveal(n,{select:!0,focus:!0}),await wn.createOrShow(t.extensionUri,i,a),e.sendTelemetryEvent("pr.openDescription")}async function Es(t,e,r){var n;if(t.length===1)return t[0];const i=t.map(a=>({label:e(a),itemValue:a}));return(n=await c.window.showQuickPick(i,r))==null?void 0:n.itemValue}async function Za(t,e){t instanceof ca||t instanceof ws?c.commands.executeCommand("vscode.open",c.Uri.parse(t.pullRequestModel.html_url)):c.commands.executeCommand("vscode.open",c.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function Bg(t,e,r,n,i,a,o){t.subscriptions.push(c.commands.registerCommand("pr.openPullRequestOnGitHub",async T=>{if(T)Za(T,i);else{const A=r.folderManagers.map(H=>H.activePullRequest).filter(H=>!!H);if(A.length>=1){const H=await Es(A,K=>K.html_url);H&&Za(H,i)}}})),t.subscriptions.push(c.commands.registerCommand("pr.openAllDiffs",async()=>{const T=r.folderManagers.filter(de=>de.activePullRequest).map(de=>({activePr:de.activePullRequest,folderManager:de})),A=T.length>=1?await Es(T,de=>de.activePr.html_url):T[0];if(!A)return;const{folderManager:H}=A,K=xi.getReviewManagerForFolderManager(n,H);!K||K.reviewModel.localFileChanges.forEach(de=>de.openDiff(H,{preview:!1}))})),t.subscriptions.push(c.commands.registerCommand("review.suggestDiff",async T=>{try{const A=await Es(r.folderManagers,$e=>$.basename($e.repository.rootUri.fsPath));if(!A||!A.activePullRequest)return;const{indexChanges:H,workingTreeChanges:K}=A.repository.state;if(!H.length)if(K.length)if(await c.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await c.commands.executeCommand("git.stageAll");else return;else{c.window.showInformationMessage("There are no changes to suggest.");return}const de=await A.repository.diff(!0);let fe=`Suggested edit:
`;T&&T.inputBox&&T.inputBox.value&&(fe=`${T.inputBox.value}
`,T.inputBox.value="");const we=`${fe}\`\`\`diff
${de}
\`\`\``;await A.activePullRequest.createIssueComment(we),await c.commands.executeCommand("git.unstageAll");const Ne=$.join(A.repository.rootUri.fsPath,".git",`${A.activePullRequest.number}.diff`),Ae=new TextEncoder,Ue=c.Uri.file(Ne);await c.workspace.fs.writeFile(Ue,Ae.encode(de)),await A.repository.apply(Ne,!0),await c.workspace.fs.delete(Ue)}catch(A){const H=`${A}${A.stderr?`
${A.stderr}`:""}`;P.appendLine(`Applying patch failed: ${H}`),c.window.showErrorMessage(`Applying patch failed: ${ke(A)}`)}})),t.subscriptions.push(c.commands.registerCommand("pr.openFileOnGitHub",async T=>{if(!(T instanceof Ka&&!await c.window.showInformationMessage(`${T.fileName} can't be opened locally. Do you want to open it on GitHub?`,"Open"))&&T.blobUrl)return c.commands.executeCommand("vscode.open",c.Uri.parse(T.blobUrl))})),t.subscriptions.push(c.commands.registerCommand("pr.copyCommitHash",T=>{c.env.clipboard.writeText(T.sha)})),t.subscriptions.push(c.commands.registerCommand("pr.openOriginalFile",async T=>{const A=r.getManagerForIssueModel(T.pullRequest);if(A){const H=await pa(T.parentFilePath,A.repository);c.commands.executeCommand("vscode.open",H||T.parentFilePath)}})),t.subscriptions.push(c.commands.registerCommand("pr.openModifiedFile",T=>{c.commands.executeCommand("vscode.open",T.filePath)})),t.subscriptions.push(c.commands.registerCommand("pr.openDiffView",T=>{const A=r.getManagerForIssueModel(T.pullRequest);!A||T.openDiff(A)})),t.subscriptions.push(c.commands.registerCommand("pr.deleteLocalBranch",async T=>{const A=r.getManagerForIssueModel(T.pullRequestModel);if(!A)return;const H=Ja(A,T),K="delete branch (even if not merged)";let de=null;try{await A.deleteLocalPullRequest(H)}catch(fe){if(fe.gitErrorCode===fr.BranchNotFullyMerged){if(await c.window.showErrorMessage(`The branch '${H.localBranchName}' is not fully merged, are you sure you want to delete it? `,K)!==K)return;try{await A.deleteLocalPullRequest(H,!0)}catch(Ne){de=Ne}}else de=fe}de?(i.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await c.window.showErrorMessage(`Deleting local pull request branch failed: ${de}`)):(i.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),c.commands.executeCommand("pr.refreshList"))}));function f(T){if(T){const A=c.Uri.file(T).toString();for(const H of n)if(H.repository.rootUri.toString()===A)return H}return Es(n,A=>$.basename(A.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function S(T){return!!(T==null?void 0:T.rootUri)}t.subscriptions.push(c.commands.registerCommand("pr.create",async T=>{var A,H;S(T)?(A=await f(T.rootUri.fsPath))==null||A.createPullRequest():(H=await f(T==null?void 0:T.repoPath))==null||H.createPullRequest(T==null?void 0:T.compareBranch)})),t.subscriptions.push(c.commands.registerCommand("pr.pick",async T=>{let A;T instanceof ca||T instanceof ws?A=T.pullRequestModel:A=T;const H=T instanceof Di;return i.sendTelemetryEvent("pr.checkout",{fromDescription:H.toString()}),c.window.withProgress({location:c.ProgressLocation.SourceControl,title:`Switching to Pull Request #${A.number}`},async()=>{var K;await((K=xi.getReviewManagerForRepository(n,A.githubRepository))==null?void 0:K.switch(A))})})),t.subscriptions.push(c.commands.registerCommand("pr.exit",async T=>{let A;T instanceof ca||T instanceof ws?A=T.pullRequestModel:A=T;const H=T instanceof Di;return i.sendTelemetryEvent("pr.exit",{fromDescription:H.toString()}),c.window.withProgress({location:c.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async()=>{const K=await A.githubRepository.getDefaultBranch(),de=r.getManagerForIssueModel(A);de&&de.checkoutDefaultBranch(K)})})),t.subscriptions.push(c.commands.registerCommand("pr.merge",async T=>{const A=r.getManagerForIssueModel(T==null?void 0:T.pullRequestModel);if(!A)return;const H=Ja(A,T);return H.base&&H.head&&!H.base.repositoryCloneUrl.equals(H.head.repositoryCloneUrl)&&Qc()?Za(H,i):c.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async fe=>{let we;if(fe==="Yes")try{return we=await A.mergePullRequest(H),we}catch(Ne){return c.window.showErrorMessage(`Unable to merge pull request. ${ke(Ne)}`),we}})})),t.subscriptions.push(c.commands.registerCommand("pr.readyForReview",async T=>{const A=r.getManagerForIssueModel(T==null?void 0:T.pullRequestModel);if(!A)return;const H=Ja(A,T);return c.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async K=>{let de;if(K==="Yes")try{return de=await H.setReadyForReview(),c.commands.executeCommand("pr.refreshList"),de}catch(fe){return c.window.showErrorMessage(`Unable to mark pull request as ready to review. ${ke(fe)}`),de}})})),t.subscriptions.push(c.commands.registerCommand("pr.close",async(T,A)=>{let H;if(T)H=T instanceof Di?T:T.pullRequestModel;else{const de=r.folderManagers.map(fe=>fe.activePullRequest).filter(fe=>!!fe);H=await Es(de,fe=>`${fe.number}: ${fe.title}`,{placeHolder:"Pull request to close"})}if(!H)return;const K=H;return c.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async de=>{if(de==="Yes")try{let fe;A&&(fe=await K.createIssueComment(A));const we=await K.close();return c.commands.executeCommand("pr.refreshList"),$u.fire(we),fe}catch(fe){c.window.showErrorMessage(`Unable to close pull request. ${ke(fe)}`),$u.fire()}$u.fire()})})),t.subscriptions.push(c.commands.registerCommand("pr.openDescription",async T=>{let A;if(T)A=T instanceof ws?T.pullRequestModel:T;else{const de=r.folderManagers.map(fe=>fe.activePullRequest).filter(fe=>!!fe);de.length>=1&&(A=await Es(de,fe=>fe.title))}if(!A){P.appendLine("No pull request found.");return}const H=r.getManagerForIssueModel(A);if(!H)return;let K;if(T instanceof ws)K=T;else{const de=xi.getReviewManagerForFolderManager(n,H);if(!de)return;K=de.changesInPrDataProvider.getDescriptionNode(H)}await od(t,i,A,K,H)})),t.subscriptions.push(c.commands.registerCommand("pr.refreshDescription",async()=>{wn.currentPanel&&wn.refresh()})),t.subscriptions.push(c.commands.registerCommand("pr.openDescriptionToTheSide",async T=>{const A=r.getManagerForIssueModel(T.pullRequestModel);if(!A)return;const H=T.pullRequestModel,K=Ja(A,H);T.reveal(T,{select:!0,focus:!0}),wn.createOrShow(t.extensionUri,A,K,!0),i.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(c.commands.registerCommand("pr.signin",async()=>{await r.authenticate()})),t.subscriptions.push(c.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const T of r.folderManagers)await T.deleteLocalBranchesNRemotes()})),t.subscriptions.push(c.commands.registerCommand("pr.signinAndRefreshList",async()=>{await r.authenticate()&&c.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(c.commands.registerCommand("pr.configureRemotes",async()=>c.commands.executeCommand("workbench.action.openSettings",`@ext:${jn} remotes`))),t.subscriptions.push(c.commands.registerCommand("pr.startReview",async T=>{i.sendTelemetryEvent("pr.startReview");const A=sr(T.thread);A&&A.startReview(T.thread,T.text)})),t.subscriptions.push(c.commands.registerCommand("pr.openReview",async T=>{i.sendTelemetryEvent("pr.openReview");const A=sr(T.thread);A&&await A.openReview(T.thread)})),t.subscriptions.push(c.commands.registerCommand("pr.resolveReviewThread",async T=>{i.sendTelemetryEvent("pr.resolveReviewThread");const A=sr(T.thread);A&&await A.resolveReviewThread(T.thread.value,T.text)})),t.subscriptions.push(c.commands.registerCommand("pr.unresolveReviewThread",async T=>{i.sendTelemetryEvent("pr.unresolveReviewThread");const A=sr(T.thread);A&&await A.unresolveReviewThread(T.thread.value,T.text)})),t.subscriptions.push(c.commands.registerCommand("pr.createComment",async T=>{i.sendTelemetryEvent("pr.createComment");const A=sr(T.thread);A&&A.createOrReplyComment(T.thread,T.text,!1)})),t.subscriptions.push(c.commands.registerCommand("pr.createSingleComment",async T=>{i.sendTelemetryEvent("pr.createSingleComment");const A=sr(T.thread);A&&A.createOrReplyComment(T.thread,T.text,!0)})),t.subscriptions.push(c.commands.registerCommand("pr.editComment",async T=>{i.sendTelemetryEvent("pr.editComment"),T.startEdit()})),t.subscriptions.push(c.commands.registerCommand("pr.editQuery",T=>(i.sendTelemetryEvent("pr.editQuery"),T.editQuery()))),t.subscriptions.push(c.commands.registerCommand("pr.cancelEditComment",async T=>{i.sendTelemetryEvent("pr.cancelEditComment"),T.cancelEdit()})),t.subscriptions.push(c.commands.registerCommand("pr.saveComment",async T=>{i.sendTelemetryEvent("pr.saveComment");const A=sr(T.parent);A&&await A.editComment(T.parent,T)})),t.subscriptions.push(c.commands.registerCommand("pr.deleteComment",async T=>{if(i.sendTelemetryEvent("pr.deleteComment"),await c.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const H=sr(T.parent);H&&await H.deleteComment(T.parent,T)}})),t.subscriptions.push(c.commands.registerCommand("review.openFile",T=>{var A;const H=T instanceof oa?T.openFileCommand():up(T);c.commands.executeCommand(H.command,...(A=H.arguments)!=null?A:[])})),t.subscriptions.push(c.commands.registerCommand("pr.refreshChanges",T=>{n.forEach(A=>{A.updateComments(),wn.refresh(),A.changesInPrDataProvider.refresh()})})),t.subscriptions.push(c.commands.registerCommand("pr.setFileListLayoutAsTree",T=>{c.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(c.commands.registerCommand("pr.setFileListLayoutAsFlat",T=>{c.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(c.commands.registerCommand("pr.refreshPullRequest",T=>{var A;const H=r.getManagerForIssueModel(T.pullRequestModel);H&&T.pullRequestModel.equals(H==null?void 0:H.activePullRequest)&&((A=xi.getReviewManagerForFolderManager(n,H))==null||A.updateComments()),wn.refresh(),o.refresh(T)})),t.subscriptions.push(c.commands.registerCommand("pr.markFileAsViewed",async T=>{try{await T.pullRequest.markFileAsViewed(T.fileName)}catch(A){c.window.showErrorMessage(`Marked file as viewed failed: ${A}`)}})),t.subscriptions.push(c.commands.registerCommand("pr.unmarkFileAsViewed",async T=>{try{await T.pullRequest.unmarkFileAsViewed(T.fileName)}catch(A){c.window.showErrorMessage(`Marked file as not viewed failed: ${A}`)}})),t.subscriptions.push(c.commands.registerCommand("pr.expandAllComments",()=>{e.commentsExpandState=!0})),t.subscriptions.push(c.commands.registerCommand("pr.collapseAllComments",()=>{e.commentsExpandState=!1})),t.subscriptions.push(c.commands.registerCommand("pr.checkoutByNumber",async()=>{var T;const A=[];r.folderManagers.forEach(we=>{A.push(...we.gitHubRepositories.map(Ne=>({manager:we,repo:Ne})))});const H=await Es(A,we=>`${we.repo.remote.owner}/${we.repo.remote.repositoryName}`,{placeHolder:"Which GitHub repository do you want to checkout the pull request from?"});if(!H)return;const K=/^#?(\d*)$/,de=await c.window.showInputBox({ignoreFocusOut:!0,prompt:"Enter the a pull request number",validateInput:we=>{const Ne=we.match(K);if(!Ne||Ne.length!==2||Number.isNaN(Number(Ne[1])))return"Value must be a number"}});if(de===void 0||de==="#")return;const fe=await H.manager.fetchById(H.repo,Number(de.match(K)[1]));if(fe)return(T=xi.getReviewManagerForFolderManager(n,H.manager))==null?void 0:T.switch(fe)}))}var jg=Object.defineProperty,ud=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class zg{constructor(e){ud(this,"_commentsExpandState"),ud(this,"_onDidChangeCommentsExpandState",new c.EventEmitter),ud(this,"onDidChangeCommentsExpandState",this._onDidChangeCommentsExpandState.event);var r;const n=(r=c.workspace.getConfiguration(Tr))==null?void 0:r.get(Pu);this._commentsExpandState=n===Hc,e.subscriptions.push(c.workspace.onDidChangeConfiguration(i=>{var a;if(i.affectsConfiguration(`${Tr}.${Pu}`)){const o=(a=c.workspace.getConfiguration(Tr))==null?void 0:a.get(Pu);this.commentsExpandState=o===Hc}}))}get commentsExpandState(){return this._commentsExpandState}set commentsExpandState(e){this._commentsExpandState=e,this._onDidChangeCommentsExpandState.fire(this._commentsExpandState)}}var da=it(9035),Qg=Object.defineProperty,vp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Wg{constructor(e){this.baseReporter=e,vp(this,"sharedProperties",{})}sendTelemetryEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryEvent(e,{...this.sharedProperties,...r},n)}sendTelemetryErrorEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const n={};for(const[i,a]of r)n[i]=a;this.sendTelemetryEvent(e,n)}async dispose(){var e;return(e=this.baseReporter)==null?void 0:e.dispose()}}function Kg(){switch(c.env.uriScheme){case"vscode":return da.aU.Public;case"vscode-insiders":return da.aU.Insiders;case"vscode-exploration":return da.aU.Internal;case"code-oss":return da.aU.Team;default:return da.aU.Public}}class Yg{constructor(){vp(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function Xg(t,e){const r=t.extension.id,n=t.extension.packageJSON.name,i=t.extension.packageJSON.version,a=Kg();return n==="vscode-pull-request-github"?(0,da.X7)(r,i,a,e,t.globalState):new Yg}var Jg=Object.defineProperty,eo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Jg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ey extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Sy extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class ky extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Ty="No Milestone";class yp{constructor(e,r,n,i){this._folderManagers=e,this._credentialStore=r,this._telemetry=n,this._sessionState=i,eo(this,"_subs"),eo(this,"_onDidChangeState",new c.EventEmitter),eo(this,"onDidChangeState",this._onDidChangeState.event),eo(this,"_state",_n.Initializing),this._subs=[],c.commands.executeCommand("setContext",Bh,this._state),this._subs.push(...e.map(a=>a.onDidLoadRepositories(o=>this.state=o)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){this._subs.push(e.onDidLoadRepositories(n=>this.state=n));const r=c.workspace.workspaceFolders;if(r){const n=r.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(n>-1){const i=this._folderManagers.slice(n,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,n),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(n=>n.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const n=this._folderManagers[r];this._folderManagers.splice(r),n.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-$.extname(e.remote.url).length);for(const n of this._folderManagers)if(n.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-$.extname(i.remote.url).length)).includes(r))return n}getManagerForFile(e){if(e.scheme==="untitled")return this._folderManagers[0];for(const r of this._folderManagers){const n=r.repository.rootUri.path,i=e.path.substring(n.length>1?n.length+1:n.length);if(nr(c.Uri.joinPath(r.repository.rootUri,i).path,e.path)===0)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(c.commands.executeCommand("setContext",Bh,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=_n.Initializing}async authenticate(){const e=await this._credentialStore.login(Ot.github);let r;return Ou()&&(r=await this._credentialStore.login(Ot["github-enterprise"])),!!e||!!r}dispose(){this._subs.forEach(e=>e.dispose())}}eo(yp,"ID","RepositoriesManager");function Ry(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var Zg=Object.defineProperty,oi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ld{constructor(e){oi(this,"_onDidOpenRepository",new c.EventEmitter),oi(this,"onDidOpenRepository",this._onDidOpenRepository.event),oi(this,"_onDidCloseRepository",new c.EventEmitter),oi(this,"onDidCloseRepository",this._onDidCloseRepository.event),oi(this,"_onDidChangeState",new c.EventEmitter),oi(this,"onDidChangeState",this._onDidChangeState.event),oi(this,"_onDidPublish",new c.EventEmitter),oi(this,"onDidPublish",this._onDidPublish.event),oi(this,"_gitAPI"),oi(this,"_disposables");const r=e.exports;try{this._gitAPI=r.getAPI(1)}catch(n){throw c.window.showErrorMessage("Activating the Pull Requests and Issues extension failed. Please make sure you have git installed."),n}this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(this._gitAPI.onDidOpenRepository(n=>this._onDidOpenRepository.fire(n))),this._disposables.push(this._gitAPI.onDidChangeState(n=>this._onDidChangeState.fire(n))),this._disposables.push(this._gitAPI.onDidPublish(n=>this._onDidPublish.fire(n)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static async createProvider(){const e=c.extensions.getExtension("vscode.git");if(e)return await e.activate(),new ld(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var ev=Object.defineProperty,br=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ev(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class tv{constructor(e){this._liveShareAPI=e,br(this,"_onDidOpenRepository",new c.EventEmitter),br(this,"onDidOpenRepository",this._onDidOpenRepository.event),br(this,"_onDidCloseRepository",new c.EventEmitter),br(this,"onDidCloseRepository",this._onDidCloseRepository.event),br(this,"_openRepositories",[]),br(this,"_sharedServiceProxy"),br(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(ma)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(c.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){c.workspace.workspaceFolders&&c.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const n=new iv(e,this._sharedServiceProxy),i=new rv,a=new Proxy(n,i);await a.initialize(),this.openRepository(a)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class rv{constructor(){}get(e,r){return r in e?e[r]:function(...n){return e.proxy.request(Ns,[r,e.workspaceFolder.uri.toString(),...n])}}}class nv{constructor(e){br(this,"HEAD"),br(this,"refs"),br(this,"remotes"),br(this,"submodules",[]),br(this,"rebaseCommit"),br(this,"mergeChanges",[]),br(this,"indexChanges",[]),br(this,"workingTreeChanges",[]),br(this,"_onDidChange",new c.EventEmitter),br(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class iv{constructor(e,r){this.workspaceFolder=e,this.proxy=r,br(this,"rootUri"),br(this,"state")}async initialize(){const e=await this.proxy.request(Ns,[fa,this.workspaceFolder.uri.toString()]);this.state=new nv(e),this.rootUri=c.Uri.parse(e.rootUri),this.proxy.onNotify(ho,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var sv=Object.defineProperty,bp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class av{constructor(e,r){this._liveShareAPI=e,this._api=r,bp(this,"_sharedService"),bp(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(ma)||void 0,this._sharedService&&this._sharedService.onRequest(Ns,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],n=e[1],i=c.Uri.parse(n),a=this._liveShareAPI.convertSharedUriToLocal(i),o=this._api.getGitProvider(a);if(!o)return;const f=o.repositories.filter(S=>S.rootUri.toString()===a.toString())[0];if(f){const S=e.slice(2);if(r===fa)return this._disposables.push(f.state.onDidChange(T=>{this._sharedService.notify(ho,{HEAD:f.state.HEAD,remotes:f.state.remotes,refs:f.state.refs})})),{HEAD:f.state.HEAD,remotes:f.state.remotes,refs:f.state.refs,rootUri:i.toString()};if(r==="show"){const T=S[1],A=i.with({path:T}),H=this._liveShareAPI.convertSharedUriToLocal(A);return S[1]=H.fsPath,f[r](...S)}if(f[r])return f[r](...S)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var ov=Object.defineProperty,to=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ov(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function uv(){const t=c.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class lv{constructor(e){this._api=e,to(this,"_liveShareAPI"),to(this,"_host"),to(this,"_guest"),to(this,"_localDisposables"),to(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await uv()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new av(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new tv(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function cv(t){return new lv(t)}async function dv(t,e){const r=await ld.createProvider();if(r)return e.registerGitProvider(r),r}var hv=Object.defineProperty,wp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class pv{constructor(e){this.pullRequestManager=e,wp(this,"onNotifiedEmitter",new c.EventEmitter),wp(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(n=>{this.notifySuggestedAccounts(n)})})}async requestAsync(e,r,n){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const a=new Map;for(const o of this.pullRequestManager.folderManagers){const f=o.getAllAssignableUsers();if(!!f)for(const S of f)a.has(S.login)||a.set(S.login,S)}a.size>0&&this.notifySuggestedAccounts(Array.from(a.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(n){}r&&e.findIndex(n=>n.login===r)!==-1&&this.notifySuggestedUsers(e.filter(n=>n.email).map(n=>({id:n.login,displayName:n.name?n.name:n.login,email:n.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const n=r.hub.currentUser;if(n)return n.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var mv=Object.defineProperty,_p=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?mv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class fv{constructor(){_p(this,"_extensionsDisposable"),_p(this,"_subscriptions",[]),this._extensionsDisposable=c.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),c.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||c.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=c.extensions.getExtension("eamodio.gitlens"))!=null?e:c.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let n=0;const i=setInterval(async()=>{r.isActive?(clearInterval(i),this.register(await r.exports)):(n++,n>60&&clearInterval(i))},1e3)}}}var gv=Object.defineProperty,Ss=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ep{constructor(e,r,n,i,a){this.issueModel=e,this.manager=r,this.stateManager=n,this.shouldPromptForBranch=a,Ss(this,"repoChangeDisposable"),Ss(this,"_branchName"),Ss(this,"user"),Ss(this,"repo"),Ss(this,"_repoDefaults"),Ss(this,"_onDidChangeCurrentIssueState",new c.EventEmitter),Ss(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let n=0;n<this.stateManager.gitAPI.repositories.length;n++){const i=this.stateManager.gitAPI.repositories[n];for(let a=0;a<i.state.remotes.length;a++){const o=i.state.remotes[a];if(o.name===(e==null?void 0:e.remoteName)&&((r=o.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return c.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(n=>n.login===r))&&(this.manager.gitHubRepositories.find(n=>n.remote.owner===this.issueModel.remote.owner&&n.remote.repositoryName===this.issueModel.remote.repositoryName)&&await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){c.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return r.message!=="User aborted"&&c.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async getBranchTitle(){var e;return(e=c.workspace.getConfiguration(gr).get(wh))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,n=e.match(r);if(n&&n.length>0&&n[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";c.window.showErrorMessage(e,r).then(n=>{n===r&&c.commands.executeCommand("workbench.action.openSettings",`${gr}.${wh}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":c.workspace.getConfiguration(gr).get(_h);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);this._branchName=this.shouldPromptForBranch?void 0:r.branch;const n=await Eu(await this.getBranchTitle(),this.issue,void 0,await this.getUser());if(e==="on"&&this._branchName!==n&&(await this.branchExists(this._branchName)||(this._branchName=n)),this._branchName||(this._branchName=await c.window.showInputBox({value:n,prompt:"Enter the label for the new branch."})),!this._branchName)return!1;const i=this.validateBranchName(this._branchName);return i?(this.showBranchNameError(i),!1):(r.branch=this._branchName,await this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)?!0:(this._branchName=void 0,!1))}async getCommitMessage(){const e=c.workspace.getConfiguration(gr).get(uf);if(typeof e=="string")return Eu(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}var vv=Object.defineProperty,ro=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const qn="newIssue",yv="NewIssue.md",ha="Assignees:",no="Labels:";function Gu(t){const e=JSON.parse(t.query);if(e.origin)return c.Uri.parse(e.origin)}class bv{constructor(){ro(this,"content"),ro(this,"createTime",0),ro(this,"modifiedTime",0),ro(this,"_onDidChangeFile",new c.EventEmitter),ro(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const n=this.onDidChangeFile(i=>{i.length===0&&i[0].type===c.FileChangeType.Deleted&&n.dispose()});return n}stat(e){var r,n;return{type:c.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(n=(r=this.content)==null?void 0:r.length)!=null?n:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,n={create:!1,overwrite:!1}){const i=this.content;this.content=r,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:c.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:c.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:c.FileChangeType.Deleted}])}rename(e,r,n){}}class wv{constructor(e){this.manager=e}async provideCompletionItems(e,r,n,i){if(!e.lineAt(r.line).text.startsWith(no))return[];const a=Gu(e.uri);if(!a)return[];const o=this.manager.getManagerForFile(a);if(!o)return[];const f=await o.getPullRequestDefaults();return(await o.getLabels(void 0,f)).map(T=>{const A=new c.CompletionItem(T.name,c.CompletionItemKind.Color);return A.documentation=`#${T.color}`,A.commitCharacters=[" ",","],A})}}class Sp extends c.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,c.CompletionItemKind.Issue);this.issue=e}}class _v{constructor(e,r,n){this.stateManager=e,this.repositoriesManager=r,this.context=n}async provideCompletionItems(e,r,n,i){var a,o,f,S;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&i.triggerKind===c.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new c.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#")&&e.uri.scheme!=="comment"&&i.triggerKind===c.CompletionTriggerKind.TriggerCharacter)return[];if(i.triggerKind===c.CompletionTriggerKind.TriggerCharacter&&c.workspace.getConfiguration(gr).get("ignoreCompletionTrigger",[]).find(Ne=>Ne===e.languageId))return[];if(e.languageId!=="scminput"&&!await qc(e,r))return[];let T=new c.Range(r,r);r.character-1>=0&&e.getText(new c.Range(r.translate(0,-1),r))==="#"&&(T=new c.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const A=new Map,H=new Date;let K,de;if(e.languageId==="scminput")de=Uc(e.uri);else if(e.uri.scheme==="comment"&&((a=c.workspace.workspaceFolders)==null?void 0:a.length))for(const Ne of c.window.visibleTextEditors){const Ae=c.workspace.workspaceFolders[0].uri.with({path:Ne.document.uri.path}),Ue=c.workspace.getWorkspaceFolder(Ae);if(Ue){de=Ue.uri;break}}else de=e.uri.scheme===qn?(o=Gu(e.uri))!=null?o:e.uri:e.languageId==="scminput"?Uc(e.uri):e.uri;if(!de)return[];let fe;try{fe=this.repositoriesManager.getManagerForFile(de),K=await(fe==null?void 0:fe.getPullRequestDefaults())}catch(Ne){}const we=this.stateManager.getIssueCollection((f=fe==null?void 0:fe.repository.rootUri)!=null?f:de);for(const Ne of we){const Ae=(S=await Ne[1])!=null?S:[];if(Ae.length!==0)if(Ae[0]instanceof Dr){let Ue=0;for(const $e of Ae)A.set(Js($e),await this.completionItemFromIssue(K,$e,H,T,e,Ue++))}else for(let Ue=0;Ue<Ae.length;Ue++){const $e=Ae[Ue];for(const Ge of $e.issues)A.set(Js(Ge),await this.completionItemFromIssue(K,Ge,H,T,e,Ue,$e.milestone))}}return[...A.values()]}async completionItemFromIssue(e,r,n,i,a,o,f){var S;const T=new Sp(r);if(a.languageId==="markdown")T.insertText=`[${Js(r,e)}](${r.html_url})`;else{const H=c.workspace.getConfiguration(gr).get("issueCompletionFormatScm");a.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof H=="string"?T.insertText=await Eu(H,r,e):T.insertText=`${Js(r,e)}`}T.documentation=r.body,T.range=i,T.detail=f?f.title:(S=r.milestone)==null?void 0:S.title;let A=(n.getTime()-new Date(r.updatedAt).getTime()).toString();return A=new Array(20-A.length).join("0")+A,T.sortText=`${o} ${A}`,T.filterText=`${T.detail} # ${r.number} ${r.title} ${T.documentation}`,T}async resolveCompletionItem(e,r){return e instanceof Sp&&(e.documentation=await Fc(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}class Ev{constructor(e,r,n,i){this.manager=e,this.stateManager=r,this.context=n,this.telemetry=i}async provideHover(e,r,n){var i;if(!await Ih(e,r))return;let a=e.getWordRangeAtPosition(r,za);if(a&&a.start.character>0){a=new c.Range(new c.Position(a.start.line,a.start.character-1),a.end);const f=e.getText(a).match(za),S=xc(f),T=(i=this.manager.getManagerForFile(e.uri))!=null?i:this.manager.folderManagers[0];if(!T)return;if(S&&f&&S.issueNumber<=this.stateManager.maxIssueNumber(T.repository.rootUri))return this.createHover(T,f[0],S,a)}else return}async createHover(e,r,n,i){const a=await lf(this.stateManager,e,r,n);if(!!a)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new c.Hover(await Fc(a,this.context,this.manager,n.commentNumber),i)}}var Sv=Object.defineProperty,kp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ks extends c.TreeItem{constructor(e,r,n){super(r,n);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class kv{constructor(e,r,n){this.stateManager=e,this.manager=r,this.context=n,kp(this,"_onDidChangeTreeData",new c.EventEmitter),kp(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),n.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let n;return e instanceof ks?n=e:e instanceof ra?n=new ks(e.repository.rootUri,$.basename(e.repository.rootUri.fsPath),c.TreeItemCollapsibleState.Expanded):e instanceof Dr?(n=new ks(void 0,`${e.number}: ${e.title}`,c.TreeItemCollapsibleState.None),n.iconPath=e.isOpen?new c.ThemeIcon("issues",new c.ThemeColor("issues.open")):new c.ThemeIcon("issue-closed",new c.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(n.label=`\u2713 ${n.label}`,n.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?n.contextValue="continueissue":n.contextValue="issue",rf(e)&&(n.contextValue="link"+n.contextValue)):n=new ks(e.uri,e.milestone.title,e.issues.length>0?c.TreeItemCollapsibleState.Expanded:c.TreeItemCollapsibleState.None),n}getChildren(e){return e===void 0&&this.manager.state!==_n.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof Dr&&(e.tooltip=await Fc(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===_n.NeedsAuthentication||!this.manager.folderManagers.length?[]:[new ks(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const n=Array.from(r.keys()),i=n[0];return n.map(a=>{const o=new ks(e.repository.rootUri,a);return o.contextValue="query",o.collapsibleState=a===i?c.TreeItemCollapsibleState.Expanded:c.TreeItemCollapsibleState.Collapsed,o})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof ra?this.getQueryItems(e):e instanceof ks?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof Dr?[]:e.issues.map(n=>{const i=Object.assign(n);return i.uri=e.uri,i})}}var Tv=Object.defineProperty,Rv=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Cv{constructor(e){Rv(this,"expression"),e.subscriptions.push(c.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=c.workspace.getConfiguration(gr).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,n,i){if(this.expression===void 0||n.only&&n.only!==c.CodeActionKind.QuickFix)return[];const a=[];let o=r.start.line;do{const f=e.lineAt(o).text,S=f.substring(0,af);if(!S.match(za)){const A=S.search(this.expression);if(A>=0){const H=new c.CodeAction("Create GitHub Issue",c.CodeActionKind.QuickFix),K=S.substring(A).search(/\s/),de=A+(K>0?K:S.match(this.expression)[0].length);H.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:o,line:f,insertIndex:de,range:r}]},a.push(H);break}}o++}while(r.end.line>=o);return a}}var Pv=Object.defineProperty,ln=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Nv=["Recovery"],Av="currentIssue",cd="issues",Tp="ignoreMilestones",dd=[{label:"My Issues",query:"default"}];class Cy extends null{constructor(){super(...arguments);ln(this,"uri")}}class Iv{constructor(e,r,n){this.gitAPI=e,this.manager=r,this.context=n,ln(this,"resolvedIssues",new Map),ln(this,"_singleRepoStates",new Map),ln(this,"_onRefreshCacheNeeded",new c.EventEmitter),ln(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),ln(this,"_onDidChangeIssueData",new c.EventEmitter),ln(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),ln(this,"_queries",[]),ln(this,"_onDidChangeCurrentIssue",new c.EventEmitter),ln(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),ln(this,"initializePromise"),ln(this,"statusBarItem"),ln(this,"isSettingIssue",!1),r.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return n||(n=new Map,n)}getOrCreateSingleRepoState(e,r){let n=this._singleRepoStates.get(e.path);return n||(r||(r=this.manager.getManagerForFile(e)),n={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,n),n)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===_n.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===_n.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){async function e(n,i){var a;const o=n.getOrCreateSingleRepoState(i.rootUri),f=o.lastHead,S=o.lastBranch,T=i.state.HEAD?i.state.HEAD.commit:void 0;(i.state.HEAD?i.state.HEAD.commit:void 0)!==f&&await n.setIssueData(o.folderManager);const A=(a=i.state.HEAD)==null?void 0:a.name;(f!==T||S!==A)&&(!o.currentIssue||A!==o.currentIssue.branchName)&&(A?o.folderManager&&await n.setCurrentIssueFromBranch(o,A):await n.setCurrentIssue(o,void 0)),o.lastHead=i.state.HEAD?i.state.HEAD.commit:void 0,o.lastBranch=i.state.HEAD?i.state.HEAD.name:void 0}function r(n,i){n.context.subscriptions.push(i.state.onDidChange(async()=>{e(n,i)}))}this.context.subscriptions.push(this.gitAPI.onDidOpenRepository(n=>{e(this,n),r(this,n)})),this.gitAPI.repositories.forEach(n=>{r(this,n)})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=c.workspace.getConfiguration(gr).get(Xs,dd),this._queries.length===0&&(this._queries=dd),this.context.subscriptions.push(c.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${gr}.${Xs}`)?(this._queries=c.workspace.getConfiguration(gr).get(Xs,dd),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${gr}.${Tp}`)&&this._onRefreshCacheNeeded.fire()})),this.registerRepositoryChangeEvent(),await this.setAllIssueData(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const n=this.getOrCreateSingleRepoState(r.repository.rootUri,r);n.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,n);const i=(e=r.repository.state.HEAD)==null?void 0:e.name;!n.currentIssue&&i&&await this.setCurrentIssueFromBranch(n,i)}}cleanIssueState(){const e=this.context.workspaceState.get(cd),r=e?JSON.parse(e):{issues:[],branches:[]},n=new Date().valueOf()-30*864e5;for(const i in r.issues)r.issues[i].stateModifiedTime<n&&(r.branches&&r.branches[i]&&delete r.branches[i],delete r.issues[i])}async getUsers(e){var r;await this.initializePromise;const n=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),i=new Map;for(const a in n)n[a].forEach(o=>{i.set(o.login,o)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(e){var r;return(r=this.manager.credentialStore.getCurrentUser(e))==null?void 0:r.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,n;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let a,o;for(const f of this._queries){let S;if(f.query===of)S=this.setMilestones(e);else{if(!a)try{a=await e.getPullRequestDefaults()}catch(T){}if(!o){const T=Ys(e.repository).filter(A=>A.authProviderId===Ot["github-enterprise"]);o=await this.getCurrentUser(T.length?Ot["github-enterprise"]:Ot.github)}S=this.setIssues(e,await Eu(f.query,void 0,a,o))}i.issueCollection.set(f.label,S)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,i.lastBranch=(n=e.repository.state.HEAD)==null?void 0:n.name}setIssues(e,r){return new Promise(async n=>{const i=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),n(i.items.map(a=>{const o=a;return o.uri=e.repository.rootUri,o}))})}async setCurrentIssueFromBranch(e,r){if(c.workspace.getConfiguration(gr).get(_h)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(o){return}if(r===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const a=this.getSavedState();for(const o in a.branches)if(o===r){const f=await e.folderManager.resolveIssue(a.branches[o].owner,a.branches[o].repositoryName,a.branches[o].number);f&&await this.setCurrentIssue(e,new Ep(f,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const n=new Date,i=c.workspace.getConfiguration(gr).get(Tp,[]),a=await e.getMilestones({fetchNextPage:!1},i.indexOf(jh)<0);let o;const f=new Map,S=[];for(let T=0;T<a.items.length;T++){const A=a.items[T];A.uri=e.repository.rootUri;const H=a.items[T].milestone;if(A.issues&&A.issues.length<=0||i.indexOf(H.title)>=0)continue;S.push(A);let K=H.dueOn?new Date(H.dueOn):void 0;K||(K=new Date(this.removeDateExcludeStrings(H.title)),isNaN(K.getTime())&&(K=new Date(H.createdAt))),K<n&&(o===void 0||K>o)&&(o=K),f.set(H.id?H.id:H.title,K)}S.sort((T,A)=>{const H=f.get(T.milestone.id?T.milestone.id:T.milestone.title),K=f.get(A.milestone.id?A.milestone.id:A.milestone.title);return o&&H>=o&&K>=o?H<=K?-1:1:H>=K?-1:1}),this._onDidChangeIssueData.fire(),r(S)})}removeDateExcludeStrings(e){return Nv.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,n;return(n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?n:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof ra){const n=this._singleRepoStates.get(e.repository.rootUri.path);if(!n)return;e=n}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(Av,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(n){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=c.window.createStatusBarItem("github.issues.status",c.StatusBarAlignment.Left,0),this.statusBarItem.name="GitHub Active Issue");const n=this.statusBarItem;n.text=`$(issues) Issue ${e.map(i=>Js(i.issue,i.repoDefaults)).join(", ")}`,n.tooltip=e.map(i=>i.issue.title).join(", "),n.command="issue.statusBar",n.show()}getSavedState(){const e=this.context.workspaceState.get(cd);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}async setSavedIssueState(e,r){const n=this.getSavedState();return n.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(n.branches||(n.branches=Object.create(null)),n.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(cd,JSON.stringify(n))}}class Dv{constructor(e,r,n){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,n,i){var a,o,f;if(e.languageId!=="scminput"&&e.uri.scheme!==qn&&r.character>0&&i.triggerKind===c.CompletionTriggerKind.Invoke&&e.getText(new c.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(e.uri.scheme===qn&&i.triggerKind===c.CompletionTriggerKind.Invoke&&e.getText(new c.Range(r.with(void 0,0),r.with(void 0,ha.length)))!==ha)return[];if(i.triggerKind===c.CompletionTriggerKind.TriggerCharacter&&c.workspace.getConfiguration(gr).get("ignoreUserCompletionTrigger",[]).find(K=>K===e.languageId))return[];if(e.languageId!=="scminput"&&!await qc(e,r))return[];let S=new c.Range(r,r);r.character-1>=0&&e.getText(new c.Range(r.translate(0,-1),r))==="@"&&(S=new c.Range(r.translate(0,-1),r));const T=e.uri.scheme===qn?(a=Gu(e.uri))!=null?a:e.uri:e.languageId==="scminput"?Uc(e.uri):e.uri;if(!T)return[];const A=(f=(o=this.manager.getManagerForFile(T))==null?void 0:o.repository.rootUri)!=null?f:T,H=[];return(await this.stateManager.getUserMap(A)).forEach(K=>{const de=new df({label:K.login,description:K.name},c.CompletionItemKind.User);de.insertText=`@${K.login}`,de.login=K.login,de.uri=A,de.range=S,de.detail=K.name,de.filterText=`@ ${K.login} ${K.name}`,e.uri.scheme===qn&&(de.commitCharacters=[" ",","]),H.push(de)}),H}async resolveCompletionItem(e,r){const n=this.manager.getManagerForFile(e.uri);if(!n)return e;const i=await n.getPullRequestDefaults(),a=await n.resolveUser(i.owner,i.repo,e.login);return a&&(e.documentation=Mc(i,a),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}const Ov=["abstract","access","alias","async","augments","author","borrows","callback","class","classdesc","constant","constructs","copyright","default","deprecated","description","enum","event","example","exports","external","host","file","fires","function","generator","global","hideconstructor","ignore","implements","inheritdoc","inner","instance","interface","kind","lends","license","listens","member","memberof","mixes","mixin","module","name","namespace","override","package","param","private","property","protected","public","readonly","requires","returns","see","since","static","summary","this","throws","exception","todo","tutorial","type","typedef","variation","version","yields","yield","link"];class xv{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,n){if(!await Ih(e,r))return;let i=e.getWordRangeAtPosition(r,Oc);if(i&&i.start.character>0){i=new c.Range(new c.Position(i.start.line,i.start.character),i.end);const o=e.getText(i).match(Oc);if(o){const f=o[1];return(e.languageId==="javascript"||e.languageId==="typescript")&&Ov.indexOf(f)>=0?void 0:this.createHover(e.uri,f,i)}}else return}async createHover(e,r,n){try{const i=this.manager.getManagerForFile(e);if(!i)return;const a=await i.getPullRequestDefaults(),o=await i.resolveUser(a.owner,a.repo,r);return o&&o.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new c.Hover(Mc(a,o),n)):void 0}catch(i){return}}}var Mv=Object.defineProperty,hd=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Fv="issueCompletions.enabled",Lv="userCompletions.enabled",Rp="issues.creatingFromFile";class qv{constructor(e,r,n,i,a){this.gitAPI=e,this.manager=r,this.reviewManagers=n,this.context=i,this.telemetry=a,hd(this,"_stateManager"),hd(this,"createIssueInfo"),hd(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new Iv(e,this.manager,this.context)}async initialize(){this.context.subscriptions.push(c.workspace.registerFileSystemProvider(qn,new bv)),this.registerCompletionProviders(),this.context.subscriptions.push(c.languages.registerCompletionItemProvider({scheme:qn},new wv(this.manager)," ",",")),this.context.subscriptions.push(c.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new kv(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(c.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.copyGithubPermalink",e=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink(e instanceof c.Uri?e:void 0)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(c.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(c.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(c.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(c.commands.registerCommand("issue.createIssueFromFile",async()=>{this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),await c.commands.executeCommand("setContext",Rp,!0),await this.createIssueFromFile(),await c.commands.executeCommand("setContext",Rp,!1)},this)),this.context.subscriptions.push(c.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(c.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(c.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(c.commands.registerCommand("issue.goToLinkedCode",async e=>nf(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(c.languages.registerHoverProvider("*",new Ev(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(c.languages.registerHoverProvider("*",new xv(this.manager,this.telemetry))),this.context.subscriptions.push(c.languages.registerCodeActionsProvider("*",new Cv(this.context),{providedCodeActionKinds:[c.CodeActionKind.QuickFix]}))})}dispose(){}registerCompletionProviders(){const e=[{provider:_v,trigger:"#",disposable:void 0,configuration:Fv},{provider:Dv,trigger:"@",disposable:void 0,configuration:Lv}];for(const r of e)c.workspace.getConfiguration(gr).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=c.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(c.workspace.onDidChangeConfiguration(r=>{for(const n of e)if(r.affectsConfiguration(`${gr}.${n.configuration}`)){const i=c.workspace.getConfiguration(gr).get(n.configuration,!0);!i&&n.disposable?(n.disposable.dispose(),n.disposable=void 0):i&&!n.disposable&&this.context.subscriptions.push(n.disposable=c.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));break}}))}async createIssue(){var e,r;let n=(e=c.window.activeTextEditor)==null?void 0:e.document.uri;if(n||(n=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),n)return this.makeNewIssueFile(n)}async createIssueFromFile(){var e,r,n,i;let a;if(!c.window.activeTextEditor||c.window.activeTextEditor.document.uri.scheme!==qn)return;a=c.window.activeTextEditor.document.getText();const o=a.indexOf(`\r
\r
`),f=a.indexOf(`

`);let S;if(o<0&&f<0)return;o<0?S=f:f<0?S=o:S=Math.min(o,f);const T=a.substring(0,S);let A;if(a=a.substring(S+2).trim(),a.startsWith(ha)){const fe=a.split(/\r\n|\n/,1);fe.length===1&&(A=fe[0].substring(ha.length).split(",").map(we=>(we=we.trim(),we.startsWith("@")&&(we=we.substring(1)),we)),a=a.substring(fe[0].length).trim())}let H;if(a.startsWith(no)){const fe=a.split(/\r\n|\n/,1);fe.length===1&&(H=fe[0].substring(no.length).split(",").map(we=>we.trim()).filter(we=>we),a=a.substring(fe[0].length).trim())}const K=a;if(!T||!K)return;const de=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,T,K,A,H,(n=this.createIssueInfo)==null?void 0:n.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,Gu(c.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,de&&await c.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=c.workspace.getConfiguration(gr),n=r.inspect(Xs);let i;if(n==null?void 0:n.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const o=r.get(Xs);(n==null?void 0:n.defaultValue)&&JSON.stringify(n==null?void 0:n.defaultValue)===JSON.stringify(o)&&r.update(Xs,n.defaultValue,c.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await c.commands.executeCommand(i);const a=c.window.activeTextEditor;if(a){const f=a.document.getText().search(e.labelAsString);if(f>=0){const S=a.document.positionAt(f);a.revealRange(new c.Range(S,S)),a.selection=new c.Selection(S,S)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await c.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),c.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof Dr)return c.env.openExternal(c.Uri.parse(e.html_url))}async doStartWorking(e,r,n){let i=e,a=r.githubRepository,o=r.remote;if(!i){if(i=await this.chooseRepo("Choose which repository you want to work on this isssue in."),!i)return;a=await i.getOrigin(),o=a.remote}const f=await i.findUpstreamForItem({githubRepository:a,remote:o});f.needsFork&&await i.tryOfferToFork(a)===void 0||await this._stateManager.setCurrentIssue(i,new Ep(r,i,this._stateManager,f.remote,n))}async startWorking(e){e instanceof Dr&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof Dr&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;let n=this.manager.getManagerForIssueModel(e);!n&&(n=await this.chooseRepo("Choose which repository you want to stop working on this issue in."),!n)||e instanceof Dr&&((r=this._stateManager.currentIssue(n.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(n,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,n=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(S){}const a=`$(primitive-square) Stop working on #${e.issue.number}`,o=e.branchName&&i?[r,n,a]:[r,n,a];switch(await c.window.showQuickPick(o,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case n:{const S=xi.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(S)return Ef(e.manager,S,this._stateManager);break}case a:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),n=await c.window.showQuickPick(r);if(n)return this.statusBarActions(n.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof Dr)return c.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof Dr)return c.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await c.env.clipboard.readText())}async createTodoIssueBody(e,r){if(r||(e==null?void 0:e.document.isUntitled))return r;let n="";if(e){const i=zc(this.gitAPI,e.document.uri);(i==null?void 0:i.state.workingTreeChanges.find(o=>o.uri.toString()===e.document.uri.toString()))&&(n=`\`\`\`
${e.line}
\`\`\`

`)}return n+=(await Lc(this.gitAPI,e)).permalink,n}async createTodoIssue(e,r){let n,i,a,o,f,S;if(!e&&c.window.activeTextEditor)n=c.window.activeTextEditor.document,S=n.getText(c.window.activeTextEditor.selection);else if(e)n=e.document,a=e.insertIndex,o=e.lineNumber,i=e.line.substring(a,e.line.length).trim(),S=n.getText(e.range.isEmpty?n.lineAt(e.range.start.line).range:e.range);else return;const T=S.match(Oc);T&&T.length===2&&(await this._stateManager.getUserMap(n.uri)).has(T[1])&&(f=[T[1]]);let A;const H=await this.createTodoIssueBody(e,r),K=c.window.createInputBox();K.value=i!=null?i:"",K.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",K.title="Create Issue",K.buttons=[{iconPath:new c.ThemeIcon("edit"),tooltip:"Edit Description"}],K.onDidAccept(async()=>{A=K.value,A&&(K.busy=!0,await this.doCreateIssue(n,e,A,H,f,void 0,o,a),K.busy=!1),K.hide()}),K.onDidTriggerButton(async()=>{A=K.value,K.busy=!0,this.createIssueInfo={document:n,newIssue:e,lineNumber:o,insertIndex:a},this.makeNewIssueFile(n.uri,A,H,f),K.busy=!1,K.hide()}),K.show()}async makeNewIssueFile(e,r,n,i){const a=`?{"origin":"${e.toString()}"}`,o=c.Uri.parse(`${qn}:/${yv}${a}`);if(c.window.visibleTextEditors.filter(we=>we.document.uri.scheme===qn).length>0)return;await c.workspace.fs.delete(o);const f=`${ha} ${i&&i.length>0?i.map(we=>"@"+we).join(", ")+" ":""}`,S=`${no} `,T=`${r!=null?r:"Issue Title"}

${f}
${S}

${n!=null?n:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await c.workspace.fs.writeFile(o,this.stringToUint8Array(T));const A=c.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new c.ThemeColor("issues.newIssueDecoration")}}),H=c.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new c.ThemeColor("issues.newIssueDecoration")}}),K=c.window.onDidChangeActiveTextEditor(we=>{if((we==null?void 0:we.document.uri.scheme)===qn){const Ne=we.document.lineAt(2);Ne.text.startsWith(ha)&&we.setDecorations(A,[new c.Range(new c.Position(2,0),new c.Position(2,Ne.text.length))]);const Ae=we.document.lineAt(3);Ae.text.startsWith(no)&&we.setDecorations(H,[new c.Range(new c.Position(3,0),new c.Position(3,Ae.text.length))])}}),de=await c.window.showTextDocument(o),fe=c.workspace.onDidCloseTextDocument(we=>{we===de.document&&(K.dispose(),fe.dispose())})}async verifyLabels(e,r){var n;if(!r.labels)return!0;const i=(await e.getLabels(void 0,r)).map(f=>f.name),a=[],o=[];if((n=r.labels)==null||n.forEach(f=>{let S=typeof f=="string"?f:f.name;!S||(i.includes(S)?o.push(S):a.push(S))}),a.length>0){const f="Yes",S="No";switch(await c.window.showInformationMessage(`The following labels don't exist in this repository: ${a.join(", ")}. 
Do you want to create these labels?`,{modal:!0},f,S)){case f:return!0;case S:return r.labels=o,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const i of this.manager.folderManagers)try{const a=await i.getPullRequestDefaults();r.push({label:`${a.owner}/${a.repo}`,repo:i})}catch(a){}if(r.length===0)return;if(r.length===1)return r[0].repo;const n=await c.window.showQuickPick(r,{placeHolder:e});return n==null?void 0:n.repo}async doCreateIssue(e,r,n,i,a,o,f,S,T){let A,H;if(e?H=this.manager.getManagerForFile(e.uri):T&&(H=this.manager.getManagerForFile(T)),H||(H=await this.chooseRepo("Choose where to create the issue.")),!H)return!1;try{A=await H.getPullRequestDefaults()}catch(we){return c.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const K=i||(r==null?void 0:r.document.isUntitled)?i:(await Lc(this.gitAPI,r)).permalink,de={owner:A.owner,repo:A.repo,title:n,body:K,assignees:a,labels:o};if(!await this.verifyLabels(H,de))return!1;const fe=await H.createIssue(de);if(fe){if(e!==void 0&&S!==void 0&&f!==void 0){const we=new c.WorkspaceEdit,Ne=c.workspace.getConfiguration(gr).get("createInsertFormat","number")==="number"?`#${fe.number}`:fe.html_url;we.insert(e.uri,new c.Position(f,S),` ${Ne}`),await c.workspace.applyEdit(we)}else{const we="Copy URL",Ne="Open Issue";c.window.showInformationMessage("Issue created",we,Ne).then(async Ae=>{switch(Ae){case we:await c.env.clipboard.writeText(fe.html_url);break;case Ne:await c.env.openExternal(c.Uri.parse(fe.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(e){const r=await Lc(this.gitAPI,void 0,e);return r.error&&c.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${r.error}`),r}async getContextualizedPermalink(e,r){let n;try{n=await c.env.asExternalUri(e)}catch(f){return r}const i=n.scheme==="https"&&/^(vscode|github)\./.test(n.authority)?n.authority:void 0;if(!i)return r;const a=c.Uri.parse(r),o=/^(github)\./.test(n.authority)?a.path:`/github${a.path}`;return a.with({authority:i,path:o}).toString()}async copyPermalink(e){const r=await this.getPermalinkWithError(e);if(r.permalink)return c.env.clipboard.writeText(r.originalFile?await this.getContextualizedPermalink(r.originalFile,r.permalink):r.permalink)}getMarkdownLinkText(){if(!c.window.activeTextEditor)return;let e=c.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new c.Range(e.start,new c.Position(e.start.line+1,0)));const r=c.window.activeTextEditor.document.getText(e);if(r)return r;if(e=c.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return c.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e.permalink&&r)return c.env.clipboard.writeText(`[${r.trim()}](${e.permalink})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return c.env.openExternal(c.Uri.parse(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink))}}var Uv=Object.defineProperty,$v=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Gv{constructor(){$v(this,"_disposables"),this._disposables=[],this._disposables.push(c.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==Oi)return;const n=Ft(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status),color:this.color(n.status)};const i=Cr(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status),color:this.color(i.status)}}color(e){let r;switch(e){case nt.MODIFY:r="gitDecoration.modifiedResourceForeground";break;case nt.ADD:r="gitDecoration.addedResourceForeground";break;case nt.DELETE:r="gitDecoration.deletedResourceForeground";break;case nt.RENAME:r="gitDecoration.renamedResourceForeground";break;case nt.UNKNOWN:r=void 0;break;case nt.UNMERGED:r="gitDecoration.conflictingResourceForeground";break}return r?new c.ThemeColor(r):void 0}letter(e){switch(e){case nt.MODIFY:return"M";case nt.ADD:return"A";case nt.DELETE:return"D";case nt.RENAME:return"R";case nt.UNKNOWN:return"U";case nt.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var Hv=Object.defineProperty,Hu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Vv extends jr{constructor(e,r,n,i,a){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.commit=i,this.isCurrent=a,Hu(this,"sha"),Hu(this,"collapsibleState"),Hu(this,"iconPath"),Hu(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=c.TreeItemCollapsibleState.Collapsed;let o;try{i.author&&i.author.avatar_url&&(o=c.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(f){}this.iconPath=o,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){var e;const n=((e=await this.pullRequest.getCommitChangedFiles(this.commit))!=null?e:[]).map(i=>{const a=i.filename,o=c.Uri.parse($.posix.join(`commit~${this.commit.sha.substr(0,8)}`,a)),f=new oa(this,this.pullRequestManager,this.pullRequest,{status:ya(i.status),fileName:a,blobUrl:void 0},cn(o,a,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),cn(o,a,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),this.commit.sha,this.isCurrent);return f.useViewChangesCommand(),f});return Promise.resolve(n)}}var Bv=Object.defineProperty,Vu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class jv extends jr{constructor(e,r,n){super();Vu(this,"label","Commits"),Vu(this,"collapsibleState"),Vu(this,"_folderRepoManager"),Vu(this,"_pr"),this.parent=e,this._pr=n,this._folderRepoManager=r,this.collapsibleState=c.TreeItemCollapsibleState.Collapsed,this.childrenDisposables=[],this.childrenDisposables.push(this._pr.onDidChangeReviewThreads(()=>this.refresh(this))),this.childrenDisposables.push(this._pr.onDidChangeComments(()=>this.refresh(this)))}getTreeItem(){return this}async getChildren(){try{const e=await this._pr.getCommits(),r=e.map((n,i)=>new Vv(this,this._folderRepoManager,this._pr,n,i===e.length-1));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var zv=Object.defineProperty,pd=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qv extends jr{constructor(e,r,n){super();this.parent=e,this._reviewModel=r,pd(this,"label","Files"),pd(this,"collapsibleState"),pd(this,"directories",[]),this.collapsibleState=c.TreeItemCollapsibleState.Expanded,this.childrenDisposables=[],this.childrenDisposables.push(this._reviewModel.onDidChangeLocalFileChanges(()=>this.refresh(this))),this.childrenDisposables.push(n.onDidChangeReviewThreads(()=>this.refresh(this))),this.childrenDisposables.push(n.onDidChangeComments(()=>this.refresh(this)))}getTreeItem(){return this}async getChildren(){if(this._reviewModel.localFileChanges.length===0)return new Promise(i=>{const a=this._reviewModel.onDidChangeLocalFileChanges(()=>{i([]),a.dispose()})});let e;const r=c.workspace.getConfiguration("githubPullRequests").get("fileListLayout"),n=new _s(this,"");return this._reviewModel.localFileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?this.directories=n.children:this.directories=[n],r==="tree"?e=this.directories:e=this._reviewModel.localFileChanges,Promise.resolve(e)}}var Wv=Object.defineProperty,Bu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Wv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Kv extends ws{constructor(e,r,n,i){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=n,this._reviewModel=i,Bu(this,"_filesCategoryNode"),Bu(this,"_commitsCategoryNode"),Bu(this,"collapsibleState",c.TreeItemCollapsibleState.Expanded),Bu(this,"_disposables",[]),this.getTreeItem(),this._disposables.push(c.window.onDidChangeActiveTextEditor(a=>{const o=a==null?void 0:a.document.uri.toString();this.revealActiveEditorInTree(o)})),this._disposables.push(this.parent.view.onDidChangeVisibility(a=>{var o;const f=(o=c.window.activeTextEditor)==null?void 0:o.document.uri.toString();this.revealActiveEditorInTree(f)})),this._disposables.push(r.onDidInvalidate(()=>{this.refresh()}))}revealActiveEditorInTree(e){if(this.parent.view.visible&&e){const r=this._reviewModel.localFileChanges.find(n=>n.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new Qv(this.parent,this._reviewModel,this._pullRequest),this._commitsCategoryNode=new jv(this.parent,this._pullRequestManager,this._pullRequest)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this.label=this._pullRequest.title,this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var Yv=Object.defineProperty,io=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Yv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Cp extends c.Disposable{constructor(e){super(()=>this.dispose());this._context=e,io(this,"_onDidChangeTreeData",new c.EventEmitter),io(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),io(this,"_disposables",[]),io(this,"_pullRequestManagerMap",new Map),io(this,"_view"),this._view=c.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(c.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${Tr}.${aa}`)){this._onDidChangeTreeData.fire();const n=c.workspace.getConfiguration(`${Tr}`).get(aa);await c.commands.executeCommand("setContext","fileListLayout:flat",n==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(e){this._onDidChangeTreeData.fire(e)}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,n,i){if(this._pullRequestManagerMap.has(e)){const o=this._pullRequestManagerMap.get(e);if(o&&o.pullRequestModel===r)return}const a=new Kv(this,r,e,n);this._pullRequestManagerMap.set(e,a),this.updateViewTitle(),await c.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),i&&this.reveal(a)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await c.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){try{await this._view.reveal(e,r)}catch(n){P.appendLine(n,"PullRequestChangesTreeDataProvider")}}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const n of this._pullRequestManagerMap.values())r.push(n);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof oa&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}var Xv=Object.defineProperty,Mi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const md="queries";var Ts;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoMatchingRemotes=5]="NoMatchingRemotes",t[t.ConfigureRemotes=6]="ConfigureRemotes",t[t.Initializing=7]="Initializing"})(Ts||(Ts={}));class Ji extends jr{constructor(e,r,n){super();switch(Mi(this,"collapsibleState"),Mi(this,"iconPath"),Mi(this,"type"),Mi(this,"command"),this.parent=e,this.type=r,this.collapsibleState=c.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No remotes match the current setting.";break;case 6:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 7:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class fd extends jr{constructor(e,r,n,i,a,o){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=n,this._type=i,this._categoryQuery=o,Mi(this,"collapsibleState"),Mi(this,"prs"),Mi(this,"fetchNextPage",!1),Mi(this,"repositoryPageInformation",new Map),Mi(this,"contextValue"),this.prs=[],this.collapsibleState=this._type===cr.All?c.TreeItemCollapsibleState.Expanded:c.TreeItemCollapsibleState.Collapsed,i){case cr.All:this.label="All Open";break;case cr.Query:this.label=a;break;case cr.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}this._categoryQuery&&(this.contextValue="query")}async editQuery(){const e=c.workspace.getConfiguration(Mu),r=e.inspect(md);let n;if(r==null?void 0:r.workspaceValue)n="workbench.action.openWorkspaceSettingsFile";else{const a=e.get(md);(r==null?void 0:r.defaultValue)&&JSON.stringify(r==null?void 0:r.defaultValue)===JSON.stringify(a)&&e.update(md,r.defaultValue,c.ConfigurationTarget.Global),n="workbench.action.openSettingsJson"}await c.commands.executeCommand(n);const i=c.window.activeTextEditor;if(i){const o=i.document.getText().search(this.label);if(o>=0){const f=i.document.positionAt(o);i.revealRange(new c.Range(f,f)),i.selection=new c.Selection(f,f)}}}async getChildren(){this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(i=>i.dispose()),this.childrenDisposables=[]);let e=!1,r=!1,n=!1;if(this._type===cr.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){c.window.showErrorMessage(`Fetching local pull requests failed: ${ke(i)}`),n=i instanceof Su}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,r=i.hasUnsearchedRepositories}catch(i){c.window.showErrorMessage(`Fetching pull requests failed: ${ke(i)}`),n=i instanceof Su}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,r=i.hasUnsearchedRepositories,this._type){case cr.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case cr.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){c.window.showErrorMessage(`Fetching pull requests failed: ${ke(i)}`),n=i instanceof Su}if(this.prs&&this.prs.length){const i=this.prs.map(a=>new ca(this,this._folderRepoManager,a,this._type===cr.LocalPullRequest));return e?i.push(new Ji(this,1,this)):r&&i.push(new Ji(this,2,this)),this.childrenDisposables=i,i}else{const i=n?3:0,a=[new Ji(this,i)];return this.childrenDisposables=a,a}}getTreeItem(){return this}}var Jv=Object.defineProperty,Pp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Jv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Np="queries";class so extends jr{constructor(e,r,n,i){super();this.folderManager=n,this.telemetry=i,Pp(this,"collapsibleState"),Pp(this,"iconPath"),this.parent=e,this.collapsibleState=c.TreeItemCollapsibleState.Expanded,this.label=$.basename(r.fsPath)}static getQueries(e){return c.workspace.getConfiguration(Tr,e.repository.rootUri).get(Np)||[]}getTreeItem(){return this}async getChildren(){return so.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,n){const i=so.getQueries(e).map(a=>new fd(n,e,r,cr.Query,a.label,a.query));return[new fd(n,e,r,cr.LocalPullRequest),...i,new fd(n,e,r,cr.All)]}}var Zv=Object.defineProperty,Zi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ap{constructor(e){this._telemetry=e,Zi(this,"_onDidChangeTreeData",new c.EventEmitter),Zi(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Zi(this,"_onDidChange",new c.EventEmitter),Zi(this,"_disposables"),Zi(this,"_childrenDisposables"),Zi(this,"_view"),Zi(this,"_reposManager"),Zi(this,"_initialized",!1),this._disposables=[],this._disposables.push(c.window.registerFileDecorationProvider(op)),this._disposables.push(c.window.registerFileDecorationProvider(Zc)),this._disposables.push(c.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(c.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=c.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(c.commands.registerCommand("pr.configurePRViewlet",async()=>{switch(await c.window.showQuickPick(["Configure Remotes...","Configure Queries..."])){case"Configure Queries...":return c.commands.executeCommand("workbench.action.openSettings",`@ext:${jn} queries`);case"Configure Remotes...":return c.commands.executeCommand("workbench.action.openSettings",`@ext:${jn} remotes`);default:return}})),this._disposables.push(c.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Tr}.${aa}`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}async reveal(e,r){return this._view.reveal(e,r)}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(c.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${Tr}.${Np}`)&&this.refresh()}))}refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async resolveTreeItem(e,r){return r instanceof qu&&await r.resolve(),r}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===_n.NeedsAuthentication?Promise.resolve([]):c.workspace.getConfiguration(Tr).get(Qa)?Promise.resolve([new Ji(this,Ts.NoMatchingRemotes),new Ji(this,Ts.ConfigureRemotes)]):Promise.resolve([new Ji(this,Ts.NoRemotes)])}async getChildren(e){var r;if(!((r=this._reposManager)==null?void 0:r.folderManagers.length))return[];if(this._reposManager.state===_n.Initializing)return Promise.resolve([new Ji(this,Ts.Initializing)]);if(this._reposManager.folderManagers.filter(n=>n.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(i=>i.dispose());let n;return this._reposManager.folderManagers.length===1?n=so.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this):n=this._reposManager.folderManagers.map(i=>new so(this,i.repository.rootUri,i,this._telemetry)),this._childrenDisposables=n,Promise.resolve(n)}return this._reposManager.folderManagers.filter(n=>n.repository.state.remotes.length>0).length===0?Promise.resolve([new Ji(this,Ts.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var ey=Object.defineProperty,ty=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ey(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ry extends Xc{constructor(e){super();this.gitAPI=e,ty(this,"_fallback")}async getRepositoryForFile(e){if(this.gitAPI.state!=="initialized"){let r;const n=new Promise(a=>{r=this.gitAPI.onDidOpenRepository(()=>{r==null||r.dispose(),r=void 0,a()})}),i=new Promise(a=>{setTimeout(()=>a(),4e3)});await Promise.race([n,i]),r&&r.dispose()}return zc(this.gitAPI,e)}async readFile(e){if(!this._fallback)return new TextEncoder().encode("");const{path:r,commit:n,rootPath:i}=Fi(e.query);if(!r||!n)return new TextEncoder().encode("");const a=await this.getRepositoryForFile(c.Uri.file(i));if(!a)return c.window.showErrorMessage(`We couldn't find an open repository for ${n} locally.`),new TextEncoder().encode("");const o=$.join(a.rootUri.fsPath,r).replace(/\\/g,"/");let f;try{if(f=await a.show(n,o),!f)throw new Error}catch(S){if(f=await this._fallback(e),!f)try{await a.getCommit(n)}catch(T){c.window.showErrorMessage(`We couldn't find commit ${n} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return new TextEncoder().encode(f||"")}registerTextDocumentContentFallback(e){this._fallback=e}}var ny=Object.defineProperty,Ip=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ny(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Dp{constructor(e,r,n,i,a,o,f){this._context=e,this._reposManager=r,this._reviewManagers=n,this._prsTreeDataProvider=i,this._prFileChangesProvider=a,this._telemetry=o,Ip(this,"_disposables"),this._disposables=[];const S=new ry(f);S.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(c.workspace.registerFileSystemProvider("review",S,{isReadonly:!0})),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(c.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new Cp(this._context);for(const r of this._reviewManagers)r.updateState(!0)}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new Ap(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}Ip(Dp,"ID","Reviews");const iy="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let Lr;const Op="prompts",xp="createPROnPublish";async function sy(t,e,r,n,i,a,o){t.subscriptions.push(P),P.appendLine("Git repository found, initializing review manager and pr tree view."),c.authentication.onDidChangeSessions(async Ae=>{Ae.provider.id==="github"&&(await A.clearCredentialCache(),K&&K.forEach(Ue=>Ue.updateState(!0)))}),t.subscriptions.push(e.onDidPublish(async Ae=>{if(!Ae.branch||sh(Op,xp)===!1)return;const Ue=K.find(Kt=>Kt.repository.rootUri.toString()===Ae.repository.rootUri.toString());if(Ue==null?void 0:Ue.isCreatingPullRequest)return;const $e=T.find(Kt=>Kt.repository.rootUri.toString()===Ae.repository.rootUri.toString());if(!$e||$e.gitHubRepositories.length===0||(await $e.getPullRequestDefaults()).base===Ae.branch)return;const Ke="Create Pull Request...",Ct="Don't Show Again",Dt=await c.window.showInformationMessage(`Would you like to create a Pull Request for branch '${Ae.branch}'?`,Ke,Ct);Dt===Ke?Ue==null||Ue.createPullRequest(Ae.branch):Dt===Ct&&ah(Op,xp,!1)})),t.subscriptions.push(c.window.registerUriHandler(Yu)),t.subscriptions.push(new Gv);const f=c.workspace.workspaceFolders;f&&(n=n.sort((Ae,Ue)=>{let $e=f.length,Ge=f.length;for(let Ke=0;Ke<f.length&&(f[Ke].uri.toString()===Ae.rootUri.toString()?$e=Ke:f[Ke].uri.toString()===Ue.rootUri.toString()&&(Ge=Ke),!($e!==f.length&&Ge!==f.length));Ke++);return $e-Ge}));const S=new zg(t),T=n.map(Ae=>new ra(t,Ae,Lr,e,r,S));t.subscriptions.push(...T);const A=new yp(T,r,Lr,S);t.subscriptions.push(A),a.then(Ae=>{Ae&&Ae.registerContactServiceProvider("github-pr",new pv(A))});const H=new Cp(t);t.subscriptions.push(H);const K=T.map(Ae=>new xi(t,Ae.repository,Ae,Lr,H,o,S)),de=new Dp(t,A,K,i,H,Lr,e);t.subscriptions.push(de),e.onDidChangeState(()=>{P.appendLine(`Git initialization state changed: state=${e.state}`),K.forEach(Ae=>Ae.updateState(!0))}),e.onDidOpenRepository(Ae=>{function Ue(){if(A.getManagerForFile(Ae.rootUri)){P.appendLine(`Repo ${Ae.rootUri} has already been setup.`);return}const Ke=new ra(t,Ae,Lr,e,r,S);A.insertFolderManager(Ke);const Ct=new xi(t,Ke.repository,Ke,Lr,H,o,S);K.push(Ct),i.refresh()}Ue();const $e=Ae.state.onDidChange(()=>{P.appendLine(`Repo state for ${Ae.rootUri} changed.`),Ue(),$e.dispose()})}),e.onDidCloseRepository(Ae=>{A.removeRepo(Ae);const Ue=K.findIndex($e=>$e.repository.rootUri.toString()===Ae.rootUri.toString());if(Ue){const $e=K[Ue];K.splice(Ue),$e.dispose()}i.refresh()}),i.initialize(A),Zm(t),Bg(t,S,A,K,Lr,r,i);const fe=c.workspace.getConfiguration(Tr).get(aa);await c.commands.executeCommand("setContext","fileListLayout:flat",fe==="flat");const we=new qv(e,A,K,t,Lr);t.subscriptions.push(we),await we.initialize(),t.subscriptions.push(new fv),await c.commands.executeCommand("setContext","github:initialized",!0);const Ne=await Xg(t,Lr);await Ne.initializePromise,await Ne.isCachedFlightEnabled("githubaa"),Lr.sendTelemetryEvent("startup")}async function ay(t){if(jn==="GitHub.vscode-pull-request-github-insiders"&&c.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");const e=new Fg;c.commands.registerCommand("github.api.preloadPullRequest",async a=>{await c.commands.executeCommand("setContext",Li,!0),await c.commands.executeCommand("github:activePullRequest:welcome.focus"),e.shouldShow=a});const r=c.workspace.getConfiguration("git").get("openDiffOnClick",!0);await c.commands.executeCommand("setContext","openDiffOnClick",r),dn.initialize(t),P.debug("Creating API implementation.","Activation");const n=new di,i=c.extensions.getExtension(jn).packageJSON.version;return Lr=new Wg(new(q())(jn,i,iy)),t.subscriptions.push(Lr),await oy(t,n,e),n}async function Mp(t,e,r){const n=await dv(e,r);return n?(t.subscriptions.push(n),!0):!1}async function oy(t,e,r){P.debug("Initializing state.","Activation"),Vm(t),Cs.init(t),P.debug("Creating credential store.","Activation");const n=new Km(Lr);if(t.subscriptions.push(n),await n.create({silent:!0}),P.debug("Registering built in git provider.","Activation"),!await Mp(t,n,e)){const S=c.extensions.onDidChange(async()=>{await Mp(t,n,e)&&S.dispose()});t.subscriptions.push(S)}P.debug("Registering live share git provider.","Activation");const i=cv(e);t.subscriptions.push(i);const a=i.initialize();t.subscriptions.push(e),P.debug("Creating tree view.","Activation");const o=new Ap(Lr);t.subscriptions.push(o),t.subscriptions.push(c.workspace.registerFileSystemProvider("pr",mp(),{isReadonly:!0})),P.appendLine("Looking for git repository");const f=e.repositories;P.appendLine(`Found ${f.length} repositories during activation`),await sy(t,e,n,f,o,a,r)}async function uy(){Lr&&Lr.dispose()}})(),module.exports=ju})();
